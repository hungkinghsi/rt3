<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Declaring routes</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part164.htm">&lt; Previous</a><span> | </span><a href="../Learn+React+with+TypeScript+3.htm">Contents</a><span> | </span><a href="part166.htm">Next &gt;</a></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark383">Declaring routes</a><a name="bookmark406">&zwnj;</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We declare the pages in our app using the <span class="s22">BrowserRouter </span>and</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Route <span class="p">components. </span>BrowserRouter <span class="p">is the top-level component and this looks for </span>Route</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">components beneath it to determine all the different page paths.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We are going to declare some pages in our app using <span class="s22">BrowserRouter </span>and <span class="s22">Route </span>later in this section, but before that we need to create our first two pages. This first page is going to contain the list of our React tools that we are going to sell in our shop. We use the following steps to create our pages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">1. So, let&#39;s start by creating the data for our list of tools by creating a <span class="s22">ProductsData.ts </span>file with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IProduct { id: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: string; description: string; price: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export const products: IProduct[] = [</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">description:</p><p class="s12" style="padding-top: 1pt;padding-left: 128pt;text-indent: -5pt;line-height: 120%;text-align: left;">&quot;A collection of navigational components that compose declaratively with your app&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id: 1,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;React Router&quot;, price: 8</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">description: &quot;A library that helps manage state across your app&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id: 2,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;React Redux&quot;, price: 12</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">description: &quot;A library that helps you interact with a GraphQL backend&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id: 3,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;React Apollo&quot;, price: 12</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">2. Let&#39;s create another file called <span class="s22">ProductsPage.tsx </span>containing the following to import React as well as our data:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import { IProduct, products } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">3. We are going to reference the data in our component state, so let&#39;s create an interface for this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IState { products: IProduct[];</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">4. Let&#39;s move on to create our class component called <span class="s22">ProductsPage</span>, initializing the state to an empty array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ProductsPage extends React.Component&lt;{}, IState&gt; { public constructor(props: {}) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">super(props); this.state = {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">products: []</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><a name="bookmark407">}</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default ProductsPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">5. Let&#39;s now implement the <span class="s22">componentDidMount </span>life cycle method and set the data to the <span class="s22">products </span>array from <span class="s22">ProductData.ts</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public componentDidMount() { this.setState({ products });</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">6. Moving on to implementing the <span class="s22">render </span>method, let&#39;s welcome our users and set out the products in a list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 43pt;line-height: 120%;text-align: left;">Welcome to React Shop where you can get all your tools for ReactJS!</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">{this.state.products.map(product =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;li key={product.id} className=&quot;product-list-item&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 150pt;text-indent: 0pt;text-align: left;">{product.name}</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have used the <span class="s22">map </span>function in the <span class="s22">products </span>array to iterate through the elements and produce a list item tag, <span class="s22">li</span>, for each product. We need to give each <span class="s22">li </span>a unique <span class="s22">key </span>attribute to help React manage any changes to the list items, which in our case is the <span class="s22">id </span>product.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">7. We&#39;ve referenced some CSS classes, so let&#39;s add these to <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">.page-container { text-align: center; padding: 20px;</p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">font-size: large;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">.product-list { list-style: none;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">margin: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">padding: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">.product-list-item { padding: 5px;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: justify;">8. Let&#39;s implement our second page now, which is going to be an admin panel. So, let&#39;s create a file called <span class="s22">AdminPage.tsx </span>with the following function component inside:</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 22pt;text-align: left;">import * as React from &quot;react&quot;; const AdminPage: React.SFC = () =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Admin Panel&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;p&gt;You should only be here if you have logged in&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default AdminPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">9. Now that we have two pages in our shop, we can declare our two routes to them. Let&#39;s create a file called <span class="s22">Routes.tsx </span>with the following content to import <span class="s22">React</span>, the <span class="s22">BrowserRouter </span>and <span class="s22">Route </span>components from React Router, and our two pages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { BrowserRouter as Router, Route } from &quot;react-router- dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import AdminPage from &quot;./AdminPage&quot;; import ProductsPage from &quot;./ProductsPage&quot;;</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have renamed <span class="s22">BrowserRouter </span>to <span class="s22">Router </span>in the import statement to save a few keystrokes.</p><p style="padding-top: 7pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">10. Let&#39;s go on to implement a function component containing our two routes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Routes: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;"><a name="bookmark408">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="71" alt="image" src="Image_224.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">During rendering, if the <span class="s22">path </span>in a <span class="s22">Route </span>component matches the current path, the component will be rendered, and if not, <span class="s22">null </span>will be rendered. In our example, <span class="s22">ProductPage </span>will be rendered if the path is <span class="s22">&quot;/products&quot; </span>and <span class="s22">AdminPage </span>will be rendered if the path is <span class="s22">&quot;/admin&quot;</span>.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default Routes;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 35pt;text-indent: 0pt;line-height: 14pt;text-align: left;">11. The following is the final step to render our <span class="s22">Routes </span>as the root component in</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">index.tsx<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import * as ReactDOM from &quot;react-dom&quot;; import &quot;./index.css&quot;;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">import Routes from &quot;./Routes&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">ReactDOM.render(<span class="s21">&lt;Routes /&gt;</span>, document.getElementById(&quot;root&quot;) as HTMLElement);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 35pt;text-indent: 0pt;text-align: left;">12. We should now be able to run our app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The app will probably start on the root page, which will be blank because that path doesn&#39;t point to anything.</p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">13. If we change the path to <span class="s22">&quot;/products&quot;</span>, our product list should render the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="557" height="147" alt="image" src="Image_225.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;"><a name="bookmark409">14. If we change the path to </a><span class="s22">&quot;/admin&quot;</span>, our admin panel should render the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 44pt;text-indent: 0pt;text-align: left;"><span><img width="467" height="115" alt="image" src="Image_226.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark384">Now that we have successfully created a couple of routes, we really need a navigation component to make our pages a little more discoverable. We will do just that in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part164.htm">&lt; Previous</a><span> | </span><a href="../Learn+React+with+TypeScript+3.htm">Contents</a><span> | </span><a href="part166.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>

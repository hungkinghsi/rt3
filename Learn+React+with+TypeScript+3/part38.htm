<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Catching coding errors early</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part37.htm">&lt; Previous</a><span> | </span><a href="../Learn+React+with+TypeScript+3.htm">Contents</a><span> | </span><a href="part39.htm">Next &gt;</a></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark75">Catching coding errors early</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The type information helps the TypeScript compiler catch bugs and typos before our users run into them. In code editors such as Visual Studio Code, a mistake is underlined in red immediately after the user has gone wrong. As an example, create a file called <span class="s22">utils.js </span>and paste in the following code, which calculates the total price on an order line:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">function calculateTotalPrice(product, quantity, discount) { var priceWithoutDiscount = product.price * quantity;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;line-height: 120%;text-align: left;">var discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="313" height="68" alt="image" src="Image_046.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="569" height="101" alt="image" src="Image_047.png"/></span></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;"><a name="bookmark76">There is a bug in the code that might be difficult for us to spot. If we open the file in Visual Studio Code, no errors are highlighted. If we change the extension of the file to </a><span class="s22">.ts</span>, Visual Studio Code immediately underlines bits of the code that need our attention in red:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Most of the errors are TypeScript asking for some type information. So, let&#39;s add some types to our code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 34pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IProduct { name: string; unitPrice: number;</p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 106%;text-align: left;">function calculateTotalPrice(product<span class="s21">: IProduct</span>, quantity<span class="s21">: number</span>, discount<span class="s21">: number</span>)<span class="s21">: number </span>{</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;line-height: 120%;text-align: left;">var priceWithoutDiscount: number = product.price * quantity; var discountAmount: number = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Don&#39;t worry if you don&#39;t understand what we just added; we&#39;ll go through types in the next section. The key point is that we now have a single error highlighted to us, which is, in fact, the bug:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="128" alt="image" src="Image_048.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The bug is that our function references a <span class="s22">price </span>property in the product object that doesn&#39;t exist. The property that we should reference is <span class="s22">unitPrice</span>.</p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part37.htm">&lt; Previous</a><span> | </span><a href="../Learn+React+with+TypeScript+3.htm">Contents</a><span> | </span><a href="part39.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>

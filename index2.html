<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Learn+React+with+TypeScript+3-2</title><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 28pt; }
 .s1 { color: black; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 16pt; }
 .s2 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 .s3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 h3 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 20pt; }
 .s4 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s5 { color: black; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 8pt; }
 .s6 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 8pt; }
 .a, a { color: black; font-family:"Lucida Console", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .p, p { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; margin:0pt; }
 .s7 { color: black; font-family:"Lucida Console", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s8 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 30pt; }
 .s9 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10.5pt; }
 .s10 { color: black; font-family:"Palatino Linotype", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s11 { color: black; font-family:"Lucida Sans", sans-serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s12 { color: black; font-family:"Lucida Console", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s13 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 12pt; }
 .s15 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s16 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 11pt; }
 .s18 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s20 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s21 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 h4 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 18pt; }
 .s22 { color: black; font-family:"Lucida Console", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 h1 { color: black; font-family:Symbol, serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 74.5pt; }
 .s23 { color: black; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s24 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 16pt; }
 .s26 { color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 .s27 { color: black; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 .s28 { color: black; font-family:"Lucida Sans", sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 6pt; }
 .s29 { color: black; font-style: normal; font-weight: normal; text-decoration: none; }
 .s30 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 12pt; }
 .s31 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s32 { color: black; font-family:Arial, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 li {display: block; }
 #l1 {padding-left: 0pt;counter-reset: c1 1; }
 #l1> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l1> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l2 {padding-left: 0pt;counter-reset: d1 1; }
 #l2> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l2> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l3 {padding-left: 0pt;counter-reset: e1 1; }
 #l3> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l3> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l4 {padding-left: 0pt;counter-reset: f1 1; }
 #l4> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l5 {padding-left: 0pt;counter-reset: g1 1; }
 #l5> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l5> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l6 {padding-left: 0pt;counter-reset: h1 1; }
 #l6> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l6> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l7 {padding-left: 0pt;counter-reset: i1 1; }
 #l7> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l7> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l8 {padding-left: 0pt;counter-reset: j1 1; }
 #l8> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l8> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l9 {padding-left: 0pt;counter-reset: k1 1; }
 #l9> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l9> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l10 {padding-left: 0pt;counter-reset: l1 1; }
 #l10> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l10> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l11 {padding-left: 0pt;counter-reset: m1 1; }
 #l11> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l11> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l12 {padding-left: 0pt;counter-reset: n1 1; }
 #l12> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l12> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l13 {padding-left: 0pt;counter-reset: o1 1; }
 #l13> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l13> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l14 {padding-left: 0pt;counter-reset: p1 1; }
 #l14> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l14> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l15 {padding-left: 0pt;counter-reset: q1 1; }
 #l15> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l15> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l16 {padding-left: 0pt;counter-reset: r1 1; }
 #l16> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l16> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 li {display: block; }
 #l17 {padding-left: 0pt;counter-reset: s1 1; }
 #l17> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l17> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l18 {padding-left: 0pt;counter-reset: t1 1; }
 #l18> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l18> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l19 {padding-left: 0pt;counter-reset: u1 1; }
 #l19> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l19> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l20 {padding-left: 0pt;counter-reset: v1 1; }
 #l20> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l20> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l21 {padding-left: 0pt;counter-reset: w1 1; }
 #l21> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l21> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l22 {padding-left: 0pt;counter-reset: x1 1; }
 #l22> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l22> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l23 {padding-left: 0pt;counter-reset: y1 1; }
 #l23> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l23> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l24 {padding-left: 0pt;counter-reset: z1 1; }
 #l24> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l24> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l25 {padding-left: 0pt;counter-reset: c1 1; }
 #l25> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l25> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l26 {padding-left: 0pt;counter-reset: d1 1; }
 #l26> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l26> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l27 {padding-left: 0pt;counter-reset: e1 1; }
 #l27> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l27> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l28 {padding-left: 0pt;counter-reset: f1 1; }
 #l28> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l28> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l29 {padding-left: 0pt;counter-reset: g1 1; }
 #l29> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l29> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l30 {padding-left: 0pt;counter-reset: h1 1; }
 #l30> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l30> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l31 {padding-left: 0pt;counter-reset: i1 1; }
 #l31> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l31> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l32 {padding-left: 0pt;counter-reset: j1 1; }
 #l32> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l32> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l33 {padding-left: 0pt;counter-reset: k1 1; }
 #l33> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l33> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l34 {padding-left: 0pt;counter-reset: l1 1; }
 #l34> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l34> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l35 {padding-left: 0pt;counter-reset: m1 1; }
 #l35> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l35> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l36 {padding-left: 0pt;counter-reset: n1 1; }
 #l36> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l36> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l37 {padding-left: 0pt;counter-reset: o1 1; }
 #l37> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l37> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l38 {padding-left: 0pt;counter-reset: p1 1; }
 #l38> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l38> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l39 {padding-left: 0pt;counter-reset: q1 1; }
 #l39> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l39> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l40 {padding-left: 0pt;counter-reset: r1 1; }
 #l40> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l40> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 li {display: block; }
 #l41 {padding-left: 0pt;counter-reset: s1 1; }
 #l41> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l41> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l42 {padding-left: 0pt;counter-reset: t1 1; }
 #l42> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l42> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l43 {padding-left: 0pt;counter-reset: u1 1; }
 #l43> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l43> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l44 {padding-left: 0pt;counter-reset: v1 1; }
 #l44> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l44> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l45 {padding-left: 0pt;counter-reset: w1 1; }
 #l45> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l45> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l46 {padding-left: 0pt;counter-reset: x1 1; }
 #l46> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l46> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l47 {padding-left: 0pt;counter-reset: y1 1; }
 #l47> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l47> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l48 {padding-left: 0pt;counter-reset: z1 1; }
 #l48> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l48> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l49 {padding-left: 0pt;counter-reset: c1 1; }
 #l49> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l49> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l50 {padding-left: 0pt;counter-reset: d1 1; }
 #l50> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l50> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l51 {padding-left: 0pt;counter-reset: e1 1; }
 #l51> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l51> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l52 {padding-left: 0pt;counter-reset: f1 1; }
 #l52> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l52> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l53 {padding-left: 0pt;counter-reset: g1 1; }
 #l53> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l53> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l54 {padding-left: 0pt;counter-reset: h1 1; }
 #l54> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l54> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l55 {padding-left: 0pt;counter-reset: i1 1; }
 #l55> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l55> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l56 {padding-left: 0pt;counter-reset: j1 1; }
 #l56> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l56> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l57 {padding-left: 0pt;counter-reset: k1 1; }
 #l57> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l57> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l58 {padding-left: 0pt;counter-reset: l1 1; }
 #l58> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l58> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 #l59 {padding-left: 0pt; }
 #l59> li>*:first-child:before {content: "* "; color: black; font-family:"Lucida Console", monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9pt; }
 li {display: block; }
 #l60 {padding-left: 0pt;counter-reset: n1 1; }
 #l60> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l60> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l61 {padding-left: 0pt;counter-reset: o1 1; }
 #l61> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l61> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l62 {padding-left: 0pt;counter-reset: p1 1; }
 #l62> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l62> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l63 {padding-left: 0pt;counter-reset: q1 1; }
 #l63> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l63> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l64 {padding-left: 0pt;counter-reset: r1 1; }
 #l64> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l64> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 li {display: block; }
 #l65 {padding-left: 0pt;counter-reset: s1 1; }
 #l65> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l65> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l66 {padding-left: 0pt;counter-reset: t1 1; }
 #l66> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l66> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l67 {padding-left: 0pt;counter-reset: u1 1; }
 #l67> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l67> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l68 {padding-left: 0pt;counter-reset: v1 1; }
 #l68> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l68> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l69 {padding-left: 0pt;counter-reset: w1 1; }
 #l69> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l69> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l70 {padding-left: 0pt;counter-reset: x1 1; }
 #l70> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l70> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l71 {padding-left: 0pt;counter-reset: y1 1; }
 #l71> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l71> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l72 {padding-left: 0pt;counter-reset: z1 1; }
 #l72> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l72> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l73 {padding-left: 0pt;counter-reset: c1 1; }
 #l73> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l73> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l74 {padding-left: 0pt;counter-reset: d1 1; }
 #l74> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l74> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l75 {padding-left: 0pt;counter-reset: e1 1; }
 #l75> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l75> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l76 {padding-left: 0pt;counter-reset: f1 1; }
 #l76> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l76> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l77 {padding-left: 0pt;counter-reset: g1 1; }
 #l77> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l77> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l78 {padding-left: 0pt;counter-reset: h1 1; }
 #l78> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l78> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l79 {padding-left: 0pt;counter-reset: i1 1; }
 #l79> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l79> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l80 {padding-left: 0pt;counter-reset: j1 1; }
 #l80> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l80> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l81 {padding-left: 0pt;counter-reset: k1 1; }
 #l81> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l81> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l82 {padding-left: 0pt;counter-reset: l1 1; }
 #l82> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l82> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l83 {padding-left: 0pt;counter-reset: m1 1; }
 #l83> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l83> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l84 {padding-left: 0pt;counter-reset: n1 1; }
 #l84> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l84> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l85 {padding-left: 0pt;counter-reset: o1 1; }
 #l85> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l85> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l86 {padding-left: 0pt;counter-reset: p1 1; }
 #l86> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l86> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l87 {padding-left: 0pt;counter-reset: q1 1; }
 #l87> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l87> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l88 {padding-left: 0pt;counter-reset: r1 1; }
 #l88> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l88> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 li {display: block; }
 #l89 {padding-left: 0pt;counter-reset: s1 1; }
 #l89> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l89> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l90 {padding-left: 0pt;counter-reset: t1 1; }
 #l90> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l90> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 #l91 {padding-left: 0pt;counter-reset: t2 1; }
 #l91> li>*:first-child:before {counter-increment: t2; content: counter(t2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l91> li:first-child>*:first-child:before {counter-increment: t2 0;  }
 li {display: block; }
 #l92 {padding-left: 0pt;counter-reset: u1 1; }
 #l92> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l92> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l93 {padding-left: 0pt;counter-reset: v1 1; }
 #l93> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l93> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 #l94 {padding-left: 0pt;counter-reset: v2 1; }
 #l94> li>*:first-child:before {counter-increment: v2; content: counter(v2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l94> li:first-child>*:first-child:before {counter-increment: v2 0;  }
 li {display: block; }
 #l95 {padding-left: 0pt;counter-reset: w1 1; }
 #l95> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l95> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l96 {padding-left: 0pt;counter-reset: x1 1; }
 #l96> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l96> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l97 {padding-left: 0pt;counter-reset: y1 1; }
 #l97> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l97> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l98 {padding-left: 0pt;counter-reset: z1 1; }
 #l98> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l98> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l99 {padding-left: 0pt;counter-reset: c1 1; }
 #l99> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l99> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 #l100 {padding-left: 0pt;counter-reset: c2 1; }
 #l100> li>*:first-child:before {counter-increment: c2; content: counter(c2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l100> li:first-child>*:first-child:before {counter-increment: c2 0;  }
 li {display: block; }
 #l101 {padding-left: 0pt;counter-reset: d1 1; }
 #l101> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l101> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l102 {padding-left: 0pt;counter-reset: e1 1; }
 #l102> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l102> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l103 {padding-left: 0pt;counter-reset: f1 1; }
 #l103> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l103> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l104 {padding-left: 0pt;counter-reset: g1 1; }
 #l104> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l104> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l105 {padding-left: 0pt;counter-reset: h1 1; }
 #l105> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l105> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l106 {padding-left: 0pt;counter-reset: i1 1; }
 #l106> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l106> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l107 {padding-left: 0pt;counter-reset: j1 1; }
 #l107> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l107> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l108 {padding-left: 0pt;counter-reset: k1 1; }
 #l108> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l108> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l109 {padding-left: 0pt;counter-reset: l1 1; }
 #l109> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l109> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l110 {padding-left: 0pt;counter-reset: m1 1; }
 #l110> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l110> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l111 {padding-left: 0pt;counter-reset: n1 1; }
 #l111> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l111> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l112 {padding-left: 0pt;counter-reset: o1 1; }
 #l112> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l112> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l113 {padding-left: 0pt;counter-reset: p1 1; }
 #l113> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l113> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l114 {padding-left: 0pt;counter-reset: q1 1; }
 #l114> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l114> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l115 {padding-left: 0pt;counter-reset: r1 1; }
 #l115> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l115> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 li {display: block; }
 #l116 {padding-left: 0pt;counter-reset: s1 1; }
 #l116> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l116> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l117 {padding-left: 0pt;counter-reset: t1 1; }
 #l117> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l117> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l118 {padding-left: 0pt;counter-reset: u1 1; }
 #l118> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l118> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l119 {padding-left: 0pt;counter-reset: v1 1; }
 #l119> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l119> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l120 {padding-left: 0pt;counter-reset: w1 1; }
 #l120> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l120> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l121 {padding-left: 0pt;counter-reset: x1 1; }
 #l121> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l121> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 #l122 {padding-left: 0pt;counter-reset: x2 1; }
 #l122> li>*:first-child:before {counter-increment: x2; content: counter(x2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l122> li:first-child>*:first-child:before {counter-increment: x2 0;  }
 li {display: block; }
 #l123 {padding-left: 0pt;counter-reset: y1 1; }
 #l123> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l123> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l124 {padding-left: 0pt;counter-reset: z1 1; }
 #l124> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l124> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l125 {padding-left: 0pt;counter-reset: c1 1; }
 #l125> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l125> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l126 {padding-left: 0pt;counter-reset: d1 1; }
 #l126> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l126> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l127 {padding-left: 0pt;counter-reset: e1 1; }
 #l127> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l127> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l128 {padding-left: 0pt;counter-reset: f1 1; }
 #l128> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l128> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l129 {padding-left: 0pt;counter-reset: g1 1; }
 #l129> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l129> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l130 {padding-left: 0pt;counter-reset: h1 1; }
 #l130> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l130> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l131 {padding-left: 0pt;counter-reset: i1 1; }
 #l131> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l131> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l132 {padding-left: 0pt;counter-reset: j1 1; }
 #l132> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l132> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l133 {padding-left: 0pt;counter-reset: k1 1; }
 #l133> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l133> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l134 {padding-left: 0pt;counter-reset: l1 1; }
 #l134> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l134> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l135 {padding-left: 0pt;counter-reset: m1 1; }
 #l135> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l135> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l136 {padding-left: 0pt;counter-reset: n1 1; }
 #l136> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l136> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l137 {padding-left: 0pt;counter-reset: o1 1; }
 #l137> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l137> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l138 {padding-left: 0pt;counter-reset: p1 1; }
 #l138> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l138> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l139 {padding-left: 0pt;counter-reset: q1 1; }
 #l139> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l139> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l140 {padding-left: 0pt;counter-reset: r1 1; }
 #l140> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l140> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 li {display: block; }
 #l141 {padding-left: 0pt;counter-reset: s1 1; }
 #l141> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l141> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l142 {padding-left: 0pt;counter-reset: t1 1; }
 #l142> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l142> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l143 {padding-left: 0pt;counter-reset: u1 1; }
 #l143> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l143> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l144 {padding-left: 0pt;counter-reset: v1 1; }
 #l144> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l144> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l145 {padding-left: 0pt;counter-reset: w1 1; }
 #l145> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l145> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l146 {padding-left: 0pt;counter-reset: x1 1; }
 #l146> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l146> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l147 {padding-left: 0pt;counter-reset: y1 1; }
 #l147> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l147> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l148 {padding-left: 0pt;counter-reset: z1 1; }
 #l148> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l148> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l149 {padding-left: 0pt;counter-reset: c1 1; }
 #l149> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l149> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l150 {padding-left: 0pt;counter-reset: d1 1; }
 #l150> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l150> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l151 {padding-left: 0pt;counter-reset: e1 1; }
 #l151> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l151> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l152 {padding-left: 0pt;counter-reset: e2 1; }
 #l152> li>*:first-child:before {counter-increment: e2; content: counter(e2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l152> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 li {display: block; }
 #l153 {padding-left: 0pt;counter-reset: f1 1; }
 #l153> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l153> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l154 {padding-left: 0pt;counter-reset: g1 1; }
 #l154> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l154> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l155 {padding-left: 0pt;counter-reset: h1 1; }
 #l155> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l155> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l156 {padding-left: 0pt;counter-reset: i1 1; }
 #l156> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l156> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l157 {padding-left: 0pt;counter-reset: j1 1; }
 #l157> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l157> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 #l158 {padding-left: 0pt;counter-reset: j2 1; }
 #l158> li>*:first-child:before {counter-increment: j2; content: counter(j2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l158> li:first-child>*:first-child:before {counter-increment: j2 0;  }
 li {display: block; }
 #l159 {padding-left: 0pt;counter-reset: k1 1; }
 #l159> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l159> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l160 {padding-left: 0pt;counter-reset: l1 1; }
 #l160> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l160> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l161 {padding-left: 0pt;counter-reset: m1 1; }
 #l161> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l161> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l162 {padding-left: 0pt;counter-reset: n1 1; }
 #l162> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l162> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l163 {padding-left: 0pt;counter-reset: o1 1; }
 #l163> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l163> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l164 {padding-left: 0pt;counter-reset: p1 1; }
 #l164> li>*:first-child:before {counter-increment: p1; content: counter(p1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l164> li:first-child>*:first-child:before {counter-increment: p1 0;  }
 li {display: block; }
 #l165 {padding-left: 0pt;counter-reset: q1 1; }
 #l165> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l165> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l166 {padding-left: 0pt;counter-reset: r1 1; }
 #l166> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l166> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 #l167 {padding-left: 0pt;counter-reset: r2 1; }
 #l167> li>*:first-child:before {counter-increment: r2; content: counter(r2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l167> li:first-child>*:first-child:before {counter-increment: r2 0;  }
 li {display: block; }
 #l168 {padding-left: 0pt;counter-reset: s1 1; }
 #l168> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l168> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l169 {padding-left: 0pt;counter-reset: t1 1; }
 #l169> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l169> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l170 {padding-left: 0pt;counter-reset: u1 1; }
 #l170> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l170> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 #l171 {padding-left: 0pt;counter-reset: u2 1; }
 #l171> li>*:first-child:before {counter-increment: u2; content: counter(u2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l171> li:first-child>*:first-child:before {counter-increment: u2 0;  }
 li {display: block; }
 #l172 {padding-left: 0pt;counter-reset: v1 1; }
 #l172> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l172> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l173 {padding-left: 0pt;counter-reset: w1 1; }
 #l173> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l173> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l174 {padding-left: 0pt;counter-reset: x1 1; }
 #l174> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l174> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l175 {padding-left: 0pt;counter-reset: y1 1; }
 #l175> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l175> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l176 {padding-left: 0pt;counter-reset: z1 1; }
 #l176> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l176> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l177 {padding-left: 0pt;counter-reset: c1 1; }
 #l177> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l177> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 #l178 {padding-left: 0pt;counter-reset: c2 1; }
 #l178> li>*:first-child:before {counter-increment: c2; content: counter(c2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l178> li:first-child>*:first-child:before {counter-increment: c2 0;  }
 li {display: block; }
 #l179 {padding-left: 0pt;counter-reset: d1 1; }
 #l179> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l179> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l180 {padding-left: 0pt;counter-reset: e1 1; }
 #l180> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l180> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 li {display: block; }
 #l181 {padding-left: 0pt;counter-reset: f1 1; }
 #l181> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l181> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l182 {padding-left: 0pt;counter-reset: g1 1; }
 #l182> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l182> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l183 {padding-left: 0pt;counter-reset: h1 1; }
 #l183> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l183> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l184 {padding-left: 0pt;counter-reset: i1 1; }
 #l184> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l184> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 #l185 {padding-left: 0pt;counter-reset: i2 1; }
 #l185> li>*:first-child:before {counter-increment: i2; content: counter(i2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l185> li:first-child>*:first-child:before {counter-increment: i2 0;  }
 li {display: block; }
 #l186 {padding-left: 0pt;counter-reset: j1 1; }
 #l186> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l186> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l187 {padding-left: 0pt;counter-reset: k1 1; }
 #l187> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l187> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l188 {padding-left: 0pt;counter-reset: l1 1; }
 #l188> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l188> li:first-child>*:first-child:before {counter-increment: l1 0;  }
 li {display: block; }
 #l189 {padding-left: 0pt;counter-reset: m1 1; }
 #l189> li>*:first-child:before {counter-increment: m1; content: counter(m1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l189> li:first-child>*:first-child:before {counter-increment: m1 0;  }
 li {display: block; }
 #l190 {padding-left: 0pt;counter-reset: n1 1; }
 #l190> li>*:first-child:before {counter-increment: n1; content: counter(n1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l190> li:first-child>*:first-child:before {counter-increment: n1 0;  }
 li {display: block; }
 #l191 {padding-left: 0pt;counter-reset: o1 1; }
 #l191> li>*:first-child:before {counter-increment: o1; content: counter(o1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l191> li:first-child>*:first-child:before {counter-increment: o1 0;  }
 li {display: block; }
 #l192 {padding-left: 0pt; }
 #l192> li>*:first-child:before {content: "> "; color: black; font-family:"Courier New", monospace; font-style: normal; font-weight: bold; text-decoration: none; font-size: 9pt; }
 li {display: block; }
 #l193 {padding-left: 0pt;counter-reset: q1 1; }
 #l193> li>*:first-child:before {counter-increment: q1; content: counter(q1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l193> li:first-child>*:first-child:before {counter-increment: q1 0;  }
 li {display: block; }
 #l194 {padding-left: 0pt;counter-reset: r1 1; }
 #l194> li>*:first-child:before {counter-increment: r1; content: counter(r1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l194> li:first-child>*:first-child:before {counter-increment: r1 0;  }
 #l195 {padding-left: 0pt;counter-reset: r2 1; }
 #l195> li>*:first-child:before {counter-increment: r2; content: counter(r2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l195> li:first-child>*:first-child:before {counter-increment: r2 0;  }
 li {display: block; }
 #l196 {padding-left: 0pt;counter-reset: s1 1; }
 #l196> li>*:first-child:before {counter-increment: s1; content: counter(s1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l196> li:first-child>*:first-child:before {counter-increment: s1 0;  }
 li {display: block; }
 #l197 {padding-left: 0pt;counter-reset: t1 1; }
 #l197> li>*:first-child:before {counter-increment: t1; content: counter(t1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l197> li:first-child>*:first-child:before {counter-increment: t1 0;  }
 li {display: block; }
 #l198 {padding-left: 0pt;counter-reset: u1 1; }
 #l198> li>*:first-child:before {counter-increment: u1; content: counter(u1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l198> li:first-child>*:first-child:before {counter-increment: u1 0;  }
 li {display: block; }
 #l199 {padding-left: 0pt;counter-reset: v1 1; }
 #l199> li>*:first-child:before {counter-increment: v1; content: counter(v1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l199> li:first-child>*:first-child:before {counter-increment: v1 0;  }
 li {display: block; }
 #l200 {padding-left: 0pt;counter-reset: w1 1; }
 #l200> li>*:first-child:before {counter-increment: w1; content: counter(w1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l200> li:first-child>*:first-child:before {counter-increment: w1 0;  }
 li {display: block; }
 #l201 {padding-left: 0pt;counter-reset: x1 1; }
 #l201> li>*:first-child:before {counter-increment: x1; content: counter(x1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l201> li:first-child>*:first-child:before {counter-increment: x1 0;  }
 li {display: block; }
 #l202 {padding-left: 0pt;counter-reset: y1 1; }
 #l202> li>*:first-child:before {counter-increment: y1; content: counter(y1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l202> li:first-child>*:first-child:before {counter-increment: y1 0;  }
 li {display: block; }
 #l203 {padding-left: 0pt;counter-reset: z1 1; }
 #l203> li>*:first-child:before {counter-increment: z1; content: counter(z1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l203> li:first-child>*:first-child:before {counter-increment: z1 0;  }
 li {display: block; }
 #l204 {padding-left: 0pt;counter-reset: c1 1; }
 #l204> li>*:first-child:before {counter-increment: c1; content: counter(c1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l204> li:first-child>*:first-child:before {counter-increment: c1 0;  }
 li {display: block; }
 #l205 {padding-left: 0pt;counter-reset: d1 1; }
 #l205> li>*:first-child:before {counter-increment: d1; content: counter(d1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l205> li:first-child>*:first-child:before {counter-increment: d1 0;  }
 li {display: block; }
 #l206 {padding-left: 0pt;counter-reset: e1 1; }
 #l206> li>*:first-child:before {counter-increment: e1; content: counter(e1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l206> li:first-child>*:first-child:before {counter-increment: e1 0;  }
 #l207 {padding-left: 0pt;counter-reset: e2 1; }
 #l207> li>*:first-child:before {counter-increment: e2; content: counter(e2, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l207> li:first-child>*:first-child:before {counter-increment: e2 0;  }
 li {display: block; }
 #l208 {padding-left: 0pt;counter-reset: f1 1; }
 #l208> li>*:first-child:before {counter-increment: f1; content: counter(f1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l208> li:first-child>*:first-child:before {counter-increment: f1 0;  }
 li {display: block; }
 #l209 {padding-left: 0pt;counter-reset: g1 1; }
 #l209> li>*:first-child:before {counter-increment: g1; content: counter(g1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l209> li:first-child>*:first-child:before {counter-increment: g1 0;  }
 li {display: block; }
 #l210 {padding-left: 0pt;counter-reset: h1 1; }
 #l210> li>*:first-child:before {counter-increment: h1; content: counter(h1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l210> li:first-child>*:first-child:before {counter-increment: h1 0;  }
 li {display: block; }
 #l211 {padding-left: 0pt;counter-reset: i1 1; }
 #l211> li>*:first-child:before {counter-increment: i1; content: counter(i1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l211> li:first-child>*:first-child:before {counter-increment: i1 0;  }
 li {display: block; }
 #l212 {padding-left: 0pt;counter-reset: j1 1; }
 #l212> li>*:first-child:before {counter-increment: j1; content: counter(j1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l212> li:first-child>*:first-child:before {counter-increment: j1 0;  }
 li {display: block; }
 #l213 {padding-left: 0pt;counter-reset: k1 1; }
 #l213> li>*:first-child:before {counter-increment: k1; content: counter(k1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l213> li:first-child>*:first-child:before {counter-increment: k1 0;  }
 li {display: block; }
 #l214 {padding-left: 0pt;counter-reset: l1 1; }
 #l214> li>*:first-child:before {counter-increment: l1; content: counter(l1, decimal)". "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 #l214> li:first-child>*:first-child:before {counter-increment: l1 0;  }
</style></head><body><p style="text-indent: 0pt;text-align: left;"><span><img width="720" height="888" alt="image" src="Learn+React+with+TypeScript+3-2/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 119%;text-align: left;"><a name="bookmark1">Learn React with TypeScript 3</a></h2><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s1" style="padding-left: 5pt;text-indent: 0pt;line-height: 115%;text-align: left;">Beginner&#39;s guide to modern React web development with TypeScript 3</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s2" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Carl Rippon</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="141" height="48" alt="image" src="Learn+React+with+TypeScript+3-2/Image_002.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">BIRMINGHAM - MUMBAI</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark2">Learn React with TypeScript 3</a></h3><p class="s4" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Copyright <span class="s5">© </span>2018 Packt Publishing</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">All rights reserved. No part of this book may be reproduced, stored in a retrieval system, or transmitted in any form or by any means, without the prior written permission of the publisher, except in the case of brief quotations embedded in critical articles or reviews.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Every effort has been made in the preparation of this book to ensure the accuracy of the information presented. However, the information contained in this book is sold without warranty, either express or implied. Neither the author, nor Packt Publishing or its dealers and distributors, will be held liable for any damages caused or alleged to have been caused directly or indirectly by this book.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Packt Publishing has endeavored to provide trademark information about all of the companies and products mentioned in this book by the appropriate use of capitals. However, Packt Publishing cannot guarantee the accuracy of this information.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Commissioning Editor: <span class="s4">Amarabha Banerjee</span></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Acquisition Editor: <span class="s4">Devanshi Doshi</span></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Content Development Editor: <span class="s4">Francis Carneiro</span></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Technical Editor: <span class="s4">Surabhi Kulkarni</span></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Copy Editor: <span class="s4">Safis Editing </span>Project Coordinator: <span class="s4">Kinjal Bari </span>Proofreader: <span class="s4">Safis Editing </span>Indexer: <span class="s4">Rekha Nair</span></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Graphics: <span class="s4">Alishon Mendonsa</span></p><p class="s6" style="padding-left: 5pt;text-indent: 0pt;line-height: 175%;text-align: left;">Production Coordinator: <span class="s4">Aparna Bhagat First published: November 2018 Production reference: 1281118</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Published by Packt Publishing Ltd. Livery Place</p><p class="s4" style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">35 Livery Street Birmingham B3 2PB, UK.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s4" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">ISBN 978-1-78961-025-3</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="http://www.packtpub.com/">www.packtpub.com</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;"><span><img width="370" height="82" alt="image" src="Learn+React+with+TypeScript+3-2/Image_003.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="https://mapt.io/" name="bookmark3">mapt.io</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Mapt is an online digital library that gives you full access to over 5,000 books and videos, as well as industry leading tools to help you plan your personal development and advance your career. For more information, please visit our website.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Why subscribe?</h3><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_004.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Spend less time learning and more time coding with practical eBooks and Videos from over 4,000 industry professionals</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_005.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Improve your learning with Skill Plans built especially for you</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_006.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Get a free eBook or video every month</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_007.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Mapt is fully searchable</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_008.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Copy and paste, print, and bookmark content</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Packt.com</h3><p class="s12" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="http://www.packt.com/" class="s20" target="_blank">Did you know that Packt offers eBook versions of every book published, with PDF and ePub files available? You can upgrade to the eBook version at </a><a href="http://www.packt.com/" class="a" target="_blank">www.packt.com</a> <a href="mailto:customercare@packtpub.com" class="s20" target="_blank">and as a print book customer, you are entitled to a discount on the eBook copy. Get in touch with us at </a><a href="mailto:customercare@packtpub.com" class="s7" target="_blank">customercare@packtpub.com</a><span class="s22"> </span><span class="p">for more details.</span></p><p class="s12" style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="http://www.packt.com/" class="s20" target="_blank">At </a>www.packt.com<span class="p">, you can also read a collection of free technical articles, sign up for a range of free newsletters, and receive exclusive discounts and offers on Packt books and eBooks.</span></p><p class="s8" style="padding-top: 8pt;padding-left: 268pt;text-indent: 0pt;text-align: left;"><a name="bookmark4">Contributors</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">About the author</h3><p class="s9" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Carl Rippon <span class="p">has been involved in the software industry for over 20 years, developing a complex line of business applications in various sectors. He has spent the last eight years building single page applications using a wide range of JavaScript technologies, including Angular, ReactJS, and TypeScript. Carl has written over 100 blog posts on various technologies.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s10" style="padding-left: 27pt;text-indent: 0pt;line-height: 89%;text-align: left;">I&#39;d like to thank Sarah, Ellie-Jayne, and Lily-Rose for all the support they&#39;ve given me while writing this book. Thanks to everyone in the Packt editorial team for their hard work and great feedback, especially Francis Carneiro and Surabhi Kulkarni. Special thanks also to Devanshi Doshi for reaching out to me with this opportunity.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">About the reviewers</h3><p class="s9" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Ashok Kumar S <span class="p">has been working in the mobile development domain for about six years. In his early days, he was a JavaScript and Node developer. Thanks to his strong web development skills, he has mastered web and mobile development. He is a Google-certified engineer, a speaker at global level conferences (including DroidCon Berlin and MODS), and he also runs a YouTube channel called AndroidABCD for Android developers. He is a computer science and engineering graduate who is passionate about innovation in technology. He contributes to open source heavily with a view to improving his e-karma.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">He has also written books on Wear OS programming and mastering the Firebase toolchain. In his spare time, he writes articles and makes videos on programming. Ashok Kumar has also reviewed books on mobile and web development, namely <i>Mastering JUnit 5</i>, <i>Android Programming for Beginners</i>, and developing Enterprise applications using JavaScript.</p><p class="s10" style="padding-top: 8pt;padding-left: 27pt;text-indent: 0pt;line-height: 92%;text-align: justify;">I would especially like to thank my mother for her boundless support in every possible way, not to mention family members Shylaja, Sumitra, Krishna, Vinisha, and my fianc<span class="s11">é</span>, Geetha Shree.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Dave <span class="p">has had over 16 years&#39; experience as a software engineer. After working for a number of creative agencies in London and then as a contract tech lead for a global e-commerce company, he is now tech lead at Seccl Technology, a start-up based in Bath, UK, that is building pioneering digital services for the financial industry, working with a serverless infrastructure in the cloud, and providing wonderful experiences through their web applications. He has worked with TypeScript for about five years and has seen it mature a lot over the years. Dave has worked specifically on React applications for over two years, as well on serverless code for the Seccl platform.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Pogo Kid is Dave&#39;s consultancy where he provides support for companies wanting to improve their serverless, React, and TypeScript applications. He has also reviewed a couple of book proposals for Manning on TypeScript.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">He has had the privilege of bringing leadership to development teams across the world, including many household names. He is a firm believer that when systems have the correct architecture and the team has a good mix of passion and skill, users will have a wonderful experience.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s9" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Daniel Deutsch <span class="p">is working as a web developer in various companies. Although most of his work is structured around client-side development, he is also able to contribute to different problem areas in software development, like the backend, devops, or project management. Coming from legal fields and also studying law he aims for bringing the 2 areas together and create additional value for both industries. As his personal interest focuses on machine learning, he likes to incorporate more of those disciplines in his day to day work.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Daniel&#39;s ultimate goal is to structure a business around motivated people to create something that brings value to humanity and lasts for a long time period.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Packt is searching for authors like you</h3><p class="s12" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="http://authors.packtpub.com/" class="s20" target="_blank">If you&#39;re interested in becoming an author for Packt, please visit </a>authors.packtpub.com <span class="p">and apply today. We have worked with thousands of developers and tech professionals, just like you, to help them share their insight with the global tech community. You can make a general application, apply for a specific hot topic that we are recruiting an author for, or submit your own idea.</span></p><p class="s8" style="padding-top: 8pt;padding-left: 195pt;text-indent: 0pt;text-align: left;"><a name="bookmark5">Table of Contents</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="568" height="1" alt="image" src="Learn+React+with+TypeScript+3-2/Image_009.png"/></span></p><p style="padding-top: 26pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="#bookmark7" class="s13">Preface </a><a href="#bookmark7" class="s15">1</a></p><p style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark68" class="s13">Chapter 1: TypeScript Basics </a><a href="#bookmark68" class="s15">7</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark72" class="s13">Technical requirements </a><a href="#bookmark72" class="s15">8</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark73" class="s13">Understanding the benefits of TypeScript </a><a href="#bookmark73" class="s15">9</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark75" class="s16">Catching coding errors early </a><a href="#bookmark75" class="s15">9</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark77" class="s16">Better developer experience and productivity </a><a href="#bookmark77" class="s15">11</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark79" class="s16">Using future JavaScript features </a><a href="#bookmark79" class="s15">11</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark81" class="s13">Understanding basic types </a><a href="#bookmark81" class="s15">12</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark82" class="s16">Primitive types </a><a href="#bookmark82" class="s15">12</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark83" class="s16">Type annotations </a><a href="#bookmark83" class="s15">13</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark87" class="s16">Type inference </a><a href="#bookmark87" class="s15">15</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark89" class="s16">Any </a><a href="#bookmark89" class="s15">16</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark90" class="s16">Void </a><a href="#bookmark90" class="s15">17</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark92" class="s16">Never </a><a href="#bookmark92" class="s15">17</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark95" class="s16">Enumerations </a><a href="#bookmark95" class="s15">19</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark98" class="s16">Objects </a><a href="#bookmark98" class="s15">21</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark101" class="s16">Arrays </a><a href="#bookmark101" class="s15">23</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark104" class="s13">Creating interfaces, types aliases, and classes </a><a href="#bookmark104" class="s15">25</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark105" class="s16">Interfaces </a><a href="#bookmark105" class="s15">27</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark107" class="s18">Properties </a><a href="#bookmark107" class="s15">27</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark109" class="s18">Method signatures </a><a href="#bookmark109" class="s15">29</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark114" class="s18">Optional properties and parameters </a><a href="#bookmark114" class="s15">32</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark115" class="s18">Readonly properties </a><a href="#bookmark115" class="s15">34</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark117" class="s18">Extending interfaces </a><a href="#bookmark117" class="s15">35</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark119" class="s16">Type aliases </a><a href="#bookmark119" class="s15">36</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark122" class="s16">Classes </a><a href="#bookmark122" class="s15">37</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark123" class="s18">Basic classes </a><a href="#bookmark123" class="s15">37</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark126" class="s18">Implementing interfaces </a><a href="#bookmark126" class="s15">39</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark127" class="s18">Constructors </a><a href="#bookmark127" class="s15">39</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark130" class="s18">Extending classes </a><a href="#bookmark130" class="s15">41</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark132" class="s18">Abstract classes </a><a href="#bookmark132" class="s15">42</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark135" class="s18">Access modifiers </a><a href="#bookmark135" class="s15">44</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark137" class="s18">Property setters and getters </a><a href="#bookmark137" class="s15">45</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark139" class="s18">Static </a><a href="#bookmark139" class="s15">46</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark140" class="s13">Structuring code into modules </a><a href="#bookmark140" class="s15">48</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark142" class="s16">Module formats </a><a href="#bookmark142" class="s15">49</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark144" class="s16">Exporting </a><a href="#bookmark144" class="s15">49</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark146" class="s16">Importing </a><a href="#bookmark146" class="s15">51</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark148" class="s16">Default exports </a><a href="#bookmark148" class="s15">52</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark150" class="s13">Configuring compilation </a><a href="#bookmark150" class="s15">52</a></p><p style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark152" class="s16">Common options </a><a href="#bookmark152" class="s15">53</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark153" class="s18">--target </a><a href="#bookmark153" class="s15">54</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark155" class="s18">--outDir </a><a href="#bookmark155" class="s15">54</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark156" class="s18">--module </a><a href="#bookmark156" class="s15">55</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark158" class="s18">--allowJS </a><a href="#bookmark158" class="s15">55</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark159" class="s18">--watch </a><a href="#bookmark159" class="s15">55</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark160" class="s18">--noImplicitAny </a><a href="#bookmark160" class="s15">56</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark162" class="s18">--noImplicitReturns </a><a href="#bookmark162" class="s15">57</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark164" class="s18">--sourceMap </a><a href="#bookmark164" class="s15">57</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark165" class="s18">--moduleResolution </a><a href="#bookmark165" class="s15">58</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark167" class="s16">tsconfig.json </a><a href="#bookmark167" class="s15">58</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark168" class="s18">Specifying files for compilation </a><a href="#bookmark168" class="s15">59</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark170" class="s13">TypeScript linting </a><a href="#bookmark170" class="s15">60</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark172" class="s16">Installing TSLint </a><a href="#bookmark172" class="s15">60</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark174" class="s16">Configuring rules </a><a href="#bookmark174" class="s15">61</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark177" class="s16">Built-in rules </a><a href="#bookmark177" class="s15">63</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark178" class="s16">Excluding files </a><a href="#bookmark178" class="s15">64</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark180" class="s13">Code formatting </a><a href="#bookmark180" class="s15">64</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark182" class="s13">Summary </a><a href="#bookmark182" class="s15">65</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark183" class="s13">Questions </a><a href="#bookmark183" class="s15">66</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark184" class="s13">Further reading </a><a href="#bookmark184" class="s15">67</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark207" class="s13">Chapter 2: What is New in TypeScript 3 </a><a href="#bookmark207" class="s15">68</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark210" class="s13">Technical requirements </a><a href="#bookmark210" class="s15">68</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark212" class="s13">Tuples </a><a href="#bookmark212" class="s15">69</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark214" class="s16">JavaScript rest and spread syntax </a><a href="#bookmark214" class="s15">71</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark217" class="s16">Open-ended tuples </a><a href="#bookmark217" class="s15">73</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark218" class="s16">Tuple function parameters </a><a href="#bookmark218" class="s15">74</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark220" class="s16">Spread expressions </a><a href="#bookmark220" class="s15">75</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark223" class="s16">Empty tuples </a><a href="#bookmark223" class="s15">76</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark225" class="s16">Optional tuple elements </a><a href="#bookmark225" class="s15">77</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark227" class="s13">The unknown type </a><a href="#bookmark227" class="s15">80</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark230" class="s16">Type checking with a type predicate </a><a href="#bookmark230" class="s15">81</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark232" class="s16">Type narrowing with a type assertion </a><a href="#bookmark232" class="s15">83</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark234" class="s13">Project references </a><a href="#bookmark234" class="s15">84</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark235" class="s16">Setting up an example </a><a href="#bookmark235" class="s15">84</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark237" class="s16">Referencing projects </a><a href="#bookmark237" class="s15">86</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark239" class="s16">Additions to compiler options </a><a href="#bookmark239" class="s15">87</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark241" class="s16">Cross-project Go to Definition </a><a href="#bookmark241" class="s15">88</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark243" class="s16">Build mode </a><a href="#bookmark243" class="s15">90</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark245" class="s13">Default JSX properties </a><a href="#bookmark245" class="s15">91</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark247" class="s13">Summary </a><a href="#bookmark247" class="s15">93</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark248" class="s13">Questions </a><a href="#bookmark248" class="s15">94</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark250" class="s13">Further reading </a><a href="#bookmark250" class="s15">95</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="#bookmark296" class="s13">Chapter 3: Getting Started with React and TypeScript </a><a href="#bookmark296" class="s15">96</a></p><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark298" class="s13">Technical requirements </a><a href="#bookmark298" class="s15">97</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark300" class="s13">Creating a React and TypeScript project </a><a href="#bookmark300" class="s15">97</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark301" class="s16">Using create-react-app </a><a href="#bookmark301" class="s15">97</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark304" class="s16">Creating a project manually </a><a href="#bookmark304" class="s15">101</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark305" class="s18">Creating our folder structure </a><a href="#bookmark305" class="s15">101</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark306" class="s18">Creating package.json </a><a href="#bookmark306" class="s15">101</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark307" class="s18">Adding TypeScript </a><a href="#bookmark307" class="s15">102</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark309" class="s18">Creating tsconfig.json </a><a href="#bookmark309" class="s15">102</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark310" class="s18">Adding TSLint </a><a href="#bookmark310" class="s15">103</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark312" class="s18">Adding React with types </a><a href="#bookmark312" class="s15">103</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark313" class="s18">Creating a root web page </a><a href="#bookmark313" class="s15">103</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark315" class="s18">Creating a simple React component </a><a href="#bookmark315" class="s15">104</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark316" class="s18">Adding webpack </a><a href="#bookmark316" class="s15">105</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark319" class="s18">Project folders and files </a><a href="#bookmark319" class="s15">106</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark320" class="s18">Creating start and build scripts </a><a href="#bookmark320" class="s15">107</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark323" class="s13">Creating a class component </a><a href="#bookmark323" class="s15">108</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark325" class="s16">Creating a basic class component </a><a href="#bookmark325" class="s15">110</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark328" class="s16">JSX </a><a href="#bookmark328" class="s15">114</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark330" class="s16">Component props </a><a href="#bookmark330" class="s15">117</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark332" class="s16">Optional props </a><a href="#bookmark332" class="s15">118</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark333" class="s16">Default prop values </a><a href="#bookmark333" class="s15">120</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark336" class="s13">Handling class component events </a><a href="#bookmark336" class="s15">121</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark337" class="s16">Basic event handlers </a><a href="#bookmark337" class="s15">121</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark339" class="s16">The this problem </a><a href="#bookmark339" class="s15">122</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark341" class="s16">Function props </a><a href="#bookmark341" class="s15">124</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark344" class="s13">Class component states </a><a href="#bookmark344" class="s15">125</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark346" class="s16">Defining state type </a><a href="#bookmark346" class="s15">127</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark347" class="s16">Initializing the state </a><a href="#bookmark347" class="s15">128</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark349" class="s16">Changing state </a><a href="#bookmark349" class="s15">128</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark351" class="s13">Class component life cycle methods </a><a href="#bookmark351" class="s15">131</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark352" class="s16">componentDidMount </a><a href="#bookmark352" class="s15">132</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark355" class="s16">componentWillUnmount </a><a href="#bookmark355" class="s15">136</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark357" class="s16">getDerivedStateFromProps </a><a href="#bookmark357" class="s15">136</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark359" class="s16">getSnapshotBeforeUpdate and componentDidUpdate </a><a href="#bookmark359" class="s15">137</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark360" class="s16">shouldComponentUpdate </a><a href="#bookmark360" class="s15">139</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark363" class="s16">Deprecated life cycle methods </a><a href="#bookmark363" class="s15">141</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark365" class="s13">Creating a function component </a><a href="#bookmark365" class="s15">141</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark366" class="s16">Creating a basic function component </a><a href="#bookmark366" class="s15">141</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark370" class="s16">Stateful function components </a><a href="#bookmark370" class="s15">144</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark373" class="s16">Function component life cycle hooks </a><a href="#bookmark373" class="s15">146</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark375" class="s16">Optimizing function component rendering </a><a href="#bookmark375" class="s15">148</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark377" class="s13">Summary </a><a href="#bookmark377" class="s15">149</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark378" class="s13">Questions </a><a href="#bookmark378" class="s15">149</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark379" class="s13">Further reading </a><a href="#bookmark379" class="s15">150</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="#bookmark400" class="s13">Chapter 4: Routing with React Router </a><a href="#bookmark400" class="s15">151</a></p><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark403" class="s13">Technical requirements </a><a href="#bookmark403" class="s15">152</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark404" class="s13">Installing React Router with routing types </a><a href="#bookmark404" class="s15">152</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark406" class="s13">Declaring routes </a><a href="#bookmark406" class="s15">154</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark410" class="s13">Creating navigation </a><a href="#bookmark410" class="s15">159</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark411" class="s16">Using the Link component </a><a href="#bookmark411" class="s15">159</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark413" class="s16">Using the NavLink component </a><a href="#bookmark413" class="s15">162</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark415" class="s13">Route parameters </a><a href="#bookmark415" class="s15">164</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark418" class="s13">Handling not found routes </a><a href="#bookmark418" class="s15">169</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark420" class="s13">Implementing page redirects </a><a href="#bookmark420" class="s15">171</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark421" class="s16">Simple redirect </a><a href="#bookmark421" class="s15">172</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark423" class="s16">Conditional redirect </a><a href="#bookmark423" class="s15">172</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark425" class="s13">Query parameters </a><a href="#bookmark425" class="s15">174</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark428" class="s13">Route prompts </a><a href="#bookmark428" class="s15">179</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark430" class="s13">Nested routes </a><a href="#bookmark430" class="s15">180</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark432" class="s13">Animated transitions </a><a href="#bookmark432" class="s15">186</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark435" class="s13">Lazy loading routes </a><a href="#bookmark435" class="s15">189</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark438" class="s13">Summary </a><a href="#bookmark438" class="s15">191</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark439" class="s13">Questions </a><a href="#bookmark439" class="s15">192</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark440" class="s13">Further reading </a><a href="#bookmark440" class="s15">193</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark460" class="s13">Chapter 5: Advanced Types </a><a href="#bookmark460" class="s15">194</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark462" class="s13">Technical requirements </a><a href="#bookmark462" class="s15">195</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark464" class="s13">Union types </a><a href="#bookmark464" class="s15">195</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark465" class="s16">String literal types </a><a href="#bookmark465" class="s15">195</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark467" class="s16">String literal union types </a><a href="#bookmark467" class="s15">196</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark469" class="s16">Discriminated union pattern </a><a href="#bookmark469" class="s15">197</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark472" class="s13">Type guards </a><a href="#bookmark472" class="s15">200</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark473" class="s16">Using the typeof keyword </a><a href="#bookmark473" class="s15">200</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark476" class="s16">Using the instanceof keyword </a><a href="#bookmark476" class="s15">203</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark478" class="s16">Using the in keyword </a><a href="#bookmark478" class="s15">204</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark480" class="s16">Using a user-defined type guard </a><a href="#bookmark480" class="s15">205</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark482" class="s13">Generics </a><a href="#bookmark482" class="s15">206</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark483" class="s16">Generic functions </a><a href="#bookmark483" class="s15">207</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark486" class="s16">Generic classes </a><a href="#bookmark486" class="s15">208</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark489" class="s13">Overload signatures </a><a href="#bookmark489" class="s15">211</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark492" class="s13">Lookup and mapped types </a><a href="#bookmark492" class="s15">213</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark497" class="s13">Summary </a><a href="#bookmark497" class="s15">218</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark498" class="s13">Questions </a><a href="#bookmark498" class="s15">219</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark499" class="s13">Further reading </a><a href="#bookmark499" class="s15">220</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark519" class="s13">Chapter 6: Component Patterns </a><a href="#bookmark519" class="s15">221</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark521" class="s13">Technical requirements </a><a href="#bookmark521" class="s15">221</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark522" class="s13">Container and presentational components </a><a href="#bookmark522" class="s15">222</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark526" class="s13">Compound components </a><a href="#bookmark526" class="s15">226</a></p><p style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark528" class="s16">Adding reviews to a product </a><a href="#bookmark528" class="s15">226</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark531" class="s16">Creating a basic tab component </a><a href="#bookmark531" class="s15">229</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark536" class="s16">Leveraging the compound component pattern </a><a href="#bookmark536" class="s15">233</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark538" class="s16">Sharing state with React context </a><a href="#bookmark538" class="s15">236</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark541" class="s13">Render props pattern </a><a href="#bookmark541" class="s15">240</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark542" class="s16">Completing Tabs with render props </a><a href="#bookmark542" class="s15">241</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark544" class="s18">Using render prop for tab headings </a><a href="#bookmark544" class="s15">242</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark547" class="s18">Using children prop for tab content </a><a href="#bookmark547" class="s15">243</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark550" class="s13">Higher-order components </a><a href="#bookmark550" class="s15">248</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark551" class="s16">Adding asynchronous data fetching </a><a href="#bookmark551" class="s15">249</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark555" class="s16">Implementing the withLoader HOC </a><a href="#bookmark555" class="s15">251</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark558" class="s16">Consuming the withLoader HOC </a><a href="#bookmark558" class="s15">254</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark560" class="s13">Summary </a><a href="#bookmark560" class="s15">256</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark561" class="s13">Questions </a><a href="#bookmark561" class="s15">257</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark562" class="s13">Further reading </a><a href="#bookmark562" class="s15">258</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark586" class="s13">Chapter 7: Working with Forms </a><a href="#bookmark586" class="s15">259</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark589" class="s13">Technical requirements </a><a href="#bookmark589" class="s15">259</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark591" class="s13">Creating a form with controlled components </a><a href="#bookmark591" class="s15">260</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark592" class="s16">Adding a Contact Us page </a><a href="#bookmark592" class="s15">260</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark595" class="s16">Creating controlled inputs </a><a href="#bookmark595" class="s15">262</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark602" class="s13">Reducing boilerplate code with generic components </a><a href="#bookmark602" class="s15">270</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark604" class="s16">Creating a basic form component </a><a href="#bookmark604" class="s15">271</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark607" class="s16">Adding a basic Field component </a><a href="#bookmark607" class="s15">272</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark610" class="s16">Sharing state with React context </a><a href="#bookmark610" class="s15">275</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark614" class="s16">Implementing our new ContactUs component </a><a href="#bookmark614" class="s15">279</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark617" class="s13">Validating forms </a><a href="#bookmark617" class="s15">280</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark619" class="s16">Adding a validation rules prop to form </a><a href="#bookmark619" class="s15">281</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark622" class="s16">Tracking validation error messages </a><a href="#bookmark622" class="s15">283</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark625" class="s16">Invoking validation rules </a><a href="#bookmark625" class="s15">285</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark629" class="s16">Triggering validation rule execution from field </a><a href="#bookmark629" class="s15">288</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark631" class="s16">Rendering validation error messages </a><a href="#bookmark631" class="s15">290</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark635" class="s13">Form submission </a><a href="#bookmark635" class="s15">292</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark636" class="s16">Adding a submit button to the form </a><a href="#bookmark636" class="s15">293</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark638" class="s16">Adding a onSubmit form prop </a><a href="#bookmark638" class="s15">293</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark642" class="s16">Consuming the onSubmit form prop </a><a href="#bookmark642" class="s15">296</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark645" class="s13">Summary </a><a href="#bookmark645" class="s15">300</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark646" class="s13">Questions </a><a href="#bookmark646" class="s15">300</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark647" class="s13">Further reading </a><a href="#bookmark647" class="s15">301</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark672" class="s13">Chapter 8: React Redux </a><a href="#bookmark672" class="s15">302</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark674" class="s13">Technical requirements </a><a href="#bookmark674" class="s15">303</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark676" class="s13">Principles and key concepts </a><a href="#bookmark676" class="s15">303</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark677" class="s16">Principles </a><a href="#bookmark677" class="s15">304</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark679" class="s16">Key concepts </a><a href="#bookmark679" class="s15">304</a></p><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark681" class="s13">Installing Redux </a><a href="#bookmark681" class="s15">306</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark683" class="s13">Creating actions </a><a href="#bookmark683" class="s15">307</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark684" class="s16">Creating state and action types </a><a href="#bookmark684" class="s15">308</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark687" class="s16">Creating actions </a><a href="#bookmark687" class="s15">309</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark689" class="s13">Creating reducers </a><a href="#bookmark689" class="s15">312</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark691" class="s13">Creating a store </a><a href="#bookmark691" class="s15">313</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark693" class="s13">Connecting our React app to the store </a><a href="#bookmark693" class="s15">315</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark694" class="s16">Adding the store Provider component </a><a href="#bookmark694" class="s15">315</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark696" class="s16">Connecting components to the store </a><a href="#bookmark696" class="s15">316</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark697" class="s18">Connecting ProductsPage to the store </a><a href="#bookmark697" class="s15">316</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark699" class="s18">Connecting ProductsPage to the loading store state </a><a href="#bookmark699" class="s15">319</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark700" class="s18">Adding product state and actions to the store </a><a href="#bookmark700" class="s15">322</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark702" class="s18">Adding basket state and actions to the store </a><a href="#bookmark702" class="s15">324</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark705" class="s18">Connecting ProductPage to the store </a><a href="#bookmark705" class="s15">326</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark707" class="s18">Creating and connecting BasketSummary to the store </a><a href="#bookmark707" class="s15">329</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark709" class="s13">Managing state with useReducer </a><a href="#bookmark709" class="s15">331</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark711" class="s13">Summary </a><a href="#bookmark711" class="s15">335</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark712" class="s13">Questions </a><a href="#bookmark712" class="s15">336</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark713" class="s13">Further reading </a><a href="#bookmark713" class="s15">337</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark751" class="s13">Chapter 9: Interacting with RESTful APIs </a><a href="#bookmark751" class="s15">338</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark753" class="s13">Technical requirements </a><a href="#bookmark753" class="s15">338</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark755" class="s13">Writing asynchronous code </a><a href="#bookmark755" class="s15">339</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark756" class="s16">Callbacks </a><a href="#bookmark756" class="s15">339</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark757" class="s18">Callback execution </a><a href="#bookmark757" class="s15">339</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark759" class="s18">Handling callback errors </a><a href="#bookmark759" class="s15">340</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark761" class="s16">Promises </a><a href="#bookmark761" class="s15">342</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark762" class="s18">Consuming a promised-based function </a><a href="#bookmark762" class="s15">342</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark763" class="s18">Creating a promised based function </a><a href="#bookmark763" class="s15">342</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark765" class="s16">async and await </a><a href="#bookmark765" class="s15">344</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark767" class="s13">Using fetch </a><a href="#bookmark767" class="s15">345</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark768" class="s16">Getting data with fetch </a><a href="#bookmark768" class="s15">345</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark769" class="s18">Basic GET request </a><a href="#bookmark769" class="s15">346</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark771" class="s18">Getting response status </a><a href="#bookmark771" class="s15">346</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark773" class="s18">Handling errors </a><a href="#bookmark773" class="s15">347</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark774" class="s16">Creating data with fetch </a><a href="#bookmark774" class="s15">347</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark775" class="s18">Basic POST request </a><a href="#bookmark775" class="s15">347</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark777" class="s18">Request HTTP headers </a><a href="#bookmark777" class="s15">348</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark779" class="s16">Changing data with fetch </a><a href="#bookmark779" class="s15">349</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark780" class="s18">Basic PUT request </a><a href="#bookmark780" class="s15">349</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark781" class="s18">Basic PATCH request </a><a href="#bookmark781" class="s15">350</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark783" class="s16">Deleting data with fetch </a><a href="#bookmark783" class="s15">350</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark784" class="s13">Using axios with class components </a><a href="#bookmark784" class="s15">351</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark786" class="s16">Installing axios </a><a href="#bookmark786" class="s15">351</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark788" class="s16">Getting data with axios </a><a href="#bookmark788" class="s15">352</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark789" class="s18">Basic GET request </a><a href="#bookmark789" class="s15">352</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark791" class="s18">Handling errors </a><a href="#bookmark791" class="s15">355</a></p><p style="padding-top: 7pt;padding-left: 60pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark792" class="s18">Request HTTP headers </a><a href="#bookmark792" class="s15">357</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark794" class="s18">Timeouts </a><a href="#bookmark794" class="s15">357</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark796" class="s18">Canceling requests </a><a href="#bookmark796" class="s15">358</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark798" class="s16">Creating data with axios </a><a href="#bookmark798" class="s15">361</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark800" class="s16">Updating data with axios </a><a href="#bookmark800" class="s15">364</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark803" class="s16">Deleting data with axios </a><a href="#bookmark803" class="s15">366</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark805" class="s13">Using axios with function components </a><a href="#bookmark805" class="s15">367</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark808" class="s13">Summary </a><a href="#bookmark808" class="s15">372</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark809" class="s13">Questions </a><a href="#bookmark809" class="s15">373</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark810" class="s13">Further reading </a><a href="#bookmark810" class="s15">374</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark839" class="s13">Chapter 10: Interacting with GraphQL APIs </a><a href="#bookmark839" class="s15">375</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark841" class="s13">Technical requirements </a><a href="#bookmark841" class="s15">376</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark843" class="s13">GraphQL query and mutation syntax </a><a href="#bookmark843" class="s15">376</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark844" class="s16">Reading GraphQL data </a><a href="#bookmark844" class="s15">376</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark845" class="s18">Basic query </a><a href="#bookmark845" class="s15">377</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark848" class="s18">Returning nested data </a><a href="#bookmark848" class="s15">379</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark851" class="s18">Query parameters </a><a href="#bookmark851" class="s15">381</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark853" class="s16">Writing GraphQL data </a><a href="#bookmark853" class="s15">382</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark856" class="s13">Using axios as a GraphQL client </a><a href="#bookmark856" class="s15">384</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark857" class="s16">Getting a GitHub personal access token </a><a href="#bookmark857" class="s15">385</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark859" class="s16">Creating our app </a><a href="#bookmark859" class="s15">385</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark861" class="s16">Querying the GraphQL server </a><a href="#bookmark861" class="s15">388</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark864" class="s13">Using Apollo GraphQL client </a><a href="#bookmark864" class="s15">391</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark866" class="s16">Installing Apollo client </a><a href="#bookmark866" class="s15">391</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark867" class="s16">Migrating from axios to Apollo </a><a href="#bookmark867" class="s15">392</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark869" class="s18">Adding an Apollo provider </a><a href="#bookmark869" class="s15">392</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark871" class="s18">Using the query component to query GraphQL </a><a href="#bookmark871" class="s15">393</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark873" class="s16">Adding a repository search component </a><a href="#bookmark873" class="s15">396</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark876" class="s18">Implementing the search form </a><a href="#bookmark876" class="s15">397</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark878" class="s18">Implementing the search query </a><a href="#bookmark878" class="s15">399</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark880" class="s18">Rendering the search result </a><a href="#bookmark880" class="s15">403</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark883" class="s16">Implementing a mutation with Apollo </a><a href="#bookmark883" class="s15">405</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark886" class="s13">Working with cached data in Apollo </a><a href="#bookmark886" class="s15">407</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark888" class="s16">Clearing the caching using refetchQueries </a><a href="#bookmark888" class="s15">408</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark890" class="s16">Updating the cache after a Mutation </a><a href="#bookmark890" class="s15">409</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark892" class="s13">Summary </a><a href="#bookmark892" class="s15">412</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark893" class="s13">Questions </a><a href="#bookmark893" class="s15">413</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark894" class="s13">Further reading </a><a href="#bookmark894" class="s15">413</a></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark916" class="s13">Chapter 11: Unit Testing with Jest </a><a href="#bookmark916" class="s15">414</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark918" class="s13">Technical requirements </a><a href="#bookmark918" class="s15">415</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark920" class="s13">Testing pure functions </a><a href="#bookmark920" class="s15">415</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark922" class="s16">Creating a basic pure function test </a><a href="#bookmark922" class="s15">416</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark924" class="s16">Understanding Jest watch options </a><a href="#bookmark924" class="s15">419</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark926" class="s16">Adding structure to unit test results </a><a href="#bookmark926" class="s15">420</a></p><p style="padding-top: 6pt;padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark927" class="s13">Testing components </a><a href="#bookmark927" class="s15">422</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark929" class="s16">Creating a basic component test </a><a href="#bookmark929" class="s15">422</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark932" class="s16">Improving our tests with react-testing-library </a><a href="#bookmark932" class="s15">425</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark933" class="s18">Installing react-testing-library </a><a href="#bookmark933" class="s15">425</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark934" class="s18">Removing CSS class references from our tests </a><a href="#bookmark934" class="s15">425</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark936" class="s18">Using fireEvent for user interaction </a><a href="#bookmark936" class="s15">427</a></p><p style="padding-left: 60pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark938" class="s18">Creating a second test for a valid form submission </a><a href="#bookmark938" class="s15">428</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark940" class="s13">Using Jest snapshot tests </a><a href="#bookmark940" class="s15">431</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark943" class="s13">Mocking dependencies </a><a href="#bookmark943" class="s15">435</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark944" class="s16">Using a mock function in Jest </a><a href="#bookmark944" class="s15">435</a></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 11pt;text-align: left;"><a href="#bookmark946" class="s16">Mocking Axios with axios-mock-adapter </a><a href="#bookmark946" class="s15">437</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark949" class="s13">Getting code coverage </a><a href="#bookmark949" class="s15">440</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark951" class="s13">Summary </a><a href="#bookmark951" class="s15">443</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark952" class="s13">Questions </a><a href="#bookmark952" class="s15">444</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark954" class="s13">Further reading </a><a href="#bookmark954" class="s15">445</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="568" height="1" alt="image" src="Learn+React+with+TypeScript+3-2/Image_010.png"/></span></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark967" class="s13">Appendix A: Answers </a><a href="#bookmark967" class="s15">446</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark968" class="s13">Chapter 1: TypeScript Basics </a><a href="#bookmark968" class="s15">446</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark969" class="s13">Chapter 2: What is New in TypeScript 3 </a><a href="#bookmark969" class="s15">447</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark970" class="s13">Chapter 3: Getting Started with React and TypeScript </a><a href="#bookmark970" class="s15">449</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark971" class="s13">Chapter 4: Routing with React Router </a><a href="#bookmark971" class="s15">451</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark972" class="s13">Chapter 5: Advanced Types </a><a href="#bookmark972" class="s15">453</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark973" class="s13">Chapter 6: Component Patterns </a><a href="#bookmark973" class="s15">455</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark974" class="s13">Chapter 7: Working with Forms </a><a href="#bookmark974" class="s15">458</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark975" class="s13">Chapter 8: React Redux </a><a href="#bookmark975" class="s15">461</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark976" class="s13">Chapter 9: Interacting with RESTful APIs </a><a href="#bookmark976" class="s15">462</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 12pt;text-align: left;"><a href="#bookmark977" class="s13">Chapter 10: Interacting with GraphQL APIs </a><a href="#bookmark977" class="s15">465</a></p><p style="padding-left: 24pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="#bookmark978" class="s13">Chapter 11: Unit Testing with Jest </a><a href="#bookmark978" class="s15">466</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="568" height="1" alt="image" src="Learn+React+with+TypeScript+3-2/Image_011.png"/></span></p><p style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="#bookmark980" class="s13">Other Books You May Enjoy </a><a href="#bookmark980" class="s15">469</a></p><p style="padding-top: 4pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a href="#bookmark982" class="s13">Index </a><a href="#bookmark982" class="s15">472</a></p><p style="padding-left: 6pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="568" height="1" alt="image" src="Learn+React+with+TypeScript+3-2/Image_012.png"/></span></p><p class="s8" style="padding-top: 8pt;text-indent: 0pt;text-align: right;"><a name="bookmark6">Preface</a><a name="bookmark7">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">React was built by Facebook in order to provide more structure to their code base and allow it to scale much better. React worked so well for Facebook that they eventually open sourced it. Today, React is one of the most popular JavaScript libraries for building frontends. It allows us to build small, isolated, and highly reusable components that can be composed together in order to create complex frontends.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">TypeScript was built by Microsoft to help developers more easily build large frontend applications. It is a superset of JavaScript, bringing a rich type system to it. This type system helps developers to catch bugs early and allows tools to be created to robustly navigate and refactor code.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This book will teach you how you can use both of these technologies to create large sophisticated frontends efficiently that are easy to maintain.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Who this book is for</h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This book is primarily aimed at web developers who want to create large web applications with React and TypeScript. A basic understanding of JavaScript and HTML is assumed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">What this book covers</h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 1</span>, <i>TypeScript Basics</i>, introduces the TypeScript type system, covering the basic types. It moves on to cover how we can configure the incredibly flexible TypeScript compiler. Linting and code formatting are also introduced, along with their configuration.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><span class="s12">Chapter 2</span>, <i>What is New in TypeScript 3</i>, steps through the significant new features that were introduced in version 3 of TypeScript. Tuples feature heavily in this chapter, along with the closely related rest and spread syntax and how we can use these constructs with strong types. Setting up multiple related TypeScript projects efficiently is also covered, before moving on to improvements that have been made when setting default prop values in a React component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 3</span>, <i>Getting Started with React and TypeScript</i>, begins with how projects that use both these technologies can be created. The chapter then introduces how strongly-typed React components can be built in both a class-based and functional manner. Managing state and hooking into life cycle events are also key topics in this chapter.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><span class="s12">Chapter 4</span>, <i>Routing with React Router</i>, introduces a library that can help us efficiently create an app with multiple pages. It covers how to create page links, and declare the components that should be rendered. Step by step, the chapter covers how to implement route parameters, query parameters, and nested routes. The chapter also covers how to load components from a route on demand in order to optimize performance in apps entailing lots of large pages.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 5</span>, <i>Advanced Types</i>, focuses solely on TypeScript types. On this occasion, more advanced, but still very useful, types are covered, such as generic types, union types, overload signatures, and keyof and lookup types.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 6</span>, <i>Component Patterns</i>, covers a number of common patterns for building React components while still maintaining strong types. Container components are stepped through first, followed by composite components. The popular render props pattern and higher-order components are also covered in this chapter.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 7</span>, <i>Working with Forms</i>, covers how forms can be implemented efficiently with React and TypeScript. A generic form component is built step by step, including validation and submission.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 8</span>, <i>React Redux</i>, covers how this popular library can help manage state across an app. A strongly typed Redux store is built with actions and reducers. The chapter finishes by looking at how a new React function can allow a Redux style structure within components without Redux.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 9</span>, <i>Interacting with RESTful APIs</i>, begins with detailed coverage of asynchronous code. The chapter then moves on to cover how we can interact with RESTful APIs using a native JavaScript function, as well as a popular open source library.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 10</span>, <i>Interacting with GraphQL APIs</i>, begins by introducing the syntax for reading and writing data. The chapter covers how to interact with a GraphQL server with an HTTP library before moving on to using a popular purpose-built library.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><span class="s12">Chapter 11</span>, <i>Unit Testing with Jest</i>, covers how to test both pure functions and React components. A popular open source library is looked at to make tests less brittle when the internals of components are refactored. Some of the great features of Jest are stepped through, such as snapshot testing, mocking, and code coverage.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Answers<span class="p">, Contains the answers to all the exercises present in the chapters of this book.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">To get the most out of this book</h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">You need to know the basics of JavaScript, including the following:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_013.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">An understanding of some of the primitive JavaScript types, such as string, number, Boolean, null, and undefined</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_014.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">An understanding of how to create variables and reference them, including arrays and objects</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_015.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">An understanding of how to create functions and call them</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_016.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">An understanding of how to create conditional statements with the if and else keywords</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">You need to know the basics of HTML, including the following:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_017.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">An understanding of basic HTML tags, such as div, ul, p, a, h1, and h2, and how to compose them together to create a web page</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_018.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">An understanding of how to reference a CSS class to style an HTML element</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">An understanding of basic CSS is also helpful, but not essential:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_019.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_020.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">How to size elements and include margins and padding How to position elements</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_021.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">How to color elements</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">You will need the following technologies installed on your computer:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_022.png"/></span></p><p class="s9" style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Google Chrome<a href="https://www.google.com/chrome/" class="s20" target="_blank">: This can be installed at </a><a href="https://www.google.com/chrome/" class="a" target="_blank">https://www.google.com/chrome/</a><a href="https://www.google.com/chrome/" class="s20" target="_blank">.</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_023.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Node.js and npm<span class="p">: These are used throughout this book. You can install them</span></p><p class="s12" style="padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://nodejs.org/en/download/" class="s20" target="_blank">at </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/</a>download/<span class="p">. If you already have these installed, make sure that Node.js is at least version 8.2 and that npm is at least version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_024.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">TypeScript<span class="p">: This can be installed via npm by entering the following command in a terminal:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install -g typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_025.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: You&#39;ll need this to write React and TypeScript code. This can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><a href="https://code.visualstudio.com/" class="s20" target="_blank">.</a></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Download the example code files</h4><p class="s12" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="http://www.packt.com/" class="s20" target="_blank">You can download the example code files for this book from your account at </a>www.packt.com<a href="http://www.packt.com/support" class="s20" target="_blank">. If you purchased this book elsewhere, you can visit </a><a href="http://www.packt.com/support" class="a" target="_blank">www.packt.com/support</a> <span class="p">and register to have the files emailed directly to you.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">You can download the code files by following these steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l1"><li><p class="s12" style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a href="http://www.packt.com/" class="s20" target="_blank">Log in or register at </a>www.packt.com<span class="p">.</span></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Select the <b>SUPPORT </b>tab.</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Click on <b>Code Downloads &amp; Errata</b>.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Enter the name of the book in the <b>Search </b>box and follow the onscreen instructions.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_026.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_027.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_028.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">WinRAR/7-Zip for Windows Zipeg/iZip/UnRarX for Mac 7-Zip/PeaZip for Linux</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://github.com/PacktPublishing/Learn-React-with-TypeScript-3" class="s20" target="_blank">The code bundle for the book is also hosted on GitHub at </a><a href="https://github.com/PacktPublishing/Learn-React-with-TypeScript-3" class="a" target="_blank">https://github.com/ PacktPublishing/Learn-React-with-TypeScript-</a>3<span class="p">. In case there&#39;s an update to the code, it will be updated on the existing GitHub repository.</span></p><p class="s12" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a href="https://github.com/PacktPublishing/" class="s20" target="_blank">We also have other code bundles from our rich catalog of books and videos available at </a><a href="https://github.com/PacktPublishing/" class="a" target="_blank">https://github.com/</a>PacktPublishing/<span class="p">. Check them out!</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Download the color images</h4><p class="s12" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="https://www.packtpub.com/sites/default/files/downloads/9781789610253_ColorImages.pdf" class="s20" target="_blank">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: </a><a href="https://www.packtpub.com/sites/default/files/downloads/9781789610253_ColorImages.pdf" class="a" target="_blank">https://www.packtpub.com/sites/default/files/ downloads/9781789610253_ColorImages.</a>pdf<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Conventions used</h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">There are a number of text conventions used throughout this book.</p><p class="s22" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">CodeInText<span class="p">: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: &quot;Let&#39;s create a new file called </span>tsconfig.json <span class="p">in the root of our project.&quot;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">A block of code is set as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">const App: React.SFC = () =&gt; { return &lt;h1&gt;My React App!&lt;/h1&gt;;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 29pt;text-indent: -5pt;line-height: 120%;text-align: left;">interface IProps { title: string;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;line-height: 111%;text-align: left;">content: string; <span class="s21">cancelCaption?: string; okCaption?: string;</span></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 9pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Any command-line input or output is written as follows:</p><p class="s21" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">cd my-components</p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">npm install tslint tslint-react tslint-config-prettier --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_029.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Warnings or important notes appear like this.</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_030.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Tips and tricks appear like this.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s9" style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Bold<span class="p">: Indicates a new term, an important word, or words that you see on screen. For example, words in menus or dialog boxes appear in the text like this. Here is an example: &quot;We need to click the </span>Install <span class="p">option to install the extension.&quot;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Get in touch</h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Feedback from our readers is always welcome.</p><p class="s9" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">General feedback<a href="mailto:customercare@packtpub.com" class="s20" target="_blank">: If you have questions about any aspect of this book, mention the book title in the subject of your message and email us at </a><a href="mailto:customercare@packtpub.com" class="s7" target="_blank">customercare@packtpub.com</a><a href="mailto:customercare@packtpub.com" class="s20" target="_blank">.</a></p><p class="s9" style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">Errata<a href="http://www.packt.com/submit-errata" class="s20" target="_blank">: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit </a><span class="s12">www.packt.com/submit-errata</span><span class="p">, selecting your book, clicking on the Errata Submission Form link, and entering the details.</span></p><p class="s9" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Piracy<span class="p">: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name.</span></p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="mailto:copyright@packt.com" class="s20" target="_blank">Please contact us at </a><a href="mailto:copyright@packt.com" class="s7" target="_blank">copyright@packt.com</a> <span class="p">with a link to the material.</span></p><p class="s9" style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">If you are interested in becoming an author<a href="http://authors.packtpub.com/" class="s20" target="_blank">: If there is a topic that you have expertise in, and you are interested in either writing or contributing to a book, please visit </a><span class="s12">authors.packtpub.com</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Reviews</h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Please leave a review. Once you have read and used this book, why not leave a review on the site that you purchased it from? Potential readers can then see and use your unbiased opinion to make purchase decisions, we at Packt can understand what you think about our products, and our authors can see your feedback on their book. Thank you!</p><p class="s12" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="http://www.packt.com/" class="s20" target="_blank">For more information about Packt, please visit </a>packt.com<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 192pt;text-indent: 0pt;text-align: left;"><a name="bookmark8">TypeScript Basics</a><a name="bookmark68">&zwnj;</a><a name="bookmark69">&zwnj;</a><a name="bookmark70">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Facebook has become an incredibly popular app. As its popularity grew, so did the demand for new features. React was Facebook&#39;s answer to help more people work on the codebase and deliver features quicker. React worked so well for Facebook that they eventually open sourced it. Today, React is a mature library for building component-based frontends that is extremely popular and has a massive community and ecosystem.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">TypeScript is also a popular, mature library maintained by a big company <span class="s23">– </span>namely, Microsoft. It allows users to add strong types to their JavaScript code, helping them to be more productive, particularly in large code bases.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This book will teach you how you can use both of these awesome libraries to build robust frontends that are easy to maintain. The first couple of chapters in the book focus solely on TypeScript. You&#39;ll then start to learn about React and how you can compose robust frontends using Typescript components with strong typing.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this chapter, we&#39;ll cover TypeScript&#39;s relationship to JavaScript and the benefits it brings. A basic understanding of JavaScript is therefore required. We&#39;ll also cover the basics of TypeScript that you&#39;ll commonly use when writing code for the browser.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">You&#39;ll come to understand the need to use TypeScript for building a frontend and the sort of projects for which TypeScript really shines. You will also see how to transpile your TypeScript code into JavaScript so that it can run in a browser. Last but not least, you&#39;ll learn how you can perform additional checks on your TypeScript code to make it readable and maintainable.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">By the end of the chapter, you&#39;ll be ready to start learning how you can use TypeScript for building frontends with React.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark71">In this chapter, we&#39;ll cover the following topics:</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_031.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_032.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Understanding the benefits of TypeScript Understanding basic types</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_033.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_034.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Creating interfaces, types aliases, and classes Structuring code into modules</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_035.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_036.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Configuring compilation TypeScript linting</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_037.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark9">Code formatting</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark72">Technical requirements</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We will use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_038.png"/></span></p><p class="s9" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;">TypeScript playground<a href="https://www.typescriptlang.org/play/" class="s20" target="_blank">: This is a website at </a><a href="https://www.typescriptlang.org/play/" class="a" target="_blank">https://www.typescriptlang.org/ play/</a><span class="s12"> </span><span class="p">that allows you to play around with and understand the features in TypeScript without installing it.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_039.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. You can install them at: </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If you already have these installed, make sure Node.js is at least Version 8.2 and </span>npm <span class="p">is at least Version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_040.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;"><b>TypeScript</b>: This can be installed via <span class="s22">npm</span>, entering the following command in a terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install -g typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_041.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/01-TypeScriptBasics" class="s20" target="_blank">All the code snippets in this chapter can be found online at: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/01-TypeScriptBasics" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/01-TypeScriptBasics" target="_blank">/</a></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 120%;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/01-TypeScriptBasics" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/01- </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/01-TypeScriptBasics" target="_blank">TypeScriptBasics</a></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_042.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 91%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our TypeScript code. This one can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><a href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Editor-Support" class="s20" target="_blank">. Other editors that could be used can be found at </a><a href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Editor-Support" class="a" target="_blank">https://github.com/Microsoft/TypeScript/wiki/ TypeScript-Editor-</a><span class="s12">Support</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark10">Understanding the benefits of TypeScript</a><a name="bookmark73">&zwnj;</a><a name="bookmark74">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">When a JavaScript codebase grows, it can become hard to read and maintain. TypeScript is an extension of JavaScript, adding static types. The TypeScript compiler reads in TypeScript code that includes type information and produces clean, readable JavaScript with the type information transformed and removed. The compiled code can then run in our favorite browsers and Node.js.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">TypeScript offers several benefits over JavaScript:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_043.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Coding errors can be caught in the development process earlier</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_044.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Static types allow tools to be built that improve the developer experience and productivity</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_045.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">JavaScript features that aren&#39;t implemented in all the browsers yet can actually be used in an app that targets those browsers</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark11">We&#39;ll go through these points in detail in the following sections.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark75">Catching coding errors early</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The type information helps the TypeScript compiler catch bugs and typos before our users run into them. In code editors such as Visual Studio Code, a mistake is underlined in red immediately after the user has gone wrong. As an example, create a file called <span class="s22">utils.js </span>and paste in the following code, which calculates the total price on an order line:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">function calculateTotalPrice(product, quantity, discount) { var priceWithoutDiscount = product.price * quantity;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;line-height: 120%;text-align: left;">var discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="313" height="68" alt="image" src="Learn+React+with+TypeScript+3-2/Image_046.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="569" height="101" alt="image" src="Learn+React+with+TypeScript+3-2/Image_047.png"/></span></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;"><a name="bookmark76">There is a bug in the code that might be difficult for us to spot. If we open the file in Visual Studio Code, no errors are highlighted. If we change the extension of the file to </a><span class="s22">.ts</span>, Visual Studio Code immediately underlines bits of the code that need our attention in red:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Most of the errors are TypeScript asking for some type information. So, let&#39;s add some types to our code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 34pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IProduct { name: string; unitPrice: number;</p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 106%;text-align: left;">function calculateTotalPrice(product<span class="s21">: IProduct</span>, quantity<span class="s21">: number</span>, discount<span class="s21">: number</span>)<span class="s21">: number </span>{</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;line-height: 120%;text-align: left;">var priceWithoutDiscount: number = product.price * quantity; var discountAmount: number = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Don&#39;t worry if you don&#39;t understand what we just added; we&#39;ll go through types in the next section. The key point is that we now have a single error highlighted to us, which is, in fact, the bug:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="128" alt="image" src="Learn+React+with+TypeScript+3-2/Image_048.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The bug is that our function references a <span class="s22">price </span>property in the product object that doesn&#39;t exist. The property that we should reference is <span class="s22">unitPrice</span>.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark12">Better developer experience and productivity</a><a name="bookmark77">&zwnj;</a><a name="bookmark78">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s fix the bug in the previous section by renaming <span class="s22">price </span>to <span class="s22">unitPrice</span>. Notice how Visual Studio Code gives us IntelliSense lists <span class="s22">unitPrice </span>as an option because it looking at our type definition:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="70" alt="image" src="Learn+React+with+TypeScript+3-2/Image_049.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark13">Here, TypeScript and Visual Studio Code are using the types to provide a better authoring experience for us. As well as IntelliSense, we are provided with code navigation features, and the safe renaming of functions and variables across multiple files. These features increase our productivity, particularly when the code base is large and there is a team of people working on it.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark79">Using future JavaScript features</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">There is another benefit of TypeScript that is important to understand. TypeScript allows us to use some features in JavaScript that haven&#39;t yet been adopted by all browsers but still target those browsers. TypeScript achieves this by transpiling the use of these features down to JavaScript code that the targeted browser does support.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">As an example, let&#39;s look at the exponentiation operator (<span class="s22">**</span>) in ES7, which isn&#39;t supported in IE. Let&#39;s create a file called <span class="s22">future.ts </span>and enter the following code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 120%;text-align: left;">var threeSquared: number = 3 ** 2; console.log(threeSquared);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">When we run the program in a browser, it should put <span class="s22">9 </span>into the console. Before we do that, let&#39;s run the code against the TypeScript compiler to get the transpiled JavaScript. Run the following command in a terminal in the same directory as <span class="s22">future.ts</span>:</p><p class="s21" style="padding-top: 9pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">tsc future</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark80">This should generate a file called </a><span class="s22">future.js </span>with the following content:</p><p class="s12" style="padding-top: 9pt;padding-left: 23pt;text-indent: 0pt;line-height: 120%;text-align: left;">var threeSquared = Math.pow(3, 2); console.log(threeSquared);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">So, TypeScript converted the exponentiation operator to a call to the <span class="s22">Math.pow </span>function, which is supported in IE. To confirm that this works, paste the generated JavaScript code into the console in IE and the output should be <span class="s22">9</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark14">This example is purposely simple but probably not that useful. </a><span class="s22">Async/await</span>, <b>spread </b>operators, <b>rest </b>parameters, and <b>arrow functions </b>are far more useful features that IE doesn&#39;t support but TypeScript allows the use of. Don&#39;t worry if you don&#39;t know what the features in the last sentence are, as we&#39;ll cover them when we need them in the book.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark81">Understanding basic types</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;"><a name="bookmark15">We touched on types in the last section. In this section, we&#39;ll go through the basic types that are commonly used in TypeScript so that we start to understand what cases we should use in each type. We&#39;ll make heavy use of the online TypeScript playground, so be sure to have that ready.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark82">Primitive types</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Before understanding how we declare variables and functions with types in TypeScript, let&#39;s briefly look at primitive types, which are the most basic types. Primitive types are simple values that have no properties. TypeScript shares the following primitive types with JavaScript:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_050.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_051.png"/></span></p><p class="s22" style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;line-height: 109%;text-align: left;">string<span class="p">: Represents a sequence of Unicode characters </span>number<span class="p">: Represents both integers and floating-point numbers </span>boolean<span class="p">: Represents a logical true or false</span></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;text-align: left;">undefined<span class="p">: Represents a value that hasn&#39;t been initialized yet</span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">null<span class="p">: Represents no value</span></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark16">Type annotations</a><a name="bookmark83">&zwnj;</a><a name="bookmark84">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Types for JavaScript variables are determined at runtime. Types for JavaScript variables can also change at runtime. For example, a variable that holds a number can later be replaced by a string. Usually, this is unwanted behavior and can result in a bug in our app.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">TypeScript annotations let us declare variables with specific types when we are writing our code. This allows the TypeScript compiler to check that the code adheres to these types before the code executes at runtime. In short, type annotations allow TypeScript to catch bugs where our code is using the wrong type much earlier than we would if we were writing our code in JavaScript.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">TypeScript annotations let us declare variables with types using the <span class="s22">:Type </span>syntax.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l2"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s browse to the TypeScript playground and enter the following variable declaration into the left-hand pane:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">let unitPrice: number;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">The transpiled JavaScript will appear on the right-hand side as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="69" alt="image" src="Learn+React+with+TypeScript+3-2/Image_052.png"/></span></p><p style="padding-left: 45pt;text-indent: 0pt;line-height: 92%;text-align: justify;">That <span class="s22">let </span>has been converted to <span class="s22">var</span>. This is because the compiler that the playground uses is set to target a wide range of browsers, some of which don&#39;t support <span class="s22">let</span>. Also, notice that the type annotation has disappeared. This is because type annotations don&#39;t exist in JavaScript.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">var unitPrice;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add a second line to our program:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">unitPrice = &quot;Table&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that a red line appears under <span class="s22">unitPrice</span>, and if you hover over it, you are correctly informed that there is a type error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="74" alt="image" src="Learn+React+with+TypeScript+3-2/Image_053.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;"><a name="bookmark85">You can also add type annotations to function parameters for the return value using the same </a><span class="s22">:Type </span>syntax. Let&#39;s enter the following function into the playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">function getTotal(unitPrice: number, quantity: number, discount: number): number {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = unitPrice * quantity; const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="89" alt="image" src="Learn+React+with+TypeScript+3-2/Image_054.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have used both <span class="s22">const </span>and <span class="s22">let </span>to declare variables in different examples. <span class="s22">let </span>will allow the variable to change the value after the declaration, whereas <span class="s22">const </span>variables can&#39;t change. In the preceding function, <span class="s22">priceWithoutDiscount </span>and <span class="s22">discountAmount </span>never change the value after the initial assignment, so we have used <span class="s22">const</span>.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ve declared <span class="s22">unitPrice</span>, <span class="s22">quantity</span>, and <span class="s22">discount </span>parameters, all as numbers. The <span class="s22">return </span>type annotation comes after the function&#39;s parentheses, which is also a number in the preceding example.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s call our function with an incorrect type for <span class="s22">quantity </span>and assign the result to a variable with an incorrect type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">let total: string = getTotal(500, &quot;one&quot;, 0.1);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We find that <span class="s22">one </span>is underlined in red, highlighting that there is a type error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="124" alt="image" src="Learn+React+with+TypeScript+3-2/Image_055.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark86">If we then correct </a><span class="s22">one </span>to <span class="s22">1</span>, <span class="s22">total </span>should be underlined in red, highlighting that there is a type problem with that:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 19pt;text-indent: 0pt;text-align: left;"><span><img width="533" height="115" alt="image" src="Learn+React+with+TypeScript+3-2/Image_056.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The TypeScript compiler uses type annotations to check whether values assigned to variables and function parameters are valid for their type.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark17">This strong type checking is something that we don&#39;t get in JavaScript, and it is very useful in large code bases because it helps us immediately detect type errors.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark87">Type inference</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We have seen how type annotations are really valuable, but they involve a lot of extra typing. Luckily, TypeScript&#39;s powerful type inference system means we don&#39;t have to provide annotations all the time. We can use type inference when we immediately set a variable value.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l3"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the following variable assignment in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">let flag = false;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we hover our mouse over the <span class="s22">flag </span>variable, we can see that TypeScript has inferred the type as <span class="s22">boolean</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><span><img width="515" height="71" alt="image" src="Learn+React+with+TypeScript+3-2/Image_057.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark88">If we add another line beneath this, to incorrectly set </a><span class="s22">flag </span>to <span class="s22">Table</span>, we get a type error:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;"><span><img width="533" height="84" alt="image" src="Learn+React+with+TypeScript+3-2/Image_058.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark18">So, when we declare a variable and immediately set its type, we can use type inference to save a few keystrokes.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark89">Any</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">What if we declare a variable with no type annotation and no value? What does TypeScript infer as the type? Let&#39;s enter the following code in the TypeScript playground and find out:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">let flag;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">If we hover our mouse over <span class="s22">flag</span>, we see it has been given the <span class="s22">any </span>type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><span><img width="543" height="71" alt="image" src="Learn+React+with+TypeScript+3-2/Image_059.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, the TypeScript compiler gives a variable with no type annotation and no immediately assigned value, the <span class="s22">any </span>type. The <span class="s22">any </span>type is specific to TypeScript; it doesn&#39;t exist in JavaScript. It is a way of opting out of type checking on a particular variable. It is commonly used for dynamic content or values from third-party libraries. However, TypeScript&#39;s increasingly powerful type system means that we need to use <span class="s22">any </span>less often these days.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark19">Void</a><a name="bookmark90">&zwnj;</a><a name="bookmark91">&zwnj;</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">void <span class="p">is another type that doesn&#39;t exist in JavaScript. It is generally used to represent a non- returning function.</span></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l4"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s enter the following function into the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logText(text: string): void { console.log(text);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The function simply logs some text into the console and doesn&#39;t return anything. So, we&#39;ve marked the return type as <span class="s22">void</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -48pt;line-height: 13pt;text-align: left;">If we remove the return type annotation and hover over the function name,</p></li></ol><p class="s22" style="padding-left: 21pt;text-indent: 0pt;line-height: 13pt;text-align: center;">logText<span class="p">, we&#39;ll see that TypeScript has inferred the type to be </span>void<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 87pt;text-indent: 0pt;text-align: left;"><span><img width="350" height="95" alt="image" src="Learn+React+with+TypeScript+3-2/Image_060.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark20">This saves us a few keystrokes while writing functions that don&#39;t return anything.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark92">Never</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">never </span>type represents something that would never occur and is typically used to specify unreachable areas of code. Again, this doesn&#39;t exist in JavaScript.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Time for an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l5"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Type the following code into the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function foreverTask(taskName: string): never { while (true) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">console.log(`Doing ${taskName} over and over again ...`);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="86" alt="image" src="Learn+React+with+TypeScript+3-2/Image_061.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">In the preceding example, we used a JavaScript template literal to construct the string to log to the console. Template literals are enclosed by back-ticks (<span class="s22">``</span>) and can include a JavaScript expression in curly braces prefixed with a dollar sign (<span class="s22">${expression}</span>). Template literals are great when we need to merge static text with variables.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark93">The function invokes an infinite loop and never returns, and so we have given it a type annotation of </a><span class="s22">never</span>. This is different to <span class="s22">void </span>because void means it will return, but with no value.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change the <span class="s22">foreverTask </span>function to break out of the loop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function foreverTask(taskName: string): never { while (true) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(`Doing ${taskName} over and over again ...`); break;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The TypeScript compiler quite rightly complains:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 12pt;text-indent: 0pt;text-align: left;"><span><img width="551" height="149" alt="image" src="Learn+React+with+TypeScript+3-2/Image_062.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now remove the <span class="s22">break </span>statement and the <span class="s22">never </span>type annotation. If we hover over the <span class="s22">foreverTask </span>function name with our mouse, we see that TypeScript has inferred the type to be <span class="s22">void</span>, which is not what we want in this example:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="512" height="115" alt="image" src="Learn+React+with+TypeScript+3-2/Image_063.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark21">The </a><span class="s22">never </span>type is useful in places where the code never returns. However, we will probably need to explicitly define the <span class="s22">never </span>type annotation because the TypeScript compiler isn&#39;t smart enough yet to infer that.<a name="bookmark94">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark95">Enumerations</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">Enumerations allow us to declare a meaningful set of friendly names that a variable can be set to. We use the <span class="s22">enum </span>keyword, followed by the name we want to give to it, followed by the possible values in curly braces.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">Here&#39;s an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l6"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s declare an <span class="s22">enum </span>for order statuses in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">enum OrderStatus { Paid,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">Shipped, Completed, Cancelled</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we look at the transpiled JavaScript, we see that it looks very different:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">var OrderStatus; (function (OrderStatus) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">OrderStatus[OrderStatus[&quot;Paid&quot;] = 1] = &quot;Paid&quot;; OrderStatus[OrderStatus[&quot;Shipped&quot;] = 2] = &quot;Shipped&quot;; OrderStatus[OrderStatus[&quot;Completed&quot;] = 3] = &quot;Completed&quot;; OrderStatus[OrderStatus[&quot;Cancelled&quot;] = 4] = &quot;Cancelled&quot;;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">})(OrderStatus || (OrderStatus = {}));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is because enumerations don&#39;t exist in JavaScript, so the TypeScript compiler is transpiling the code into something that does exist.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s declare a <span class="s22">status </span>variable, setting the value to the <span class="s22">shipped </span>status:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">let status = OrderStatus.Shipped;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark96">Notice how we get nice IntelliSense when typing the value:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"><span><img width="497" height="167" alt="image" src="Learn+React+with+TypeScript+3-2/Image_064.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">By default, the numerical values start from <span class="s22">0 </span>and increment. However, the starting value can be explicitly declared in the <span class="s22">enum</span>, as in the following example, where we set <span class="s22">Paid </span>to <span class="s22">1</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 115%;text-align: left;">enum OrderStatus { Paid <span class="s21">= 1</span>, Shipped, Completed, Cancelled</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s set our <span class="s22">status </span>variable to the shipped status and log this to the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let status = OrderStatus.Shipped; console.log(status);</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we run the program, we should see <b>2 </b>output in the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 45pt;text-indent: 0pt;text-align: left;"><span><img width="463" height="150" alt="image" src="Learn+React+with+TypeScript+3-2/Image_065.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark97">In addition, all the values can be explicitly declared, as in the following example:</a></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 115%;text-align: left;">enum OrderStatus { Paid <span class="s21">= 1</span>,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 9pt;text-align: left;">Shipped <span class="s21">= 2</span>,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">Completed <span class="s21">= 3</span>,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">Cancelled <span class="s21">= 0</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark22">Enumerations are great for data such as a status that is stored as a specific set of integers but actually has some business meaning. They make our code more readable and less prone to error.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark98">Objects</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The object type is shared with JavaScript and represents a non-primitive type. Objects can contain typed properties to hold bits of information.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s work through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l7"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s enter the following code into the TypeScript playground, which creates an object with several properties of information:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const customer = { name: &quot;Lamps Ltd&quot;, turnover: 2000134, active: true</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we hover over <span class="s22">name</span>, <span class="s22">turnover</span>, and <span class="s22">active</span>, we&#39;ll see that TypeScript has smartly inferred the types to be <span class="s22">string</span>, <span class="s22">number</span>, and <span class="s22">boolean </span>respectively.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we hover over the <span class="s22">customer </span>variable name, we see something interesting:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="117" alt="image" src="Learn+React+with+TypeScript+3-2/Image_066.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark99">Rather than the type being </a><span class="s22">object</span>, it is a specific type with <span class="s22">name</span>, <span class="s22">turnover</span>, and <span class="s22">active </span>properties. On the next line, let&#39;s set the <span class="s22">turnover </span>property to some other value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">customer.turnover = 500000;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">As we type the turnover property, IntelliSense provides the properties that are available on the object:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><span><img width="564" height="76" alt="image" src="Learn+React+with+TypeScript+3-2/Image_067.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="86" alt="image" src="Learn+React+with+TypeScript+3-2/Image_068.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">We used <span class="s22">const </span>to declare the <span class="s22">customer </span>variable and then was able to change one of its property values later in the program. Shouldn&#39;t this have thrown an error? Well, the customer variable reference hasn&#39;t changed <span class="s23">— </span>just some properties within it. So, this is fine with the TypeScript compiler.</p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">This line of code is perfectly fine, so we don&#39;t get any complaints from the compiler. If we set the <span class="s22">turnover </span>to a value that has an incorrect type, we&#39;ll be warned as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;"><span><img width="519" height="125" alt="image" src="Learn+React+with+TypeScript+3-2/Image_069.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark100">Now let&#39;s set a property on </a><span class="s22">customer </span>that doesn&#39;t exist yet:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">customer.profit = 10000;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We&#39;ll see that TypeScript complains:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 10pt;text-indent: 0pt;text-align: left;"><span><img width="556" height="135" alt="image" src="Learn+React+with+TypeScript+3-2/Image_070.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">This makes sense if we think about it. We&#39;ve declared <span class="s22">customer </span>with <span class="s22">name</span>, <span class="s22">turnover</span>, and <span class="s22">active </span>properties, so setting a <span class="s22">profit </span>property should cause an error. If we wanted a <span class="s22">profit </span>property, we should have declared it in the original declaration.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark23">In summary, the </a><span class="s22">object </span>type is flexible because we get to define any properties we require, but TypeScript will narrow down the type to prevent us incorrectly typing a property name.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark101">Arrays</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Arrays are structures that TypeScript inherits from JavaScript. We add type annotations to arrays as usual, but with square brackets at the end to denote that this is an array type.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s take a look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l8"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s declare the following array of numbers in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const numbers: number[] = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Here, we have initialized the array as empty.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can add an item to the array by using the array&#39;s <span class="s22">push </span>function. Let&#39;s add the number <span class="s22">1 </span>to our array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">numbers.push(1);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_071.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We used <span class="s22">const </span>to declare the <span class="s22">numbers </span>variable and was able to change its array elements later in the program. The array reference hasn&#39;t changed</p><p class="s23" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">– <span class="p">just the elements within it. So, this is fine with the TypeScript compiler.</span></p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark102">If we add an element with an incorrect type, the TypeScript compiler will complain, as we would expect:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;"><span><img width="564" height="91" alt="image" src="Learn+React+with+TypeScript+3-2/Image_072.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We can use type inference to save a few keystrokes if we declare an array with some initial values. As an example, if we type in the following declaration and hover over the <span class="s22">numbers </span>variable, we&#39;ll see the type has been inferred as <span class="s22">number[]</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const numbers = [1, 3, 5];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can access an element in an array by using the element number in square brackets. Element numbers start at <span class="s22">0</span>.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s take an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l9"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s log out the number of elements under the numbers variable declaration, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: justify;">console.log(numbers[0]); console.log(numbers[1]); console.log(numbers[2]);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s now click the <b>Run </b>option on the right-hand side of the TypeScript playground to run our program. A new browser tab should open with a blank page. If we press <i>F12 </i>to open the <b>Developer tools </b>and go to the console section, we&#39;ll see <b>1</b>, <b>3</b>, and <b>5 </b>output to the console.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark103">There are several ways to iterate through elements in an array. One option is to use a </a><span class="s22">for </span>loop, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">for <span class="s12">(let i in numbers) { console.log(numbers[i]);</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 29pt;text-indent: 0pt;text-align: center;">If we run the program, we&#39;ll see <b>1</b>, <b>3</b>, and <b>5 </b>output to the console again.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Arrays also have a useful function for iterating through their elements, called</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">forEach<span class="p">. We can use this function as follows:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">numbers.<span class="s21">forEach</span>(function (num) { console.log(num);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s22" style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">forEach <span class="p">calls a nested function for each array element, passing in the array element. If we hover over the </span>num <span class="p">variable, we&#39;ll see it has been correctly inferred as a </span>number<span class="p">. We could have put a type annotation here, but we have saved ourselves a few keystrokes:</span></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 9pt;text-indent: 0pt;text-align: left;"><span><img width="558" height="97" alt="image" src="Learn+React+with+TypeScript+3-2/Image_073.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark24">Arrays are one of the most common types we&#39;ll use to structure our data. In the preceding examples, we&#39;ve only used an array with elements having a number type, but any type can be used for elements, including objects, which in turn have their own properties.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark104">Creating interfaces, types aliases, and classes</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In the <i>Understanding basic types </i>section, we introduced ourselves to objects, which are types that can have their own properties. Interfaces, type aliases, and classes are ways that we can define an object structure before we start using it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Following here is the <span class="s22">customer </span>object we worked with, where we declared the <span class="s22">customer</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">variable with an initial object value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">const customer = { name: &quot;Lamps Ltd&quot;, turnover: 2000134, active: true</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l10"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to declare the customer variable and set its value on a subsequent line:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: justify;">let customer: object; customer = {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: justify;">name: &quot;Lamps Ltd&quot;, turnover: 2000134, active: true</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So far, so good. However, let&#39;s see what happens when we try to change the customers <span class="s22">turnover </span>value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">customer.turnover = 2000200;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The lack of IntelliSense when we type <span class="s22">turnover </span>isn&#39;t what we are used to. When we&#39;ve finished typing the line, we get a compiler error:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 17pt;text-indent: 0pt;text-align: left;"><span><img width="537" height="144" alt="image" src="Learn+React+with+TypeScript+3-2/Image_074.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The TypeScript compiler doesn&#39;t know about the properties in the <span class="s22">customer</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">object and so thinks there&#39;s a problem.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we need another way of defining an object structure with the ability to set property values later in the program. That&#39;s where interfaces, type aliases, and classes come in; they let us define the structure of an object by letting us define our own types.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark25">Interfaces</a><a name="bookmark105">&zwnj;</a><a name="bookmark106">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">An interface is a contract that defines a type with a collection of property and method definitions without any implementation. Interfaces don&#39;t exist in JavaScript, so they are purely used by the TypeScript compiler to enforce the contract by type checking.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We create an interface with the <span class="s22">interface </span>keyword, followed by its name, followed by the bits that make up the <span class="s22">interface </span>in curly braces:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">interface Product {</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 5pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark26">Properties</a><a name="bookmark107">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Properties are one of the elements that can be part of an interface. Properties can hold values associated with an object. So, when we define a property in an interface, we are saying that objects that implement the interface must have the property we have defined.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s start to play with an interface in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l11"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Enter the following interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The preceding example creates a <span class="s22">Product </span>interface with <span class="s22">name </span>and <span class="s22">unitPrice </span>properties. Let&#39;s go on to use this interface by using it as the type for a <span class="s22">table </span>variable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const table: Product = { name: &quot;Table&quot;, unitPrice: 500</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to set a property that doesn&#39;t exist in the interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const chair: Product = { productName: &quot;Table&quot;, price: 70</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark108">As expected, we get a type error:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><span><img width="514" height="240" alt="image" src="Learn+React+with+TypeScript+3-2/Image_075.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Properties on an interface can reference another interface because an interface is just a type. The following example shows an <span class="s22">OrderDetail </span>interface making use of a <span class="s22">Product </span>interface:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface OrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const table: Product = { name: &quot;Table&quot;, unitPrice: 500</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const tableOrder: OrderDetail = { product: table,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">quantity: 1</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This gives us the flexibility to create complex object structures, which is critical when writing large, complex apps.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark27">Method signatures</a><a name="bookmark109">&zwnj;</a><a name="bookmark110">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Interfaces can contain method signatures as well. These won&#39;t contain the implementation of the method; they define the contracts for when interfaces are used in an implementation.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l12"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">Let&#39;s add a method to the <span class="s22">OrderDetail </span>interface we just created. Our method is called <span class="s22">getTotal </span>and it has a <span class="s22">discount </span>parameter of type <span class="s22">number </span>and returns a <span class="s22">number</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface OrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that the <span class="s22">getTotal </span>method on the interface doesn&#39;t specify anything about how the total is calculated <span class="s23">– </span>it just specifies the method signature that should be used.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Having adjusted our <span class="s22">OrderDetail </span>interface, our <span class="s22">tableOrder </span>object, which implemented this interface, will now be giving a compilation error. So, let&#39;s resolve the error by implementing <span class="s22">getTotal</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const tableOrder: OrderDetail = { product: table,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">quantity: 1,</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 106%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 106%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s21" style="padding-left: 118pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Notice that the implemented method has the same signature as in the</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="70" alt="image" src="Learn+React+with+TypeScript+3-2/Image_076.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The method implementation uses the <span class="s22">this </span>keyword to get access to properties on the object. If we simply referenced <span class="s22">product.unitPrice </span>and <span class="s22">quantity </span>without <span class="s22">this</span>, we would get a compilation error, because TypeScript would assume these variables are local within the method.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">OrderDetail <span class="p">interface.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark111">Let&#39;s tweak the method signature to discover what we can and can&#39;t do. We&#39;ll start by changing the parameter name:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">getTotal(<span class="s21">discountPercentage</span>: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 107pt;text-indent: -5pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discountPercentage;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We&#39;ll see that we don&#39;t get a compilation error. Let&#39;s change the method name now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">total<span class="s12">(discountPercentage: number): number {</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discountPercentage;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">This does cause an error because a <span class="s22">total </span>method doesn&#39;t exist on the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">OrderDetail <span class="p">interface:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><span><img width="477" height="183" alt="image" src="Learn+React+with+TypeScript+3-2/Image_077.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We could try changing the return type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const tableOrder: OrderDetail = { product: table,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">quantity: 1,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discountPercentage: number): <span class="s21">string </span>{</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;"><a name="bookmark112">const discountAmount = priceWithoutDiscount * discountPercentage;</a></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">return (priceWithoutDiscount - discountAmount).toString();</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This actually doesn&#39;t produce a compilation error in the TypeScript playground, but it should do!</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">So, let&#39;s use Visual Studio Code for this example. After we&#39;ve opened Visual Studio Code in a folder of our choice, let&#39;s create a file called <span class="s22">interfaces.ts </span>and paste in the interface definitions for the <span class="s22">Product </span>and <span class="s22">OrderDetail </span>interfaces, along with the <span class="s22">table </span>variable declaration.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can then enter the preceding implementation of the <span class="s22">OrderDetail </span>interface. As expected, we get a compilation error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"><span><img width="535" height="355" alt="image" src="Learn+React+with+TypeScript+3-2/Image_078.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark113">Changing the parameter type also results in a compilation error:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"><span><img width="499" height="200" alt="image" src="Learn+React+with+TypeScript+3-2/Image_079.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The errors provided by TypeScript are fantastic<span class="s23">—</span>they are very specific about where the problem is, allowing us to quickly correct our mistakes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: justify;">So, when implementing a method from an interface, the parameter names aren&#39;t important, but the other parts of the signature are. In fact, we don&#39;t even need to declare the parameter names in the interface:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">interface OrderDetail {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(number): number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">However, omitting the parameter names arguably makes the interface harder to understand<span class="s23">—</span>how do we know exactly what the parameter is for?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark28">Optional properties and parameters</a><a name="bookmark114">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We might want to make a property optional because not every situation where the interface is implemented requires it. Let&#39;s take the following steps in our <span class="s22">OrderDetail </span>interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l13"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s create an optional property for the date it was added. We specify an optional value by putting a <span class="s22">? </span>at the end of the property name but before the type annotation:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 119%;text-align: left;">interface OrderDetail { product: Product; quantity: number; dateAdded<span class="s21">?</span>: Date,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ll see that our implementation of this interface, <span class="s22">tableOrder</span>, isn&#39;t broken. We can choose to add <span class="s22">dateAdded </span>to <span class="s22">tableOrder </span>but it isn&#39;t required.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We might also want to make a method parameter optional. We do this in a similar way by putting a <span class="s22">? </span>after the parameter name. In our example, let&#39;s make <span class="s22">discount </span>optional in the <span class="s22">OrderDetail </span>interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface OrderDetail { product: Product; quantity: number; dateAdded?: Date,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">getTotal(discount<span class="s21">?</span>: number): number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can change the method implementation signature as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">getTotal(discount<span class="s21">?</span>: number): number {</p><p class="s12" style="padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * (discount || 0);</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_080.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><span class="s22">x || y </span>is shorthand for <i>if x is </i>truthy <i>then use x, otherwise, use y</i>. The following values are falsy values: <span class="s22">false</span>, <span class="s22">0</span>, <span class="s22">&quot;&quot;</span>, <span class="s22">null</span>, <span class="s22">undefined</span>, and <span class="s22">NaN</span>. All other values are truthy.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ve also dealt with the case when a discount isn&#39;t passed into the method by using <span class="s22">(discount || 0) </span>in the <span class="s22">discountAmount </span>variable assignment.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">With our optional parameter in place, we can call <span class="s22">getTotal </span>without passing a value for the discount parameter:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tableOrder.getTotal()</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The preceding line doesn&#39;t upset the TypeScript compiler.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark29">Readonly properties</a><a name="bookmark115">&zwnj;</a><a name="bookmark116">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">We can stop a property from being changed after it has initially been set by using the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">readonly <span class="p">keyword before the property name.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l14"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s give this a try on our <span class="s22">Product </span>interface by making the <span class="s22">name </span>property</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">readonly<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 112%;text-align: left;">interface Product { <span class="s21">readonly </span>name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also make sure we have an instance of the <span class="s22">Product </span>interface in place:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const table: Product = { name: &quot;Table&quot;, unitPrice: 500</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change the <span class="s22">name </span>property <span class="s22">table </span>now on the next line:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">table.name = &quot;Better Table&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">As expected, we get a compilation error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 11pt;text-indent: 0pt;text-align: left;"><span><img width="555" height="187" alt="image" src="Learn+React+with+TypeScript+3-2/Image_081.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">readonly <span class="p">properties are a simple way of freezing their values after being initially set. A common use case is when you want to code in a functional way and prevent unexpected mutations to a property.</span></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark30">Extending interfaces</a><a name="bookmark117">&zwnj;</a><a name="bookmark118">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Interfaces can <i>extend </i>other interfaces so that they inherit all the properties and methods from its parent. We do this using the <span class="s22">extends </span>keyword after the new interface name and before the interface name that is being extended.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at the following example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l15"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We create a new interface, taking <span class="s22">Product </span>as a base, and add information about discount codes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface DiscountCode { code: string; percentage: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ProductWithDiscountCodes extends Product { discountCodes: DiscountCode[];</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can create an instance of the interface in the usual way, filling in properties from the base interface as well as the child interface:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const table: ProductWithDiscountCodes = { name: &quot;Table&quot;,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">unitPrice: 500, discountCodes: [</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{ code: &quot;SUMMER10&quot;, percentage: 0.1 },</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{ code: &quot;BFRI&quot;, percentage: 0.2 }</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Interfaces allow us to create complex but flexible structured types for our TypeScript program to use. They are a really important feature that we can use to create a robust, strongly-typed TypeScript program.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark31">Type aliases</a><a name="bookmark119">&zwnj;</a><a name="bookmark120">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In simple terms, a type alias creates a new name for a type. To define a type alias, we use the <span class="s22">type </span>keyword, followed by the alias name, followed by the type that we want to alias.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll explore this with the following example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l16"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create a type alias for the <span class="s22">getTotal </span>method in the <span class="s22">OrderDetail </span>interface we have been working with. Let&#39;s try this in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">type GetTotal = (discount: number) =&gt; number;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 119%;text-align: left;">interface OrderDetail { product: Product; quantity: number; getTotal: <span class="s21">GetTotal</span>;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Nothing changes with objects that implement this interface <span class="s23">– </span>it is purely a way we can structure our code. It arguably makes the code a little more readable.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Type aliases can also define the shape of an object. We could use a type alias for our <span class="s22">Product </span>and <span class="s22">OrderDetail </span>types that we previously defined with an interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">type Product = { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">type OrderDetail = { product: Product; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal: (discount: number) =&gt; number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We use these types in exactly the same way as we used our interface-based types:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const table: Product = { name: &quot;Table&quot;, unitPrice: 500</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const orderDetail: OrderDetail = { product: table,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">quantity: 1,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;"><a name="bookmark121">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</a></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark32">So, type aliases seem very similar to interfaces. What is the difference between a type alias and an interface? The main difference is that type aliases can&#39;t be extended or implemented from like you can with interfaces. So, for a simple structure that doesn&#39;t require inheritance, should we use an interface or should we use a type alias? There isn&#39;t strong reasoning to prefer either approach. However, we should be consistent with whichever approach we choose to improve the readability of our code.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark122">Classes</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark33">Classes feature in many programming languages, including JavaScript. They let us shape objects with type annotations in a similar way to interfaces and type aliases. However, classes have many more features than interfaces and type aliases, which we&#39;ll explore in the following sections.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark123">Basic classes</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Classes have lots of features. So, in this section we&#39;ll look at the basic features of a class. We use the <span class="s22">class </span>keyword followed by the class name, followed by the definition of the class.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at this in more depth with the following example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l17"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We could use a class to define the <span class="s22">Product </span>type we previously defined as an interface and as a type alias:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;"><a name="bookmark124">We create an instance of our </a><span class="s22">Product </span>class by using the <span class="s22">new </span>keyword followed by the class name and parentheses. We then go on to interact with the class, setting property values or calling methods:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const table = new Product(); table.name = &quot;Table&quot;; table.unitPrice = 500;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Notice that when we use this approach we don&#39;t need a type annotation for the table variable because the type can be inferred.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Classes have many more features than type aliases and interfaces though. One of these features is the ability to define the implementation of methods in a class.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s explore this with an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l18"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s change the <span class="s22">OrderDetail </span>type we have been working within previous sections to a class. We can define the implementation of the <span class="s22">getTotal </span>method in this class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: justify;">class OrderDetail { product: Product; quantity: number;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can create an instance of <span class="s22">OrderDetail</span>, specifying a <span class="s22">product </span>and <span class="s22">quantity</span>, and then calling the <span class="s22">getTotal </span>method with a <span class="s22">discount </span>to get the total price:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const table = new Product(); table.name = &quot;Table&quot;; table.unitPrice = 500;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const orderDetail = new OrderDetail(); orderDetail.product = table; orderDetail.quantity = 2;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 240%;text-align: left;">const total = orderDetail.getTotal(0.1); console.log(total);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark125">If we run this and look at the console, we should see an output of </a><span class="s22">900</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark34">Implementing interfaces</a><a name="bookmark126">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can use classes and interfaces together by defining the contract in an interface and then implementing the class as per the interface. We specify that a class is implementing a particular interface using the <span class="s22">implements </span>keyword.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">As an example, we can define an interface for the order detail and then a class that implements this interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IOrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 110%;text-align: left;">class OrderDetail <span class="s21">implements IOrderDetail </span>{ product: Product;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">quantity: number;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 50pt;text-indent: -5pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In the preceding example, we&#39;ve prefixed the interface with <span class="s22">I </span>so that readers of the code can quickly see when we are referencing interfaces.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark35">Why would we use this approach? It seems like more code than we need to write. So, what&#39;s the benefit? This approach allows us to have multiple implementations of an interface, which can be useful in certain situations.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark127">Constructors</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Constructors are functions that perform the initialization of new instances of a class. In order to implement a constructor, we implement a function called <span class="s22">constructor</span>. It&#39;s common to set property values in the constructor to simplify consumption of the class.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark128">Let&#39;s look at the following example:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l19"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s create a constructor in the <span class="s22">OrderDetail </span>class that allows us to set the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">product <span class="p">and </span>quantity<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class OrderDetail implements IOrderDetail { product: Product;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">quantity: number;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">constructor(product: Product, quantity: number) { this.product = product;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">this.quantity = quantity;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">If we create an instance of the class, we are forced to pass in the <span class="s22">product </span>and</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">quantity<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">const orderDetail = new OrderDetail(table, 2);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">This is nice because we&#39;ve reduced three lines of code to one line. However, we can make our class even nicer to work with by making the default <span class="s22">quantity </span>parameter <span class="s22">1 </span>if nothing is passed in:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">constructor(product: Product, quantity: number <span class="s21">= 1</span>) { this.product = product;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">this.quantity = quantity;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We now don&#39;t have to pass in a <span class="s22">quantity </span>if it is <span class="s22">1</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const orderDetail = new OrderDetail(table);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We can save ourselves a few keystrokes and let the TypeScript compiler implement the <span class="s22">product </span>and <span class="s22">quantity </span>properties by using the <span class="s22">public </span>keyword before the parameters in the constructor:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class OrderDetail implements IOrderDetail {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">constructor(<span class="s21">public </span>product: Product, <span class="s21">public </span>quantity: number</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">= 1) {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">this.product = product; this.quantity = quantity;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;"><a name="bookmark129">getTotal(discount: number): number {</a></p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark36">Extending classes</a><a name="bookmark130">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Classes can extend other classes. This is the same concept as interfaces extending other interfaces, which we covered in the <i>Extending interfaces </i>section. This is a way for class properties and methods to be shared with child classes.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">As with interfaces, we use the <span class="s22">extends </span>keyword followed by the class we are extending. Let&#39;s look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l20"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a <span class="s22">ProductWithDiscountCodes </span>from our <span class="s22">Product </span>class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface DiscountCode { code: string; percentage: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ProductWithDiscountCodes extends Product { discountCodes: DiscountCode[];</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can then consume the <span class="s22">ProductWithDiscountCodes </span>class as follows, leveraging properties from the base class as well as the child class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const table = new ProductWithDiscountCodes(); table.name = &quot;Table&quot;;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">table.unitPrice = 500; table.discountCodes = [</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{ code: &quot;SUMMER10&quot;, percentage: 0.1 },</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{ code: &quot;BFRI&quot;, percentage: 0.2 }</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark131">If the parent class has a constructor, then the child class will need to pass the constructor parameters using a function called </a><span class="s22">super</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class Product {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">constructor(public name: string, public unitPrice: number) {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface DiscountCode { code: string; percentage: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ProductWithDiscountCodes extends Product { constructor(public name: string, public unitPrice: number) {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">super(name, unitPrice);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">discountCodes: DiscountCode[];</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark37">Abstract classes</a><a name="bookmark132">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Abstract classes are a special type of class that can only be inherited from and not instantiated. They are declared with the <span class="s22">abstract </span>keyword, as in the following example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l21"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can define a base <span class="s22">Product </span>class as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 101pt;text-indent: -10pt;line-height: 114%;text-align: left;">abstract <span class="s12">class Product { name: string; unitPrice: number;</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If we try to create an instance of this, the compiler will complain, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="566" height="107" alt="image" src="Learn+React+with+TypeScript+3-2/Image_082.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;"><a name="bookmark133">We can create a more specific usable class for food products by extending</a></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Product<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Food extends Product { constructor(public bestBefore: Date) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">super();</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Here, we are adding a <span class="s22">bestBefore </span>date in our <span class="s22">Food </span>class. We can then create an instance of <span class="s22">Food</span>, passing in the <span class="s22">bestBefore </span>date:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">const bread = new Food(new Date(2019, 6, 1));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Abstract classes can have <span class="s22">abstract </span>methods that child classes must implement. Abstract methods are declared with the <span class="s22">abstract </span>keyword in front of them, as in the following example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l22"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add an <span class="s22">abstract </span>method to our base <span class="s22">Product </span>class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">abstract class Product { name: string; unitPrice: number;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">abstract <span class="s12">delete(): void;</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">After we add the <span class="s22">abstract </span>method, the compiler immediately complains about our <span class="s22">Food </span>class because it doesn&#39;t implement the <span class="s22">delete </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 21pt;text-indent: 0pt;text-align: left;"><span><img width="527" height="164" alt="image" src="Learn+React+with+TypeScript+3-2/Image_083.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark134">So, let&#39;s fix this and implement the </a><span class="s22">delete </span>method:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">class Food extends Product {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">deleted: boolean;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(public bestBefore: Date) { super();</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">delete() {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">this.deleted = false;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark38">Access modifiers</a><a name="bookmark135">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">So far, all our class properties and methods have automatically had the <span class="s22">public </span>access modifier. This means they are available to interact with class instances and child classes. We can explicitly set the <span class="s22">public </span>keyword on our class properties and methods immediately before the property or method name:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">class OrderDetail {</p><p class="s21" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">public <span class="s12">product: Product;</span></p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">public <span class="s12">quantity: number;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">public <span class="s12">getTotal(discount: number): number {</span></p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity; const discountAmount = priceWithoutDiscount * discount;</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">As you might have guessed, there is another access modifier, called <span class="s22">private</span><b>, </b>which allows the member to only be available to interact with inside the class and not on class instances or child classes.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l23"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s add a <span class="s22">delete </span>method in our <span class="s22">OrderDetail </span>class, which sets a private</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">deleted <span class="p">property:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class OrderDetail {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 118%;text-align: left;">public product: Product; public quantity: number; <span class="s21">private deleted: boolean;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">public delete(): void { this.deleted = true;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;"><a name="bookmark136">}</a></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create an instance of <span class="s22">OrderDetail </span>and try to access the <span class="s22">deleted </span>property:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const orderDetail = new OrderDetail(); orderDetail.deleted = true;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="489" height="85" alt="image" src="Learn+React+with+TypeScript+3-2/Image_084.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="532" height="111" alt="image" src="Learn+React+with+TypeScript+3-2/Image_085.png"/></span></p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">As expected, the compiler complains:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark39">There is a third access modifier, </a><span class="s22">protected</span>, which allows the member to be available to interact with inside the class and on child classes, but not on class instances.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark137">Property setters and getters</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Our classes so far have had simple property declarations. However, for more complex scenarios, we can implement a property with a <span class="s22">getter </span>and a <span class="s22">setter</span>. When implementing <span class="s22">getters </span>and <span class="s22">setters</span>, generally, you&#39;ll need a private property to hold the property value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_086.png"/></span></p><p class="s22" style="padding-top: 3pt;padding-left: 53pt;text-indent: 0pt;line-height: 91%;text-align: justify;">getter <span class="p">is a function with the property name and the </span>get <span class="p">keyword at the beginning and no parameters. Generally, this will return the value of the associated private property.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_087.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 91%;text-align: left;">setter <span class="p">is a function with the same name with the </span>set <span class="p">keyword at the beginning and a single parameter for the value. This will set the value of the associated private property.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_088.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The <span class="s22">private </span>property is commonly named the same as the <span class="s22">getter </span>and <span class="s22">setter</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">with an underscore in front.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark138">Let&#39;s take a look at an example:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l24"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">Let&#39;s create <span class="s22">getters </span>and <span class="s22">setters </span>for the <span class="s22">unitPrice </span>property in our <span class="s22">Product </span>class. The <span class="s22">setter </span>ensures the value is not less than <span class="s22">0</span>. The <span class="s22">getter </span>ensures <span class="s22">null </span>or <span class="s22">undefined </span>is never returned:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Product { name: string;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">private _unitPrice: number; get unitPrice(): number {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">return this._unitPrice || 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">set unitPrice(value: number) { if (value &lt; 0) {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">value = 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">this._unitPrice = value;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s consume the <span class="s22">Product </span>class and try this out:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const table = new Product(); table.name = &quot;Table&quot;; console.log(table.unitPrice); table.unitPrice = -10; console.log(table.unitPrice);</p><p style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark40">If we run this, we should see two </a><b>0</b>&#39;s in the console.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark139">Static</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Static properties and methods are held in the class itself and not in class instances. They can be declared using the <span class="s22">static </span>keyword before the property or method name.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at the following example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l25"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s make the <span class="s22">getTotal </span>method static on the <span class="s22">OrderDetail </span>class we have been using:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: justify;">class OrderDetail { product: Product; quantity: number;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 36pt;text-indent: 0pt;text-align: center;">static <span class="s12">getTotal(discount: number): number {</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: justify;">We get compilation errors where we try to reference the properties on the class. This is because the <span class="s22">static </span>method isn&#39;t in the class instance and therefore can&#39;t access these properties:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 9pt;text-indent: 0pt;text-align: left;"><span><img width="560" height="174" alt="image" src="Learn+React+with+TypeScript+3-2/Image_089.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">To make the <span class="s22">static </span>method work, we can move its dependencies on the class instance to parameters in the function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">static getTotal(<span class="s21">unitPrice: number, quantity: number</span>, discount: number): number {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 114%;text-align: left;">const priceWithoutDiscount = <span class="s21">unitPrice </span>* <span class="s21">quantity</span>; const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can now call the static method on the class type itself, passing in all the parameter values:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const total = OrderDetail.getTotal(500, 2, 0.1); console.log(total);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">If we run the preceding program, we should get an output of <span class="s22">900 </span>in the console.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark41">Structuring code into modules</a><a name="bookmark140">&zwnj;</a><a name="bookmark141">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">By default, TypeScript generated JavaScript code that executes in what is called the global scope. This means code from one file is automatically available in another file. This in turn means that the functions we implement can overwrite functions in other files if the names are the same, which can cause our applications to break.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">Let&#39;s look at an example in Visual Studio Code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l26"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create a file called <span class="s22">product.ts </span>and enter the following interface for a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create another file, called <span class="s22">orderDetail.ts</span>, with the following content:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: justify;">class OrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: justify;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: justify;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: justify;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">The compiler doesn&#39;t give us any complaints. In particular, the reference to the <span class="s22">Product </span>interface in the <span class="s22">OrderDetail </span>class is able to be resolved, even though it&#39;s in a different file. This is because both <span class="s22">Product </span>and <span class="s22">OrderDetail </span>are in the global scope.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Operating in the global scope is problematic because item names can conflict across different files, and as our code base grows, this is harder to avoid. Modules resolve this issue and help us write well organized and reusable code.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark42">Module formats</a><a name="bookmark142">&zwnj;</a><a name="bookmark143">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Modules feature in JavaScript as part of ES6, which is great. However, lots of code exists in other popular module formats that came before this standardization. TypeScript allows us to write our code using ES6 modules, which can then transpile into another module format if specified.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">Here is a brief description of the different module formats that TypeScript can transpile to:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_090.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;"><b>Asynchronous Module Definition </b>(<b>AMD</b>): This is commonly used in code targeted for the browser and uses a <span class="s22">define </span>function to define modules.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_091.png"/></span></p><p class="s9" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">CommonJS<span class="p">: This format is used in Node.js programs. It uses </span><span class="s22">module.exports</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">to define modules and <span class="s22">require </span>to define dependencies.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_092.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Universal Module Definition <span class="p">(</span>UMD<span class="p">): This can be used in both browser apps and Node.js programs.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_093.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;"><b>ES6</b>: This is the native JavaScript module format and uses the <span class="s22">export </span>keyword to define modules and <span class="s22">import </span>to define dependencies.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark43">In the following sections (and, in fact, this whole book), we&#39;ll write our code using ES6 modules.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark144">Exporting</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Exporting code from a module allows it to be used by other modules. In order to export from a module, we use the <span class="s22">export </span>keyword. We can specify that an item is exported using <span class="s22">export </span>directly before its definition. Exports can be applied to interfaces, type aliases, classes, functions, constants, and so on.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s start to adjust our example code from the previous section to operate in modules rather than the global scope:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l27"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Firstly, let&#39;s export the <span class="s22">Product </span>interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">export <span class="s12">interface Product { name: string;</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">unitPrice: number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;"><a name="bookmark145">After we make this change, the compiler will complain about the reference to the</a></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Product <span class="p">interface in the </span>OrderDetail <span class="p">class:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="151" alt="image" src="Learn+React+with+TypeScript+3-2/Image_094.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">This is because <span class="s22">Product </span>is no longer in the global scope but <span class="s22">OrderDetail </span>still is. We&#39;ll resolve this in the next section, but let&#39;s look at alternative ways we can export the <span class="s22">Product </span>interface first.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can use an <span class="s22">export </span>statement beneath the item declarations. We use the <span class="s22">export </span>keyword followed by a comma-delimited list of item names to export in curly braces:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export { Product }</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">With this approach, we can also rename exported items using the <span class="s22">as </span>keyword:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface Product { name: string; unitPrice: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export { Product <span class="s21">as Stock </span>}</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark44">Importing</a><a name="bookmark146">&zwnj;</a><a name="bookmark147">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Importing allows us to import items from an exported module. We do this using an <span class="s22">import </span>statement that includes the item names to import in curly braces and the file path to get the items from (excluding the <span class="s22">ts </span>extension). We can only import items that are exported in the other module file.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l28"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s resolve the issue with our <span class="s22">OrderDetail </span>class by importing the <span class="s22">Product</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { Product } from &quot;./product&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: justify;">class OrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: justify;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: justify;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: justify;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can rename imported items using the <span class="s22">as </span>keyword in an <span class="s22">import </span>statement. We then reference the item in our code using the new name:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">import { Product <span class="s21">as Stock </span>} from &quot;./product&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 112%;text-align: left;">class OrderDetail { product: <span class="s21">Stock</span>; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark45">Default exports</a><a name="bookmark148">&zwnj;</a><a name="bookmark149">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We can specify a single item that can be exported by default using the <span class="s22">default </span>keyword:</p><p class="s12" style="padding-top: 9pt;padding-left: 34pt;text-indent: -10pt;line-height: 110%;text-align: left;">export <span class="s21">default </span>interface { name: string;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">unitPrice: number;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Notice that we don&#39;t need to name the interface. We can then import a default exported item using an <span class="s22">import </span>statement without the curly braces with a name of our choice:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">import Product from &quot;./product&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark46">Configuring compilation</a><a name="bookmark150">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We need to compile our TypeScript code before it can be executed in a browser. We do this by running the TypeScript compiler, <span class="s22">tsc</span>, on the files we want to compile. TypeScript is very popular and is used in many different situations:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_095.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_096.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">It is often introduced into large existing JavaScript code bases It comes by default in an Angular project</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_097.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_098.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">It is often used to add strong types to a React project It can even be used in Node.js projects</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">All these situations involve slightly different requirements for the TypeScript compiler. So, the compiler gives us lots of different options to hopefully meet the requirements of our particular situation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l29"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s give this a try by opening Visual Studio Code in a new folder and creating a new file, called <span class="s22">orderDetail.ts</span>, with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface Product { name: string;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">unitPrice: number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export class OrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;"><a name="bookmark151">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</a></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can open a <b>Terminal </b>in Visual Studio Code by going to the <b>View </b>menu and choosing <b>Terminal</b>. Let&#39;s enter the following command in the <b>Terminal</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc orderDetail</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Hopefully, no errors should be output from the compiler and it should generate a file called <span class="s22">orderDetail.js</span>, containing the following transpiled JavaScript:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&quot;use strict&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">exports.<u> </u>esModule = true;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -21pt;line-height: 120%;text-align: left;">var OrderDetail = (function () { function OrderDetail() {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -21pt;line-height: 120%;text-align: left;">OrderDetail.prototype.getTotal = function (discount) { var priceWithoutDiscount = this.product.unitPrice *</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">this.quantity;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;line-height: 120%;text-align: left;">var discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">return OrderDetail;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}());</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">exports.OrderDetail = OrderDetail;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark47">We&#39;ll continue to use </a><span class="s22">orderDetail.ts </span>in the following sections as we explore how the compiler can be configured.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark152">Common options</a></h4><p class="s12" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" class="s20" target="_blank">As mentioned earlier, there are lots of configuration options for the TypeScript compiler. All the configuration options can be found at </a><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" class="a" target="_blank">https://www.typescriptlang.org/docs/ handbook/compiler-options.</a>html<span class="p">. The following sections detail some of the more common options that are used.</span></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark48">--target</a><a name="bookmark153">&zwnj;</a><a name="bookmark154">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">This determines the ECMAScript version the transpiled code will be generated in.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">The default is <span class="s22">ES3</span>, which will ensure the code works in a wide range of browsers and their different versions. However, this compilation target will generate the most amount of code because the compiler will generate polyfill code for features that aren&#39;t supported in <span class="s22">ES3</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">ESNext </span>option is the other extreme, which compiles to the latest supported proposed ES features. This will generate the least amount of code, but will only work on browsers that have implemented the features we have used.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">As an example, let&#39;s compile <span class="s22">orderDetail.ts </span>targeting <span class="s22">ES6 </span>browsers. Enter the following in the terminal:</p><p class="s21" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">tsc orderDetail --target es6</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our transpiled JavaScript will be very different from the last compilation and much closer to our source TypeScript because classes are supported in <span class="s22">es6</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 45pt;text-indent: -21pt;line-height: 120%;text-align: left;">export class OrderDetail { getTotal(discount) {</p><p class="s12" style="padding-left: 23pt;text-indent: 43pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 66pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark49">--outDir</a><a name="bookmark155">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">By default, the transpiled JavaScript files are created in the same directory as the TypeScript files. <span class="s22">--outDir </span>can be used to place these files in a different directory.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s give this a try and output the transpiled <span class="s22">orderDetail.js </span>to a folder called <span class="s22">dist</span>. Let&#39;s enter the following in the terminal:</p><p class="s21" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">tsc orderDetail --outDir dist</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">A <span class="s22">dist </span>folder will be created containing the generated <span class="s22">orderDetail.js </span>file.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark50">--module</a><a name="bookmark156">&zwnj;</a><a name="bookmark157">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;"><a name="bookmark51">This specifies the module format that the generated JavaScript should use. The default is the </a><b>CommonJS </b>module format if ES3 or ES5 are targeted. <span class="s22">ES6 </span>and <span class="s22">ESNext </span>are common options today when creating a new project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark158">--allowJS</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark52">This option tells the TypeScript compiler to process JavaScript files as well as TypeScript files. This is useful if we&#39;ve written some of our code in JavaScript and used features that haven&#39;t been implemented yet in all browsers. In this situation, we can use the TypeScript compiler to transpile our JavaScript into something that will work with a wider range of browsers.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark159">--watch</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This option makes the TypeScript compiler run indefinitely. Whenever a source file is changed, the compiling process is triggered automatically to generate the new version. This is a useful option to switch on during our developments:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l30"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s give this a try by entering the following in a terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc orderDetail --watch</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">The compiler should run and, when completed, give the message <span class="s22">Watching for file changes</span>. Let&#39;s change the <span class="s22">getTotal </span>method in the <span class="s22">OrderDetail </span>class to handle situations when <span class="s22">discount </span>is undefined:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 91pt;text-indent: 10pt;line-height: 106%;text-align: left;">const discountAmount = priceWithoutDiscount * <span class="s21">(discount || 0)</span>;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">When we save <span class="s22">orderDetail.ts</span>, the compiler will say <span class="s22">File change detected. Starting incremental compilation... </span>and carry out the compilation.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">To exit the watch mode, we can kill the terminal by clicking the bin icon in the <b>Terminal</b>.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark53">--noImplicitAny</a><a name="bookmark160">&zwnj;</a><a name="bookmark161">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">This forces us to explicitly specify the <span class="s22">any </span>type where we want to use it. This forces us to think about our use of <span class="s22">any </span>and whether we really need it.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s explore this with an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l31"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add a <span class="s22">doSomething </span>method to our <span class="s22">OrderDetail </span>class that has a parameter called <span class="s22">input </span>with no type annotation:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export class OrderDetail {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">doSomething(input) { input.something(); return input.result;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s do a compilation with the <span class="s22">--noImplicitAny </span>flag in the Terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc orderDetail --noImplicitAny</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The compiler outputs the following error message because we haven&#39;t explicitly said what type the <span class="s22">input </span>parameter is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">orderDetail.ts(14,15): error TS7006: Parameter &#39;input&#39; implicitly has an &#39;any&#39; type.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can fix this by adding a type annotation with <span class="s22">any </span>or, better still, something more specific:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">doSomething(input<span class="s21">: {something: () =&gt; void, result: string}</span>) { input.something();</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return input.result;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">If we do a compilation with <span class="s22">--noImplicitAny </span>again, the compiler is happy.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark54">--noImplicitReturns</a><a name="bookmark162">&zwnj;</a><a name="bookmark163">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 157%;text-align: left;">This ensures we return a value in all branches of a function if the return type isn&#39;t <span class="s22">void</span>. Let&#39;s see this in action with an example:</p><ol id="l32"><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In our <span class="s22">OrderDetail </span>class, let&#39;s say we have the following implementation for our <span class="s22">getTotal </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">getTotal(discount: number): number { if (discount) {</p><p class="s12" style="padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">// We forgot about this branch!</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We&#39;ve forgotten to implement the branch of code that deals with the case where there is no discount. If we compile the code without the <span class="s22">--noImplicitReturns </span>flag, it compiles fine:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc orderDetail</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">However, let&#39;s see what happens if we compile the code with the <span class="s22">-- noImplicitReturns </span>flag:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc orderDetail <span class="s21">--noImplicitReturns</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We get the following error, as expected:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">orderDetail.ts(9,31): error TS7030: Not all code paths return a value.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 11pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark55">--sourceMap</a><a name="bookmark164">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">When this is set, <span class="s22">*.map </span>files are generated during the transpilation process. This will allow us to debug the TypeScript version of the program (rather than the transpiled JavaScript). So, this is generally switched on during development.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark56">--moduleResolution</a><a name="bookmark165">&zwnj;</a><a name="bookmark166">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">This tells the TypeScript compiler how to resolve modules. This can be set to <span class="s22">classic </span>or <span class="s22">node</span>. If we are using ES6 modules, this defaults to <span class="s22">classic</span>, which means the TypeScript compiler struggles to find third-party packages such as Axios. So, we can explicitly set this to <span class="s22">node </span>to tell the compiler to look for modules in <span class="s22">&quot;node_modules&quot;</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark57">tsconfig.json</a><a name="bookmark167">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">As we have seen, there are lots of different switches that we can apply to the compilation process, and repeatedly specifying these on the command line is a little clunky. Luckily, we can specify these options in a file called <span class="s22">tsconfig.json</span>. The compiler options we have looked at in previous sections are defined in a <span class="s22">compilerOptions </span>field without the <span class="s22">&quot;--&quot; </span>prefix.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s take a look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l33"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a <span class="s22">tsconfig.json </span>file with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;compilerOptions&quot;: { &quot;target&quot;: &quot;esnext&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;outDir&quot;: &quot;dist&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;module&quot;: &quot;es6&quot;, &quot;moduleResolution&quot;: &quot;node&quot;, &quot;sourceMap&quot;: true, &quot;noImplicitReturns&quot;: true, &quot;noImplicitAny&quot;: true</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s run a compile without specifying the source file and any flags:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The compilation will run fine, with the transpiled JavaScript being output to the <span class="s22">dist</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">folder along with a source map file.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark58">Specifying files for compilation</a><a name="bookmark168">&zwnj;</a><a name="bookmark169">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">There are several ways to tell the TypeScript compiler which files to process. The simplest method is to explicitly list the files in the <span class="s22">files </span>field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&quot;compilerOptions&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&quot;files&quot;: [&quot;product.ts&quot;, &quot;orderDetail.ts&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">However, that approach is difficult to maintain as our code base grows. A more maintainable approach is to define file patterns for what to include and exclude with the <span class="s22">include </span>and <span class="s22">exclude </span>fields.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The following example looks at the use of these fields:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l34"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add the following <span class="s22">include </span>fields, which tell the compiler to compile TypeScript files found in the <span class="s22">src </span>folder and its subfolders:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;compilerOptions&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;include&quot;: [&quot;src/**/*&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">At the moment, our source files aren&#39;t in a folder called <span class="s22">src</span>, but let&#39;s run a compile anyway:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">As expected, we get <span class="s22">No inputs were found in the config file... </span>from the compiler.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s create an <span class="s22">src </span>folder and move <span class="s22">orderDetail.ts </span>into this folder. If we do a compile again, it will successfully find the files and do a compilation.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, we have lots of options for adapting the TypeScript compiler to our particular situation. Some options, such as <span class="s22">--noImplicitAny</span>, force us to write good TypeScript code. We can take the checks on our code to the next level by introducing linting into our project, which we&#39;ll look at in the next section.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark59">TypeScript linting</a><a name="bookmark170">&zwnj;</a><a name="bookmark171">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">As we have seen, the compiler does lots of useful checks against our TypeScript code to help us write error-free code. We can take this a step further and lint the code to help us make our code even more readable and maintainable. TSLint is a linter that is very popular in TypeScript projects, and we will explore it in this section.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 155%;text-align: left;"><a href="https://palantir.github.io/tslint/" class="s20" target="_blank" name="bookmark60">The home page for TSLint is at </a><a href="https://palantir.github.io/tslint/" class="a" target="_blank">https://palantir.github.io/tslint/</a>. We&#39;ll install TSLint in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark172">Installing TSLint</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll install TSLint in this section, along with a Visual Studio Code extension that will highlight linting problems right in the code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l35"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s install TSLint globally via <span class="s22">npm</span>, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install -g tslint</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Now, we can open Visual Studio Code and go to the extensions area (<i>Ctrl + Shift</i></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;"><i>+ X</i>) and type <span class="s22">tslint </span>in the search box at the top-left. The extension is called TSLint and was published by egamma:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="121" alt="image" src="Learn+React+with+TypeScript+3-2/Image_099.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark173">We need to click the </a><b>Install </b>option to install the extension.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">After it has been installed, we&#39;ll need to reload Visual Studio Code for the extension to become enabled.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark61">Now that this extension is installed, along with TSLint globally, linting errors will be highlighted right in our code, as we&#39;ll see in the following sections.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark174">Configuring rules</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The rules that <span class="s22">tslint </span>uses when checking our code are configurable in a file called</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">tslint.json<span class="p">. In order to explore some of the rules, we first need a TypeScript file:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l36"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">So, let&#39;s create a file called <span class="s22">orderDetail.ts </span>with the following content in Visual Studio Code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface Product { name: string;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">unitPrice: number;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export class OrderDetail { product: Product; quantity: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">getTotal(discount: number): number {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now create a <span class="s22">tslint.json </span>file. We define the rules we want to implement in a <span class="s22">rules </span>field. Let&#39;s add the following rule:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;rules&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;member-access&quot;: true</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;"><a href="https://palantir.github.io/tslint/rules/" class="s20" target="_blank" name="bookmark175">A full list of the rules can be found at: </a><a href="https://palantir.github.io/tslint/rules/" class="a" target="_blank">https://palantir.github.io/tslint/ rules/</a>. The <span class="s22">member-access </span>rule forces us to explicitly declare the access modifier for classes. We haven&#39;t explicitly defined the property and method access modifiers in the <span class="s22">OrderDetail </span>class because they are <span class="s22">public </span>by default. So, with our linting rule in place, Visual Studio Code will highlight the lack of access modifiers to us:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="234" alt="image" src="Learn+React+with+TypeScript+3-2/Image_100.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">As we put a <span class="s22">public </span>access modifier in front of the properties and method, the warnings go away:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 111%;text-align: justify;">export class OrderDetail { <span class="s21">public </span>product: Product; <span class="s21">public </span>quantity: number;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">public <span class="s12">getTotal(discount: number): number {</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: justify;">const priceWithoutDiscount = this.product.unitPrice * this.quantity;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: justify;">const discountAmount = priceWithoutDiscount * discount; return priceWithoutDiscount - discountAmount;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">The <span class="s22">member-access </span>rule forces us to write more code <span class="s23">– </span>how can this be a good thing? The rule is useful if you&#39;re reading the code and don&#39;t know TypeScript well enough to understand that class members without access modifiers are public. So, it&#39;s great if our team consists of developers who don&#39;t know TypeScript that well yet, but not necessarily for an experienced team of TypeScript developers.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark62">Lots of the </a><span class="s22">tslint </span>rules are like <span class="s22">member-access </span><span class="s23">– </span>in some teams, they will work well and in others, they don&#39;t really add value. This is why rules are configurable!<a name="bookmark176">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark177">Built-in rules</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">tslint <span class="p">has a handy collection of built-in rulesets that can be used. We can use these by specifying the ruleset name in the </span>extends <span class="p">field. We can use multiple rulesets by putting all their names in the array:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l37"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s adopt the opinionated set of rules that <span class="s22">tslint </span>ships with, called <span class="s22">&quot;tslint:recommended&quot;</span>. So, in our <span class="s22">tslint.json </span>file, let&#39;s remove the <span class="s22">rules </span>field and add an <span class="s22">extends </span>field, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We immediately get lint errors when <span class="s22">tslint.json </span>is saved. The error is complaining about the lack of an <span class="s22">I </span>prefix on our <span class="s22">Product </span>interface. The logic behind the rule is that, while reading code, if a type starts with an <span class="s22">I</span>, we immediately know that it is an interface.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s pretend that this rule isn&#39;t valuable to us. We can override this rule from <span class="s22">&quot;tslint:recommended&quot; </span>in the <span class="s22">&quot;rules&quot; </span>field. The rule is called <span class="s22">&quot;interface- name&quot;</span>. So, let&#39;s override this to <span class="s22">false</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;], &quot;rules&quot;: {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&quot;interface-name&quot;: false</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">When <span class="s22">tslint.json </span>is saved, the linting errors immediately go away.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark63">Excluding files</a><a name="bookmark178">&zwnj;</a><a name="bookmark179">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can exclude files from the linting process. This is useful for excluding third-party code. We do this by specifying an array of files in an <span class="s22">exclude </span>field in the <span class="s22">linterOptions </span>field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;],</p><p class="s21" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">&quot;linterOptions&quot;: {</p><p class="s21" style="padding-left: 29pt;text-indent: 0pt;text-align: left;">&quot;exclude&quot;: [&quot;node_modules/**/*.ts&quot;]</p><p class="s21" style="padding-left: 29pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The preceding configuration excludes third-party <span class="s22">node </span>packages from the linting process.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;"><a name="bookmark64">Now that we&#39;ve added TSLint to our tool belt, we are going to add another tool that will automatically format our code for us. This will help our code adhere to some of the code formattings TSLint rules.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark180">Code formatting</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">In this section, we are going to install another extension in Visual Studio Code, called Prettier, which will automatically format our code. As well as putting a stop to all the ongoing debates over styles, it will help us adhere to some of the TSLint rules:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l38"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s open Visual Studio Code, go to the <b>Extensions </b>area, and type <b>prettier </b>in the search box. The extension is called <b>Prettier - Code formatter </b>and was published by Esben Petersen:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="557" height="101" alt="image" src="Learn+React+with+TypeScript+3-2/Image_101.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark181">We need to click the </a><b>Install </b>option to install the extension.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">After it has been installed, we&#39;ll need to reload Visual Studio Code for the extension to become enabled.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">The last step is to make sure the <b>Format on Save </b>option is ticked in <b>User Settings</b>. Press <i>Ctrl </i>+<i>, </i>(comma) to open the settings screen and type <b>Format On Save </b>in the search box to find the setting. If the setting isn&#39;t ticked, then tick it:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="566" height="107" alt="image" src="Learn+React+with+TypeScript+3-2/Image_102.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark65">Now that this extension is installed, when we save our TypeScript code, it will automatically be formatted nicely for us.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark182">Summary</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">At the start of this chapter, there was a section on why we would use TypeScript to build a frontend. We now have first-hand experience of TypeScript catching errors early and giving us productivity features such as IntelliSense. We learned that TypeScript is just an extension of JavaScript. So, we get to use all of the features in JavaScript plus additional stuff from TypeScript. One of these additional things is type annotations, which help the compiler spot errors and light up features such as code navigation in our code editor.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We haven&#39;t covered everything about types yet, but we have enough knowledge to build fairly complex TypeScript programs now. Classes, in particular, allow us to model complex real-world objects nicely. We learned about modules and how they keep us out of that dangerous global scope. Modules allow us to structure code nicely and make it reusable.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can even use these if we need to support IE, because of that magical TypeScript compiler.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We learned a fair bit about the TypeScript compiler and how it can work well in different use cases because it is very configurable. This is going to be important for when we start to use TypeScript with React later in the book.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">TSLint <span class="p">and </span>Prettier <span class="p">were the icings on the cake. It&#39;s down to us and our team to debate and decide the TSLint rules we should go with. The benefit of both these tools is that they force consistency across our code base, which makes it more readable.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark66">Now that we understand the basics of TypeScript, we&#39;ll dive into the new features that have been added in TypeScript 3.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark183">Questions</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Here are some questions to test what you have learned in this first chapter. The answers can be found in the appendix.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Good luck!</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l39"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What are the 5 primitive types?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">What would the inferred type be for the <span class="s22">flag </span>variable be in the following code?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">const flag = false;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What&#39;s the difference between an interface and a type alias?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">What is wrong with the following code? How could this be resolved?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class Product {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">constructor(public name: string, public unitPrice: number) {}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let table = new Product(); table.name = &quot;Table&quot;; table.unitPrice = 700;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we want our TypeScript program to support IE11, what should the compiler<span class="s22">-- target </span>option be?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Is it possible to get the TypeScript compiler to transpile ES6 <span class="s22">.js </span>files? If so, how?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we prevent <span class="s22">console.log() </span>statements from getting into our code?</p></li></ol><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark67">Further reading</a><a name="bookmark184">&zwnj;</a></h3><p class="s12" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="http://www.typescriptlang.org/" class="a" target="_blank">http://www.typescriptlang.org</a> <span class="p">has great documentation on TypeScript. It is worth looking at the following pages of this site to cement your knowledge, or using them as a quick reference guide:</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_103.png"/></span></p><p class="s9" style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Basic types<a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" class="s20" target="_blank">: </a><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/basic-types. </a><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_104.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_105.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_106.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_107.png"/></span></p><p class="s9" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 107%;text-align: left;">Interfaces<a href="https://www.typescriptlang.org/docs/handbook/interfaces.html" class="s20" target="_blank">: </a><a href="https://www.typescriptlang.org/docs/handbook/interfaces.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/interfaces.</a><span class="s12">html </span>Classes<a href="https://www.typescriptlang.org/docs/handbook/classes.html" class="s20" target="_blank">: </a><a href="https://www.typescriptlang.org/docs/handbook/classes.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/classes.</a><span class="s12">html </span>Modules<a href="https://www.typescriptlang.org/docs/handbook/modules.html" class="s20" target="_blank">: </a><a href="https://www.typescriptlang.org/docs/handbook/modules.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/modules.</a><span class="s12">html </span>Compiler Options<a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" class="s20" target="_blank">: </a><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/ compiler-options.</a><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The full list of <span class="s22">tslint </span><a href="https://palantir.github.io/tslint/rules/" class="s20" target="_blank">rules can be found at </a><a href="https://palantir.github.io/tslint/rules/" class="a" target="_blank">https://palantir.github.io/tslint/</a><span class="s12">rules/</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 55pt;text-indent: 0pt;text-align: left;"><a name="bookmark185">What is New in TypeScript 3</a><a name="bookmark207">&zwnj;</a><a name="bookmark208">&zwnj;</a><a name="bookmark209">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">In its six years of existence, TypeScript has continued to move forward and mature nicely. Is TypeScript 3 a significant release for React developers? What exactly are the new features that we have to add to our toolkit in TypeScript 3? These questions will be answered in this chapter, starting with the <span class="s22">tuple </span>type and how it can now be successfully used with the <b>rest </b>and <b>spread </b>JavaScript syntax, which is very popular in the React community. We&#39;ll then move on to the new <span class="s22">unknown </span>type and how it can be used as an alternative to the <span class="s22">any </span>type. Further more, we&#39;ll break TypeScript projects up into smaller projects with the new project references in TypeScript. Finally, we&#39;ll go about defining default properties in a strongly- typed React component that has improved in TypeScript 3.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">By the end of the chapter, we&#39;ll be ready to start learning how you can use TypeScript 3 to build frontends with React. In this chapter, we&#39;ll cover the following topics:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_108.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Tuples</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_109.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_110.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_111.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark186">The unknown type Project references Default JSX properties</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 12pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark210">Technical requirements</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark69" class="s20">In this chapter, we will use the same technologies as in </a><span class="s12">Chapter 1</span>, <i>TypeScript Basics</i>:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_112.png"/></span></p><p class="s9" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;">TypeScript playground<a href="https://www.typescriptlang.org/play/" class="s20" target="_blank">: This is a website at </a><a href="https://www.typescriptlang.org/play/" class="a" target="_blank">https://www.typescriptlang.org/ </a><span class="s12">play/</span><span class="p">, which allows us to play around with and understand the features in TypeScript without installing it.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_113.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. You can install them from </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/</a><span class="s12">download/</span><span class="p">. If you already have these installed, make sure </span>npm <span class="p">is at least version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_114.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark211"><b>TypeScript</b></a>: This can be installed via <span class="s22">npm</span>, entering the following command in a terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install -g typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_115.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">It is important that we are using TypeScript 3 in this chapter. You can check your TypeScript version by using the following command in a terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc -v</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If you need to upgrade to the latest version, you can run the following command:</p><p class="s21" style="padding-top: 8pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install -g typescript@latest</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_116.png"/></span></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/02-WhatsNewInTS3" class="s20" target="_blank">All the code snippets in this chapter can be found at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/02-WhatsNewInTS3" class="a" target="_blank">https://github.com/ carlrip/LearnReact17WithTypeScript/tree/master/02-</a>WhatsNewInTS3<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_117.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code. This one can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We will also need the TSLint (by egamma) and Prettier (by Estben Petersen) extensions installed in Visual Studio Code.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark187">Tuples</a><a name="bookmark212">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Tuples have had a few enhancements in TypeScript 3, so that they can be used with the popular <span class="s22">rest </span>and <span class="s22">spread </span>JavaScript syntax. Before we get into the specific enhancements, we&#39;ll go through what tuples are, along with what the <span class="s22">rest </span>and <span class="s22">spread </span>syntax is. A tuple is like an array but the number of elements are fixed. It&#39;s a simple way to structure data and use some type safety.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s have a play with tuples:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l40"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In the TypeScript playground, let&#39;s enter the following example of a tuple variable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">let product: [string, number];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ve initialized a <span class="s22">product </span>variable to a tuple type with two elements. The first element is a string and the second a number.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can store a product name and its unit price in the <span class="s22">product </span>variable on the next line, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">product = [&quot;Table&quot;, 500];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to store the product name and unit price the other way around:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">product = [500, &quot;Table&quot;];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">Not surprisingly, we get a compilation error. If we hover over <span class="s22">500</span>, the compiler quite rightly complains that it was expecting a string. If we hover over <span class="s22">&quot;Table&quot;</span>, the compiler complains that it expects a number:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 22pt;text-indent: 0pt;text-align: left;"><span><img width="524" height="106" alt="image" src="Learn+React+with+TypeScript+3-2/Image_118.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: justify;">So, we do get type safety, but tuples tell us nothing about what should be in the elements. So, they are nice for small structures or structures where the elements are obvious.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">The following examples are arguably fairly readable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let flag: [string, boolean]; flag = [&quot;Active&quot;, false]</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let last3Scores: [string, number, number, number] last3Scores = [&quot;Billy&quot;, 60, 70, 75];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let point: [number, number, number]; point = [100, 200, 100];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">However, the following example is not so readable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let customer: [string, number, number]; customer = [&quot;Tables Ltd&quot;, 500100, 10500];</p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">What exactly do those last two numbers represent?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;"><a name="bookmark213">We can access items in a tuple in the same way as an array, by using the element&#39;s index. So, let&#39;s access the product name and unit price in our </a><span class="s22">product </span>variable in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let product: [string, number]; product = [&quot;Table&quot;, 500]; console.log(product[0]); console.log(product[1]);</p><p style="padding-top: 7pt;padding-left: 44pt;text-indent: 0pt;text-align: center;">If we run the program, we&#39;ll get <b>&quot;Table&quot; </b>and <b>500 </b>output to the console.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can iterate through elements in a tuple like we can an array, using a <span class="s22">for </span>loop or the array <span class="s22">forEach </span>function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">let product: [string, number]; product = [&quot;Table&quot;, 500];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 96pt;text-indent: -5pt;line-height: 110%;text-align: left;">for <span class="s12">(let element in product) { console.log(product[element]);</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 110%;text-align: left;">product.<span class="s21">forEach</span>(function(element) { console.log(element);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Running the program, will output <span class="s22">Table </span>and <span class="s22">500 </span>to the console twice. Notice that we don&#39;t need to add a type annotation to the <span class="s22">element </span>variable because the TypeScript compiler cleverly infers this.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;"><a name="bookmark188">So, that&#39;s the tuple type, but&#39;s what&#39;s new in TypeScript 3? The enhancements have been largely driven by the popularity of JavaScript&#39;s </a><span class="s22">rest </span>and <span class="s22">spread </span>syntax, so let&#39;s briefly cover this in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark214">JavaScript rest and spread syntax</a></h4><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_119.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">A <span class="s22">rest </span>parameter has nothing to do with <b>Representational state transfer protocol </b>(<b>REST</b>).</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In JavaScript, a <span class="s22">rest </span>parameter collects multiple arguments and condenses them into a single argument. It is called <span class="s22">rest </span>because it collects the <span class="s22">rest </span>of the arguments into a single argument.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark215">This syntax was introduced in ES6 and allows us to nicely implement functions that have an indefinite number of parameters.</a></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 157%;text-align: left;">We define a <span class="s22">rest </span>parameter with three dots preceding the parameter name. Let&#39;s go through a quick example:</p><ol id="l41"><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create a <span class="s22">logScores </span>function that takes in a <span class="s22">scores rest </span>parameter that just outputs the parameter to the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScores(...scores) { console.log(scores);</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_120.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This is pure JavaScript - we&#39;ll introduce types to <span class="s22">rest </span>parameters when we look at the new features in TypeScript 3.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can call <span class="s22">logScores </span>as follows:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">logScores(50, 85, 75);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">If we run this, we&#39;ll get an array of the three elements we passed in as parameters output to the console. So, our <span class="s22">scores </span>parameter has collected all the arguments into an array.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">spread </span>syntax is the opposite of <span class="s22">rest </span>parameters. It allows an iterable, such as <span class="s22">array</span>, to be expanded into function arguments.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l42"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s redefine our <span class="s22">logScore </span>function with specific parameters:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScore(score1, score2, score3) { console.log(score1, score2, score3);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">Note that this is still pure JavaScript <span class="s23">– </span>no types just yet!</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s define a <span class="s22">scores </span>array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const scores = [75, 65, 80];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark216">Finally, let&#39;s use the </a><span class="s22">spread </span>syntax to pass our <span class="s22">scores </span>variable into our <span class="s22">logScore </span>function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">logScore(...scores);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: justify;">If you are using the TypeScript playground, you&#39;ll get the compilation</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">error, <span class="s22">expected 3 arguments, but got 0 or more</span>. The program still runs though, because this is perfectly valid JavaScript. <span class="s22">75, 65, 80 </span>will be output to the console if we do run it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark189">In the following sections, we&#39;ll see how the new features in TypeScript 3 help us help the compiler to better understand what we are trying to do when using </a><span class="s22">rest </span>and <span class="s22">spread</span>. This will allow us to resolve the compilation errors seen in the preceding example.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark217">Open-ended tuples</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Before TypeScript 3, tuples had to have a fixed amount of elements. TypeScript 3 gives us a little more flexibility with <span class="s22">rest </span>elements. <span class="s22">rest </span>elements are similar to <span class="s22">rest </span>parameters, described in the last section, but they work with tuple element types. A <span class="s22">rest </span>element allows us to define an open-ended tuple.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Time to go through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l43"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In the TypeScript playground, let&#39;s create a tuple with the first element being a string and subsequent elements being numbers:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">type Scores = [string, <span class="s21">...number[]</span>];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We should be able to use this structure to store someone&#39;s name with an infinite amount of scores. Let&#39;s give this a go for <span class="s22">Billy </span>and three scores:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const billyScores: Scores = [&quot;Billy&quot;, 60, 70, 75];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s move on to try <span class="s22">Sally </span>and four scores:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const sallyScores: Scores = [&quot;Sally&quot;, 60, 70, 75, 70];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Both these variables compile fine, as we would expect, because we have defined the numbers as open-ended.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark190">Tuple function parameters</a><a name="bookmark218">&zwnj;</a><a name="bookmark219">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Tuple <span class="s22">function </span>parameters in TypeScript 3 allow us to create strongly-typed <span class="s22">rest</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">parameters.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Time for an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l44"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">When we first looked at <span class="s22">rest </span>parameters, we created a pure JavaScript version of <span class="s22">logScores </span>that collected an unlimited amount of arguments in a <span class="s22">scores </span>variable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScores(...scores) { console.log(scores);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">In TypeScript 3, we can now make this example strongly-typed with a tuple <span class="s22">rest</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">parameter. Let&#39;s give this a try in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">function logScores(...scores: <span class="s21">[...number[]]</span>) { console.log(scores);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s call our function with some scores:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">logScores(50, 85, 75);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We don&#39;t get a compiler error, and if we run the program, we get an array containing <span class="s22">50, 85, 75 </span>output in the console.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We can create an enhanced version of our function that uses the <span class="s22">Scores </span>type from the</p><p class="s10" style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Open-ended tuples <span class="p">section.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l45"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">The <span class="s22">function </span>will take in the name, as well as an unlimited set of scores:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">type Scores = [string, ...number[]];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logNameAndScores(...scores: Scores) { console.log(scores);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to call our function with some scores from <span class="s22">Sally</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">logNameAndScores(&quot;Sally&quot;, 60, 70, 75, 70);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">If we run the program, <span class="s22">Sally </span>and her array of scores will be output to the console.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark191">Spread expressions</a><a name="bookmark220">&zwnj;</a><a name="bookmark221">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 152%;text-align: left;">TypeScript 3 allows us to use tuples with spread expressions. Let&#39;s look at an example:</p><ol id="l46"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s go back to the problematic pure JavaScript example we looked at for using the <span class="s22">spread </span>syntax:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScore(score1, score2, score3) { console.log(score1 + &quot;, &quot; + score2 + &quot;, &quot; + score3);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 240%;text-align: left;">const scores = [75, 65, 80]; logScore(...scores);</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The TypeScript compiler raised the error <span class="s22">Expected 3 arguments, but got 0</span></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">or more<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s resolve this now with enhanced tuples in TypeScript 3. We&#39;ll start by adding types to the <span class="s22">function </span>parameters:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">function logScore(score1<span class="s21">: number</span>, score2<span class="s21">: number</span>, score3<span class="s21">: number</span>) {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">console.log(score1, score2, score3);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 38pt;text-indent: 0pt;text-align: center;">There&#39;s nothing new yet, and we&#39;re still getting the compilation error.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change the <span class="s22">scores </span>variable into a fixed tuple:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 39pt;text-indent: 0pt;text-align: center;">const scores: <span class="s21">[number, number, number] </span>= [75, 65, 80];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">That&#39;s it <span class="s23">– </span>the compilation error has gone! All we needed to do was tell the compiler how many items were in <span class="s22">scores </span>for it to successfully spread into the <span class="s22">logScore </span>function.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, in TypeScript 3, we can spread into fixed tuples. What about open-ended tuples? Let&#39;s give that a try:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 216%;text-align: left;">const scoresUnlimited: [<span class="s21">...number[]</span>] = [75, 65, 80]; logScore(...scoresUnlimited);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark222">Unfortunately, the compiler is not yet quite clever enough to let us do this. We get the compilation error Expected 3 arguments, but got 0 or more.:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 13pt;text-indent: 0pt;text-align: left;"><span><img width="549" height="150" alt="image" src="Learn+React+with+TypeScript+3-2/Image_121.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark192">Empty tuples</a><a name="bookmark223">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In TypeScript 3, we can now define an empty tuple type. Let&#39;s have a little play with this in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l47"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create the following type alias for an empty tuple:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">type Empty = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s declare a variable of this type and assign it to an empty array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">const empty: Empty = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s try to declare a variable of this type and assign it to a non-empty array:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">const notEmpty: Empty = [&quot;Billy&quot;];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">As expected, we get a compilation error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 20pt;text-indent: 0pt;text-align: left;"><span><img width="529" height="135" alt="image" src="Learn+React+with+TypeScript+3-2/Image_122.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark224">Why is an empty tuple type useful, though? On its own, it perhaps is not that useful, but it can be used as part of a union type, which we&#39;ll cover in detail later in the book. As a quick example for now, we can create a type for no more than three scores, where no scores is also acceptable:</a></p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;line-height: 22pt;text-align: left;">type Scores = [] | [number] | [number, number] | [number, number, number] const benScores: Scores = [];</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;line-height: 120%;text-align: left;">const samScores: Scores = [55]; const bobScores: Scores = [95, 75];</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">const jayneScores: Scores = [65, 50, 70];</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">const sarahScores: Scores = [95, 50, 75, 75];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">All the scores are valid except Sarah&#39;s, because four scores aren&#39;t allowed in the <span class="s22">Scores</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><a name="bookmark193">type.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark225">Optional tuple elements</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The final tuple enhancement in TypeScript 3 is the ability to have optional elements. Optional elements are specified using a <span class="s22">? </span>at the end of the element type.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look at another example using our scores theme:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l48"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a type for between one and three scores:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 84pt;text-indent: 0pt;text-align: left;">type Scores = [number, number?, number?];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, we should be able to create variables to hold between one and three scores:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const samScores: Scores = [55]; const bobScores: Scores = [95, 75];</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const jayneScores: Scores = [65, 50, 70];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">As expected, this compiles just fine.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What about four elements? Let&#39;s give this a go:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">const sarahScores: Scores = [95, 50, 75, 75];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">We get a compilation error, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 28pt;text-indent: 0pt;text-align: left;"><span><img width="509" height="166" alt="image" src="Learn+React+with+TypeScript+3-2/Image_123.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we try no elements, we again get a compilation error:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">const benScores: Scores = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">When defining optional elements in a tuple, they are restricted to the end of the tuple. Let&#39;s try to define a required element after an optional element:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 29pt;text-indent: 0pt;text-align: center;">type ProblematicScores = [number?, number?, number];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">We get a compilation error, as expected:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="73" alt="image" src="Learn+React+with+TypeScript+3-2/Image_124.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Optional elements also work in a function <span class="s22">rest </span>parameter. Let&#39;s try this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l49"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s use our <span class="s22">scores </span>type in our <span class="s22">logScores </span>function we worked with in earlier sections:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">type Scores = [number, number?, number?];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScores(...scores: Scores) { console.log(scores);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark226">If we try to pass in two scores, the code will compile just fine, because the last parameter is optional:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">logScores(45, 80);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">As expected, if we pass in four scores, we receive <span class="s22">Expected 1-3 arguments, but got 4</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">logScores(45, 70, 80, 65);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">When we have optional parameters, it is likely our function&#39;s implementation will need to know which arguments have been passed. We can use the tuple&#39;s <span class="s22">length </span>property to do this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l50"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Let&#39;s create an enhanced version of our scores logger,</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">called <span class="s22">logScoresEnhanced</span>, which thanks us if we log all <span class="s22">3 </span>scores:</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 22pt;text-align: left;">type Scores = [number, number?, number?]; function logScoresEnhanced(...scores: Scores) {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">if (scores.length === 3) {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">console.log(scores, &quot;Thank you for logging all 3 scores&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else { console.log(scores);</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s call this function with various parameters:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">logScoresEnhanced(60, 70, 75);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">logScoresEnhanced(45, 80); logScoresEnhanced(95);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we run the program, we only get thanked after the first call when we pass all three scores.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">All the enhancements to tuples in TypeScript 3 allow us to use the <span class="s22">rest </span>and <span class="s22">spread </span>syntax in a strongly-typed fashion. We&#39;ll make use of this feature later in the book, when we work with React components.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark194">The unknown type</a><a name="bookmark227">&zwnj;</a><a name="bookmark228">&zwnj;</a></h3><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">unknown <span class="p">is a new type that has been added in TypeScript 3. Before TypeScript 3, we may have used the </span>any <span class="p">type when we weren&#39;t sure of all the properties and methods in an object from a third-party library. However, when we declare a variable with the </span>any <span class="p">type, the TypeScript compiler won&#39;t do any type checking on it. The </span>unknown <span class="p">type can be used in these situations to make our code more type-safe. This is because </span>unknown <span class="p">types are type- checked. So, </span>unknown <span class="p">can often be used as an alternative to </span>any<span class="p">.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In the TypeScript playground, let&#39;s go through an example of a function using <span class="s22">any </span>and an improved version using <span class="s22">unknown</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l51"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, let&#39;s create a <span class="s22">logScores </span>function that takes in a parameter of type <span class="s22">any</span>. It logs out the <span class="s22">name </span>and <span class="s22">scores </span>properties from the argument to the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScores(scores: any) { console.log(scores.firstName); console.log(scores.scores);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s call this function with the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">logScores({ name: &quot;Billy&quot;,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">scores: [60, 70, 75]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">If we run the program, we get <span class="s22">undefined </span>followed by <span class="s22">[60, 70, 75] </span>in the console. We passed in a correct object parameter, but our function logs <span class="s22">firstName </span>instead of <span class="s22">name </span>to the console. The program compiled just fine and didn&#39;t produce an error at runtime, but didn&#39;t give the result we wanted. This is all because we told the compiler not to check any types with the <span class="s22">any </span>type.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start to create a better version of this function with the <span class="s22">unknown </span>type:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScoresBetter(scores: unknown) { console.log(scores.firstName); console.log(scores.scores);</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark229">We immediately get compiler warnings where we reference the properties in </a><span class="s22">scores</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 71pt;text-indent: 0pt;text-align: left;"><span><img width="394" height="117" alt="image" src="Learn+React+with+TypeScript+3-2/Image_125.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark195">So, the compiler is checking our </a><span class="s22">scores </span>variable now, which is great, and is even warning us about the <span class="s22">firstName </span>property. However, the <span class="s22">scores </span>property is also giving a complication error but is valid. So, how do we tell the compiler this? We need to explicitly do some type checking ourselves in our code. We&#39;ll cover a couple of ways of doing this in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark230">Type checking with a type predicate</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">One way we can perform type checking in a function is with another function that has a return type as a type predicate. Let&#39;s explore this and eventually create a new version of our <span class="s22">logScores </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l52"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, we&#39;ll define a new function called <span class="s22">scoresCheck </span>to do the necessary type checking:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const scoresCheck = ( scores: any</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">): scores is { name: string; scores: number[] } =&gt; { return &quot;name&quot; in scores &amp;&amp; &quot;scores&quot; in scores;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This takes in a <span class="s22">scores </span>parameter that has a type predicate, <span class="s22">scores is { name: string; scores: number[] }</span>, ensuring it contains the correctly typed <span class="s22">name </span>and <span class="s22">scores </span>properties. The function simply returns whether</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">scores </span>parameter contains the <span class="s22">name </span>and <span class="s22">scores </span>properties.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s use this function in our <span class="s22">logScores </span>function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logScores(scores: unknown) { if (scoresCheck(scores)) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(scores.firstName); console.log(scores.scores);</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">We immediately get the compilation error we want:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="221" alt="image" src="Learn+React+with+TypeScript+3-2/Image_126.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The type predicate, <span class="s22">scores is { name: string, scores: number[] }</span>, allows the TypeScript compiler to narrow down the type in the <span class="s22">if </span>block that logs the properties to the console. This results in <span class="s22">scores.scores </span>compiling fine, but <span class="s22">scores.firstName </span>is giving an error, which is just what we want.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The type predicate is the key bit. Without it, the TypeScript compiler will still throw errors on the valid <span class="s22">scores.scores </span>reference. Try removing the type predicate and see for yourself.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Note that we can make the predicate a little more readable with a type alias:</p><p class="s21" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">type Scores = { name: string; scores: number[] }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">const scoresCheck = ( scores: any</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 10pt;text-align: left;">): scores is <span class="s21">Scores </span>=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">return &quot;name&quot; in scores &amp;&amp; &quot;scores&quot; in scores;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark196">Using a type predicate in this way is called a type guard. There are other ways of implementing type guards, which we&#39;ll cover later in the book.</a><a name="bookmark231">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark232">Type narrowing with a type assertion</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The other way of performing type checking we are going to look at when using <span class="s22">unknown </span>is to use type assertion. Type assertion lets us tell the compiler what the type is with the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">as <span class="p">keyword.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s create yet another version of our <span class="s22">logScores </span>function as an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l53"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">First, let&#39;s create a type alias for the structure we want the function parameter to be:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">type Scores = { name: string; scores: number[]</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In our <span class="s22">logScores </span>function, we can now use the <span class="s22">as </span>keyword to tell the compiler what type to expect:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 111%;text-align: left;">function logScores(scores: unknown) { console.log((scores <span class="s21">as Scores</span>).firstName); console.log((scores <span class="s21">as Scores</span>).scores);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 9pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 28pt;text-indent: 0pt;text-align: center;">That&#39;s enough information for the compiler to pinpoint the problem:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 33pt;text-indent: 0pt;text-align: left;"><span><img width="495" height="142" alt="image" src="Learn+React+with+TypeScript+3-2/Image_127.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 93%;text-align: left;"><a name="bookmark197">The </a><span class="s22">unknown </span>type allows us to reduce our use of the <span class="s22">any </span>type and create more strongly- typed and robust TypeScript programs. We do have to write more code, though, when referencing <span class="s22">unknown </span>types. The additional code we need to write needs to check the type of the <span class="s22">unknown </span>variable so that the TypeScript compiler can be sure we are accessing valid members within it.<a name="bookmark233">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark234">Project references</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">TypeScript 3 allows TypeScript projects to depend on other TypeScript projects by allowing</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">tsconfig.json <span class="p">to reference other </span>tsconfig.json <span class="p">files.</span></p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark198">This makes it easier to split our code up into smaller projects. Our frontend code might be in TypeScript, in addition to having our backend in TypeScript. With TypeScript 3, we can have a frontend TypeScript project, a backend TypeScript project, and a shared TypeScript project that contains code that is used in both the frontend and backend. Splitting our code up into smaller projects can also can give us faster builds, because they can work incrementally.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark235">Setting up an example</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In order to explore this, we are going to work through an example of a TypeScript project referencing another project in Visual Studio Code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l54"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Firstly, let&#39;s create a new folder called <span class="s22">Shared</span>. This is going to be the project for shared code that could potentially be used in many other projects.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In our <span class="s22">Shared </span>folder, let&#39;s create the following <span class="s22">tsconfig.json </span>as a starting point:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;outDir&quot;: &quot;dist&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;module&quot;: &quot;es6&quot;, &quot;sourceMap&quot;: true, &quot;noImplicitReturns&quot;: true, &quot;noImplicitAny&quot;: true, &quot;rootDir&quot;: &quot;src&quot;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;include&quot;: [&quot;src/**/*&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create an <span class="s22">src </span>folder containing a TypeScript file called <span class="s22">utils.ts </span>with the following function, <span class="s22">randomString</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export function randomString() {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">return Math.floor((1 + Math.random()) * 0x10000).toString(16);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is a function that creates a random string of characters, as the name suggests. We are going to use this function in another project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s start to create our second project now, so go back up to the root of our solution, and create a folder called <span class="s22">ProjectA</span>.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Inside <span class="s22">ProjectA</span>, let&#39;s create the following <span class="s22">tsconfig.json </span>as a starting point:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;outDir&quot;: &quot;dist&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;module&quot;: &quot;es6&quot;, &quot;sourceMap&quot;: true, &quot;noImplicitReturns&quot;: true, &quot;noImplicitAny&quot;: true</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;include&quot;: [&quot;src/**/*&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s also create a folder called <span class="s22">src </span>in <span class="s22">ProjectA</span>, containing a TypeScript file called <span class="s22">person.ts</span>, with the following code:</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 22pt;text-align: left;">import { randomString } from &quot;../../Shared/dist/utils&quot;; class Person {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">id: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: string; constructor() {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">this.id = randomString();</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The code defines a simple class of information about a person. The unique identifier of the person is set to a random string in the constructor using the <span class="s22">randomString </span>function from our <span class="s22">Shared </span>project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark236">Let&#39;s open up the terminal, go to our </a><span class="s22">Shared </span>folder, and compile our <span class="s22">Shared</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">cd Shared tsc</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The <span class="s22">Shared </span>project compiles just fine.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to compile <span class="s22">ProjectA </span>now:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">cd ..</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">cd ProjectA tsc</p><p style="padding-top: 7pt;padding-left: 61pt;text-indent: 0pt;text-align: left;">We get a compilation error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">error TS7016: Could not find a declaration file for module &#39;../../Shared/dist/utils&#39;. &#39;.../Shared/dist/utils.js&#39; implicitly has an &#39;any&#39; type.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark199">So, we created two dependent projects, but they don&#39;t properly understand each other yet, which is why we are getting the error. We&#39;ll resolve this in the following sections, using TypeScript 3&#39;s new features for multiple projects.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark237">Referencing projects</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">The first step in setting up TypeScript 3&#39;s multiple projects feature is to reference projects using a new field called <span class="s22">references </span>in <span class="s22">tsconfig.json</span>. This field is an array of objects that specify projects to reference.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">In our working example, let&#39;s make <span class="s22">ProjectA </span>start to understand the <span class="s22">Shared </span>project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l55"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change the <span class="s22">tsconfig.json </span>in <span class="s22">ProjectA </span>to reference the <span class="s22">Shared </span>project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;compilerOptions&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;references&quot;: [</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{ &quot;path&quot;: &quot;../shared&quot; }</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_128.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we want the dependent project&#39;s generated JavaScript code to be included in the same file as the current project, we can</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">set <span class="s22">prepend </span>to <span class="s22">true </span>on the dependency.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;"><a name="bookmark238">&quot;references&quot;: [</a></p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{ &quot;path&quot;: &quot;../shared&quot;, <span class="s21">&quot;prepend&quot;: true </span>}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">]</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">We&#39;re not going to use <span class="s22">prepend </span>in our example though.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we compile <span class="s22">ProjectA </span>again, a different error is raised:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">error TS6306: Referenced project &#39;.../shared&#39; must have setting &quot;composite&quot;: true</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">The error gives a great clue as to what is wrong. We&#39;ll resolve this problem with the missing</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">composite <span class="p">setting in the next section.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark200">Additions to compiler options</a><a name="bookmark239">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Just referencing another project isn&#39;t enough for the TypeScript compiler to properly handle multiple projects. We need to add some additional compiler options in the dependent project.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">compilerOptions </span>field has a new field called <span class="s22">composite</span>, which must be set to <span class="s22">true </span>if we are using multiple projects. This ensures certain options are enabled so that this project can be referenced and built incrementally for any project that depends on it.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">When <span class="s22">composite </span>is <span class="s22">true</span>, <span class="s22">declaration </span>must also be set to <span class="s22">true</span>, forcing the corresponding <span class="s22">.d.ts </span>file to be generated, containing the project&#39;s types. This allows TypeScript to only build dependent projects when types are changed and not rebuild all the dependent projects all the time.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark240">Let&#39;s make the following changes to our working example:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l56"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s open up <span class="s22">tsconfig.json </span>in the <span class="s22">Shared </span>project and make the following changes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 111%;text-align: left;">&quot;compilerOptions&quot;: { <span class="s21">&quot;composite&quot;: true, &quot;declaration&quot;: true,</span></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 9pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">In the terminal, let&#39;s go to the <span class="s22">Shared </span>project directory and compile our <span class="s22">Shared</span></p></li></ol><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">cd ..</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">cd Shared tsc</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The project compiles okay. Let&#39;s now try to compile <span class="s22">ProjectA </span>again in the terminal:</p><p class="s21" style="padding-top: 8pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">cd ..</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">cd ProjectA tsc</p><p style="padding-top: 7pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">This time, <span class="s22">ProjectA </span>compiles just fine.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark201">So, we have successfully tied together two projects using TypeScript 3&#39;s multiple projects feature. In the next section, we&#39;ll improve the setup of our projects even more.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark241">Cross-project Go to Definition</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In order for the <b>Go to Definition </b>feature in Visual Studio Code to work across projects, we need to set the <span class="s22">declarationMap </span>setting in <span class="s22">tsconfig.json</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s continue with our multiple project example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l57"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s open <span class="s22">person.ts </span>in <span class="s22">ProjectA</span>, right-click on the <span class="s22">randomString </span>reference, and select <b>Go to Definition</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 51pt;text-indent: 0pt;text-align: left;"><span><img width="446" height="236" alt="image" src="Learn+React+with+TypeScript+3-2/Image_129.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">We are taken to the declaration file rather than the source file:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><span><img width="543" height="81" alt="image" src="Learn+React+with+TypeScript+3-2/Image_130.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We can resolve that by setting <span class="s22">declarationMap </span>in <span class="s22">tsconfig.json </span>in the</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Shared <span class="p">project:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 119%;text-align: left;">&quot;compilerOptions&quot;: { &quot;composite&quot;: true, &quot;declaration&quot;: true, <span class="s21">&quot;declarationMap&quot;: true,</span></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 8pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we compile the <span class="s22">Shared </span>project and try the <b>Go to Definition </b>feature again, we are taken to the source file, as we would want.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><a name="bookmark242">So, by setting </a><span class="s22">declarationMap </span>to <span class="s22">true </span>in the dependent project, along with <span class="s22">composite</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">and <span class="s22">declaration</span>, we get great support for multiple TypeScript projects.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark202">Build mode</a><a name="bookmark243">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The TypeScript 3 compiler includes the ability to perform smart incremental builds using the <span class="s22">--build </span>flag. Let&#39;s give this a try in our example multiple project solution:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l58"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">First, let&#39;s go to the root of the solution, open the terminal, and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc --build ProjectA --verbose</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">--verbose </span>flag tells the compiler to tell us the details of what it&#39;s doing. The messages confirm to us that it has picked up the <span class="s22">Shared </span>project as well as <span class="s22">ProjectA</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">Projects in this build:</p><ul id="l59"><li><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;text-align: left;">Shared/tsconfig.json</p></li><li><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;text-align: left;">ProjectA/tsconfig.json</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The compiler then checks each project to see if it&#39;s up to date. If the project is up to date, we get something like the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">Project &#39;Shared/tsconfig.json&#39; is up to date because newest input &#39;Shared/src/utils.ts&#39; is older than oldest output &#39;Shared/dist/utils.js&#39;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s make a change in the <span class="s22">utils.ts </span>file in the <span class="s22">Shared </span>project by adding a space somewhere, removing it, and then saving the file.</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s build <span class="s22">ProjectA </span>again:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc --build ProjectA --verbose</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">As expected, we get a message to indicate that the <span class="s22">Shared </span>project is out of date and will be rebuilt:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">Project &#39;Shared/tsconfig.json&#39; is out of date because oldest output &#39;Shared/dist/utils.js&#39; is older than newest input &#39;Shared/src/utils.ts</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">Building project &#39;.../Shared/tsconfig.json&#39;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark244">If we want to force a rebuild, even if projects are up to date, we can use the </a><span class="s22">-- force </span>flag. Let&#39;s give this a try:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">tsc --build ProjectA <span class="s21">--force </span>--verbose</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">When we do this, the compiler will still check whether projects are up to date (and tell us), but then it goes on to build each project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">So, in addition to great multiple-project support, we can speed up solution builds using the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">--build <span class="p">flag. As the solution grows over time, this becomes increasingly valuable. If ever we want to force a rebuild of a project, we can use the </span>--force <span class="p">flag along with </span>--build<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark203">Default JSX properties</a><a name="bookmark245">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">TypeScript 3 has also improved how we can set default properties on React components with <span class="s22">--strictNullChecks</span>. Before TypeScript 3, we had to set properties that had default values as optional and perform <span class="s22">null </span>checks when referencing them. We haven&#39;t introduced React yet in this book, so we&#39;ll only touch on this briefly at this point.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s look through an example to get a feel for the improvement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l60"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">The following is a React component with some default properties in TypeScript</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">2.9. The component is called <span class="s22">SplitText </span>and it takes in some text, splits it, and renders the bits that have been split in a list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">interface IProps { text: string; delimiter<span class="s21">?</span>: string;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class SplitText extends Component&lt;IProps&gt; { static defaultProps = {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">delimiter: &quot;,&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">render() {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 110%;text-align: left;">const bits = this.props.text.split(this.props.delimiter<span class="s21">!</span>); return (</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">{bits.map((bit: string) =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">&lt;li key={bit}&gt;{bit}&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const App = () =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;SplitText text=&quot;Fred,Jane,Bob&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default App;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">The component has a <span class="s22">delimiter </span>property that defaults to <span class="s22">&quot;,&quot;</span>. In TypeScript 2.9, we need to make <span class="s22">delimiter </span>an optional property, otherwise we get a compiler error if we don&#39;t specify it in the calling component (even though there is a <span class="s22">default</span>).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Also notice that we need to put a <span class="s22">! </span>after we reference <span class="s22">delimiter </span>in</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">the <span class="s22">bits </span>variable declaration. This is to tell the compiler that this will never be undefined.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Here&#39;s the component that calls <span class="s22">SplitText</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const App = () =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;SplitText text=&quot;Fred,Jane,Bob&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">Here&#39;s what it looks like when rendered:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 88pt;text-indent: 0pt;text-align: left;"><span><img width="347" height="86" alt="image" src="Learn+React+with+TypeScript+3-2/Image_131.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s look at the component in TypeScript 3:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { text: string; delimiter: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class SplitText extends React.Component&lt;IProps&gt; { static defaultProps = {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">delimiter: &quot;,&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;"><a name="bookmark246">render() {</a></p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">const bits = this.props.text.split(this.props.delimiter); return (</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">{bits.map((bit: string) =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;li key={bit}&gt;{bit}&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that we didn&#39;t need to make the <span class="s22">delimiter </span>property optional. Also notice that we didn&#39;t need to tell the compiler that <span class="s22">this.props.delimiter </span>can&#39;t be undefined.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, in summary, we don&#39;t have to fiddle around to make default properties work nicely in TypeScript 3!</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="#bookmark297" class="s20" name="bookmark204">This is our first taste of React. Don&#39;t worry if the code examples don&#39;t make much sense at this point. We&#39;ll start to learn about React components in </a><span class="s12">Chapter 3</span>, <i>Getting Started with React and TypeScript</i>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark247">Summary</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Using the <span class="s22">rest </span>and <span class="s22">spread </span>syntax is very common nowadays, particularly when building React apps. We&#39;ve seen how TypeScript 3, with the enhancement of tuples, allows us to use <span class="s22">rest </span>and <span class="s22">spread </span>in a strongly-typed fashion.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We&#39;ve also seen how we can use the <span class="s22">unknown </span>type to reduce our use of the <span class="s22">any </span>type.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">unknown </span>type does require us to write more code, but it also allows us to create a more strongly-typed, more maintainable code base.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">TypeScript has always made working with large code bases easier. With the introduction of project references, we can now split our solution into smaller projects more easily. This approach makes large solutions even more maintainable and flexible, and also yields faster build times with the new <span class="s22">--build </span>flag.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We briefly went through how using <span class="s22">defaultprops </span>in a React component has improved. We&#39;ll be using this frequently as we start to learn how to build strongly-typed React components in subsequent chapters.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark205">So, now that we are starting to get comfortable with TypeScript, in the next chapter, we&#39;ll get started with React. We&#39;ll start by learning how to create a React and TypeScript project, and then move on to how to create React and TypeScript components.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark248">Questions</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In order to cement what we have learned about TypeScript 3, have a go at the following questions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l61"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following function, which draws a point:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">function drawPoint(x: number, y: number, z: number) {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">We also have the following <span class="s22">point </span>variable:</p><p class="s12" style="padding-top: 9pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const point: [number, number, number] = [100, 200, 300];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 58pt;text-indent: 0pt;text-align: left;">How can we call the <span class="s22">drawPoint </span>function in a terse manner?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We need to create another version of the <span class="s22">drawPoint </span>function, where we can call it by passing the <i>x</i>, <i>y</i>, and <i>z </i>point values as parameters:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">drawPoint(1, 2, 3);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Internally, in the implementation of <span class="s22">drawPoint</span>, we draw the point from a tuple type <span class="s22">[number, number, number]</span>. How can we define the method parameter(s) with the required tuple?</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In your implementation of <span class="s22">drawPoint</span>, how can you make <span class="s22">z </span>in the point optional?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;"><a name="bookmark249">We have a function called </a><span class="s22">getData</span>, which calls a web API to get some data. The number of different API resources is still growing, so we&#39;ve chosen to use <span class="s22">any </span>as the return type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">function getData(resource: string): any { const data = ... // call the web API</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">if (resource === &quot;person&quot;) {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">data.fullName = `${data.firstName} ${data.surname}`;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return data;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">How can we make <span class="s22">getData </span>more type-safe by leveraging the <span class="s22">unknown </span>type?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark206">What </a><span class="s22">build </span>flag can we use to determine which projects are out of date and need to be rebuilt without doing a rebuild?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark250">Further reading</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The following links are good resources for further information on TypeScript 3.0:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_132.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://blogs.msdn.microsoft.com/typescript/2018/07/30/announcing-typescript-3-0/" class="s20" target="_blank">The Microsoft blog post that announced the TypeScript 3.0 release is worth a read: </a><a href="https://blogs.msdn.microsoft.com/typescript/2018/07/30/announcing-typescript-3-0/" class="a" target="_blank">https://blogs.msdn.microsoft.com/typescript/2018/07/30/ announcing-typescript-3-</a><a href="https://blogs.msdn.microsoft.com/typescript/2018/07/30/announcing-typescript-3-0/" target="_blank">0/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_133.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: justify;"><a href="https://www.typescriptlang.org/docs/handbook/project-references.html" class="s20" target="_blank">The TypeScript documentation has got good information on project references, which is worth looking at: </a><a href="https://www.typescriptlang.org/docs/handbook/project-references.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/ project-references.</a><a href="https://www.typescriptlang.org/docs/handbook/project-references.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;text-indent: 0pt;text-align: right;"><a name="bookmark251">Getting Started with React and</a><a name="bookmark296">&zwnj;</a><a name="bookmark297">&zwnj;</a></p><p class="s8" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">TypeScript</p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">React is a JavaScript library that helps us build the frontend of an app. It allows us to structure our apps using powerful and reusable components. It helps us manage the data that the components use, and their state, in a structured fashion. It uses something called a virtual DOM to efficiently render our frontend.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">TypeScript can work beautifully with React, giving us the ability to add static types to our React components. The types help our code editor to surface problems while we write our React components, and give us tools to safely refactor them.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">In this chapter, we&#39;ll look at two different ways to create a React and TypeScript</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">project. We&#39;ll create our first React component, which will be a confirmation dialog. Early topics we&#39;ll cover are JSX and strongly typed props. We&#39;ll look at handling the dialog&#39;s button click events.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">We&#39;ll then look at declaring and interacting with strongly typed states, which will be used to hide and show the dialog. We&#39;ll discuss component life cycle methods, and touch on the ones that have been removed in React 17.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 152%;text-align: justify;">Finally, we&#39;ll look at function components, and when these are used. In this chapter, we&#39;ll cover the following topics:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_134.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_135.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Creating a React and TypeScript project Creating a class component</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_136.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_137.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Handling class component events Class component states</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_138.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_139.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Class component life cycle methods Creating a function component</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark252">Technical requirements</a><a name="bookmark298">&zwnj;</a><a name="bookmark299">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_140.png"/></span></p><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. Install them from the following link: </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If you already have these installed, make sure </span>npm <span class="p">is at least version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_141.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We&#39;ll also need the TSLint extension (by egamma) and the Prettier extension (by Estben Petersen).</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_142.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/03-GettingStartedWithReactAndTypeScript" class="s20" target="_blank">All the code snippets in this chapter can be found online at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/03-GettingStartedWithReactAndTypeScript" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/03-GettingStartedWithReactAndTypeScript" target="_blank">/</a></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/03-GettingStartedWithReactAndTypeScript" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/03- </a>GettingStartedWithReactAndTypeScript<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_143.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Babel Repl<a href="https://babeljs.io/repl" class="s20" target="_blank">: We&#39;ll use this online tool briefly to explore JSX. This can be found at </a><span class="s12">https://babeljs.io/repl</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark253">Creating a React and TypeScript project</a><a name="bookmark300">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">There are several ways to create a React and TypeScript project. We&#39;ll start by quickly creating a project using a popular tool called <span class="s22">create-react-app</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark254">We&#39;ll then create a project in a more manual way, helping us to understand all the different pieces in play.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark301">Using create-react-app</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">create-react-app <span class="p">is a command-line tool that we can use to quickly create a React and TypeScript app with lots of useful pieces.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Open Visual Studio Code in an empty folder of your choice. Let&#39;s create an app using this tool:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l62"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We use the <span class="s22">create-react-app npm </span>package to create a React and TypeScript project by entering the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npx create-react-app my-react-ts-app --typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">npx </span>tool temporarily installs the <span class="s22">create-react-app npm </span>package and uses it to create our project.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We chose to call our project <span class="s22">my-react-ts-app</span>. We also specified <span class="s22">-- typescript</span>, which is the bit that tells the tool to set the project up with TypeScript.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The tool will take a minute or so to create your project.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Note that the version of React we use needs to be at least version <span class="s22">16.7.0- alpha.0</span>. We can check this in the <span class="s22">package.json </span>file. If the version of React in <span class="s22">package.json </span>is less that <span class="s22">16.7.0-alpha.0 </span>then we can install this version using the following command:</p><p style="padding-top: 8pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><a href="mailto:react@16.7.0-alpha.0" class="s26" target="_blank">npm install react@16.7.0-alpha.0</a></p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><a href="mailto:react-dom@16.7.0-alpha.0" class="s26" target="_blank">npm install react-dom@16.7.0-alpha.0</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">When the project is created, add TSLint as a development dependency, along with some rules that work well with React and Prettier:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">cd my-react-ts-app</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">npm install tslint tslint-react tslint-config-prettier --save- dev</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now add a <span class="s22">tslint.json </span>file, containing some rules:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 107pt;text-indent: -5pt;line-height: 120%;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint- config-prettier&quot;],</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;rules&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;ordered-imports&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;object-literal-sort-keys&quot;: false, &quot;no-debugger&quot;: false,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;no-console&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;linterOptions&quot;: { &quot;exclude&quot;: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&quot;config/**/*.js&quot;,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;node_modules/**/*.ts&quot;, &quot;coverage/lcov-report/*.js&quot;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">Here we are merging the generally recommended rules with specific ones for React and Prettier. We&#39;ve enabled the use of <span class="s22">debugger </span>and <span class="s22">console </span>statements, which will come in handy from time to time as we develop our app.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ve also suppressed the rule about the ordering of <span class="s22">import </span>statements and object literal keys, to make life easier as we copy bits of code from this book.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can now start the app running in a development server, by entering the following command:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">After a few seconds, a browser window opens, with our app running:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 111pt;text-indent: 0pt;text-align: left;"><span><img width="287" height="244" alt="image" src="Learn+React+with+TypeScript+3-2/Image_144.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Our React code is in the <span class="s22">src </span>folder.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark302">With our app still running, open the </a><span class="s22">App.tsx </span>file. You&#39;ll immediately see a linting error on the <span class="s22">render </span>method, because we haven&#39;t specified the modifier:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span><img width="472" height="119" alt="image" src="Learn+React+with+TypeScript+3-2/Image_145.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">So, let&#39;s fix that by adding <span class="s22">public </span>as the modifier:</p><p class="s12" style="padding-top: 9pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">class App extends Component {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 110%;text-align: left;">public <span class="s12">render() { return ( ... );</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">While we are still in <span class="s22">App.tsx</span>, let&#39;s change the anchor tag to the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">&lt;a className=&quot;App-link&quot; href=&quot;https://reactjs.org&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;</p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Learn React <span class="s21">and TypeScript</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/a&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Save the file, and go back to the app in the browser. The app has automatically changed, showing the new content. Nice!</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 114pt;text-indent: 0pt;text-align: left;"><span><img width="274" height="231" alt="image" src="Learn+React+with+TypeScript+3-2/Image_146.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark303">create-react-app </a><span class="p">has configured a lot of great stuff for us in our project. This is great if we just want to quickly start learning React, and skip over how the React and TypeScript code is packaged up to be served from a web server.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark255">In the next section, we&#39;ll do manually do some of what </a><span class="s22">create-react-app </span>did for us automatically. This will start to give us an understanding of what needs to happen when React and TypeScript apps are packaged up.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark304">Creating a project manually</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark256">In this section, we&#39;ll create a React and TypeScript project manually, step by step. We&#39;ll start by creating our folder structure.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark305">Creating our folder structure</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We need a folder structure that gives us decent separation between the project&#39;s configuration files, source code, and files to distribute to our web server.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">All our configuration files will go in our project route:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l63"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Open Visual Studio Code in an empty folder of your choice, and create a folder called <span class="s22">src</span>. This will hold our source code.</p></li><li><p style="padding-top: 9pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark257">Let&#39;s also create a folder called </a><span class="s22">dist</span>. This will hold the files to distribute to our web server.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark306">Creating package.json</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The <span class="s22">package.json </span>file defines our project name, description, build commands, dependent</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">npm <span class="p">modules, and much more.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Open a terminal window, and run the following command:</p><p class="s21" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">npm init</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This will prompt you for various bits of information about the project, and then create a <span class="s22">package.json </span>file containing that information.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark258">Adding TypeScript</a><a name="bookmark307">&zwnj;</a><a name="bookmark308">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="#bookmark69" class="s20">We installed TypeScript globally in </a><span class="s12">Chapter 1</span>, <i>TypeScript Basics</i>. In this section, we are going to install it locally within our project. Having TypeScript locally simplifies the build process a little bit.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can install TypeScript just within our project by running the following command in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_147.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">--save-dev </span>command marks the TypeScript dependency as being only for development purposes.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s21" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">npm install typescript --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 11pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark259">Creating tsconfig.json</a><a name="bookmark309">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a href="#bookmark69" class="s20">As outlined in </a><span class="s12">Chapter 1</span>, <i>TypeScript Basics</i>, <span class="s22">tsconfig.json </span>specifies how our TypeScript code is compiled and transpiled.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s create a new file called <span class="s22">tsconfig.json </span>in the root of our project, and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;,</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;module&quot;: &quot;es6&quot;, &quot;moduleResolution&quot;: &quot;node&quot;, &quot;lib&quot;: [&quot;es6&quot;, &quot;dom&quot;], &quot;sourceMap&quot;: true,</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;jsx&quot;: &quot;react&quot;, &quot;strict&quot;: true,</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;noImplicitReturns&quot;: true, &quot;rootDir&quot;: &quot;src&quot;,</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">&quot;outDir&quot;: &quot;dist&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;include&quot;: [&quot;**/*.ts&quot;, &quot;**/*.tsx&quot;], &quot;exclude&quot;: [&quot;node_modules&quot;]</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark260">Adding TSLint</a><a name="bookmark310">&zwnj;</a><a name="bookmark311">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="https://cdp.packtpub.com/learn_react_17_with_typescript_3/wp-admin/post.php?post=24&amp;action=edit&amp;post_24" class="s20" target="_blank">in </a><span class="s12">Chapter 1</span>, <i>TypeScript Linting</i>, introduced us to TSLint. Add it to your project as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l64"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Install TSLint by entering the following command in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">npm install tslint --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Add a basic <span class="s22">tslint.json </span>file at the root of our project, and enter the following:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint-</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">config-prettier&quot;], &quot;linterOptions&quot;: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;exclude&quot;: [&quot;node_modules/**/*.ts&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark261">Adding React with types</a><a name="bookmark312">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s add the React library to our project, by running the following command in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">npm install react react-dom</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We also want the TypeScript types for React. So, add these to our project as a development dependency, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">npm install @types/react @types/react-dom --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark262">Creating a root web page</a><a name="bookmark313">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We need an HTML page that is going to host our React app. Create a file called <span class="s22">index.html </span>in our <span class="s22">dist </span>folder, and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;!DOCTYPE html&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;html&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;head&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;meta charset=&quot;utf-8&quot;/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/head&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;body&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/body&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/html&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark314">The HTML from our React app will be injected into the </a><span class="s22">div </span>with <span class="s22">id =&quot;root&quot;</span>. All the app&#39;s JavaScript code will eventually be bundled together into a file called <span class="s22">bundle.js </span>in the <span class="s22">dist </span>folder.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Of course, neither of these exist at the moment<span class="s23">—</span>we&#39;ll do this in a later section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark263">Creating a simple React component</a><a name="bookmark315">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Let&#39;s create a very simple React component. Create a file called <span class="s22">index.tsx </span>in your <span class="s22">src</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">folder, and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">const App: React.SFC = () =&gt; { return &lt;h1&gt;My React App!&lt;/h1&gt;;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="103" alt="image" src="Learn+React+with+TypeScript+3-2/Image_148.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">The <span class="s22">tsx </span>extension distinguishes TypeScript React components from vanilla JavaScript React components, which have a</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 12pt;text-align: justify;">jsx <span class="p">extension. </span>React.SFC <span class="p">is a TypeScript type we can use for React</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: justify;">components that don&#39;t have any internal state. We&#39;ll learn more about these components later in this book, and we&#39;ll look at state later in this chapter.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Our component simply returns <span class="s22">My React App! </span>in an <span class="s22">h1 </span>tag.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The next step is to inject our React component into <span class="s22">index.html</span>. We can do that by using the <span class="s22">ReactDOM.render </span>function. <span class="s22">ReactDOM.render </span>takes in our component as the first parameter, and the HTML element to inject it into as the next element.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s add the highlighted lines into <span class="s22">index.tsx</span>:</p><p class="s12" style="padding-top: 9pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s21" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">import * as ReactDOM from &quot;react-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">const App: React.SFC = () =&gt; { return &lt;h1&gt;My React App!&lt;/h1&gt;;</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">ReactDOM.render(&lt;App /&gt;, document.getElementById(&quot;root&quot;) as HTMLElement);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now that we have a small app in place, we need to package it up. We&#39;ll cover that in the next section.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark264">Adding webpack</a><a name="bookmark316">&zwnj;</a><a name="bookmark317">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Webpack is a popular tool that we can use to bundle all our JavaScript code into the <span class="s22">bundle.js </span>file that our <span class="s22">index.html </span>is expecting.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l65"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Install webpack and its command-line interface into our project as development dependencies, by entering the following command in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install webpack webpack-cli --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Webpack also has a handy web server that we can use during development. So, let&#39;s install that as well via the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install webpack webpack-dev-server --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">There&#39;s one final task to complete before we can start configuring webpack. This is to install a webpack plugin called <span class="s22">ts-loader</span>, which will help it load our TypeScript code. Install this as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install ts-loader --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Now that we have all this webpack stuff in our project, it&#39;s time to configure it. Create a file called <span class="s22">webpack.config.js </span>in the project root, and enter the following into it:</p></li></ol><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 22pt;text-align: left;">const path = require(&quot;path&quot;); module.exports = {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">entry: &quot;./src/index.tsx&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">module: { rules: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;line-height: 120%;text-align: left;">test: /\.tsx?$/, use: &quot;ts-loader&quot;,</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">exclude: /node_modules/</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">resolve: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">extensions: [&quot;.tsx&quot;, &quot;.ts&quot;, &quot;.js&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">output: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">path: path.resolve(<u> </u>dirname, &quot;dist&quot;), filename: &quot;bundle.js&quot;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">devServer: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">contentBase: path.join(<u> </u>dirname, &quot;dist&quot;),</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;"><a name="bookmark318">compress: true, port: 9000</a></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">There&#39;s a fair bit going on here, so let&#39;s break it down:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_149.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The <span class="s22">module.exports </span>is our webpack configuration object.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_150.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">entry </span>field tells webpack where to start looking for modules to bundle. In our project, this is <span class="s22">index.tsx</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_151.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">module </span>field tells webpack how different modules will be treated. Our project is telling webpack to use <span class="s22">ts-loader </span>to handle files with <span class="s22">ts </span>and <span class="s22">tsx </span>extensions.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_152.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">resolve </span>field tells webpack how to resolve modules. In our project, we need to process <span class="s22">tsx </span>and <span class="s22">.ts </span>files, as well as the standard <span class="s22">.js </span>files.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_153.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">output </span>field tells webpack where to bundle our code. In our project, this is the file called <span class="s22">bundle.js </span>in the <span class="s22">dist </span>folder.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_154.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">devServer </span>field configures the webpack development server. We are telling it that the root of the web server is the <span class="s22">dist </span>folder, and to serve files on <span class="s22">port 9000</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark265">Project folders and files</a><a name="bookmark319">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We should now have the following folders, with the following files within them:</p><p class="s27" style="padding-top: 7pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">dist/</span></p><p class="s27" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">bundle.js</span></p><p class="s27" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">index.html</span></p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">node_modules/</span></p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">src/</span></p><p class="s27" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">index.tsx</span></p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">package.json</span></p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">tsconfig.json</span></p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">tslint.json</span></p><p class="s27" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">├─ <span class="s12">webpack.config.js</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">We are nearly ready to run our app now<span class="s23">—</span>there&#39;s just one more thing to do, as we&#39;ll discuss in the next section.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark266">Creating start and build scripts</a><a name="bookmark320">&zwnj;</a><a name="bookmark321">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are going to leverage <span class="s22">npm </span>scripts to start our app in development mode, and also to build a production version of our app:</p><ol id="l66"><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">Let&#39;s open up <span class="s22">package.json</span><span class="s23">—</span>there should be quite a bit of content in there now. We need to find the <span class="s22">scripts </span>section, which will probably have a single script called <span class="s22">test </span>in place. Add the highlighted scripts for <span class="s22">start </span>and <span class="s22">build</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;scripts&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 111%;text-align: left;">&quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot; <span class="s21">&quot;start&quot;: &quot;webpack-dev-server --env development&quot;, &quot;build&quot;: &quot;webpack --env production&quot;</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 9pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">..</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Run the following command, which produces a production version of our app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm run build</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">Now, webpack will kick in and do its stuff. If we look in the <span class="s22">dist </span>folder, eventually a file called <span class="s22">bundle.js </span>will appear. This file contains all the JavaScript minified code, including code from the React library and our simple React component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, enter the following command:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The webpack development server will start.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we browse to <span class="s22">http://localhost:9000/ </span>we&#39;ll see our web app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 129pt;text-indent: 0pt;text-align: left;"><span><img width="239" height="115" alt="image" src="Learn+React+with+TypeScript+3-2/Image_155.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark322">With our app still running, in </a><span class="s22">index.tsx</span>, let&#39;s change our <span class="s22">App </span>component to the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const App: React.SFC = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return &lt;h1&gt;My React <span class="s21">and TypeScript </span>App!&lt;/h1&gt;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we save <span class="s22">index.tsx </span>and go to the browser, we&#39;ll see that our app automatically updates with the new content:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><span><img width="341" height="126" alt="image" src="Learn+React+with+TypeScript+3-2/Image_156.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark267">We&#39;ll leave our manually-configured project there. It doesn&#39;t do as much as the </a><span class="s22">create- react-app </span>project, but we have started to gain an understanding of how React and TypeScript projects are packaged up.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark323">Creating a class component</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So far we have created some very simple components. In this section, we are going to build a component that is a little more complex, and start to get more familiar with some of the different parts of a component.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Together, we&#39;ll start to build a component called <span class="s22">Confirm </span>that will allow a user to either continue with an operation or stop.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="270" height="97" alt="image" src="Learn+React+with+TypeScript+3-2/Image_157.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="283" height="116" alt="image" src="Learn+React+with+TypeScript+3-2/Image_158.png"/></span></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Our component will look like the following screenshot when we&#39;ve finished:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;re going to use <span class="s22">create-react-app </span>to spin up a project quickly, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l67"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Open up Visual Studio Code in a folder of your choice and enter the following in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 36pt;text-indent: 0pt;text-align: center;">npx create-react-app my-components --typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">This time we chose to call our project <span class="s22">my-components</span>.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add TSLint with some rules as a development dependency to our project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">cd my-components</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">npm install tslint tslint-react tslint-config-prettier --save- dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now add a <span class="s22">tslint.json </span>file, containing the following rules:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint-</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">config-prettier&quot;], &quot;rules&quot;: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;ordered-imports&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;object-literal-sort-keys&quot;: false, &quot;no-debugger&quot;: false,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;no-console&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;linterOptions&quot;: { &quot;exclude&quot;: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;config/**/*.js&quot;, &quot;node_modules/**/*.ts&quot;, &quot;coverage/lcov-report/*.js&quot;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Fix the linting error in <span class="s22">App.tsx </span>by adding the missing access modifier on the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">render <span class="p">method:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class App extends Component {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 110%;text-align: left;">public <span class="s12">render() { return ( ... );</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark324">We can now start a development server and start our app:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Next we&#39;ll shrink and fix the app header, so that there is enough space for our confirmation component. Change the highlighted lines in <span class="s22">app.css</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">.App-logo {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">animation: App-logo-spin infinite 20s linear;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">height: 80px;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">.App-header {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">background-color: #282c34;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">height: 200px;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">display: flex;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 119%;text-align: left;">flex-direction: column; align-items: center; justify-content: center; <span class="s21">font-size: 16px;</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">color: white;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The app header should now be a little shorter.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark268">We&#39;ll keep our app running while we develop our component in the following sections.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark325">Creating a basic class component</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s look at <span class="s22">App.tsx</span>, which has been created for us. This is an example of a class component. We&#39;re going to create our own class component now. Follow these steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l68"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Create a file called <span class="s22">Confirm.tsx </span>in the <span class="s22">src </span>folder, and enter the following into it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class Confirm extends React.Component {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default Confirm;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a href="#bookmark69" class="s20">We learned all about classes in </a><span class="s12">Chapter 1</span>, <i>TypeScript Basics. </i>Here we are creating a class that extends the standard <span class="s22">Component </span>class from React. Note that we&#39;ve imported React at the top of our file, and also that we are exporting our class component using a default export at the bottom of our file.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s start to implement our <span class="s22">Confirm </span>class component now, by creating a</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">render <span class="p">method:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class Confirm extends React.Component {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">public render() { return (</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">);</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">The <span class="s22">render </span>method determines what the component needs to display. We define what needs to be displayed using JSX. In simple terms, JSX is a mix of HTML and JavaScript. We&#39;ll explore it in more detail in the next section.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">For the time being, let&#39;s enter the following in our <span class="s22">render </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;div className=&quot;confirm-wrapper confirm-visible&quot;&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-container&quot;&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-title-container&quot;&gt;</p><p class="s21" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">&lt;span&gt;This is where our title should go&lt;/span&gt;</p><p class="s21" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-content-container&quot;&gt;</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;p&gt;This is where our content should go&lt;/p&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-buttons-container&quot;&gt;</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-cancel&quot;&gt;Cancel&lt;/button&gt;</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-ok&quot;&gt;Okay&lt;/button&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">At the moment, our <span class="s22">render </span>method looks a lot more like HTML than JavaScript, apart from that funny <span class="s22">className </span>attribute<span class="s23">—</span>shouldn&#39;t that be <span class="s22">class</span>?</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll cover this and JSX in a little more detail in the next section, but before that, let&#39;s consume our <span class="s22">Confirm </span>component in the <span class="s22">App </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark326">In </a><span class="s22">App.tsx</span>, we need to import our <span class="s22">Confirm </span>component class, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import Confirm from &quot;./Confirm&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Our <span class="s22">Confirm </span>component can be referenced as <span class="s22">&lt;Confirm /&gt; </span>in JSX. So, let&#39;s add this to the JSX in <span class="s22">App.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;App&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;App-header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;Confirm /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the browser page where our app is running, it should now look like the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 112pt;text-indent: 0pt;text-align: left;"><span><img width="285" height="256" alt="image" src="Learn+React+with+TypeScript+3-2/Image_159.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are going to make our component look more like a dialog using CSS. Let&#39;s create a file called <span class="s22">Confirm.css</span>, and enter the following into it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: justify;">.confirm-wrapper { position: fixed; left: 0;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">top: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">width: 100%;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">height: 100%; background-color: gray; opacity: 0;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">visibility: hidden; transform: scale(1.1);</p><p class="s12" style="padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">transition: visibility 0s linear 0.25s, opacity 0.25s 0s, transform 0.25s;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">z-index: 1;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-visible { opacity: 1; visibility: visible; transform: scale(1);</p><p class="s12" style="padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">transition: visibility 0s linear 0s, opacity 0.25s 0s, transform 0.25s;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-container { background-color: #fff; position: absolute; top: 50%;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">left: 50%;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">transform: translate(-50%, -50%); border-radius: 0.2em;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">min-width: 300px;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-title-container { font-size: 1.3em; padding: 10px;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">border-top-left-radius: 0.2em; border-top-right-radius: 0.2em;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-content-container { padding: 0px 10px 15px 10px;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-buttons-container { padding: 5px 15px 10px 15px; text-align: right;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-buttons-container button { margin-left: 10px;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">min-width: 80px; line-height: 20px; border-style: solid;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">border-radius: 0.2em; padding: 3px 6px; cursor: pointer;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-cancel { background-color: #fff; border-color: #848e97;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;"><a name="bookmark327">.confirm-cancel:hover { border-color: #6c757d;</a></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">.confirm-ok {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">background-color: #848e97; border-color: #848e97; color: #fff;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.confirm-ok:hover { background-color: #6c757d; border-color: #6c757d;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now let&#39;s import our CSS in our <span class="s22">Confirm.tsx</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import &quot;./Confirm.css&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 37pt;text-indent: 0pt;text-align: center;">Our component in the browser page should now look like the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 142pt;text-indent: 0pt;text-align: left;"><span><img width="203" height="104" alt="image" src="Learn+React+with+TypeScript+3-2/Image_160.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, a React class component has a special method called <span class="s22">render</span>, where we define what our component displays in JSX.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark269">In the next section, we&#39;ll take a little break from our confirmation component while we learn a little more about JSX.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark328">JSX</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">As mentioned in the previous section, JSX looks a bit like HTML. We can have JSX in our JavaScript (or TypeScript) code, as we did in the last section in our <span class="s22">render </span>function. JSX isn&#39;t valid JavaScript though<span class="s23">—</span>we need a preprocessor step to convert it into JavaScript.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">We&#39;re going to use an online Babel REPL to play with JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l69"><li><p class="s12" style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;"><a href="https://babeljs.io/repl" class="s20" target="_blank">Open a browser, go to </a><a href="https://babeljs.io/repl" class="a" target="_blank">https://babeljs.io/</a>repl<span class="p">, and enter the following JSX in the left-hand pane:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">&lt;span&gt;This is where our title should go&lt;/span&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The following appears in the right-hand pane, which is what our JSX has compiled down to:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.createElement( &quot;span&quot;,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">null,</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&quot;This is where our title should go&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We can see that it compiles down to a call to <span class="s22">React.createElement</span>, which has three parameters:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_161.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The element type, which can be an HTML tag name string (such as <span class="s22">&quot;span&quot;</span>), a React component type, or a React fragment type</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_162.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_163.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">An object containing the props to be applied to the element The children for the element</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s expand our example by putting <span class="s22">div </span>tags around our <span class="s22">span</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-title-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;span&gt;This is where our title should go&lt;/span&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">This now compiles down to two calls to <span class="s22">React.createElement</span>, with</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">span <span class="p">being passed in as a child to </span>div<span class="p">:</span></p><p class="s12" style="padding-top: 9pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.createElement( &quot;div&quot;,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">{ className: &quot;confirm-title-container&quot; }, React.createElement(</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;span&quot;, null,</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&quot;This is where our title should go&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">This is starting to make sense, but so far our JSX has consisted of only HTML. Let&#39;s add some JavaScript now, by declaring a props object literal. Let&#39;s also reference the <span class="s22">title </span>prop inside the <span class="s22">span </span>using curly braces:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const props = {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">title: &quot;React and TypeScript&quot;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-title-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;span&gt;<span class="s21">{props.title}</span>&lt;/span&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">This is more interesting now. It compiles down to this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">var props = {</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">title: &quot;React and TypeScript&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">React.createElement( &quot;div&quot;,</p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;line-height: 120%;text-align: left;">{ className: &quot;confirm-title-container&quot; }, React.createElement(</p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;span&quot;, null, props.title</p><p class="s12" style="text-indent: 0pt;text-align: right;">)</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">The key point is that we can inject JavaScript into HTML by using curly braces.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">To further illustrate the point, let&#39;s empty the <span class="s22">props </span>object literal, and use a JavaScript ternary inside <span class="s22">span</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const props = {};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-title-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 106%;text-align: left;">&lt;span&gt;<span class="s21">{props.title ? props.title : &quot;React and TypeScript&quot;}</span>&lt;/span&gt;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We see that the nested call to <span class="s22">React.createElement </span>uses our ternary as the child of <span class="s22">span</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.createElement( &quot;span&quot;,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">null,</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">props.title ? props.title : &quot;React and TypeScript&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark329">So, why do we use the </a><span class="s22">className </span>attribute rather than <span class="s22">class</span>? Well, we now understand that JSX compiles down to JavaScript, and as <span class="s22">class </span>is a keyword in JavaScript, having a <span class="s22">class </span>attribute in JSX would clash. So, React uses <span class="s22">className </span>instead for CSS class references.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Now that we understand a little more about JSX, let&#39;s come back to our <span class="s22">Confirm</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><a name="bookmark270">component.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark330">Component props</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">At the moment, the title and content text for our <span class="s22">Confirm </span>component is hardcoded. Let&#39;s change these to reference properties (props) that the component takes in.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l70"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">First, we need to define a TypeScript type for our props. We&#39;ll use an interface for this preceding the <span class="s22">Confirm </span>class in <span class="s22">Confirm.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { title: string; content: string;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We can then reference the <span class="s22">IProps </span>type in angle brackets, after we reference</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">React.Component <span class="p">in the class definition:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="70" alt="image" src="Learn+React+with+TypeScript+3-2/Image_164.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;"><span class="s22">React.Component </span>is what is called a generic class. Generic classes allow types used within the class to be passed in. In our case, we have passed in our <span class="s22">IProps </span>interface. Don&#39;t worry if this doesn&#39;t make too much sense at the moment<span class="s23">—</span>we&#39;ll cover generic classes later in the book.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">class Confirm extends React.Component<span class="s21">&lt;IProps&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We get access to props in our class using <span class="s22">this.props.propName</span>. In our JSX, we can now reference props instead of hardcoding the title and content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-title-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;span&gt;<span class="s21">{this.props.title}</span>&lt;/span&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-content-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;p&gt;<span class="s21">{this.props.content}</span>&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a name="bookmark331">Note that we now have a TypeScript compilation error when we reference our</a></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Confirm <span class="p">component in </span>App.tsx<span class="p">. This is because our component now expects </span>title <span class="p">and </span>content <span class="p">attributes, as follows:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="228" alt="image" src="Learn+React+with+TypeScript+3-2/Image_165.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the <span class="s22">title </span>and <span class="s22">content </span>attributes:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Confirm</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">title=&quot;React and TypeScript&quot;</p><p class="s21" style="padding-left: 91pt;text-indent: 10pt;line-height: 106%;text-align: left;">content=&quot;Are you sure you want to learn React and TypeScript?&quot;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark271">The compilation error now goes away, and if we look at the browser, our component is rendered exactly as it was before we implemented props.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark332">Optional props</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="#bookmark69" class="s20">Interface props can be optional, as we discovered in </a><span class="s12">Chapter 1</span>, <i>TypeScript Basics</i>. So, we can also use this mechanism to add optional props to a React component.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s add some optional props to allow the button captions to be configurable on our confirmation component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l71"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Add some additional optional props called <span class="s22">cancelCaption </span>and <span class="s22">okCaption </span>to our interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { title: string;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 111%;text-align: left;">content: string; <span class="s21">cancelCaption?: string; okCaption?: string;</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="71" alt="image" src="Learn+React+with+TypeScript+3-2/Image_166.png"/></span></p><p style="padding-left: 45pt;text-indent: 0pt;line-height: 94%;text-align: left;">We put a <span class="s22">? </span>before the type annotation to denote that the prop is optional. Note also that we don&#39;t get a compilation error in <span class="s22">App.tsx</span>, where we reference, <span class="s22">Confirm </span>because we are not required to enter these as attributes on <span class="s22">Confirm</span>.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 9pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s reference these props in our JSX now, replacing the hardcoded captions:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-buttons-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-cancel&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">{this.props.cancelCaption}</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-ok&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">{this.props.okCaption}</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="296" height="100" alt="image" src="Learn+React+with+TypeScript+3-2/Image_167.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="310" height="123" alt="image" src="Learn+React+with+TypeScript+3-2/Image_168.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If we look at the browser now, we have no button captions in our running app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is because we haven&#39;t supplied these values when we reference <span class="s22">Confirm </span>in <span class="s22">App.tsx</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In the next section, we&#39;ll resolve this issue by adding some default values for <span class="s22">cancelCaption </span>and <span class="s22">okCaption</span>.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark272">Default prop values</a><a name="bookmark333">&zwnj;</a><a name="bookmark334">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Default values can be added to component props when the component is initialized. These can be implemented using a static object literal called <span class="s22">defaultProps</span>.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s make use of this feature in our <span class="s22">Confirm </span>component, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l72"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Create some default values for <span class="s22">cancelCaption </span>and <span class="s22">okCaption </span>in our class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 36pt;text-indent: 0pt;text-align: center;">class Confirm extends React.Component&lt;IProps&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">public static defaultProps = { cancelCaption: &quot;Cancel&quot;, okCaption: &quot;Okay&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">public render() { ... }</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If we look at our running app again, we have button captions once more.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s finish this section by overriding the defaults, and supplying specific attributes for these captions in <span class="s22">App.tsx</span>, as follows:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Confirm</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">title=&quot;React and TypeScript&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">content=&quot;Are you sure you want to learn React and TypeScript?&quot;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">cancelCaption=&quot;No way&quot; okCaption=&quot;Yes please!&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Our running app should now look like the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 105pt;text-indent: 0pt;text-align: left;"><span><img width="303" height="125" alt="image" src="Learn+React+with+TypeScript+3-2/Image_169.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark335">Optional props with default values can make components easier to consume, because the most common configurations can be automatically set up without needing to specify anything.</a></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark273">So, our </a><span class="s22">Confirm </span>component is nice and flexible now, but the buttons don&#39;t do anything yet. We&#39;ll tackle this in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark336">Handling class component events</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark274">Events exist in many programming languages. They allow us to specify logic to be executed, depending on how a user interacts with our app.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark337">Basic event handlers</a></h4><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_170.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can see a list of all the available events with their corresponding types in the <span class="s22">index.d.ts </span>file in the <span class="s22">node_modules/@types/react </span>folder.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">All the native JavaScript events are available for us to handle in JSX. JSX allows us to do this with props that call functions. The prop name is derived by prefixing the native event name with <span class="s22">on</span>, using camel case. So the prop name for the <span class="s22">click </span>event is <span class="s22">onClick </span>in JSX.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We need to be able to control what the buttons do in our <span class="s22">Confirm </span>component. Follow these steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l73"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">The first step is handling the <span class="s22">click </span>events on those buttons. Let&#39;s set the</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><span class="s22">onClick </span>prop on the <b>Okay </b>button, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-ok&quot;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">onClick={this.handleOkClick}<span class="s12">&gt;...&lt;/button&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">So, we&#39;re telling the button to call a <span class="s22">handleOkClick </span>method within our <span class="s22">Confirm</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">class when it is clicked.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, let&#39;s create the <span class="s22">handleOkClick </span>method:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleOkClick() { console.log(&quot;Ok clicked&quot;);</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark338">Switch to the browser with our app running, and click the </a><b>Yes please! </b>button. If we look in the console, we should see <b>Ok clicked </b>displayed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="33" alt="image" src="Learn+React+with+TypeScript+3-2/Image_171.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;"><a name="bookmark275">As we can see, it is pretty straightforward to handle events, using mechanisms we are already familiar with. There is actually a problem with our </a><span class="s22">handleOkClick </span>method, though. We&#39;ll drill into this and resolve the issue in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark339">The this problem</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: justify;">Our event handler suffers from JavaScript&#39;s classic <span class="s22">this </span>problem. We aren&#39;t currently referencing <span class="s22">this </span>in our event handler, which is why the problem hasn&#39;t surfaced yet.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s expose the problem with the <span class="s22">handleOkClick </span>method, so that we can better understand what&#39;s happening:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l74"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Log the component props to the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 115%;text-align: left;">private handleOkClick() { console.log(&quot;Ok clicked&quot;, <span class="s21">this.props</span>);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="525" height="175" alt="image" src="Learn+React+with+TypeScript+3-2/Image_172.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="569" height="195" alt="image" src="Learn+React+with+TypeScript+3-2/Image_173.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Now, try clicking the <b>Yes please! </b>button again. The following error appears:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><a name="bookmark340">The problem is that </a><span class="s22">this </span>doesn&#39;t reference our class in the event handler<span class="s23">—</span>it is</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">undefined <span class="p">instead.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_174.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">Arrow function expressions have shorter syntax than function expressions. They also don&#39;t create their own <span class="s22">this</span><span class="s23">—</span>so they are a great solution to the <span class="s22">this </span>problem.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">One solution is to change the <span class="s22">handleOkClick </span>method to be an arrow function.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s convert our method to an arrow function, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">private handleOkClick = () =&gt; { console.log(&quot;Ok clicked&quot;, this.props);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now try clicking the <b>Yes please! </b>button again. We should see props successfully output to the console.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Moving on, let&#39;s implement a click handler on the <b>Cancel </b>button now. First, we need to reference a handler on the <b>Cancel </b>button&#39;s <span class="s22">onClick </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-cancel&quot;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">onClick={this.handleCancelClick}<span class="s12">&gt;...&lt;/button&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Now we&#39;ll create the <span class="s22">handleCancelClick </span>arrow function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleCancelClick = () =&gt; { console.log(&quot;Cancel clicked&quot;, this.props);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">To summarize, in order to avoid the <span class="s22">this </span>problem, we can use arrow functions to implement event handlers.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Next, we want the consumer of the component to be able to execute some logic when the buttons are clicked. We&#39;ll cover how to do this in the next section.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark276">Function props</a><a name="bookmark341">&zwnj;</a><a name="bookmark342">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">In the previous section, we saw how props can be set for functions with our <span class="s22">onClick </span>event handlers. In this section, we&#39;ll implement our own function props, so that the consumer of our component can execute some logic when the <b>Ok </b>and <b>Cancel </b>buttons are pressed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l75"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s implement these two additional props on our interface. The function will take no parameters, and not return anything. So, the type is <span class="s22">() =&gt; void</span>, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">interface IProps { title: string; content: string;</p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;line-height: 113%;text-align: left;">cancelCaption?: string; okCaption?: string; <span class="s21">onOkClick: () =&gt; void; onCancelClick: () =&gt; void;</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The props are required, so, we immediately get a compilation error in <span class="s22">App.tsx</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">when we reference the <span class="s22">Confirm </span>component. We&#39;ll fix this a little later.</p></li><li><p style="padding-top: 9pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Next, let&#39;s invoke our function props when the buttons are clicked, instead of logging messages to the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">private handleCancelClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">this.props.onCancelClick();</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">private handleOkClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">this.props.onOkClick();</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We&#39;ll fix the compilation error now, by implementing arrow function handlers for these props in <span class="s22">App.tsx</span>. First let&#39;s create the arrow function handlers:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">private handleCancelConfirmClick = () =&gt; { console.log(&quot;Cancel clicked&quot;);</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">private handleOkConfirmClick = () =&gt; { console.log(&quot;Ok clicked&quot;);</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark343">Now we can reference these functions we where consume the </a><span class="s22">Confirm</span></p></li></ol><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Confirm</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">onCancelClick={this.handleCancelConfirmClick} onOkClick={this.handleOkConfirmClick}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go back to our app, we&#39;ll see the compilation errors have been resolved. If we click the <b>Ok </b>and <b>Cancel </b>buttons, we get the message output to the console as expected:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="186" alt="image" src="Learn+React+with+TypeScript+3-2/Image_175.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;"><a name="bookmark277">At the moment, our buttons still don&#39;t do anything other than log a message to the console. We want the confirmation dialog to close when we click either button. We&#39;ll implement this in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark344">Class component states</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">State is an object that determines how the component behaves and renders. We need to introduce state into our app, in order to manage whether our confirmation dialog is open or closed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">This particular state is going to live and be managed within the <span class="s22">App </span>component, and be passed in as a prop to the <span class="s22">Confirm </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l76"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, create an <span class="s22">open </span>prop in the <span class="s22">Confirm </span>component by adding it to its props interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 114%;text-align: left;">interface IProps { <span class="s21">open: boolean; </span>title: string; content: string;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">cancelCaption?: string; okCaption?: string; onOkClick: () =&gt; void; onCancelClick: () =&gt; void;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;re going to use the <span class="s22">open </span>prop in the <span class="s22">render </span>function to determine whether the dialog is visible or not. The <span class="s22">confirm-visible </span>CSS class makes</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the dialog visible.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, on the outermost <span class="s22">div</span>, let&#39;s use a JavaScript ternary expression in the <span class="s22">className </span>attribute to only include <span class="s22">confirm-visible </span>when the <span class="s22">open </span>prop is <span class="s22">true</span>, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 106%;text-align: left;">className=<span class="s21">{ this.props.open</span></p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;line-height: 10pt;text-align: left;">? &quot;confirm-wrapper confirm-visible&quot;</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">: &quot;confirm-wrapper&quot;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We now have a compilation error in <span class="s22">App.tsx </span>because we haven&#39;t specified the</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">open <span class="p">attribute where we use </span>Confirm<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark345">Before we start to create and manage state within </a><span class="s22">App.tsx</span>, let&#39;s simply pass</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">false <span class="p">in the </span>open <span class="p">attribute in </span>Confirm<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Confirm</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">open={false}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">title=&quot;React and TypeScript&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">content=&quot;Are you sure you want to learn React and TypeScript?&quot;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">cancelCaption=&quot;No way&quot; okCaption=&quot;Yes please!&quot;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">onCancelClick={this.handleCancelConfirmClick} onOkClick={this.handleOkConfirmClick}</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark278">If we look at the app in the browser now, the compilation error will have disappeared, and our confirmation dialog will be closed.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark346">Defining state type</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s create a state in <span class="s22">App.tsx</span>, and properly manage whether the confirmation dialog is open or closed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l77"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, let&#39;s create an interface for the state above the <span class="s22">App </span>class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">interface IState { confirmOpen: boolean;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We then tell the <span class="s22">App </span>component about the state type, which we can do using the second generic parameter of <span class="s22">React.Component</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_176.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have used <span class="s22">{} </span>as the props type because there are no props for this component.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">class App extends React.Component&lt;<span class="s21">{}, IState</span>&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark279">Initializing the state</a><a name="bookmark347">&zwnj;</a><a name="bookmark348">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now that we have specified that our component has a state, we need to initialize it. We initialize component state in the class constructor.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l78"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a constructor, and initialize the <span class="s22">confirmOpen </span>state to be <span class="s22">true</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">constructor(props: {}) { super(props); this.state = {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">confirmOpen: true,</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We call <span class="s22">super </span>because our class extends <span class="s22">React.Component</span>.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">The state is held in a private prop in a component class. In the constructor, we can set the state to our required object literal, which in our case has <span class="s22">confirmOpen </span>set to <span class="s22">true</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then use this state when we reference the <span class="s22">Confirm </span>component:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Confirm</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">open={this.state.confirmOpen}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">If we look at our running app, the confirmation dialog should be open again.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark280">So, a private state prop gives us access to the component state, and we can initialize this in the class constructor.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark349">Changing state</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">When the confirmation dialog buttons are clicked, we want to close the dialog. So, we want to change the state of <span class="s22">confirmOpen </span>to be false when the buttons are clicked.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We already have arrow function handlers for the button click events, so perhaps we can change state in there:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l79"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to do that in <span class="s22">handleOkConfirmClick</span>, replacing the <span class="s22">console.log</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">private handleOkConfirmClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">this.state.confirmOpen = false;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">We get a compilation error, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 26pt;text-indent: 0pt;text-align: left;"><span><img width="514" height="127" alt="image" src="Learn+React+with+TypeScript+3-2/Image_177.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The error message is saying that the state is read-only! Why is this so, and how can we change the state?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We need to use a method called <span class="s22">setState </span>in the component class to change state. This helps ensure we manage state robustly and efficiently. <span class="s22">setState </span>takes a parameter, which is an object literal containing the state we want to change.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change our code to use <span class="s22">setState</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">private handleOkConfirmClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">this.setState({ confirmOpen: false });</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The compilation error disappears, and if we click <b>Yes please! </b>in the running app, the confirmation dialog will now close. We have successfully changed the state.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Change the implementation of <span class="s22">handleCancelConfirmClick </span>to close the dialog as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">private handleCancelConfirmClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">this.setState({ confirmOpen: false });</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">After we close the confirmation dialog, we have no way to open it.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s add a button labeled <b>Confirm </b>that does that in <span class="s22">App.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleConfirmClick}&gt;Confirm&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Confirm ... /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We need to create the handler that we just referenced:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleConfirmClick = () =&gt; { this.setState({ confirmOpen: true });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can now click the <b>Confirm </b>button to reopen the confirmation dialog when it has been closed.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: justify;">Let&#39;s add a piece of text above the <b>Confirm </b>button in <span class="s22">App.tsx </span>that changes depending on whether the confirmation dialog is canceled or okayed. We&#39;ll define an additional state to drive this text:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">interface IState { confirmOpen: boolean; <span class="s21">confirmMessage: string;</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s initialize the message in the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(props: {}) { super(props); this.state = {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">confirmMessage: &quot;Please hit the confirm button&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">confirmOpen: true,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">The state is now changed when the confirmation dialog is okayed or canceled:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleOkConfirmClick = () =&gt; { this.setState({</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">confirmMessage: &quot;Cool, carry on reading!&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">confirmOpen: false</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleCancelConfirmClick = () =&gt; { this.setState({</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">confirmMessage: &quot;Take a break, I&#39;m sure you will later</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">...&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">confirmOpen: false</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark350">Finally, we can render the message above the </a><b>Confirm </b>button:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{this.state.confirmMessage}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleConfirmClick}&gt;Confirm&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Confirm ... /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we play with the running app now, we&#39;ll see the message in our app changing depending on whether we okay or cancel the confirmation dialog.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark281">Although we can set the state prop directly in the constructor when we initialize it, we can&#39;t elsewhere in a class component. Instead, state should be changed by calling the </a><span class="s22">setState </span>method in the component class.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark351">Class component life cycle methods</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Life cycle methods in a class component allow us to run code at particular points in the process. The following is a high-level diagram of the component process, showing when the different methods are invoked:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="316" alt="image" src="Learn+React+with+TypeScript+3-2/Image_178.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s28" style="padding-left: 37pt;text-indent: 0pt;text-align: center;">Diagram of modern React life cycle methods, from React documentation</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark282">componentDidMount</a><a name="bookmark352">&zwnj;</a><a name="bookmark353">&zwnj;</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">componentDidMount <span class="p">is invoked when a component has been inserted into the DOM. Here are some common use cases for this method:</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_179.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_180.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Calling a web service to get some data Adding event listeners</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_181.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Initializing timers</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_182.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Initializing third-party libraries</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;re going to change the app we have been building to give users a time limit of 10 seconds to confirm whether or not they want to learn React and TypeScript. In order to do this, we&#39;ll need to make use of the <span class="s22">componentDidMount </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l80"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Let&#39;s start by making the confirmation dialog closed when the app loads in</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">App.tsx<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(props: {}) { super(props); this.state = {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">confirmMessage: &quot;Please hit the confirm button&quot;,</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">confirmOpen: false</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;re going to count down the seconds from <span class="s22">10 </span>to <span class="s22">0</span>, and then hide the <b>Confirm </b>button when <span class="s22">0 </span>is reached. Let&#39;s add and initialize a state for both of these in <span class="s22">App.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 114%;text-align: left;">interface IState { confirmOpen: boolean; confirmMessage: string; <span class="s21">confirmVisible: boolean; countDown: number;</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 9pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(props: {}) { super(props); this.state = {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">confirmMessage: &quot;Please hit the confirm button&quot;, confirmOpen: false,</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 106%;text-align: left;">confirmVisible: true, countDown: 10</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll use <span class="s22">timer </span>to count down from <span class="s22">10 </span>to <span class="s22">1 </span>in the <span class="s22">App </span>class. Let&#39;s create a private prop called <span class="s22">timer </span>just above the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">private timer: number = 0;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s use the <span class="s22">componentDidMount </span>method to initialize our <span class="s22">timer</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">public componentDidMount() {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">this.timer = window.setInterval(() =&gt; this.handleTimerTick(), 1000);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The timer will call a method called <span class="s22">handleTimerTick </span>every second. Implement this method as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleTimerTick() { this.setState(</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">confirmMessage: `Please hit the confirm button ${ this.state.countDown</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">} secs to go`,</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">countDown: this.state.countDown - 1</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are reducing our counter as well, updating the message shown to the user in this method. We need to do some more work here, though: we need to stop the timer, hide the <b>Confirm </b>button, and tell the user they are too late!</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Our natural instinct may be to write something like this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleTimerTick() { this.setState(</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">confirmMessage: `Please hit the confirm button ${ this.state.countDown</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">} secs to go`,</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">countDown: this.state.countDown - 1</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (this.state.countDown &lt;= 0) { clearInterval(this.timer); this.setState({</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 106%;text-align: left;">confirmMessage: &quot;Too late to confirm!&quot;, confirmVisible: false</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;"><a name="bookmark354">}</a></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">However, this is incorrect, because the state is updated asynchronously, and so <span class="s22">this.state.countDown </span>won&#39;t have necessarily updated the line after we update it in the <span class="s22">setState </span>call.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Instead, we need to move this code to the callback in <span class="s22">setState</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleTimerTick() { this.setState(</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">confirmMessage: `Please hit the confirm button ${ this.state.countDown</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">} secs to go`,</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">countDown: this.state.countDown - 1</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}<span class="s21">,</span></p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">() =&gt; {</p><p class="s21" style="padding-left: 134pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (this.state.countDown &lt;= 0) { clearInterval(this.timer); this.setState({</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;line-height: 106%;text-align: left;">confirmMessage: &quot;Too late to confirm!&quot;, confirmVisible: false</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also stop the timer if the <b>Confirm</b>, <b>Ok</b>, or <b>Cancel </b>buttons are clicked:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">private handleConfirmClick = () =&gt; { this.setState({ confirmOpen: true }); <span class="s21">clearInterval(this.timer);</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">private handleCancelConfirmClick = () =&gt; { this.setState(...); <span class="s21">clearInterval(this.timer);</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">private handleOkConfirmClick = () =&gt; { this.setState(...; <span class="s21">clearInterval(this.timer);</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Our final job is to put a condition around the <b>Confirm </b>button to only show it if the <span class="s22">confirmVisible </span>state is <span class="s22">true</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{this.state.confirmMessage}&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{this.state.confirmVisible &amp;&amp; (</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleConfirmClick}&gt;Confirm&lt;/button&gt;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_183.png"/></span></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">x &amp;&amp; y <span class="p">allows us to concisely express a condition with a single branch in JSX. Basically, the right operand of </span>&amp;&amp; <span class="p">isn&#39;t evaluated and rendered if the left operand is falsy.</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Confirm ... /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Now, it&#39;s time to give this a try. We&#39;ll see the countdown when the app first runs:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 120pt;text-indent: 0pt;text-align: left;"><span><img width="262" height="203" alt="image" src="Learn+React+with+TypeScript+3-2/Image_184.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If we don&#39;t confirm within ten seconds, it&#39;ll be too late:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 118pt;text-indent: 0pt;text-align: left;"><span><img width="263" height="181" alt="image" src="Learn+React+with+TypeScript+3-2/Image_185.png"/></span></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark283">componentWillUnmount</a><a name="bookmark355">&zwnj;</a><a name="bookmark356">&zwnj;</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">componentWillUnmount <span class="p">is invoked just before the component is removed from the DOM. Here are some common use cases for this method:</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_186.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_187.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_188.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Removing event listeners Canceling active network requests Removing timers</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are going to use <span class="s22">componentWillUnmount </span>in our app to make sure our <span class="s22">timer </span>is stopped and removed. Let&#39;s add the following in the <span class="s22">App </span>class after the <span class="s22">componentDidMount </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">public componentWillUnmount() { clearInterval(this.timer);</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark284">getDerivedStateFromProps</a><a name="bookmark357">&zwnj;</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">getDerivedStateFromProps <span class="p">is invoked every time a component is rendered. It can be used to change state when certain props change. This is a static method in a component class that returns the changed state, or null if there are no changes to the state.</span></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Let&#39;s have a look at this life cycle method in our app. Add the following at the top of the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">App <span class="p">class:</span></p><p class="s12" style="padding-top: 9pt;padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">public static getDerivedStateFromProps(props: {}, state: IState) { console.log(&quot;getDerivedStateFromProps&quot;, props, state);</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">return null;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark358">If we look in the console when the app is running, we see that our method is called each time the countdown decrements:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="241" alt="image" src="Learn+React+with+TypeScript+3-2/Image_189.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark285">getSnapshotBeforeUpdate and componentDidUpdate</a><a name="bookmark359">&zwnj;</a></h4><p class="s22" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">getSnapshotBeforeUpdate <span class="p">is called just before the DOM is updated. The value that is returned from </span>getSnapshotBeforeUpdate <span class="p">is passed on to </span>componentDidUpdate<span class="p">.</span></p><p class="s22" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">componentDidUpdate <span class="p">is called as soon as the DOM is updated. Resizing the window during rendering is an example of when </span>getSnapshotBeforeUpdate <span class="p">can be useful.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s have a look at these life cycle methods in our app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l81"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add the following near the top of the <span class="s22">App </span>class, under the <span class="s22">timer </span>variable declaration:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">private renderCount = 0;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s add the life cycle methods:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">public getSnapshotBeforeUpdate(prevProps: {}, prevState: IState) {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">this.renderCount += 1; console.log(&quot;getSnapshotBeforeUpdate&quot;, prevProps, prevState,</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">renderCount: this.renderCount</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return this.renderCount;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">public componentDidUpdate(prevProps: {}, prevState: IState, snapshot: number) {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(&quot;componentDidUpdate&quot;, prevProps, prevState, snapshot, {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">renderCount: this.renderCount</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Look at the running app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="283" alt="image" src="Learn+React+with+TypeScript+3-2/Image_190.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We see the methods being invoked in the order we expect, and <span class="s22">componentDidUpdate </span>successfully taking in the render count from <span class="s22">getSnapshotBeforeUpdate</span>.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark286">shouldComponentUpdate</a><a name="bookmark360">&zwnj;</a><a name="bookmark361">&zwnj;</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">shouldComponentUpdate <span class="p">is invoked just before rendering happens. It returns a Boolean value that determines whether rendering should happen. It can be used to optimize performance, preventing unnecessary render cycles.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l82"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s have a look at this life cycle method in our app by adding the following method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">public shouldComponentUpdate(nextProps: {}, nextState: IState)</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(&quot;shouldComponentUpdate&quot;, nextProps, nextState); return true;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we look at the running app, we see that <span class="s22">shouldComponentUpdate </span>happens between <span class="s22">getDerivedStateFromProps </span>and <span class="s22">getSnapshotBeforeUpdate</span>, as we expect.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now prevent rendering by returning <span class="s22">false</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">public shouldComponentUpdate(nextProps: {}, nextState: IState)</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">console.log(&quot;shouldComponentUpdate&quot;, nextProps, nextState);</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return false;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We see <span class="s22">getSnapshotBeforeUpdate </span>and <span class="s22">componentDidUpdate </span>aren&#39;t invoked, because no rendering occurs after the initial render:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="341" alt="image" src="Learn+React+with+TypeScript+3-2/Image_191.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark362">Before moving on to the next section, let&#39;s allow our component to render again by setting this flag back to </a><span class="s22">true</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">public shouldComponentUpdate(nextProps: {}, nextState: IState)</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">console.log(&quot;shouldComponentUpdate&quot;, nextProps, nextState);</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return true;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">shouldComponentUpdate <span class="p">can increase performance by stopping unnecessary rendering, but it should be used with care. It can introduce bugs that are hard to pin down. Also, the additional code we need to add to check whether a render should occur could in fact slow the app down.</span></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark287">Deprecated life cycle methods</a><a name="bookmark363">&zwnj;</a><a name="bookmark364">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">There are a few life cycle methods that have been deprecated and renamed in React 17. We don&#39;t need to use these anymore<span class="s23">—</span><span class="s22">getDerivedStateFromProps</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">and <span class="s22">getSnapshotBeforeUpdate </span>essentially replaced them. However, here&#39;s a brief description of these methods, in case you come across them in existing codebases:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_192.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_193.png"/></span></p><p class="s22" style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">componentWillMount <span class="p">(now </span>UNSAFE_componentWillMount<span class="p">): This is called before the component is added to the DOM during an initial render </span>componentWillReceiveProps <span class="p">(now </span>UNSAFE_componentWillReceiveProps<span class="p">):</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">This is called when the component props change</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_194.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark288">componentWillUpdate </a><span class="p">(now </span>UNSAFE_componentWillUpdate<span class="p">): This is called just before a component updates</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark365">Creating a function component</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark289">As the name suggests, a function component is implemented using a JavaScript function. These components are sometimes referred to as </a><i>functional stateless components</i>, which can be a little confusing because they can contain states in more recent versions of React.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark366">Creating a basic function component</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s refactor our <span class="s22">Confirm </span>component to be a function component, in order to learn how to implement these:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l83"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Open <span class="s22">Confirm.tsx </span>and replace the class signature with the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const Confirm: React.SFC&lt;IProps&gt; = (props) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We define a function component using an arrow function, passing the props type in as a generic parameter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_195.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We&#39;ll learn about generic functions later in the book<span class="s23">—</span>so don&#39;t worry if this doesn&#39;t make perfect sense right now.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark367">We use </a><b>stateless functional component </b>(<b>SFC</b>) <span class="s22">React.SFC </span>to represent these type of components.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our component is now throwing several compilation errors. We&#39;ll resolve these in the next steps.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Function components don&#39;t have render methods. Instead, the function itself returns the JSX that should be rendered. So, let&#39;s change this part of our function by removing the <span class="s22">render </span>signature, and leaving the return statement as it was:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: -10pt;line-height: 120%;text-align: left;">className={ this.props.open</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">? &quot;confirm-wrapper confirm-visible&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">: &quot;confirm-wrapper&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We need to change the event handlers to be arrow function constants, and access props directly rather than through <span class="s22">this</span>. We should also move these handlers above the <span class="s22">return </span>statement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const <span class="s12">handleCancelClick = () =&gt; {</span></p><p class="s21" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">props<span class="s12">.onCancelClick();</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const <span class="s12">handleOkClick = () =&gt; {</span></p><p class="s21" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">props<span class="s12">.onOkClick();</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">return ( ... )</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;"><a name="bookmark368">We then reference the props and event handlers directly, rather than through</a></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">this <span class="p">in our JSX:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">className={</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">props<span class="s12">.open</span></p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">? &quot;confirm-wrapper confirm-visible&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">: &quot;confirm-wrapper&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-title-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;span&gt;{<span class="s21">props</span>.title}&lt;/span&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-content-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{<span class="s21">props</span>.content}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;confirm-buttons-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-cancel&quot; onClick=</p><p class="s12" style="padding-top: 1pt;padding-left: 128pt;text-indent: 0pt;text-align: left;">{<span class="s21">handleCancelClick</span>}&gt;</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">{<span class="s21">props</span>.cancelCaption}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-ok&quot; onClick={<span class="s21">handleOkClick</span>}&gt;</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">{<span class="s21">props</span>.okCaption}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We also have a problem with the static <span class="s22">defaultProps </span>variable. We move this outside our function, and place it as an object literal under the function, as follows:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 114%;text-align: left;">Confirm.defaultProps = <span class="s12">{ cancelCaption: &quot;Cancel&quot;, okCaption: &quot;Okay&quot;</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app, all the compilation errors should be resolved, and the app should be working as it was before.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark369">The following code is a template for a function component. Our </a><span class="s22">Confirm </span>component should have a structure similar to this now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 29pt;text-indent: -5pt;line-height: 120%;text-align: left;">const ComponentName: React.SFC&lt;IProps&gt; = props =&gt; { const handler = () =&gt; {</p><p class="s12" style="padding-left: 29pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 29pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">&lt;div&gt;Our JSX&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">ComponentName.defaultProps = {</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">export default ComponentName;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark290">So, function components are an alternative way to create components. In the next section, we&#39;ll look at how to add state to a function component.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark370">Stateful function components</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We&#39;ve mentioned that function components can have state. In this section, we&#39;ll add state to our function <span class="s22">Confirm </span>component, to force users to click the <b>Cancel </b>button twice before closing it, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l84"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">We&#39;ll start by defining and initializing state for the number of times the <b>Cancel</b></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">button is clicked, by adding the highlighted line:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">const Confirm: React.SFC&lt;IProps&gt; = props =&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">const [cancelClickCount, setCancelClickCount] = React.useState(0);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleOkClick = () =&gt; { props.onOkClick();</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark371">This line of code looks a little strange, so let&#39;s break it down:</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_196.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_197.png"/></span></p><p class="s22" style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">React.useState <span class="p">is a React function that lets us create state, passing in a default value as a parameter. In our case, we pass it a default value of 0. The </span>useState <span class="p">function returns an array containing two elements:</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_198.png"/></span></p><p style="padding-top: 1pt;padding-left: 98pt;text-indent: 0pt;text-align: left;">The first array element contains the current value of state</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_199.png"/></span></p><p style="padding-top: 1pt;padding-left: 98pt;text-indent: 0pt;line-height: 89%;text-align: left;">The second array element contains a function to set state to a different value</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_200.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: justify;">We destructure the array and store the first array element (the state value) in <span class="s22">cancelClickCount</span>, and the second array element (the function to set state) in <span class="s22">setCancelClickCount</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_201.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The rest of the function now has access to the cancel click count, via the <span class="s22">cancelClickCount </span>variable. The function is also able to increment the cancel click <b>count</b>, via the <span class="s22">setCancelClickCount </span>variable.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s refactor the <span class="s22">handleCancelClick </span>arrow function to increment <span class="s22">cancelClickCount</span>, and only invoke the <span class="s22">onCancelClick </span>prop if the count has reached <span class="s22">2</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const handleCancelClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">const newCount = cancelClickCount + 1; setCancelClickCount(newCount);</p><p class="s21" style="padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (newCount &gt;= 2) { props.onCancelClick();</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Now, functions to set the piece of state take in the new state as their parameter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, we&#39;ll change the <b>Cancel </b>button caption, to say <b>Really? </b>after the first click:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;button className=&quot;confirm-cancel&quot; onClick={handleCancelClick}&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{cancelClickCount === 0 ? props.cancelCaption : &quot;Really?&quot;}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we access the state value in JSX through the variable we destructured when the state was defined.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we give this a try in the running app, we should find the <b>Cancel </b>button text changes to <b>Really? </b>after the first click, and the confirmation dialog closes after the second click.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">After we&#39;ve got our heads around the code needed to define state, accessing and setting state is fairly simple and elegant.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark291">Let&#39;s continue to the next section, and look into how we can hook into a function component&#39;s life cycle events.</a><a name="bookmark372">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark373">Function component life cycle hooks</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We can invoke code to execute at certain points in a function component&#39;s life cycle. Let&#39;s explore this in our <span class="s22">Confirm </span>component, starting with when the component is first rendering, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l85"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the highlighted lines of code just beneath where we define state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const [cancelClickCount, setCancelClickCount] = React.useState(0);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">React.useEffect(() =&gt; { console.log(&quot;Confirm first rendering&quot;);</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_202.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">We use React&#39;s <span class="s22">useEffect </span>function to hook into the component life cycle.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_203.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The function takes in an arrow function, which executes when the component is first rendered.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_204.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The function takes in a second parameter, which determines when our arrow function is called. This parameter is an array of values that, when changed, will cause the arrow function to be invoked. In our case, we pass in an empty array, so our arrow function will never be called after the first render.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_205.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we now try the running app and open the console, we&#39;ll see <b>Confirm first rendering </b>only appears once.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s remove the second parameter into <span class="s22">useEffect </span>now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 115%;text-align: left;">React.useEffect(() =&gt; { console.log(<span class="s21">&quot;Confirm rendering&quot;</span>);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app and the console, we&#39;ll see <b>Confirm rendering </b>appear each time <span class="s22">Confirm </span>is rendered.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change this once again to the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.useEffect( () =&gt; {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">console.log(<span class="s21">&quot;open changed&quot;</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;"><a name="bookmark374">},</a></p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">[props.open]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app and the console, we&#39;ll see <b>open changed </b>appear each time the <span class="s22">Confirm </span>component&#39;s <span class="s22">open </span>prop changes value.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">What about hooking into when a component is unmounted? Let&#39;s try the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">React.useEffect(() =&gt; { console.log(&quot;Confirm first rendering&quot;); <span class="s21">return () =&gt; {</span></p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 9pt;text-align: left;">console.log(&quot;Confirm unmounted&quot;);</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, our arrow function can return a function that is executed when the component is unmounted.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Our <span class="s22">Confirm </span>component doesn&#39;t currently unmount, so, in <span class="s22">App.tsx</span>, let&#39;s make this not render if the countdown reaches <span class="s22">0</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{this.state.countDown &gt; 0 &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Confirm</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we look at the running app and the console, we&#39;ll see <span class="s22">Confirm unmounted </span>appear when the countdown reaches <span class="s22">0</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we can execute logic in function components when they are first rendered, when their props change, and when they are unmounted.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_206.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This section on hooks is written on React v16.6.0. We will share updated codes when new version releases.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In the next section, we&#39;ll look at a method we can use to optimize function component rendering cycles.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark292">Optimizing function component rendering</a><a name="bookmark375">&zwnj;</a><a name="bookmark376">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Our <span class="s22">Confirm </span>component is actually being rendered more than it needs to be. In this section, we are going to optimize this so that it only renders when its props change:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l86"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">First, let&#39;s add a line at the top of our function component, so that we can see when it renders:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">console.log(&quot;Confirm rendering&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">If we look at the running app and the console, we&#39;ll see that a render occurs every time the <span class="s22">App </span>component counts down. The countdown is in the <span class="s22">App </span>component state, and a change to state means the component will be rendered again, along with any child components. This is why, without any optimization, our <span class="s22">Confirm </span>component renders on each countdown.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">On to the optimization then. It&#39;s actually really simple:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const ConfirmMemo = React.memo(Confirm);</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default <span class="s21">ConfirmMemo</span>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we wrap our component with a function called <span class="s22">memo </span>from React. We then export this wrapper function. The <span class="s22">memo </span>function then only renders the component if its props change.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app and the console, we&#39;ll see that our component no longer renders on each countdown.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">So, given how simple this is, shouldn&#39;t we just wrap all our function components with <span class="s22">memo</span>? No! There is a performance cost when <span class="s22">memo </span>determines whether a component has changed. If the component doesn&#39;t actually do any unnecessary rendering, using <span class="s22">memo </span>would result in the component being slower.</p><p class="s22" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">memo <span class="p">should be used with care, and only on components that are being rendered more than they need to be.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Given that the features of class components and function components are similar, which type should we be using? There is no straightforward answer, really. If our team is used to object-oriented code, perhaps class-based components will be easier to learn. If our team is used to more functional programming techniques, then function-based components may enable them to be more productive.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Both approaches are great ways to create React components<span class="s23">—</span>it&#39;s down to you to choose!</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark293">Summary</a><a name="bookmark377">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this chapter we learned a couple of different ways we can create a React and TypeScript project. The more manual way taught us just how many moving parts there are. We&#39;ll use <span class="s22">create-react-app </span>regularly to quickly create our apps in this book.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We learned how all React class components have a <span class="s22">render </span>method that returns JSX, which tells React what to display. JSX is very flexible and powerful, because JavaScript expressions can be mixed in with HTML.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We learned how components can be configured using props, and how we can add TypeScript types to props, to help prevent mistakes when consuming components.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Next, we learnt how components manage what is rendered and how they behave using state. Like props, state in a React and TypeScript app is strongly typed. We initialize state in the constructor, and change it via a <span class="s22">setState </span>method.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We also learnt about event handlers, which allow us to react to how users interact with our components. JSX gives us handy <span class="s22">onEventName </span>attributes for handling events.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Next, we learnt about the various life cycle methods that can be implemented to execute logic at various points in the process. The most commonly used life cycle method is <span class="s22">componentDidMount </span>, which occurs when a component has just been added to the DOM.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Finally, we learned about function components, which are an alternative approach to implementing components. In recent versions of React, we are able to use state within them, access common life cycle hooks, and even optimize rendering cycles.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: justify;"><a href="#bookmark297" class="s20" name="bookmark294">In </a><span class="s12">Chapter 3</span>, <i>Getting Started with React and TypeScript</i>, we will learn about how we can efficiently build React and TypeScript apps that have multiple pages.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark378">Questions</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">Answer the following questions, based on what we have just learned:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l87"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">During development, what are the TSLint settings for allowing debugger statements and logging to the console?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">In JSX, how can we display a button with a label from a prop called</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">buttonLabel <span class="p">in a class component?</span></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we make the <span class="s22">buttonLabel </span>prop optional, and default to <b>Do It</b>?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In JSX, how can we display this button only if the <span class="s22">doItVisible </span>state is <span class="s22">true</span>? (Assume we already have a state type declared containing <span class="s22">doItVisible</span>, and it has already been initialized in the constructor.)</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How would we create a click handler for this button?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We have a state type declared containing <span class="s22">doItDisabled</span>. It has also been initialized in the constructor. How would we set this state to disable the <b>Do it </b>button after we click it?</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If the button is clicked when it is in a disabled state, is the click handler still executed?</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">What life cycle method would we use in a class component to add event handlers to a non-React web component living in our React component?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Which life cycle method would we use to remove this event handler?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: justify;">We have a function component called <span class="s22">Counter</span>. It needs to contain a piece of state called <span class="s22">count</span>, and a function to update it called <span class="s22">setCount</span>. How can we define this state and default the initial count to 10?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: justify;">In the preceding <span class="s22">Counter </span>component, we have a <span class="s22">decrement </span>function that needs to reduce <span class="s22">count </span>by <span class="s22">1</span>.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const decrement = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">// TODO - reduce count by 1</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark295">How can this be implemented?</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 12pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark379">Further reading</a></h3><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_207.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;line-height: 107%;text-align: left;"><a href="https://reactjs.org/tutorial/tutorial.html" class="s20" target="_blank">The official React introduction tutorial is worth going through: </a><a href="https://reactjs.org/tutorial/tutorial.html" class="a" target="_blank">https:// reactjs.org/tutorial/tutorial.</a><a href="https://reactjs.org/tutorial/tutorial.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_208.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 109%;text-align: left;">The <span class="s22">create-react-app </span><a href="https://facebook.github.io/create-react-app/docs/getting-started" class="s20" target="_blank">documentation is also worth bookmarking: </a><a href="https://facebook.github.io/create-react-app/docs/getting-started" class="a" target="_blank">https:// facebook.github.io/create-react-app/docs/getting-</a><a href="https://facebook.github.io/create-react-app/docs/getting-started" target="_blank">started</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 82pt;text-indent: 0pt;text-align: left;"><a name="bookmark380">Routing with React Router</a><a name="bookmark400">&zwnj;</a><a name="bookmark401">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">If our app has multiple pages, we need to manage the navigation between the different pages. React Router is a great library that helps us do just this!</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this chapter, we are going to build a web shop where we can purchase a few tools for React. Our simple shop will have multiple pages that we&#39;ll manage using React Router. The shop will look like the following screenshot when we are finished:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;"><span><img width="298" height="192" alt="image" src="Learn+React+with+TypeScript+3-2/Image_209.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">In this chapter, we&#39;ll learn the following topics:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_210.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_211.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Installing React Router with routing types Declaring routes</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_212.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_213.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Creating navigation Route parameters</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_214.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_215.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_216.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Handling not found routes Implementing page redirects Query parameters</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_217.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_218.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_219.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_220.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark381">Route prompts Nested routes Animated transitions Lazy loading routes</a><a name="bookmark402">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 13pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark403">Technical requirements</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_221.png"/></span></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. We can install these from </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If we already have these installed, make sure </span>npm <span class="p">is at least at version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_222.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/04-ReactRouter" class="s20" target="_blank">All the code snippets in this chapter can be found online at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/04-ReactRouter" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/04-ReactRouter" target="_blank">/</a></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/04-ReactRouter" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/04- </a>ReactRouter<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_223.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We will also need the TSLint (by egamma) and Prettier (by Estben Petersen) extensions installed within Visual Studio Code.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark382">Installing React Router with routing types</a><a name="bookmark404">&zwnj;</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;"><b>React Router </b>and its Types are in <span class="s22">npm</span>, so we can install them from there.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Before installing React Router, we need to create our React shop project. Let&#39;s get ready to do that by choosing an empty folder of our choice and opening Visual Studio Code. To do this, follow these steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l88"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s now open a Terminal and enter the following command to create a new React and TypeScript project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npx create-react-app reactshop --typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Note that the version of React we use needs to be at least version <span class="s22">16.7.0- alpha.0</span>. We can check this in the <span class="s22">package.json </span>file. If the version of React</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">in <span class="s22">package.json </span>is less that <span class="s22">16.7.0-alpha.0</span>, then we can install this version using the following command:</p><p style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;text-align: left;"><a href="mailto:react@16.7.0-alpha.0" class="s26" target="_blank">npm install react@16.7.0-alpha.0</a></p><p style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><a href="mailto:react-dom@16.7.0-alpha.0" class="s26" target="_blank">npm install react-dom@16.7.0-alpha.0</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">After the project is created, let&#39;s add TSLint as a development dependency to our project along with some rules that work well with React and Prettier:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">cd reactshop</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install tslint tslint-react tslint-config-prettier --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now add a <span class="s22">tslint.json </span>file containing some rules:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint-</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">config-prettier&quot;], &quot;rules&quot;: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;ordered-imports&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;object-literal-sort-keys&quot;: false, &quot;no-debugger&quot;: false,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;no-console&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;linterOptions&quot;: { &quot;exclude&quot;: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;config/**/*.js&quot;, &quot;node_modules/**/*.ts&quot;, &quot;coverage/lcov-report/*.js&quot;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s enter the following command to install React Router into our project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install react-router-dom</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s also install the TypeScript types for React Router and save them as a development dependency:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">npm install @types/react-router-dom --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark405">Before going on to the next section, we&#39;re going to remove some of the files </a><span class="s22">create- react-app </span>created that we don&#39;t need:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l89"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, let&#39;s remove the <span class="s22">App </span>component. So, let&#39;s delete the <span class="s22">App.css</span>, <span class="s22">App.test.tsx</span>, and <span class="s22">App.tsx </span>files. Let&#39;s also remove the import reference <span class="s22">&quot;./App&quot; </span>in <span class="s22">index.tsx</span><b>.</b></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s also remove the service worker by deleting the <span class="s22">serviceWorker.ts </span>file and removing the references to it in <span class="s22">index.tsx</span>.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">In <span class="s22">index.tsx</span>, let&#39;s change the root component from <span class="s22">&lt;App/&gt; </span>to <span class="s22">&lt;div/&gt;</span>. Our</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">index.tsx <span class="p">file should have the following content in it now:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &#39;react&#39;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import * as ReactDOM from &#39;react-dom&#39;; import &#39;./index.css&#39;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">ReactDOM.render(</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div /&gt;<span class="s12">,</span></p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">document.getElementById(&#39;root&#39;) as HTMLElement</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark383">Declaring routes</a><a name="bookmark406">&zwnj;</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We declare the pages in our app using the <span class="s22">BrowserRouter </span>and</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Route <span class="p">components. </span>BrowserRouter <span class="p">is the top-level component and this looks for </span>Route</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">components beneath it to determine all the different page paths.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We are going to declare some pages in our app using <span class="s22">BrowserRouter </span>and <span class="s22">Route </span>later in this section, but before that we need to create our first two pages. This first page is going to contain the list of our React tools that we are going to sell in our shop. We use the following steps to create our pages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l90"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, let&#39;s start by creating the data for our list of tools by creating a <span class="s22">ProductsData.ts </span>file with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IProduct { id: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: string; description: string; price: number;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export const products: IProduct[] = [</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">description:</p><p class="s12" style="padding-top: 1pt;padding-left: 128pt;text-indent: -5pt;line-height: 120%;text-align: left;">&quot;A collection of navigational components that compose declaratively with your app&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id: 1,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;React Router&quot;, price: 8</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">description: &quot;A library that helps manage state across your app&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id: 2,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;React Redux&quot;, price: 12</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">description: &quot;A library that helps you interact with a GraphQL backend&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id: 3,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;React Apollo&quot;, price: 12</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create another file called <span class="s22">ProductsPage.tsx </span>containing the following to import React as well as our data:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import { IProduct, products } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are going to reference the data in our component state, so let&#39;s create an interface for this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IState { products: IProduct[];</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s move on to create our class component called <span class="s22">ProductsPage</span>, initializing the state to an empty array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ProductsPage extends React.Component&lt;{}, IState&gt; { public constructor(props: {}) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">super(props); this.state = {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">products: []</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><a name="bookmark407">}</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default ProductsPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now implement the <span class="s22">componentDidMount </span>life cycle method and set the data to the <span class="s22">products </span>array from <span class="s22">ProductData.ts</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public componentDidMount() { this.setState({ products });</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Moving on to implementing the <span class="s22">render </span>method, let&#39;s welcome our users and set out the products in a list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 43pt;line-height: 120%;text-align: left;">Welcome to React Shop where you can get all your tools for ReactJS!</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">{this.state.products.map(product =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;li key={product.id} className=&quot;product-list-item&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 150pt;text-indent: 0pt;text-align: left;">{product.name}</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have used the <span class="s22">map </span>function in the <span class="s22">products </span>array to iterate through the elements and produce a list item tag, <span class="s22">li</span>, for each product. We need to give each <span class="s22">li </span>a unique <span class="s22">key </span>attribute to help React manage any changes to the list items, which in our case is the <span class="s22">id </span>product.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ve referenced some CSS classes, so let&#39;s add these to <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">.page-container { text-align: center; padding: 20px;</p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">font-size: large;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">.product-list { list-style: none;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: 0pt;text-align: left;">margin: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">padding: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 96pt;text-indent: -5pt;line-height: 120%;text-align: left;">.product-list-item { padding: 5px;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: justify;">Let&#39;s implement our second page now, which is going to be an admin panel. So, let&#39;s create a file called <span class="s22">AdminPage.tsx </span>with the following function component inside:</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 22pt;text-align: left;">import * as React from &quot;react&quot;; const AdminPage: React.SFC = () =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Admin Panel&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;p&gt;You should only be here if you have logged in&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default AdminPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">Now that we have two pages in our shop, we can declare our two routes to them. Let&#39;s create a file called <span class="s22">Routes.tsx </span>with the following content to import <span class="s22">React</span>, the <span class="s22">BrowserRouter </span>and <span class="s22">Route </span>components from React Router, and our two pages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { BrowserRouter as Router, Route } from &quot;react-router- dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import AdminPage from &quot;./AdminPage&quot;; import ProductsPage from &quot;./ProductsPage&quot;;</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have renamed <span class="s22">BrowserRouter </span>to <span class="s22">Router </span>in the import statement to save a few keystrokes.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s go on to implement a function component containing our two routes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Routes: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;"><a name="bookmark408">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="71" alt="image" src="Learn+React+with+TypeScript+3-2/Image_224.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">During rendering, if the <span class="s22">path </span>in a <span class="s22">Route </span>component matches the current path, the component will be rendered, and if not, <span class="s22">null </span>will be rendered. In our example, <span class="s22">ProductPage </span>will be rendered if the path is <span class="s22">&quot;/products&quot; </span>and <span class="s22">AdminPage </span>will be rendered if the path is <span class="s22">&quot;/admin&quot;</span>.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default Routes;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">The following is the final step to render our <span class="s22">Routes </span>as the root component in</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">index.tsx<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import * as ReactDOM from &quot;react-dom&quot;; import &quot;./index.css&quot;;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">import Routes from &quot;./Routes&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">ReactDOM.render(<span class="s21">&lt;Routes /&gt;</span>, document.getElementById(&quot;root&quot;) as HTMLElement);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;text-align: left;">We should now be able to run our app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The app will probably start on the root page, which will be blank because that path doesn&#39;t point to anything.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">If we change the path to <span class="s22">&quot;/products&quot;</span>, our product list should render the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="557" height="147" alt="image" src="Learn+React+with+TypeScript+3-2/Image_225.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;"><a name="bookmark409">If we change the path to </a><span class="s22">&quot;/admin&quot;</span>, our admin panel should render the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 44pt;text-indent: 0pt;text-align: left;"><span><img width="467" height="115" alt="image" src="Learn+React+with+TypeScript+3-2/Image_226.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark384">Now that we have successfully created a couple of routes, we really need a navigation component to make our pages a little more discoverable. We will do just that in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark410">Creating navigation</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark385">React Router comes with some nice components for providing navigation. We are going to use these to implement navigation options in the app header.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark411">Using the Link component</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are going to use the <span class="s22">Link </span>component from React Router to create our navigation options by carrying out the following steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l91"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by creating a new file called <span class="s22">Header.tsx </span>with the following imports:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 240%;text-align: left;">import { Link } from &quot;react-router-dom&quot;; import logo from &quot;./logo.svg&quot;;</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 10pt;text-align: left;">Let&#39;s create two links using the <span class="s22">Link </span>component in a <span class="s22">Header </span>function</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Header: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;img src={logo} className=&quot;header-logo&quot; alt=&quot;logo&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1 className=&quot;header-title&quot;&gt;React Shop&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;nav&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 139pt;text-indent: -5pt;line-height: 120%;text-align: left;">&lt;Link to=&quot;/products&quot; className=&quot;header- link&quot;&gt;Products&lt;/Link&gt;</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;Link to=&quot;/admin&quot; className=&quot;header-link&quot;&gt;Admin&lt;/Link&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/nav&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_227.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Link </span>component allows us to define the path where the link navigates to as well as the text to display.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default Header;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ve referenced some CSS classes, so, let&#39;s add these to <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">.header {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">text-align: center; background-color: #222; height: 160px;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">padding: 20px; color: white;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">.header-logo {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">animation: header-logo-spin infinite 20s linear; height: 80px;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">@keyframes header-logo-spin { from {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">transform: rotate(0deg);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">to {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">transform: rotate(360deg);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.header-title { font-size: 1.5em;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.header-link { color: #fff;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">text-decoration: none; padding: 5px;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 56pt;text-indent: -16pt;text-align: left;">Now that our <span class="s22">Header </span>component is in place, let&#39;s <span class="s22">import </span>into <span class="s22">Routes.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import Header from &quot;./Header&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then use it in the JSX as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Header /&gt;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Router&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If we examine the running app, it should look like the following screenshot with a nice header and two navigation options to go to our <b>Products </b>and <b>Admin </b>pages rendered:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 80pt;text-indent: 0pt;text-align: left;"><span><img width="371" height="234" alt="image" src="Learn+React+with+TypeScript+3-2/Image_228.png"/></span></p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;"><a name="bookmark412">Try clicking the navigation options </a><span class="s23">— </span>they work! If we inspect the <b>Products </b>and <b>Admin </b>elements using the browser <b>Developer tools</b>, we see that React Router has rendered them as anchor tags:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="206" alt="image" src="Learn+React+with+TypeScript+3-2/Image_229.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark386">If we look at the </a><b>Network </b>tab in <b>Developer tools </b>while clicking the navigation options, we&#39;ll see no network request is being made to serve the pages. This shows that React Router is handling the navigation for us in our React app.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark413">Using the NavLink component</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">React Router providers another component for linking to pages, called <span class="s22">NavLink</span>. This is actually even more suitable for our requirements. The following steps explain how we can refactor our <span class="s22">Header </span>component to use <span class="s22">NavLink</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l92"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">So, let&#39;s replace <span class="s22">Link </span>with <span class="s22">NavLink </span>in our <span class="s22">Header </span>component and make some improvements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 216%;text-align: left;">import { <span class="s21">NavLink </span>} from &quot;react-router-dom&quot;; import logo from &quot;./logo.svg&quot;;</p><p class="s12" style="padding-top: 2pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Header: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;img src={logo} className=&quot;header-logo&quot; alt=&quot;logo&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1 className=&quot;header-title&quot;&gt;React Shop&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;nav&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;<span class="s21">NavLink </span>to=&quot;/products&quot; className=&quot;header-</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 139pt;text-indent: 0pt;text-align: left;">link&quot;&gt;Products&lt;/<span class="s21">NavLink</span>&gt;</p><p class="s12" style="padding-left: 139pt;text-indent: -5pt;line-height: 106%;text-align: left;">&lt;<span class="s21">NavLink </span>to=&quot;/admin&quot; className=&quot;header- link&quot;&gt;Admin&lt;/<span class="s21">NavLink</span>&gt;</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/nav&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default Header;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">At this point, our app looks and behaves exactly the same.</p></li><li><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">NavLink <span class="p">exposes an </span>activeClassName <span class="p">attribute that we can use to style the active link. So, let&#39;s use this:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;NavLink to=&quot;/products&quot; className=&quot;header-link&quot;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">activeClassName=&quot;header-link-active&quot;<span class="s12">&gt; Products</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/NavLink&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;NavLink to=&quot;/admin&quot; className=&quot;header-link&quot;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">activeClassName=&quot;header-link-active&quot;<span class="s12">&gt; Admin</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/NavLink&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the CSS for <span class="s22">header-link-active </span>into our <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">.header-link-active {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">border-bottom: #ebebeb solid 2px;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we switch to the running app now, the active link will be underlined:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 82pt;text-indent: 0pt;text-align: left;"><span><img width="358" height="214" alt="image" src="Learn+React+with+TypeScript+3-2/Image_230.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark414">So, </a><span class="s22">NavLink </span>is great for the main app navigation where we want to highlight the active link and <span class="s22">Link </span>is great for all the other links in our app.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark387">Route parameters</a><a name="bookmark415">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">A Route parameter is a variable part of the path that can used in the destination component to conditionally render something.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We need to add another page to our shop to show the description and price of each product, along with an option to add it to the basket. We want to be able to navigate to this page using the <span class="s22">&quot;/products/{id}&quot; </span>path, where <span class="s22">id </span>is the ID of the product. For example, the path to React Redux would be <span class="s22">&quot;products/2&quot;</span>. So, the <span class="s22">id </span>part of the path is a route parameter. We can do all this by following these steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l93"><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s add this route to <span class="s22">Routes.tsx </span>in between the two existing routes. The <span class="s22">id </span>part of the route is going to be a route parameter, which we define with a colon in front of it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products/:id&quot; component={ProductPage} /&gt;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Of course, the <span class="s22">ProductPage </span>component doesn&#39;t exist yet, so, let&#39;s create that by first creating a new file called <span class="s22">ProductPage.tsx </span>with the following imports:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { RouteComponentProps } from &quot;react-router-dom&quot;; import { IProduct, products } from &quot;./ProductsData&quot;;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The key part here is that we are going to use the <span class="s22">RouteComponentProps </span>type to access the <span class="s22">id </span>parameter in the path. Let&#39;s define the props type alias for our <span class="s22">ProductPage </span>component using the <span class="s22">RouteComponentProps </span>generic type and passing in a type with an <span class="s22">id </span>property:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_231.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 93%;text-align: left;">Don&#39;t worry if you don&#39;t understand the angle brackets in the <span class="s22">type </span><a href="#bookmark461" class="s20">expression. This denotes a generic type, which we will explore in </a><a href="#bookmark461" class="a">Chapter </a><span class="s12">5</span>, <i>Advanced Types</i>.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">type Props = RouteComponentProps&lt;{id: string}&gt;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Ideally, we&#39;d have specified the <span class="s22">id </span>property as a number to match the type in the product data. However, <span class="s22">RouteComponentProps </span>only allows us to have Route parameters of type string or undefined.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">The <span class="s22">ProductPage </span>component is going to have state to hold the product that is being rendered and whether it has been added to the basket, so let&#39;s define an interface for our state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IState { product?: IProduct; added: boolean;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The product is initially going to be <span class="s22">undefined</span>, which is why it is defined as optional. Let&#39;s create our <span class="s22">ProductPage </span>class and initialize the state so that the product is not in the basket:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ProductPage extends React.Component&lt;Props, IState&gt; { public constructor(props: Props) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">super(props); this.state = {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">added: false</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">export default ProductPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">When the component is loaded into the DOM, we need to find our product from the product data with the <span class="s22">id </span>property from the <span class="s22">Route</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">parameter. <span class="s22">RouteComponentProps </span>gives us a <span class="s22">match </span>object, containing a</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">params <span class="p">object, containing our </span>id <span class="p">route parameter. So, let&#39;s implement this:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">public componentDidMount() {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">if (this.props.match.params.id) {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">const id: number = parseInt(this.props.match.params.id,</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">10);</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">const product = products.filter(p =&gt; p.id === id)[0];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">this.setState({ product });</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Remember that the <span class="s22">id </span>route parameter is a string, which is why we cast it to a number using <span class="s22">parseInt </span>before comparing it with the product data in</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">filter </span>array.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Now that we have our product in our component state, let&#39;s move on to the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">render <span class="p">function:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">const product = this.state.product; return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">{product ? (</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;{product.name}&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;p className=&quot;product-price&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 166pt;text-indent: -10pt;line-height: 120%;text-align: left;">{new Intl.NumberFormat(&quot;en-US&quot;, { currency: &quot;USD&quot;,</p><p class="s12" style="padding-left: 166pt;text-indent: 0pt;text-align: left;">style: &quot;currency&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 155pt;text-indent: 0pt;text-align: left;">}).format(product.price)}</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">{!this.state.added &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 166pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;button onClick={this.handleAddClick}&gt;Add to basket&lt;/button&gt;</p><p class="s12" style="padding-left: 31pt;text-indent: 0pt;text-align: center;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 4pt;text-indent: 0pt;text-align: center;">) : (</p><p class="s12" style="padding-top: 1pt;padding-left: 3pt;text-indent: 0pt;text-align: center;">&lt;p&gt;Product not found!&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">);</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: center;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">There are a few interesting bits in this JSX:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_232.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">On the first line inside the function, we set a <span class="s22">product </span>variable to the product state to save a few keystrokes because we reference the product a lot in the JSX.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_233.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The ternary inside <span class="s22">div </span>renders the product if there is one. Otherwise, it informs the user that the product cannot be found.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_234.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use <span class="s22">React.Fragment </span>in the true part of the ternary because each part of a ternary can only have a single parent and <span class="s22">React.Fragment </span>is a mechanism for achieving this, without rendering something like a <span class="s22">div </span>tag that is not really needed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_235.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark416">We use </a><span class="s22">Intl.NumberFormat </span>to format the product price as currency with a currency symbol.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We are also calling the <span class="s22">handleAddClick </span>method when the <b>Add to basket </b>button is clicked. We haven&#39;t implemented this yet, so, let&#39;s do that now and set the <span class="s22">added </span>state to <span class="s22">true</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleAddClick = () =&gt; { this.setState({ added: true });</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Now that we&#39;ve implemented the <span class="s22">ProductPage </span>component, let&#39;s go back to</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Routes.tsx <span class="p">and import it:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import ProductPage from &quot;./ProductPage&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s go to our running app and type in <span class="s22">&quot;/products/2&quot; </span>as the path:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 84pt;text-indent: 0pt;text-align: left;"><span><img width="353" height="326" alt="image" src="Learn+React+with+TypeScript+3-2/Image_236.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_237.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Not quite what we want! Both <span class="s22">ProductsPage </span>and <span class="s22">ProductPage </span>have rendered because <span class="s22">&quot;/products/2&quot; </span>matches both <span class="s22">&quot;/products&quot; </span>and <span class="s22">&quot;/products/:id&quot;</span>.</p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">To resolve this, we can tell the <span class="s22">&quot;/products&quot; </span>route to only render when there is an exact match:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Route <span class="s21">exact={true} </span>path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">After we make this change and save <span class="s22">Routes.tsx</span>, our product page looks much better:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 104pt;text-indent: 0pt;text-align: left;"><span><img width="306" height="262" alt="image" src="Learn+React+with+TypeScript+3-2/Image_238.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 92%;text-align: left;">We aren&#39;t going to make our users type in the specific paths to visit the products! So, we are going to change <span class="s22">ProductsPage </span>to link to <span class="s22">ProductPage </span>for each product using the <span class="s22">Link </span>component. First, let&#39;s import <span class="s22">Link </span>into <span class="s22">ProductsPage </span>from React Router:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { Link } from &quot;react-router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;">Now, instead of rendering the product name in each list item, we are going to render a <span class="s22">Link </span>component that goes to our product page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;"><a name="bookmark417">&lt;p&gt;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 139pt;text-indent: -5pt;line-height: 120%;text-align: left;">Welcome to React Shop where you can get all your tools for ReactJS!</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">{this.state.products.map(product =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;li key={product.id} className=&quot;product-list-item&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 155pt;text-indent: 0pt;text-align: left;">&lt;Link to={`/products/${product.id}`}&gt;{product.name}</p><p class="s21" style="padding-left: 155pt;text-indent: 0pt;text-align: left;">&lt;/Link&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;line-height: 13pt;text-align: left;">Before we take a look a the running app, let&#39;s add the following CSS class in our</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">index.css<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.product-list-item a { text-decoration: none;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark388">Now, if we go to the products list in our app and click on a list item, it takes us to the relevant product page.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark418">Handling not found routes</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">What if a user enters a path that doesn&#39;t exist in our app? For example, if we try to navigate to <span class="s22">&quot;/tools&quot; </span>we get nothing appearing beneath our header. This makes sense, because React Router didn&#39;t find any matching routes, so nothing is rendered. However, if the user does navigate to an invalid path, we want to inform them that the path doesn&#39;t exist. The following steps make this happen:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l94"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">So, let&#39;s create a new file called <span class="s22">NotFoundPage.tsx </span>with the following component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const NotFoundPage: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Sorry, this page cannot be found&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default NotFoundPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 56pt;text-indent: -16pt;text-align: left;">Let&#39;s import this into our routes in <span class="s22">Routes.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import NotFoundPage from &quot;./NotFoundPage&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s then add a <span class="s22">Route </span>component to this with the other routes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Header /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">&lt;Route exact={true} path=&quot;/products&quot; component={ProductsPage}</p><p class="s12" style="padding-left: 128pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products/:id&quot; component={ProductPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Route component={NotFoundPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Router&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">However, this is going to render for every path:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 92pt;text-indent: 0pt;text-align: left;"><span><img width="330" height="267" alt="image" src="Learn+React+with+TypeScript+3-2/Image_239.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark419">How can we just render </a><span class="s22">NotFoundPage </span>when it hasn&#39;t found another route? The answer is to wrap the Routes in the <span class="s22">Switch </span>component in React Router.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s first import <span class="s22">Switch </span>into <span class="s22">Routes.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { BrowserRouter as Router, Route, <span class="s21">Switch </span>} from &quot;react- router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now wrap the <span class="s22">Route </span>components in a <span class="s22">Switch </span>component:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Switch&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route exact={true} path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products/:id&quot; component={ProductPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route component={NotFoundPage} /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Switch&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">Switch </span>component renders only the first matching <span class="s22">Route </span>component. If we look at the running app we see that our problem is resolved. If we enter a path that doesn&#39;t exist, we get our nice not found message:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="518" height="227" alt="image" src="Learn+React+with+TypeScript+3-2/Image_240.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark389">Implementing page redirects</a><a name="bookmark420">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">React Router has a component called <span class="s22">Redirect </span>that we can use to redirect to pages. We use this component in a couple of cases to improve our shop in the following sections.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark390">Simple redirect</a><a name="bookmark421">&zwnj;</a><a name="bookmark422">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we visit the <span class="s22">/ </span>route path, we&#39;ll notice that we get the <b>Sorry, this page cannot be found </b>message. Let&#39;s change this to redirect to <span class="s22">&quot;/products&quot; </span>when the path is <span class="s22">/</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l95"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">First, we need to import the <span class="s22">Redirect </span>component from React Router into</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Routes.tsx<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { BrowserRouter as Router, <span class="s21">Redirect</span>, Route, Switch } from &quot;react-router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can now use the <span class="s22">Redirect </span>component to redirect to <span class="s22">&quot;/products&quot; </span>when the path is <span class="s22">/</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Switch&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;Redirect exact={true} from=&quot;/&quot; to=&quot;/products&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;Route exact={true} path=&quot;/products&quot; component={ProductsPage}</p><p class="s12" style="padding-top: 1pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products/:id&quot; component={ProductPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot; component={AdminPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;Route component={NotFoundPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Switch&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">We&#39;ve used the <span class="s22">exact </span>attribute on <span class="s22">Redirect </span>so that it only matches <span class="s22">/ </span>and not <span class="s22">&quot;/products/1&quot; </span>and <span class="s22">&quot;/admin&quot;</span>. If we give this a try and enter <span class="s22">/ </span>as the path in our running app, it will immediately redirect to <span class="s22">&quot;/products&quot;</span>.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-top: 12pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark391">Conditional redirect</a><a name="bookmark423">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We can use the <span class="s22">Redirect </span>component to protect pages from unauthorized users. In our shop, we can use this to ensure only logged in users can access our <b>Admin </b>page. We do this through the following steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l96"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s start by adding a route to a <span class="s22">LoginPage </span>in <span class="s22">Routes.tsx </span>after the route to the</p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Admin <span class="p">page:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/login&quot; component={LoginPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Of course, <span class="s22">LoginPage </span>doesn&#39;t exist at the moment, so, let&#39;s create a file called</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">LoginPage.tsx <span class="p">and enter the following:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 240%;text-align: left;">import * as React from &quot;react&quot;; const LoginPage: React.SFC = () =&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Login&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;p&gt;You need to login ...&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default LoginPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then go back to <span class="s22">Routes.tsx </span>and import <span class="s22">LoginPage</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import LoginPage from &quot;./LoginPage&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">If we go to the running app and navigate to <span class="s22">&quot;/login&quot;</span>, we will see our <b>Login</b></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 147pt;text-indent: 0pt;text-align: left;"><span><img width="192" height="192" alt="image" src="Learn+React+with+TypeScript+3-2/Image_241.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are not going to fully implement our <b>Login </b>page; the page that we have implemented is enough to demonstrate a conditional redirect.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Before we implement the conditional redirect on the <span class="s22">&quot;admin&quot; </span>path, we need to add a piece of state for whether a user is logged in or not in <span class="s22">Routes.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const Routes: React.SFC = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">const [loggedIn, setLoggedIn] = React.useState(false);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/Router&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark424">So, we have used a </a><span class="s22">useState </span>hook to add a state variable called <span class="s22">loggedIn </span>and a function to set it called <span class="s22">setLoggedIn</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The final step is to add the following inside the <span class="s22">Route </span>component with the <span class="s22">&quot;/admin&quot; </span>path:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot;&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{loggedIn ? &lt;AdminPage /&gt; : &lt;Redirect to=&quot;/login&quot;</p><p class="s21" style="padding-left: 107pt;text-indent: 0pt;text-align: left;">/&gt;}</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_242.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We conditionally render <span class="s22">AdminPage </span>if the user is logged in, otherwise, we redirect to the <span class="s22">&quot;/login&quot; </span>path. If we now click the <span class="s22">admin </span>link in our running app, we get redirected to the <b>Login </b>page.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Route&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we change the <span class="s22">loggedIn </span>state to be true when we initialize it, we are able to access our <b>Admin </b>page again:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const [loggedIn, setLoggedIn] = React.useState(<span class="s21">true</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark392">Query parameters</a><a name="bookmark425">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">A query parameter is part of the URL that allows additional parameters to be passed into a path. For example, <span class="s22">&quot;/products?search=redux&quot; </span>has a query parameter called <span class="s22">search </span>with a <span class="s22">redux </span>value.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s implement this example and allow the users of the shop to search for a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l97"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by adding a variable in the state in <span class="s22">ProductsPage.tsx </span>called <span class="s22">search</span>, which is going to hold the search criteria:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 118%;text-align: left;">interface IState { products: IProduct[]; <span class="s21">search: string;</span></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Given that we need to access the URL, we need to use <span class="s22">RouteComponentProps </span>as the props type in <span class="s22">ProductsPage</span>. Let&#39;s first import this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { RouteComponentProps } from &quot;react-router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 56pt;text-indent: -16pt;text-align: left;">We can then use this as the <span class="s22">props </span>type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">class ProductsPage extends React.Component&lt;<span class="s21">RouteComponentProps</span>, IState&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can initialize the <span class="s22">search </span>state to an empty string in <span class="s22">constructor</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">public constructor(props: <span class="s21">RouteComponentProps</span>) { super(props);</p><p class="s12" style="padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">this.state = { products: [],</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">search: &quot;&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">We then need to set the <span class="s22">search </span>state in <span class="s22">componentDidMount </span>to the search query parameter. React Router gives us access to all the query parameters in <span class="s22">location.search </span>within the <span class="s22">props </span>argument that it passes into the component. We then need to parse that string to get our search query string parameter. We can use the <span class="s22">URLSearchParams </span>JavaScript function to do this. We are going to use the static <span class="s22">getDerivedStateFromProps </span>life cycle method to do this, which is called when the component loads and when its <span class="s22">props </span>parameters change:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public static getDerivedStateFromProps( props: RouteComponentProps,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">state: IState</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">) {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const searchParams = new URLSearchParams(props.location.search);</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">const search = searchParams.get(&quot;search&quot;) || &quot;&quot;; return {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">products: state.products, search</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Unfortunately, <span class="s22">URLSearchParams </span>hasn&#39;t been implemented yet in all browsers, so we can use a polyfill called <span class="s22">url-search-params-polyfill</span>. Let&#39;s install this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install url-search-params-polyfill</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s import this into <span class="s22">ProductPages.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import &quot;url-search-params-polyfill&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We then can use the <span class="s22">search </span>state in the <span class="s22">render </span>method by wrapping an <span class="s22">if </span>statement around the returned list item to only return something when the value of <span class="s22">search </span>is contained within the product name:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{this.state.products.map(product =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">if (</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 106%;text-align: left;">!this.state.search || (this.state.search &amp;&amp;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 10pt;text-align: left;">product.name</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">.toLowerCase()</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">.indexOf(this.state.search.toLowerCase()) &gt; -1)</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">) {</p><p class="s12" style="padding-top: 1pt;padding-left: 20pt;text-indent: 0pt;text-align: center;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 121pt;text-indent: 0pt;text-align: center;">&lt;li key={product.id} className=&quot;product-list-item&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 132pt;text-indent: 0pt;text-align: center;">&lt;Link to={`/products/${product.id}`}&gt;{product.name}</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/Link&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 25pt;text-indent: 0pt;text-align: center;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">);</p><p class="s21" style="padding-top: 1pt;padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">} else { return null;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">})}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we enter <span class="s22">&quot;/products?search=redux&quot; </span>as the path in our running app, we will see our products list containing only <b>React Redux</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="238" alt="image" src="Learn+React+with+TypeScript+3-2/Image_243.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: justify;"><a name="bookmark426">We are going to finish implementing this feature by adding a search input in our app header that sets the search query parameter. Let&#39;s start this by creating some state in the </a><span class="s22">Header </span>component for the search value in <span class="s22">Header.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 46pt;text-indent: 0pt;text-align: center;">const [search, setSearch] = React.useState(&quot;&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;">We are also going to need to access the query string via React Router and <span class="s22">URLSearchParams</span>, so let&#39;s import <span class="s22">RouteComponentProps</span>, <span class="s22">withRouter</span>, and the <span class="s22">URLSearchParams </span>polyfill:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { NavLink, <span class="s21">RouteComponentProps, withRouter</span>} from &quot;react- router-dom&quot;;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import &quot;url-search-params-polyfill&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s add a <span class="s22">props </span>parameter to our <span class="s22">Header </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const Header: React.SFC<span class="s21">&lt;RouteComponentProps&gt; </span>= <span class="s21">props </span>=&gt; { ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">We can now get the search value from the path query string and set the <span class="s22">search</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">state to this when the component first renders:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const [search, setSearch] = React.useState(&quot;&quot;);</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">React.useEffect(() =&gt; { const searchParams = new</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">URLSearchParams(props.location.search); setSearch(searchParams.get(&quot;search&quot;) || &quot;&quot;);</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">Let&#39;s now add a <span class="s22">search </span>input in the <span class="s22">render </span>method for the user to enter their search:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;header&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;search-container&quot;&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;line-height: 106%;text-align: left;">type=&quot;search&quot; placeholder=&quot;search&quot; value={search} onChange={handleSearchChange} onKeyDown={handleSearchKeydown}</p><p class="s21" style="padding-left: 9pt;text-indent: 0pt;line-height: 10pt;text-align: center;">/&gt;</p><p class="s21" style="padding-left: 9pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;img src={logo} className=&quot;header-logo&quot; alt=&quot;logo&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;h1 className=&quot;header-title&quot;&gt;React Shop&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;nav&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/nav&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">Let&#39;s add the <span class="s22">search-container </span>CSS class that we just referenced to</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">index.css<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.search-container { text-align: right; margin-bottom: -25px;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">Back in <span class="s22">Header.tsx</span>, let&#39;s add the <span class="s22">handleSearchChange </span>method, which is referenced in the <span class="s22">render </span>method and will keep our <span class="s22">search </span>state up to date with the value being entered:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleSearchChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">setSearch(e.currentTarget.value);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">We can now implement the <span class="s22">handleSearchKeydown </span>method, which is referenced in the <span class="s22">render </span>method. This needs to add the <span class="s22">search </span>state value to the path query string when the <span class="s22">Enter </span>key is pressed. We can leverage the <span class="s22">push </span>method in the <span class="s22">history </span>prop that <span class="s22">RouteComponentProps </span>gives us:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleSearchKeydown = (e: React.KeyboardEvent&lt;HTMLInputElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (e.key === &quot;Enter&quot;) { props.history.push(`/products?search=${search}`);</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">We need to export the <span class="s22">Header </span>component wrapped with the <span class="s22">withRouter </span>higher order component in order for the reference to <span class="s22">this.props.history </span>to work. So, let&#39;s do this and adjust our <span class="s22">export </span>expression:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default <span class="s21">withRouter(</span>Header<span class="s21">)</span>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;"><a name="bookmark427">Let&#39;s give this a try in the running app. If we enter </a><span class="s22">redux </span>in the search input and press the <i>Enter </i>key, the app should navigate to the <b>Products </b>page and filter the products to <b>React Redux</b>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="209" alt="image" src="Learn+React+with+TypeScript+3-2/Image_244.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark393">Route prompts</a><a name="bookmark428">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Sometimes, we might want to ask the user to confirm that they want to navigate away from a page. This is useful if the user is in the middle of data entry on a page and presses a navigation link to go to a different page before they have saved the data. The <span class="s22">Prompt </span>component in React Router allows us to do this, as set out in the following steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l98"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">In our app, we are going to prompt users to confirm that they want to navigate away from the <b>Product </b>page if they haven&#39;t added the product to their basket. First, in <span class="s22">ProductPage.tsx</span>, let&#39;s import the <span class="s22">Prompt </span>component from React Router:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { <span class="s21">Prompt</span>, RouteComponentProps } from &quot;react-router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The <span class="s22">Prompt </span>component invokes a confirmation dialog during navigation when a certain condition is met. We can use the <span class="s22">Prompt </span>component in our JSX as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 106%;text-align: left;">&lt;Prompt when={!this.state.added} message={this.navAwayMessage}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/&gt;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark429">The </a><span class="s22">when </span>attribute allows us to specify an expression for when the dialog should appear. In our case, this is when the product hasn&#39;t been added to the basket.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">message </span>attribute allows us to specify a function that returns the message to display in the dialog.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">In our case, we call a <span class="s22">navAwayMessage </span>method, which we&#39;ll implement next:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">private navAwayMessage = () =&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;Are you sure you leave without buying this product?&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s give this a try by navigating to the React Router product and then navigating away without clicking the <b>Add to basket </b>button:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="254" alt="image" src="Learn+React+with+TypeScript+3-2/Image_245.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 38pt;text-indent: 0pt;text-align: left;"><a name="bookmark394">We are asked to confirm whether we want to navigate away.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark430">Nested routes</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">A nested route is when a URL is more than one level deep and it renders multiple components. We are going to implement some nested routes in this section in our <b>Admin </b>page. Our completed <b>Admin </b>page will look like the following screenshot:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="295" alt="image" src="Learn+React+with+TypeScript+3-2/Image_246.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The URL in the preceding screenshot is 3 levels deep which renders the following:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_247.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">The top-level menu containing links for <b>Users </b>and <b>Products</b>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_248.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_249.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">A menu containing all the users. This is just <b>Fred</b>, <b>Bob</b>, and <b>Jane </b>is our example. Information about the selected user.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l99"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><span class="s29">	</span>Let&#39;s start by opening <span class="s22">AdminPage.tsx </span>and add <span class="s22">import </span>statements for the following from <span class="s22">react-router-dom</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { NavLink, Route, RouteComponentProps } from &quot;react- router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_250.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We&#39;ll use the <span class="s22">NavLink </span>component to render the menus</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_251.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The <span class="s22">Route </span>component will be used to render the nested routes</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_252.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">RouteComponentProps </span>type will be used to get the <span class="s22">id </span>of a user from the URL</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We are going to replace the <span class="s22">p </span>tag with an unordered list containing menu options</p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Users <span class="p">and </span>Products<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Admin Panel&lt;/h1&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;admin-sections&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;li key=&quot;users&quot;&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 111pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;NavLink to={`/admin/users`} activeClassName=&quot;admin-link- active&quot;&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Users</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/NavLink&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;li key=&quot;products&quot;&gt;</p><p class="s21" style="padding-left: 106pt;text-indent: -5pt;line-height: 106%;text-align: left;">&lt;NavLink to={`/admin/products`} activeClassName=&quot;admin-link- active&quot;&gt;</p><p class="s21" style="text-indent: 0pt;line-height: 10pt;text-align: right;">Products</p><p class="s21" style="text-indent: 0pt;text-align: right;">&lt;/NavLink&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use the <span class="s22">NavLink </span>component to navigate to the nested route for the two options.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the CSS classes we have just referenced in <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.admin-sections { list-style: none;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">margin: 0px 0px 20px 0px; padding: 0;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.admin-sections li { display: inline-block; margin-right: 10px;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.admin-sections li a { color: #222;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">text-decoration: none;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.admin-link-active {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">border-bottom: #6f6e6e solid 2px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Moving back to <span class="s22">AdminPage.tsx</span>, let&#39;s add two <span class="s22">Route </span>components beneath the menu we have just added. These will handle the <span class="s22">/admin/users</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">and <span class="s22">/admin/products </span>paths we referenced in our menu:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Admin Panel&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;admin-sections&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/ul&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin/users&quot; component={AdminUsers} /&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin/products&quot; component={AdminProducts} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We have just referenced <span class="s22">AdminUsers </span>and <span class="s22">AdminProducts </span>components that don&#39;t exist yet. Let&#39;s implement the <span class="s22">AdminProducts </span>component first by entering the following beneath the <span class="s22">AdminPage </span>component in <span class="s22">AdminPage.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const AdminProducts: React.SFC = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return &lt;div&gt;Some options to administer products&lt;/div&gt;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">So, this component just renders a bit of text on the screen.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s move on to the <span class="s22">AdminUsers </span>component now which is more complex. We&#39;ll start by defining an interface for a user along with some user data beneath</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">AdminProducts </span>component in <span class="s22">AdminPage.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IUser { id: number; name: string;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">isAdmin: boolean;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const adminUsersData: IUser[] = [</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{ id: 1, name: &quot;Fred&quot;, isAdmin: true },</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{ id: 2, name: &quot;Bob&quot;, isAdmin: false },</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{ id: 3, name: &quot;Jane&quot;, isAdmin: true }</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">So, we have 3 users in our example.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start to implement the <span class="s22">AdminUsers </span>component then in <span class="s22">AdminPage.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const AdminUsers: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;ul className=&quot;admin-sections&quot;&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">{adminUsersData.map(user =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">&lt;li&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 144pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;NavLink to={`/admin/users/${user.id}`} activeClassName=&quot;admin-link-active&quot;</p><p class="s12" style="padding-left: 133pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 144pt;text-indent: 0pt;text-align: left;">{user.name}</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;/NavLink&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="text-indent: 0pt;text-align: right;"><a name="bookmark431">))}</a></p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The component renders a link containing each user&#39;s name. The link is to a nested path which will eventually show details about the user.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, we need to define another route that will call a component to render details about a user. We can do this by using another <span class="s22">Route </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;admin-sections&quot;&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">...</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin/users/:id&quot; component={AdminUser} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The path we have just defined routes to an <span class="s22">AdminUser </span>component we haven&#39;t defined yet. So, let&#39;s make a start on this beneath the <span class="s22">AdminUsers </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const AdminUser: React.SFC&lt;RouteComponentProps&lt;{ id: string }&gt;&gt; = props =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return null;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use <span class="s22">RouteComponentProps </span>to get the <span class="s22">id </span>from the URL path and make this available in the props.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">We can now use the <span class="s22">id </span>from the path to get the user from our <span class="s22">adminUsersData</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const AdminUser: React.SFC&lt;RouteComponentProps&lt;{ id: string }&gt;&gt; = props =&gt; {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">let user: IUser;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">if (props.match.params.id) {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 106%;text-align: left;">const id: number = parseInt(props.match.params.id, 10); user = adminUsersData.filter(u =&gt; u.id === id)[0];</p><p class="s21" style="padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">} else { return null;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return null;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Now that we have the <span class="s22">user </span>object, we can render the information within it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const AdminUser: React.SFC&lt;RouteComponentProps&lt;{ id: string }&gt;&gt; = props =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">let user: IUser;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">if (props.match.params.id) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">const id: number = parseInt(props.match.params.id, 10); user = adminUsersData.filter(u =&gt; u.id === id)[0];</p><p class="s12" style="padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else { return null;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;b&gt;Id: &lt;/b&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;span&gt;{user.id.toString()}&lt;/span&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;b&gt;Is Admin: &lt;/b&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;span&gt;{user.isAdmin.toString()}&lt;/span&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;line-height: 13pt;text-align: left;">If we go to the running app, go to the <b>Admin </b>page and click on the <b>Products</b></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">menu item, it will look like below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="174" height="76" alt="image" src="Learn+React+with+TypeScript+3-2/Image_253.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="484" height="124" alt="image" src="Learn+React+with+TypeScript+3-2/Image_254.png"/></span></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;">If we click on the <b>Users </b>menu item, we&#39;ll see the 3 users that we can click on to get more information about a user. This will look like the first screenshot in this section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, in order to implement nested routes, we create the necessary links using <span class="s22">NavLink </span>or <span class="s22">Link </span>components and route those links to the component to render the content using a <span class="s22">Route </span>component. We already knew about these components before this section, so, we just needed to learn how to use these in the context of nested routes.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark395">Animated transitions</a><a name="bookmark432">&zwnj;</a><a name="bookmark433">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">In this section, we are going to add a bit of animation when users navigate to different pages. We do this using the <span class="s22">TransitionGroup </span>and <span class="s22">CSSTransition </span>components from the <span class="s22">react-transition-group npm </span>package, as shown in the following steps:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l100"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s first install this package with its TypeScript types:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install react-transition-group</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install @types/react-transition-group --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">TransitionGroup <span class="p">keeps track of all its children inside its local state and calculates when children are entering or exiting. </span>CSSTransition <span class="p">takes whether children are leaving or exiting from </span>TransitionGroup <span class="p">and applies CSS classes to the children based on that status.</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 12pt;text-align: left;">So, <span class="s22">TransitionGroup </span>and <span class="s22">CSSTransition </span>can wrap our routes and invoke CSS</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">classes that we can create to animate pages in and out.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s import these components into <span class="s22">Routes.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { CSSTransition, TransitionGroup } from &quot;react- transition-group&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We also need to import <span class="s22">RouteComponentProps </span>from React Router:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { Redirect, Route, <span class="s21">RouteComponentProps</span>, Switch} from &quot;react-router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s use <span class="s22">RouteComponentProps </span>as the <span class="s22">Route </span>component props type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const Routes: React.SFC&lt;<span class="s21">RouteComponentProps</span>&gt; = props =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add the <span class="s22">CSSTransition </span>and <span class="s22">TransitionGroup </span>components to the JSX around the <span class="s22">Switch </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;TransitionGroup&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;CSSTransition key={props.location.key} timeout={500} classNames=&quot;animate&quot;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Switch&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/Switch&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="text-indent: 0pt;text-align: right;">&lt;/CSSTransition&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/TransitionGroup&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">TransitionGroup <span class="p">requires children to have a unique key for it to determine what is exiting and entering. So, we have specified a </span>key <span class="p">attribute on </span>CSSTransition <span class="p">to be the </span>location.key <span class="p">property</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">from <span class="s22">RouteComponentProps</span>. We have specified that the transition is going to run for up to half a second via the <span class="s22">timeout </span>attribute. We have also specified the CSS classes that are going to be invoked with an <span class="s22">animate </span>prefix via the <span class="s22">classNames </span>attribute.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s add these CSS classes in <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.animate-enter { opacity: 0;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">z-index: 1;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.animate-enter-active { opacity: 1;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">transition: opacity 450ms ease-in;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.animate-exit { display: none;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 3pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">CSSTransition <span class="p">is going to invoke these CSS classes when its key changes. The CSS classes initially hide the element being transitioned and gradually ease the element&#39;s opacity so that it shows.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="481" height="111" alt="image" src="Learn+React+with+TypeScript+3-2/Image_255.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="497" height="129" alt="image" src="Learn+React+with+TypeScript+3-2/Image_256.png"/></span></p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we go to <span class="s22">index.tsx</span>, we get a compilation error where we reference the <span class="s22">Routes </span>component because it is expecting us to pass props such as <span class="s22">history </span>from the router:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark434">Unfortunately, we can&#39;t use the </a><span class="s22">withRouter </span>higher order component because this would be outside the <span class="s22">Router </span>component. To resolve this, we can add a new component called <span class="s22">RoutesWrap</span>, which doesn&#39;t take in any props and wraps our existing <span class="s22">Routes </span>component. The <span class="s22">Router </span>will move up to <span class="s22">RoutesWrap </span>and will contain a <span class="s22">Route </span>component that always renders our <span class="s22">Routes </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">So, let&#39;s add this <span class="s22">RoutesWrap </span>component to <span class="s22">Routes.tsx </span>and export</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">RoutesWrap <span class="p">instead of </span>Routes<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">const RoutesWrap: React.SFC = () =&gt; { return (</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;Router&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;Route component={Routes} /&gt;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/Router&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">class Routes extends React.Component&lt;RouteComponentProps, IState&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default <span class="s21">RoutesWrap;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 55pt;text-indent: 0pt;text-align: left;">The compilation error goes away, which is great.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now remove <span class="s22">Router </span>from our <span class="s22">Routes </span>component, leaving the <span class="s22">div </span>tag as its root:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;Header /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;TransitionGroup&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/TransitionGroup&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 28pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go to the running app and navigate to the different pages, you&#39;ll see a nice fade animation as the page comes into view.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark396">Lazy loading routes</a><a name="bookmark435">&zwnj;</a><a name="bookmark436">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">At the moment, all the JavaScript for our app is loaded when the app first loads. This includes the <b>Admin </b>page that users don&#39;t use that often. It would be great if the <span class="s22">AdminPage </span>component wasn&#39;t loaded when the app loads and instead loaded on demand. This is exactly what we are going to do in this section. This is called &quot;lazy loading&quot; components.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">The following steps allows us to load things on demand:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l101"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, we are going to import the <span class="s22">Suspense </span>component from React, which we are going to use a little later:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Suspense } from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, we are going to import the <span class="s22">AdminPage </span>component differently:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">const AdminPage = React.lazy(() =&gt; import(&quot;./AdminPage&quot;));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use a React function called <span class="s22">lazy </span>which takes in a function that returns a dynamic import, which in turn is assigned to our <span class="s22">AdminPage </span>component variable.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">After we have done this, we may get a linting error: <b>A dynamic import call in ES5/ES3 requires the &#39;Promise&#39; constructor. Make sure you have a declaration for the &#39;Promise&#39; constructor or include &#39;ES2015&#39; in your `--lib` option</b>. So, in <span class="s22">tsconfig.json</span>, let&#39;s add the <span class="s22">lib </span>compiler option:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&quot;compilerOptions&quot;: {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&quot;lib&quot;: [&quot;es6&quot;, &quot;dom&quot;],</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">The next part is to wrap the <span class="s22">Suspense </span>component around the <span class="s22">AdminPage</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{loggedIn ? (</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 21pt;line-height: 106%;text-align: left;">&lt;Suspense fallback={&lt;div className=&quot;page- container&quot;&gt;Loading...&lt;/div&gt;}&gt;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;AdminPage /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/Suspense&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">) : (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;Redirect to=&quot;/login&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Route&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The <span class="s22">Suspense </span>component shows a <span class="s22">div </span>tag containing</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><b>Loading... </b>whilst <span class="s22">AdminPage </span>is being loaded.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 90%;text-align: left;">Let&#39;s try this in the running app. Let&#39;s open the browser developer tools and go to the <b>Network </b>tab. In our app, let&#39;s go to the <b>Products </b>page and refresh the browser. Let&#39;s then clear the content in the <b>Network </b>tab in the developer tools. If we then go to the <b>Admin </b>page in our app and look at the content in the <b>Network </b>tab, we&#39;ll see the <i>chunk </i>of JavaScript for the <span class="s22">AdminPage </span>component dynamically loaded:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="208" alt="image" src="Learn+React+with+TypeScript+3-2/Image_257.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">The <span class="s22">AdminPage </span>component loads really fast, so we never really see the <b>Loading</b></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">... <span class="s22">div </span><span class="p">tag. So, let&#39;s slow the connection down in the browser developer tools:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="566" height="113" alt="image" src="Learn+React+with+TypeScript+3-2/Image_258.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;"><a name="bookmark437">If we then refresh the browser, and go to the </a><b>Admin </b>page again, we&#39;ll see</p></li></ol><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Loading ...<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 62pt;text-indent: 0pt;text-align: left;"><span><img width="418" height="214" alt="image" src="Learn+React+with+TypeScript+3-2/Image_259.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark397">In this example, the </a><span class="s22">AdminPage </span>component isn&#39;t that big so this approach doesn&#39;t really positively impact performance. However, loading larger components on demand can really help performance, particularly on slow connections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark438">Summary</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">React Router gives us a comprehensive set of components for managing the navigation between pages in our app. We learned that the top-level component is <span class="s22">Router</span>, which looks for <span class="s22">Route </span>components beneath it where we define what components should be rendered for certain paths.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Link </span>component allows us to link to different pages with an app. We learned that the <span class="s22">NavLink </span>component is like <span class="s22">Link</span>, but it includes the ability to style it depending on whether it is the active path or not. So, <span class="s22">NavLink </span>is perfect for the main navigation element in an app and <span class="s22">Link </span>is great for other links that appear on pages.</p><p class="s22" style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">RouteComponentProps <span class="p">is a type that gives us access to route parameters and query parameters. We discovered that React Router doesn&#39;t parse query parameters for us, but can use the native JavaScript </span>URLSearchParams <span class="p">interface to do this for us.</span></p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Redirect </span>component redirects to a path under certain conditions. We found that this is perfect for protecting pages that only privileged users can access.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">Prompt </span>component allows us to ask the user to confirm they want to leave a page under a certain condition. We used this on the <b>Product </b>page to double-check whether users wanted to buy the product. Another common use case for this component is confirming navigation away from a data entry page when the inputted data hasn&#39;t been saved.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We learnt about how nested routes can provide users with deep links into very specific parts of our app. We simply define the relevant links using <span class="s22">Link </span>or <span class="s22">NavLink </span>and <span class="s22">Route </span>components to handle those links.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We improved our app experience with page transitions using the <span class="s22">TransitionGroup </span>and <span class="s22">CSSTransition </span>components from the <span class="s22">react-transition-group npm </span>package. We wrapped these components around our <span class="s22">Route </span>components that define the app paths and added CSS classes to do the animation we want when pages exit and enter into view.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark398">We learnt that the React </a><span class="s22">lazy </span>function along with its <span class="s22">Suspense </span>component can be used on large components that are rarely used by users to load them on demand. This helps performance for the startup time of our app.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark439">Questions</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s test our knowledge on React Router with the following questions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l102"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following <span class="s22">Route </span>component that shows a list of customers:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;Route path=&quot;/customers&quot; component={CustomersPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 45pt;text-indent: 0pt;text-align: center;">Will the <span class="s22">CustomersPage </span>component render when the page is <span class="s22">&quot;/customers&quot;</span>?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Will the <span class="s22">CustomersPage </span>component render when the page is</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">&quot;/customers/24322&quot;<span class="p">?</span></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We only want the <span class="s22">CustomersPage </span>component to render when the path is</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">&quot;/customers&quot;<span class="p">. How can we change the attributes on </span>Route <span class="p">to achieve this?</span></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">What would be the <span class="s22">Route </span>component that could handle</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">the <span class="s22">&quot;/customers/24322&quot; </span>path be? It should put <span class="s22">&quot;24322&quot; </span>in a route parameter called <span class="s22">customerId</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we catch paths that don&#39;t exist so that we can inform the user?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How would we implement a <span class="s22">search </span>query parameter in <span class="s22">CustomersPage</span>? So, <span class="s22">&quot;/customers/?search=Cool Company&quot; </span>would show customers with the name <span class="s22">&quot;Cool Company&quot;</span>.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">After a while, we decide to change the <span class="s22">&quot;customer&quot; </span>paths to <span class="s22">&quot;clients&quot;</span>. How can we implement this so that users can still use the existing <span class="s22">&quot;customer&quot; </span>paths but have the paths automatically redirect to the new <span class="s22">&quot;client&quot; </span>paths?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark399">Further reading</a><a name="bookmark440">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_260.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: justify;">The React Router documentation at the following link is worth going through:</p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://reacttraining.com/react-router">https://reacttraining.com/react-router</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_261.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: justify;">The <span class="s22">react-transition-group </span><a href="https://reactcommunity.org/react-transition-group/" class="s20" target="_blank">documentation is also worth looking at to gain further knowledge on transitioning components: </a><a href="https://reactcommunity.org/react-transition-group/" class="a" target="_blank">https://reactcommunity.org/ react-transition-</a><a href="https://reactcommunity.org/react-transition-group/" target="_blank">group/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 208pt;text-indent: 0pt;text-align: left;"><a name="bookmark441">Advanced Types</a><a name="bookmark460">&zwnj;</a><a name="bookmark461">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ve already learned about a fair amount of the type system in TypeScript. In this chapter, we&#39;ll continue on this journey, this time diving into some of the more advanced types and concepts that will help us later in the book to create reusable strongly type React components.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="https://cdp.packtpub.com/learn_react_17_with_typescript_3/wp-admin/post.php?post=31&amp;action=edit&amp;post_31" class="s20" target="_blank">We&#39;ll learn about how we can combine existing types to create union type. We&#39;ll find out in </a><span class="s12">Chapter 8</span>, <i>React Redux, </i>that these types are fundamental to creating strongly typed React Redux code.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://cdp.packtpub.com/learn_react_17_with_typescript_3/wp-admin/post.php?post=31&amp;action=edit&amp;post_31" class="s20" target="_blank">We briefly covered type guards in </a><span class="s12">Chapter 2</span>, <i>What is New in TypeScript 3</i>, when we learned about the <span class="s22">unknown </span>type. We look at these in more detail in this chapter.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Generics are a TypeScript feature that many libraries use to allow consumers to create strongly typed apps with their library. React itself uses it in class components to allow us to create strongly typed props and states in the component. We cover generics in detail in this chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Overload signatures is a nice feature that allows us to have a single function taking different combinations of parameters. We&#39;ll learn how to use these in this chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Lookup and mapped types allow us to dynamically create new types from existing types. We learn all about these at the end of this chapter.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_262.png"/></span></p><p style="padding-left: 53pt;text-indent: -48pt;line-height: 22pt;text-align: left;">In this chapter, we&#39;ll learn about the following topics: Union types</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_263.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_264.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Type guards Generics</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_265.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_266.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Overload signatures Lookup and mapped types</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark442">Technical requirements</a><a name="bookmark462">&zwnj;</a><a name="bookmark463">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_267.png"/></span></p><p class="s9" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;">TypeScript playground<a href="http://www.typescriptlang.org/play" class="s20" target="_blank">: This is a website at </a><a href="http://www.typescriptlang.org/play" class="a" target="_blank">http://www.typescriptlang.org/ play</a><span class="s12"> </span><span class="p">that allows us to play and understand the features in TypeScript without installing it. We&#39;ll use this the majority of the time in this chapter.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_268.png"/></span></p><p class="s9" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code that can be installed from the </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="s12"> </span><span class="p">website. We will also need the </span>TSLint <span class="p">(by egamma) and </span>Prettier <span class="p">(by Esben</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_269.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/05-AdvancedTypes" class="s20" target="_blank">All the code snippets in this chapter can be found online at: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/05-AdvancedTypes" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/05-AdvancedTypes" target="_blank">/</a></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 125%;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/05-AdvancedTypes" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/05- </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/05-AdvancedTypes" target="_blank">AdvancedTypes.</a></p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Petersen) extensions installed within Visual Studio Code.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark443">Union types</a><a name="bookmark464">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark444">As the name suggests, union types are types that we can combine together to form a new type. Unions are commonly used with string literal types, which we&#39;ll cover in the first section. Unions can be used in a pattern called discriminated union, which we can use when creating generic and reusable React components.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark465">String literal types</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">A variable of a string literal type can only be assigned the exact string value specified in the string literal type.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In the TypeScript playground, let&#39;s go through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l103"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create a string literal type called <span class="s22">Control </span>that can only be set to the <span class="s22">&quot;Textbox&quot; </span>string:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type Control = &quot;Textbox&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark466">Let&#39;s now create a variable called </a><span class="s22">notes </span>with our <span class="s22">Control </span>type and set this to</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">&quot;Textbox&quot;<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">let notes: Control; notes = &quot;Textbox&quot;;</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">As we would expect, the TypeScript compiler is happy with this.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now let&#39;s set our variable to a different value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">notes = &quot;DropDown&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We get the compilation error <b>Type &#39;&quot;DropDown&quot;&#39; is not assignable to type &#39;&quot;Textbox&quot;&#39;</b>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 46pt;text-indent: 0pt;text-align: left;"><span><img width="460" height="133" alt="image" src="Learn+React+with+TypeScript+3-2/Image_270.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">As with all other types in TypeScript, <span class="s22">null </span>and <span class="s22">undefined </span>are valid values as well:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">notes = null; notes = undefined;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark445">String literal types aren&#39;t that useful on their own. However, they become extremely useful when used in a union type, which we&#39;ll look at in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark467">String literal union types</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 152%;text-align: left;">A string literal union type is where we combine multiple string literal types together. Let&#39;s continue from the previous example and go through this.</p><ol id="l104"><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s enhance our <span class="s22">Control </span>type to be a union of string literals:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type Control = &quot;Textbox&quot; | &quot;DropDown&quot;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We combine types in a union type using <span class="s22">|</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark468">Setting our </a><span class="s22">notes </span>variable to either <span class="s22">&quot;Textbox&quot; </span>or <span class="s22">&quot;DropDown&quot; </span>is now perfectly valid:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">let notes: Control; notes = &quot;Textbox&quot;; notes = &quot;DropDown&quot;;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s extend our <span class="s22">Control </span>type to include more string literals:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">type Control = &quot;Textbox&quot; | &quot;DropDown&quot; | &quot;DatePicker&quot; | &quot;NumberSlider&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now set our <span class="s22">notes </span>variable to any of these values:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">notes = &quot;DatePicker&quot;; notes = &quot;NumberSlider&quot;;</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">If we think about it, this is really useful. We could have declared the <span class="s22">notes </span>variable as</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark446">a </a><span class="s22">string</span>, but declaring it with the specific string literals it can contain makes it super type- safe.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark469">Discriminated union pattern</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 152%;text-align: left;">The discriminated union pattern allows us to handle the logic for different union types. Let&#39;s go through an example:</p><ol id="l105"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s first create three interfaces to represent a textbox, a date picker, and a number slider:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ITextbox { control: &quot;Textbox&quot;; value: string; multiline: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IDatePicker { control: &quot;DatePicker&quot;; value: Date;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface INumberSlider { control: &quot;NumberSlider&quot;; value: number;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark470">They all have a property called </a><span class="s22">control</span>, which will be the discriminant in the pattern.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s move on to combine these interfaces into a union type called <span class="s22">Field</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type Field = ITextbox | IDatePicker | INumberSlider;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we can create union types from any types, and not just string literals. In this case, we have created a union type from three interfaces.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now create a function to initialize the value in the <span class="s22">Field </span>type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function intializeValue(field: Field) { switch (field.control) {</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case &quot;Textbox&quot;: field.value = &quot;&quot;; break;</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case &quot;DatePicker&quot;: field.value = new Date(); break;</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case &quot;NumberSlider&quot;: field.value = 0; break;</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">default:</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">const shouldNotReach: never = field;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The value we need to set depends on the discriminant property, <span class="s22">control</span>. So, we have used a <span class="s22">switch </span>statement to branch on this property.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">default </span>branch in the <span class="s22">switch </span>statement is where things get interesting. This branch should never be reached, so we have put a statement with the <span class="s22">never </span>type in that branch. We&#39;ll see the value of doing this after the next steps.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s pretend time has passed and we have a new requirement for checkbox fields. Let&#39;s implement an interface for this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ICheckbox { control: &quot;Checkbox&quot;; value: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also add this to the union <span class="s22">Field </span>type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type Field = ITextbox | IDatePicker | INumberSlider | ICheckbox;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ll immediately see that our <span class="s22">initializeValue </span>function throws a compilation error on the <span class="s22">never </span>declaration:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><span><img width="442" height="229" alt="image" src="Learn+React+with+TypeScript+3-2/Image_271.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This is very valuable because the <span class="s22">never </span>statement ensures we don&#39;t forget to add a branch of code for the new checkbox requirement.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s go and implement this additional branch for the <span class="s22">&quot;Checkbox&quot; </span>field:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function intializeValue(field: Field) { switch (field.control) {</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case &quot;Textbox&quot;: field.value = &quot;&quot;; break;</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case &quot;DatePicker&quot;: field.value = new Date(); break;</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case &quot;NumberSlider&quot;: field.value = 0; break;</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">case &quot;Checkbox&quot;: field.value = false; break;</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">default:</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">const shouldNotReach: never = field;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a name="bookmark447">So, union types allow us to combine any types together to form another type. This allows us to create stricter types, particularly when working with strings. The discriminated union pattern allows us to have branches of logic for different types in the union, and the </a><span class="s22">never </span>type helps us catch all the changes that need to happen when we add a new type into the union type.<a name="bookmark471">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark472">Type guards</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Type guards allow us to narrow down the specific type of an object within a conditional branch of code. They are useful when working with union types, when we need to implement a branch of code that deals with a specific type in the union.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">We already worked with a type guard in the last section when we implemented</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">intializeValue </span>function. The <span class="s22">switch </span>statement on the discriminant property</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">control <span class="p">allowed us to set the value on each type in the union.</span></p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark448">There are other ways we can implement type guards. The following sections go through different ways.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark473">Using the typeof keyword</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">typeof </span>keyword is a JavaScript keyword that returns a string that represents the type. So, we can use this in a condition to narrow down the type.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s go through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l106"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have a union type that can be a string or an array of strings:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type StringOrStringArray = string | string[];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We need to implement a function called <span class="s22">first </span>that takes in a parameter of type</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">StringOrStringArray <span class="p">and returns a </span>string<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">function first(stringOrArray: StringOrStringArray): string {</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark474">The function needs to return the first character if </a><span class="s22">stringOrArray </span>is a</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">string<span class="p">; otherwise, it should return the first array element:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function first(stringOrArray: StringOrStringArray): string { if (typeof stringOrArray === &quot;string&quot;) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">return stringOrArray.substr(0, 1);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">return stringOrArray[0];</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we hover over <span class="s22">stringOrArray </span>in the first branch, we see that the type has been successfully narrowed to <span class="s22">string</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 54pt;text-indent: 0pt;text-align: left;"><span><img width="440" height="135" alt="image" src="Learn+React+with+TypeScript+3-2/Image_272.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we hover over <span class="s22">stringOrArray </span>in the second branch, we see that the type has been successfully narrowed to <span class="s22">string[]</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 79pt;text-indent: 0pt;text-align: left;"><span><img width="403" height="127" alt="image" src="Learn+React+with+TypeScript+3-2/Image_273.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">To check our function works, we can add the following:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(first(&quot;The&quot;)); console.log(first([&quot;The&quot;, &quot;cat&quot;]));</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we run the program, <b>T </b>and <b>The </b>will be output to the console.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">typeof </span>keyword can only be used with JavaScript types, though. To illustrate that point, let&#39;s create an enhanced version of our function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l107"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll call our function <span class="s22">firstEnhanced</span>. We want to make the second branch specifically deal with the <span class="s22">string[] </span>type and mark the third branch as a place that should never be reached. Let&#39;s give this a try:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">function firstEnhanced(stringOrArray: StringOrStringArray): string</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (typeof stringOrArray === &quot;string&quot;) { return stringOrArray.substr(0, 1);</p><p class="s12" style="padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else if (typeof stringOrArray === &quot;string[]&quot;) { return stringOrArray[0];</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">const shouldNotReach: never = stringOrArray;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The TypeScript compiler isn&#39;t happy with the second branch:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 44pt;text-indent: 0pt;text-align: left;"><span><img width="466" height="143" alt="image" src="Learn+React+with+TypeScript+3-2/Image_274.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The message gives us a clue as to what is going on. The JavaScript <span class="s22">typeof </span>keyword works with JavaScript types, which are <span class="s22">string</span>, <span class="s22">number</span>, <span class="s22">boolean</span>, <span class="s22">symbol</span>, <span class="s22">undefined</span>, <span class="s22">object</span>, and <span class="s22">function</span>; hence the union type in the error message combining these types. So, <span class="s22">typeof </span>in our second branch will actually return <span class="s22">&quot;object&quot;</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement this properly:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">function firstEnhanced(stringOrArray: StringOrStringArray): string</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (typeof stringOrArray === &quot;string&quot;) { return stringOrArray.substr(0, 1);</p><p class="s12" style="padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else if (typeof stringOrArray === &quot;object&quot;) { return stringOrArray[0];</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">} else {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><a name="bookmark475">const shouldNotReach: never = stringOrArray;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The TypeScript compiler is now happy again.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark449">So, </a><span class="s22">typeof </span>is great for branching on JavaScript types but not ideal for TypeScript specific types. Let&#39;s find out how we can bridge this gap in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark476">Using the instanceof keyword</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">instanceof </span>keyword is another JavaScript keyword. It checks whether an object has a particular constructor function. It is typically used to determine whether an object is an instance of a class.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s go through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l108"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have two classes representing <span class="s22">Person </span>and <span class="s22">Company</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Person { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">firstName: string; surname: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Company { id: number; name: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We also have a union type combining both of these classes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type PersonOrCompany = Person | Company;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We now need to write a function that takes in a <span class="s22">Person </span>or <span class="s22">Company </span>and outputs their name to the console:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function logName(personOrCompany: PersonOrCompany) { if (personOrCompany instanceof Person) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">console.log(`${personOrCompany.firstName}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">${personOrCompany.surname}`);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else { console.log(personOrCompany.name);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark477">When using </a><span class="s22">instanceof</span>, we have the variable we are checking before it and the constructor name (the class name) after it.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we hover over <span class="s22">personOrCompany </span>in the first branch, we get the <span class="s22">Person </span>type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 35pt;text-indent: 0pt;text-align: left;"><span><img width="491" height="112" alt="image" src="Learn+React+with+TypeScript+3-2/Image_275.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">If we hover over <span class="s22">personOrCompany </span>in the second branch, we get the <span class="s22">Company</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 36pt;text-indent: 0pt;text-align: left;"><span><img width="488" height="113" alt="image" src="Learn+React+with+TypeScript+3-2/Image_276.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark450">So, </a><span class="s22">instanceof </span>is great for narrowing down the type if we are dealing with classes. However, there are lots of TypeScript types we use that aren&#39;t JavaScript types or based on classes. So, what do we do in these situations? Let&#39;s find out in the following sections.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark478">Using the in keyword</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">in </span>keyword is another JavaScript keyword that can be used to check whether a property is in an object.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s implement the example from the last section using the <span class="s22">in </span>keyword:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l109"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Instead of classes for the <span class="s22">Person </span>and <span class="s22">Company </span>structures, we have interfaces this time:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number; firstName: string; surname: string;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><a name="bookmark479">}</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ICompany { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We again create a union type from the <span class="s22">Person </span>and <span class="s22">Company </span>structures:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type PersonOrCompany = IPerson | ICompany;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Finally, let&#39;s implement our function using the <span class="s22">in </span>keyword:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">function logName(personOrCompany: PersonOrCompany) { if (&quot;firstName&quot; in personOrCompany) {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">console.log(`${personOrCompany.firstName}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">${personOrCompany.surname}`);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -5pt;line-height: 120%;text-align: left;">} else { console.log(personOrCompany.name);</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We put the property name in double quotes before the <span class="s22">in </span>keyword, followed by the object to check.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">If we hover over <span class="s22">personOrCompany </span>in the first branch, we get the</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">IPerson <span class="p">type.  If we hover over </span>personOrCompany <span class="p">in the second branch, we get the </span>ICompany <span class="p">type.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, the <span class="s22">in </span>keyword is pretty flexible. It can be used with any object to narrow down its type by checking if a property exists.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark451">There is one final type guard we will go through in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark480">Using a user-defined type guard</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">In situations where we can&#39;t use the other type guards, we can create our own. We can do this by creating a function with the return type as type predicate. We actually used a user- defined type guard earlier in the book when we went through the <span class="s22">unknown </span>type.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark481">Let&#39;s implement the example from the last two sections using our own type guard function:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l110"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the same interfaces and union type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number; firstName: string; surname: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ICompany { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type PersonOrCompany = IPerson | ICompany;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, let&#39;s implement the type guard function that returns whether the object is of type <span class="s22">IPerson</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">function isPerson(personOrCompany: PersonOrCompany): personOrCompany is IPerson {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return &quot;firstName&quot; in personOrCompany;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">The type predicate <span class="s22">personOrCompany </span>is <span class="s22">IPerson </span>helps the TypeScript compiler narrow down the type. To confirm this, hovering over <span class="s22">personOrCompany </span>in the first branch should give the <span class="s22">IPerson </span>type.  If we then hover</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: justify;">over <span class="s22">personOrCompany </span>in the second branch, we should get the <span class="s22">ICompany </span>type.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark452">Creating a user-defined type guard is a little more work than the other methods, but it gives us lots of flexibility to deal with cases if the other methods don&#39;t work.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark482">Generics</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Generics can be applied to a function or a whole class. It&#39;s a mechanism for allowing the consumers, own type to be used with the generic function or class. The following sections go through examples of both of these.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark453">Generic functions</a><a name="bookmark483">&zwnj;</a><a name="bookmark484">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s go through an example of a generic function. We are going to create a wrapper function around the <span class="s22">fetch </span>JavaScript function for getting data from a web service:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l111"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by creating the <span class="s22">function </span>signature:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">function getData&lt;T&gt;(url: string): Promise&lt;T&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We place a <span class="s22">T </span>in angled brackets after the function name to denote that it is a generic function. We can actually use any letter, but <span class="s22">T </span>is commonly used. We then use <span class="s22">T </span>in the signature where the type is generic. In our example, the generic bit is the return type, so we are returning <span class="s22">Promise&lt;T&gt;</span>.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we wanted to use an arrow function, this would be:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const getData = &lt;T&gt;(url: string): Promise&lt;T&gt; =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now implement our function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function getData&lt;T&gt;(url: string): Promise&lt;T&gt; { return fetch(url).then(response =&gt; {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">if (!response.ok) {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">throw new Error(response.statusText);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">return response.json();</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Finally, let&#39;s consume the function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">getData&lt;IPerson&gt;(&quot;/people/1&quot;).then(person =&gt; console.log(person));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We pass the type we want to use in the function in angle brackets after the function name. In our case, it is <span class="s22">IPerson</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark485">If we hover over </a><span class="s22">person </span>in the <span class="s22">then </span>callback, we see that <span class="s22">person </span>is correctly typed to <span class="s22">IPerson</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 37pt;text-indent: 0pt;text-align: left;"><span><img width="488" height="73" alt="image" src="Learn+React+with+TypeScript+3-2/Image_277.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark454">So, as the name suggests, a generic function is a function that works with a generic type. An alternative implementation for the previous example would be to use </a><span class="s22">any </span>as the return type, but that wouldn&#39;t be type-safe.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark486">Generic classes</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can make a whole class generic. Let&#39;s dive into an example of a generic class that stores data in a list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l112"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s define our class first without any content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class List&lt;T&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We mark the class as generic by putting <span class="s22">&lt;T&gt; </span>after the class name.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Inside the class, let&#39;s create a <span class="s22">private </span>property for the data in the list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">private data: T[] = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We refer to the generic type using <span class="s22">T</span>. In our example, our <span class="s22">data </span>property is an array of whatever type the class has been declared with.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now add a <span class="s22">public </span>method to get all the data in the list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public getList(): T[] { return this.data;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We reference the generic array as the return type with <span class="s22">T[]</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark487">Let&#39;s implement a method for adding an item to the list:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public add(item: T) { this.data.push(item);</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We reference the data item being passed in with the generic type <span class="s22">T</span>. The implementation simply uses the arrays <span class="s22">push </span>method to add the item to our <span class="s22">private </span>array.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also implement a method for removing an item from the list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public remove(item: T) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">this.data = this.data.filter((dataItem: T) =&gt; { return !this.equals(item, dataItem);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">private equals(obj1: T, obj2: T) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">return Object.keys(obj1).every(key =&gt; { return obj1[key] === obj2[key];</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We again reference the data item being passed in with the generic type <span class="s22">T</span>. The implementation uses the arrays <span class="s22">filter </span>method to filter the item out of our private array. The filter predicate uses a <span class="s22">private </span>method that checks whether two objects are equal.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, now that we&#39;ve implemented our generic list class, let&#39;s create a type and some data in preparation for consuming it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const billy: IPerson = { id: 1, name: &quot;Billy&quot; };</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now create an instance of our generic class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const people = new List&lt;IPerson&gt;();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We put the type we want to use with the class after the class name in angled brackets.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark488">We can now interact with the class by adding and removing </a><span class="s22">billy</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">people.add(billy); people.remove(billy);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to use a different type with our list instance:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">people.add({name: &quot;Sally&quot;});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We get a compilation error, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><span><img width="440" height="83" alt="image" src="Learn+React+with+TypeScript+3-2/Image_278.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s save all the items in our list instance to a variable:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const items = people.getList();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we hover over the <span class="s22">items </span>variable, we see that the type has been correctly inferred to <span class="s22">IPerson[]</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 129pt;text-indent: 0pt;text-align: left;"><span><img width="240" height="68" alt="image" src="Learn+React+with+TypeScript+3-2/Image_279.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, a generic class allows us to use the class with different types but still maintain strong typing.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We actually used generic classes earlier in the book where we implemented React class components with props and state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 120%;text-align: left;">interface IProps { ... } interface IState { ... }</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">class App extends React.Component&lt;IProps, IState&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Here, the <span class="s22">React.Component </span>class has two generic parameters for the props and state.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, generics are a really important concept that we&#39;ll use heavily in this book to create strongly typed React components.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark455">Overload signatures</a><a name="bookmark489">&zwnj;</a><a name="bookmark490">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Overload signatures allow a function to be called with different signatures. This feature can be used nicely to streamline a set of functions that a library offers to consumers. Wouldn&#39;t it be nice for a library that contained <span class="s22">condenseString </span>public functions and <span class="s22">condenseArray </span>to be streamlined so that it just contained a single public <span class="s22">condense </span>function? We&#39;ll do just this in this section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l113"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have a function that removes spaces from a string:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function condenseString(string: string): string { return string.split(&quot; &quot;).join(&quot;&quot;);</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have another function that removes spaces from array items:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function condenseArray(array: string[]): string[] { return array.map(item =&gt; item.split(&quot; &quot;).join(&quot;&quot;));</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We now want to combine these two functions into a single function. We can do this as follows using union types:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">function condense(stringOrArray: string | string[]): string | string[] {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return typeof stringOrArray === &quot;string&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">? stringOrArray.split(&quot; &quot;).join(&quot;&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">: stringOrArray.map(item =&gt; item.split(&quot; &quot;).join(&quot;&quot;));</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s consume our unified function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: center;">const condensedText = condense(&quot;the cat sat on the mat&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">As we enter the function parameter, IntelliSense reminds us that we need to enter a string or an array of strings:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"><span><img width="497" height="90" alt="image" src="Learn+React+with+TypeScript+3-2/Image_280.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark491">If we hover over the </a><span class="s22">condensedText </span>variable, we see that the inferred type is the union type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;"><span><img width="297" height="65" alt="image" src="Learn+React+with+TypeScript+3-2/Image_281.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">It&#39;s time to add two signature overloads to improve the consumption of our function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 106%;text-align: left;">function condense(string: string): string; function condense(array: string[]): string[];</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">function condense(stringOrArray: string | string[]): string | string[] { ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We add function overload signatures before the main function signature. We&#39;ve added an overload for when we work with a string, and a second overload for when we work with an array of strings.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s consume our overloaded function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const moreCondensedText = condense(&quot;The cat sat on the mat&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We get improved IntelliSense now as we type the parameter. We also get up and down arrows to scroll through the two different signatures:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 31pt;text-indent: 0pt;text-align: left;"><span><img width="497" height="71" alt="image" src="Learn+React+with+TypeScript+3-2/Image_282.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="285" height="56" alt="image" src="Learn+React+with+TypeScript+3-2/Image_283.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="301" height="72" alt="image" src="Learn+React+with+TypeScript+3-2/Image_284.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we hover over the <span class="s22">moreCondensedText </span>variable, we see that we get better type inference:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, overload signatures improve the experience for developers consuming our functions. They can give improved IntelliSense and type inference.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark456">Lookup and mapped types</a><a name="bookmark492">&zwnj;</a><a name="bookmark493">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">keyof </span>is a keyword in TypeScript that creates a union type of all the properties in an object. The type that is created is called a lookup type. This allows us to create types dynamically, based on the properties of an existing type. It&#39;s a useful feature that we can use to create generic but strongly typed code against varying data.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s go through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l114"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following <span class="s22">IPerson </span>interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a lookup type on this interface using <span class="s22">keyof</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type PersonProps = keyof IPerson;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">If we hover over the <span class="s22">PersonProps </span>type, we see that a union type containing</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">&quot;id&quot; <span class="p">and </span>&quot;name&quot; <span class="p">has been created:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 133pt;text-indent: 0pt;text-align: left;"><span><img width="228" height="109" alt="image" src="Learn+React+with+TypeScript+3-2/Image_285.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add a new property to <span class="s22">IPerson</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: string; age: number</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark494">If we hover over the </a><span class="s22">PersonProps </span>type again, we see that the type has been automatically extended to include <span class="s22">&quot;age&quot;</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 117pt;text-indent: 0pt;text-align: left;"><span><img width="270" height="126" alt="image" src="Learn+React+with+TypeScript+3-2/Image_286.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, the <span class="s22">PersonProps </span>type is a lookup type because it looks up the literals it needs to contain.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s create something useful now with a lookup type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l115"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;re going to create a <span class="s22">Field </span>class that contains the field name, a label, and a default value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Field { name: string; label: string;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">defaultValue: any;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">This is a start, but we can make <span class="s22">name </span>more strongly typed by making our class generic:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">class Field<span class="s21">&lt;T, K extends keyof T&gt; </span>{ name: <span class="s21">K</span>;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">label: string; defaultValue: any;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We have created two generic parameters on the class. The first one is for the type of the object containing the field, and the second one is for the property name within the object.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">It will probably make more sense if we create an instance of the class. Let&#39;s do just that using <span class="s22">IPerson </span>from the last example and passing <span class="s22">&quot;id&quot; </span>in as the field name:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const idField: Field&lt;IPerson, &quot;id&quot;&gt; = new Field();</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try and reference a property that doesn&#39;t exist in <span class="s22">IPerson</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const addressField: Field&lt;IPerson, &quot;address&quot;&gt; = new Field();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We get a compilation error, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><span><img width="542" height="69" alt="image" src="Learn+React+with+TypeScript+3-2/Image_287.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Catching problems like this is the benefit of the lookup type, rather than using a</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">string <span class="p">type.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s move our attention to the <span class="s22">defaultValue </span>property in our <span class="s22">Field </span>class. This is not type-safe at the moment. For example, we can set <span class="s22">idField </span>to a string:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">idField.defaultValue = &quot;2&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s resolve this and make <span class="s22">defaultValue </span>type-safe:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Field&lt;T, K extends keyof T&gt; { name: K;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 115%;text-align: left;">label: string; defaultValue: <span class="s21">T[K]</span>;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are looking up the type using <span class="s22">T[K]</span>. For <span class="s22">idField</span>, this will resolve to the type of the <span class="s22">id </span>property in <span class="s22">IPerson</span>, which is <span class="s22">number</span>.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The line of code that sets <span class="s22">idField.defaultValue </span>now throws a compilation error, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 75pt;text-indent: 0pt;text-align: left;"><span><img width="380" height="88" alt="image" src="Learn+React+with+TypeScript+3-2/Image_288.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark495">Let&#39;s change </a><span class="s22">&quot;2&quot; </span>to <span class="s22">2</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">idField.defaultValue = 2;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The compilation error disappears.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">So, lookup types can be useful when creating generic components for variable data types.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Let&#39;s move on to mapped types now. Again, these let us create new types from an existing type&#39;s properties. However, mapped types allow us to specifically define the properties in the new type by mapping them from the existing property.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">Let&#39;s go through an example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l116"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, let&#39;s create a type that we will map from in the next step:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Now let&#39;s create a new version of the <span class="s22">interface </span>where all the properties are</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">readonly <span class="p">using mapped type:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type ReadonlyPerson = { readonly [P in keyof IPerson]: IPerson[P]</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The important bit that creates the map is <span class="s22">[P in keyof IPerson]</span>. This iterates through all the properties in <span class="s22">IPerson </span>and assigns each one to <span class="s22">P </span>to create the type. So, the type that is generated in the previous example is the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">type ReadonlyPerson = { readonly id: number readonly name: string</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let try this out to see if our type really is <span class="s22">readonly</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">let billy: ReadonlyPerson = { id: 1,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: &quot;Billy&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">billy.name = &quot;Sally&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">As we expect, a compilation error is thrown where we try to set the <span class="s22">readonly</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="484" height="108" alt="image" src="Learn+React+with+TypeScript+3-2/Image_289.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="503" height="122" alt="image" src="Learn+React+with+TypeScript+3-2/Image_290.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">property to a new value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So our mapped type worked! A more generic version of this mapped type is actually in TypeScript as a standard type, and is <span class="s22">Readonly&lt;T&gt;</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s use the standard <span class="s22">readonly </span>type now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">let sally: Readonly&lt;IPerson&gt; = { id: 1,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: &quot;sally&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try changing the values in our <span class="s22">readonly</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">Sally.name = &quot;Billy&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">A compilation error is thrown, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 45pt;text-indent: 0pt;text-align: left;"><span><img width="462" height="94" alt="image" src="Learn+React+with+TypeScript+3-2/Image_291.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">If we were in Visual Studio Code and used the <b>Go to Definition </b>option on the</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Readonly <span class="p">type, we would get the following:</span></p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type Readonly&lt;T&gt; = {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">readonly [P in keyof T]: T[P];</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This is very similar to our <span class="s22">ReadonlyPerson </span>type, but <span class="s22">IPerson </span>has been substituted with generic type <span class="s22">T</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark496">Let&#39;s have a go at creating our own generic mapped type now:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l117"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are going to create a mapped type that makes all the properties of an existing type of type <span class="s22">string</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type Stringify&lt;T&gt; = { [P in keyof T]: string };</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to consume our mapped type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">let tim: Stringify&lt;IPerson&gt; = { id: &quot;1&quot;,</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">name: &quot;Tim&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s try to set <span class="s22">id </span>to a number:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">tim.id = 1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The expected compilation error is thrown:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 104pt;text-indent: 0pt;text-align: left;"><span><img width="306" height="113" alt="image" src="Learn+React+with+TypeScript+3-2/Image_292.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a name="bookmark457">So, mapped types are useful in situations when we need a new type that is based on an existing type. Along with </a><span class="s22">Readonly&lt;T&gt;</span>, there are quite a few standard mapped types in TypeScript, such as <span class="s22">Partial&lt;T&gt;</span>, which creates a mapped type making all the properties optional.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark497">Summary</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ve learned some of the more advanced types in TypeScript in this chapter, starting with union types. Union types are extremely useful, allowing us to create new types by unioning existing types together. We discovered that unioning together string literals allow us to create a type that is more specific and type-safe than a regular <span class="s22">string</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We explored various ways of implementing type guards. Type guards are useful to help the compiler narrow down a union type in branches of logic. They are also useful when working with the <span class="s22">unknown </span>type to tell the compiler what the type is in branches of logic.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Generics, as the name suggests, allow us to create generic types. Having covered this topic in detail, the type-safety for props and state in React components makes a lot more sense now. We will continue to use generic classes and functions heavily in the rest of the book.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We learned that overload signatures allow us to have a function that has different parameters and return types. We can now use this feature to good effect to streamline public functions we expose in a library.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We learned about how we can dynamically create new types from existing type properties using both lookup and mapped types. We are now aware that there are lots of useful standard TypeScript mapped types such as <span class="s22">Readonly&lt;T&gt; </span>and <span class="s22">Partial&lt;T&gt;</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark458">Learning about all these features is great preparation for the next chapter, where we&#39;ll dive into some common patterns when working with React components.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark498">Questions</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s have a go at some questions on advanced types:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l118"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have an <span class="s22">interface </span>that represents a course result, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ICourseMark { courseName: string; grade: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We can use this <span class="s22">interface </span>as follows:</p><p class="s12" style="padding-top: 9pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const geography: ICourseMark = { courseName: &quot;Geography&quot;, grade: &quot;B&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The grades can only be A, B, C, or D. How can we create a stronger typed version of the <span class="s22">grade </span>property in this interface?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We have the following functions that validate that numbers and strings are populated with a value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function isNumberPopulated(field: number): boolean { return field !== null &amp;&amp; field !== undefined;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">function isStringPopulated(field: string): boolean {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return field !== null &amp;&amp; field !== undefined &amp;&amp; field !== &quot;&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">How can we combine these into a single function called <span class="s22">isPopulated </span>with signature overloads?</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How can we implement a more flexible version of the <span class="s22">isPopulated </span>function with generics?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the follow <span class="s22">type </span>alias of stages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">type Stages = { pending: &#39;Pending&#39;, started: &#39;Started&#39;,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">completed: &#39;Completed&#39;,</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How can we programmatically turn this into the <span class="s22">&#39;Pending&#39; | &#39;Started&#39; | &#39;Completed&#39; </span>union type?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following union type:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type Grade = &#39;gold&#39; | &#39;silver&#39; | &#39;bronze&#39;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">How can we programmatically create the following type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">type GradeMap = { gold: string; silver: string; bronze: string</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark459">Further reading</a><a name="bookmark499">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The TypeScript documentation has a great section on advanced types that is worth looking at:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html" class="a" target="_blank">https://www.typescriptlang.org/docs/handbook/advanced-types.</a><a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 157pt;text-indent: 0pt;text-align: left;"><a name="bookmark500">Component Patterns</a><a name="bookmark519">&zwnj;</a><a name="bookmark520">&zwnj;</a></p><p style="padding-top: 22pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">In this chapter, we will continue with the React shop we were building previously.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll build a reusable tab component as well as a reusable loading indicator component that will both be used on the product page in our shop. The chapter will start by splitting the product page into a container and a presentational component before working on the tab component, leveraging the compound component and render props patterns. We&#39;ll then move on to implement a loading indicator component using the higher-order component pattern.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this chapter, we&#39;ll learn about the following topics:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_293.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_294.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Container and presentational components Compound components</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_295.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_296.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark501">Render props pattern Higher-order components</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 12pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark521">Technical requirements</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_297.png"/></span></p><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. We can install these from: </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If we already have these installed, make sure </span>npm <span class="p">is at least version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_298.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We will also need the TSLint (by egamma) and Prettier (by Estben Petersen) extensions installed within Visual Studio Code.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_299.png"/></span></p><p class="s9" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">React shop<a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/04-ReactRouter" class="s20" target="_blank">: We&#39;ll start from the project we began in the chapter where we looked at React Router. This is available on GitHub at: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/04-ReactRouter" class="a" target="_blank">https://github.com/carlrip/ LearnReact17WithTypeScript/tree/master/04-</a><span class="s12">ReactRouter</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_300.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/06-ComponentPatterns" class="s20" target="_blank">All the code snippets in this chapter can be found online at: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/06-ComponentPatterns" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/06-ComponentPatterns" target="_blank">/</a></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/06-ComponentPatterns" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/06- </a>ComponentPatterns<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark502">Container and presentational components</a><a name="bookmark522">&zwnj;</a><a name="bookmark523">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Splitting pages up into container and presentational components makes the presentational component easier to reuse. The container component is responsible for how things work, fetching any data from a web API and managing state. The presentational component</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">is responsible for how things look. Presentational components receive data via their properties and also have property event handlers so that their container can manage the user interactions.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">We are going use this pattern in our React shop to split the product page into container and presentational components. The <span class="s22">ProductPage </span>component will be the container and we&#39;ll introduce a new component called <span class="s22">Product </span>that will be the presentational component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l119"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s start by opening our shop project in Visual Studio Code and entering the following command in a terminal to start the app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If we navigate to a product, let&#39;s remind ourselves what the product page looks like:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><span><img width="450" height="220" alt="image" src="Learn+React+with+TypeScript+3-2/Image_301.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark524">Let&#39;s create a new file called </a><span class="s22">Product.tsx </span>that will contain our presentational component with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Product: React.SFC&lt;{}&gt; = props =&gt; { return &lt;React.Fragment&gt;TODO&lt;/React.Fragment&gt;;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default Product;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 49pt;text-indent: 0pt;text-align: center;">Our presentational component is a function component.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Presentational components receive data via props and also delegate event handling via props. So, let&#39;s create props for the product data item, whether it has been added to the basket, and the handler for adding it to the basket:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s21" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">import { IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IProps { product: IProduct; inBasket: boolean;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">onAddToBasket: () =&gt; void;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">const Product: React.SFC&lt;<span class="s21">IProps</span>&gt; = props =&gt; { return &lt;React.Fragment&gt;TODO&lt;/React.Fragment&gt;;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default Product;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">If we look at <span class="s22">ProductsPage.tsx</span>, we are going to copy the JSX for when there is a product that is the <span class="s22">React.Fragment </span>section. We then paste this into the return statement for our <span class="s22">Product </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Product: React.SFC&lt;IProps&gt; = props =&gt; { return (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;React.Fragment&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;{product.name}&lt;/h1&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;p className=&quot;product-price&quot;&gt;</p><p class="s21" style="padding-left: 122pt;text-indent: -10pt;line-height: 106%;text-align: left;">{new Intl.NumberFormat(&quot;en-US&quot;, { currency: &quot;USD&quot;,</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;line-height: 10pt;text-align: left;">style: &quot;currency&quot;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">}).format(product.price)}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{!this.state.added &amp;&amp; (</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 43pt;line-height: 106%;text-align: left;">&lt;button onClick={this.handleAddClick}&gt;Add to basket&lt;/button&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">)}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We have a few reference issues now to resolve.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s define a product variable above the return statement to resolve the issue with the product reference in the JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const product = props.product;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Whether the product is in the basket is passed in via the <span class="s22">inBasket </span>prop now. So, let&#39;s change the conditional around the <b>Add to Basket </b>button to use this prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{!<span class="s21">props.inBasket </span>&amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleAddClick}&gt;Add to basket&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">The final reference issue we need to resolve is with the handler for clicking the <b>Add to Basket </b>button. Let&#39;s first create a handler that simply calls the <span class="s22">onAddToBasket </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const product = props.product;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">const handleAddClick = () =&gt; { props.onAddToBasket();</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We can remove the <span class="s22">this </span>reference where we reference this handler in the JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{!props.inBasket &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;button onClick={<span class="s21">handleAddClick</span>}&gt;Add to basket&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">That&#39;s our <span class="s22">Product </span>presentational component complete for the time being. So, let&#39;s reference our <span class="s22">Product </span>component in our <span class="s22">ProductPage </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;"><a name="bookmark525">First, let&#39;s import our </a><span class="s22">Product </span>component into <span class="s22">ProductPage.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import Product from &quot;./Product&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Now, let&#39;s replace the section we copied in the JSX with our <span class="s22">Product </span>component:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 84pt;text-indent: 0pt;text-align: left;">&lt;Prompt when={!this.state.added} message={this.navAwayMessage}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 84pt;text-indent: 0pt;text-align: left;">{product ? (</p><p class="s21" style="padding-top: 1pt;padding-left: 106pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;Product product={product}</p><p class="s21" style="padding-left: 106pt;text-indent: 0pt;line-height: 106%;text-align: left;">inBasket={this.state.added} onAddToBasket={this.handleAddClick}</p><p class="s21" style="padding-left: 95pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 84pt;text-indent: 0pt;text-align: left;">) : (&lt;p&gt;Product not found!&lt;/p&gt;)}</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We pass the product, whether the product has been added to basket, and the handler for adding to the basket together as props to the <span class="s22">Product </span>component.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the shop again and go to the product page, it will look exactly the same.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">So, we just implemented our first container and presentational components. Container components are great as the top-level component within a page, fetching data from a web API, and managing all the state within the page. Presentational components just focus on what needs to be rendered to the screen. A benefit of this pattern is that presentational components can be used elsewhere in the app more easily. For example, our <span class="s22">Product </span>component could fairly easily be used on other pages that we create in our shop.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Another benefit of this pattern is that presentational components are generally easier to unit-test. In our example, our <span class="s22">Product </span>component is a pure function and so unit-testing this is simply a case of checking that the output is correct for different inputs because there are no side-effects. We&#39;ll cover unit testing in detail later in the book.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll continue to enhance our product page in the next section by adding reviews to it and adding tabs to separate the product description from the reviews.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark503">Compound components</a><a name="bookmark526">&zwnj;</a><a name="bookmark527">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark504">Compound components are a set of components that work together. We are going to use this pattern to create a reusable tab component for use on the product page to separate reviews the product descriptions.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark528">Adding reviews to a product</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Before we create our <span class="s22">Tabs </span>compound component, let&#39;s add reviews to the product page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l120"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">First, we need to add an interface for the review data structure in</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">ProductsData.ts<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IReview { comment: string; reviewer: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now add reviews to our product interface :</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export interface IProduct {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">reviews: IReview[];</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now add reviews to our product data array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const products: IProduct[] = [</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">id: 1,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">reviews: [</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 106%;text-align: left;">comment: &quot;Excellent! This does everything I want&quot;, reviewer: &quot;Billy&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">},</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">{ comment: &quot;The best router I&#39;ve ever worked with&quot;, reviewer: &quot;Sally&quot; }</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">id: 2,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">..</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">reviews: [</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 106%;text-align: left;"><a name="bookmark529">comment: &quot;I&#39;ve found this really useful in a large app I&#39;m working on&quot;,</a></p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 10pt;text-align: left;">reviewer: &quot;Billy&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 106%;text-align: left;">comment: &quot;A bit confusing at first but simple when you get used to it&quot;,</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 10pt;text-align: left;">reviewer: &quot;Sally&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">id: 3,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">..</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">reviews: [</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 106%;text-align: left;">comment: &quot;I&#39;ll never work with a REST API again!&quot;, reviewer: &quot;Billy&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">},</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 106%;text-align: left;">comment: &quot;It makes working with GraphQL backends a breeze&quot;, reviewer: &quot;Sally&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we add a <span class="s22">reviews </span>property to each product that is an array of reviews. Each review is an object containing <span class="s22">comment </span>and <span class="s22">reviewer </span>properties as defined by the <span class="s22">IReview </span>interface.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">With our data in place, let&#39;s add the reviews to our <span class="s22">Product </span>component after the description:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-reviews&quot;&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">{product.reviews.map(review =&gt; (</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;li key={review.reviewer} className=&quot;product-reviews-item&quot;&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;i&gt;&quot;{review.comment}&quot;&lt;/i&gt; - {review.reviewer}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s21" style="text-indent: 0pt;text-align: right;">))}</p><p class="s21" style="text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;p className=&quot;product-price&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><a name="bookmark530">So, we are using the </a><span class="s22">map </span>function on the <span class="s22">reviews </span>array to display <span class="s22">comment </span>and</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">reviewer <span class="p">in a list.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have referenced some new CSS classes, so let&#39;s add these into <span class="s22">index.css</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.product-reviews { list-style: none; padding: 0px;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.product-reviews .product-reviews-item { display: block;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">padding: 8px 0px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If we look at the running app and go to a product, we&#39;ll now see the reviews:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 32pt;text-indent: 0pt;text-align: left;"><span><img width="497" height="335" alt="image" src="Learn+React+with+TypeScript+3-2/Image_302.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Now that we have added the reviews, we can work on our <span class="s22">Tabs </span>component in the next section.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark505">Creating a basic tab component</a><a name="bookmark531">&zwnj;</a><a name="bookmark532">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our job now is to separate the description from the reviews using a tab component that we are going to build. We are going to create a simple tab component first and refactor this into the compound component pattern in the next section.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">It&#39;s time to start on our tab component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l121"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, let&#39;s create a file called <span class="s22">Tabs.tsx </span>for our tab component with the following content in it as a skeleton class component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">interface IProps {} interface IState {}</p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class Tabs extends React.Component&lt;IProps, IState&gt; { public constructor(props: IProps) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">super(props); this.state = {};</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">export default Tabs;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We have chosen to create a class-based component because our component will have to track state for whichever tab heading is active.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, let&#39;s complete the interface for our state by adding a property that will give the active heading name:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IState {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">activeHeading: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark533">Our component will take in the tab headings and display them as properties. So, let&#39;s complete our interface for this:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IProps {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">headings: string[];</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">So, our component can take in an array of heading names in a <span class="s22">headings </span>prop.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create the initial value for the <span class="s22">activeHeading </span>state in the constructor now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public constructor(props: IProps) { super(props);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">this.state = {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">activeHeading:</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">this.props.headings &amp;&amp; this.props.headings.length &gt; 0</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">? this.props.headings[0]</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">: &quot;&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">So, the active heading will initially be set to the first element in the <span class="s22">headings </span>array. The ternary ensures our component doesn&#39;t produce an error if no tabs have been passed to it by the consumer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Moving on to the render method now, let&#39;s render our tabs in a list by mapping over the <span class="s22">headings </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;tabs&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">{this.props.headings.map(heading =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;line-height: 120%;text-align: left;">&lt;li className={heading === this.state.activeHeading ? &quot;active&quot; : &quot;&quot;}</p><p class="s12" style="padding-left: 133pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 144pt;text-indent: 0pt;text-align: left;">{heading}</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have referenced some CSS classes including <span class="s22">active</span>, which is set using a ternary based on whether it is the active tab heading being rendered or not.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add these CSS classes to <span class="s22">index.css </span>now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.tabs {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">list-style: none; padding: 0;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.tabs li {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">display: inline-block; padding: 5px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">margin: 0px 5px 0px 5px; cursor: pointer;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.tabs li:focus { outline: none;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.tabs li.active {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">border-bottom: #222 solid 2px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Before we can see what our tab component looks like, we need to consume it.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">So, let&#39;s add this on the <span class="s22">Product </span>component by first importing the <span class="s22">Tabs</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import Tabs from &quot;./Tabs&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can now add the <span class="s22">Tabs </span>component in between the product name and description:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;{product.name}&lt;/h1&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Tabs headings={[&quot;Description&quot;, &quot;Reviews&quot;]} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We pass the <span class="s22">Tabs </span>component the two tab headings we want to display, which are</p><p class="s9" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Description <span class="p">and </span>Reviews<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark534">Let&#39;s see what this looks like:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 6pt;text-indent: 0pt;text-align: left;"><span><img width="568" height="338" alt="image" src="Learn+React+with+TypeScript+3-2/Image_303.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">That&#39;s a good start. The first tab is underlined from the <span class="s22">active </span>CSS style just as we wanted. If we click on the <b>Reviews </b>tab nothing happens, though.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s reference the click handler back in <span class="s22">Tabs.tsx </span>for each tab:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;li</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">onClick={this.handleTabClick}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">className={heading === this.state.activeHeading ? &quot;active&quot; : &quot;&quot;}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{heading}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s implement the click handler as well now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleTabClick = (e: React.MouseEvent&lt;HTMLLIElement&gt;) =&gt; { const li = e.target as HTMLLIElement;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">const heading: string = li.textContent ? li.textContent : &quot;&quot;; this.setState({ activeHeading: heading });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark535">We first extract the heading from the </a><span class="s22">textContent </span>of <span class="s22">li</span>. We then set the <span class="s22">activeHeading </span>state to this. This will cause React to re-render the component with the clicked tab shown as being active.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that we help the TypeScript compiler declare the <span class="s22">li </span>variable as <span class="s22">HTMLLIElement </span>using the <span class="s22">as </span>keyword. Without doing this, the compiler wouldn&#39;t be happy with us accessing the <span class="s22">textContent </span>property within it.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go to the running app again, we can now click on our tabs and see the active state changing.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark506">At the moment, our tabs component just renders some tabs that can be clicked on. It doesn&#39;t tie into any content yet. We&#39;ll actually not tie in our headings to content until the next section on the render props pattern. However, now it&#39;s time to explore the compound component pattern and enhance our tab headings a little more in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark536">Leveraging the compound component pattern</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our tab headings can only be strings at the moment. What if we want to allow the consumer of the component to define richer content in the headings? For example, a consumer might want to put an icon in front of a tab heading or make a heading bold. So, the consuming JSX could look something like this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;Tabs&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;Tabs.Tab name=&quot;Description&quot; initialActive={true}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">&lt;b&gt;Description&lt;/b&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 50pt;text-indent: -16pt;line-height: 120%;text-align: left;">&lt;Tabs.Tab name=&quot;Reviews&quot;&gt; Reviews</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/Tabs&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">In the previous example, <span class="s22">Tabs </span>and <span class="s22">Tabs.Tab </span>are compound components:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_304.png"/></span></p><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">Tabs <span class="p">is the component that renders the </span>Tabs.Tab <span class="p">components within it. It also manages the state for whichever tab is active.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_305.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">Tabs.Tab <span class="p">renders a single heading. It takes a unique tab name as a property, which allows the active tab to be managed. It also takes in a</span></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 12pt;text-align: left;">boolean <span class="p">property called </span>initialActive <span class="p">that sets that tab to be active when</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">first loaded. The heading that is rendered is the content within the <span class="s22">Tabs.Tab </span>tag. So, the first tab will render <b>Description </b>in bold.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, let&#39;s refactor our basic tabs component into a compound component that can be used similarly to the previous example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l122"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">Our <span class="s22">Tabs </span>component no longer takes in any properties, so, let&#39;s remove the <span class="s22">IProps </span>interface. We can remove the constructor because we no longer need to initialize the state from the props. Let&#39;s also change the name of our state property from <span class="s22">activeHeading </span>to <span class="s22">activeName </span>as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IState {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">activeName<span class="s12">: string;</span></p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">class Tabs extends React.Component&lt;<span class="s21">{}</span>, IState&gt; { public render() {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We are going to work on the <span class="s22">Tab </span>component within <span class="s22">Tabs</span>, first. So, let&#39;s create an interface for its properties:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ITabProps { name: string; initialActive?: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_306.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">name </span>property is a unique name for the tab. This will be used later to help us manage the active tab.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_307.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">initialActive </span>property specifies whether the tab is active when the component first loads.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add the following <span class="s22">Tab </span>function component inside our <span class="s22">Tabs </span>class component now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class Tabs extends React.Component&lt;IProps, IState&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 106%;text-align: left;">public static Tab: React.SFC&lt;ITabProps&gt; = props =&gt; &lt;li&gt;TODO - render the nodes child nodes&lt;/li&gt;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">public render() {...}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This is the start of the component that will render each tab. The <span class="s22">Tab </span>component is defined as a static property on the <span class="s22">Tabs </span>component. This means <span class="s22">Tab </span>lives on the actual <span class="s22">Tabs </span>class and not in its instances. So, we must remember we don&#39;t have access to any <span class="s22">Tabs </span>instance members (for instance, <span class="s22">this</span>). However, we can reference <span class="s22">Tab </span>in JSX using <span class="s22">Tabs.Tab </span>now, which was one of our requirements.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">At the moment, <span class="s22">Tab </span>is just rendering <span class="s22">li </span>with a note reminding us that we need to somehow render the child nodes of the component. Remember that we want the consuming markup for our <span class="s22">Tabs </span>component to be as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Tabs.Tab name=&quot;Description&quot; initialActive={true}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;b&gt;Description&lt;/b&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/Tabs.Tab&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">So, our render function needs to somehow render <span class="s22">&lt;b&gt; Description &lt;/b&gt; </span>inside our <span class="s22">li </span>tag. How do we do this? The answer is via a special property called <span class="s22">children</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public static Tab: React.SFC&lt;ITabProps&gt; = props =&gt;</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="86" alt="image" src="Learn+React+with+TypeScript+3-2/Image_308.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">React component properties can be of any type, including React nodes. The <span class="s22">children </span>property is a special property that React gives a component that contains the component&#39;s child nodes. We render a</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">component&#39;s child nodes in JSX by referencing the <span class="s22">children </span>property in curly brackets.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;li&gt;<span class="s21">{props.children}</span>&lt;/li&gt;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Our <span class="s22">Tab </span>component is not finished, but we&#39;ll leave it like this for the time being. We now need to move on to the <span class="s22">Tabs </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The <span class="s22">render </span>method in the <span class="s22">Tabs </span>class is simply going to render its child nodes now. Let&#39;s replace this method with the following:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;tabs&quot;&gt;{this.props.children}&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We again use the magical <span class="s22">children </span>property to render the child nodes within</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Tabs<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark507">We are progressing well with our compound </a><span class="s22">Tabs </span>and <span class="s22">Tab </span>components but our project no longer compiles because we have the tab click handler, <span class="s22">handleTabClick</span>, that is not referenced anymore. We need to somehow reference it from the <span class="s22">Tab </span>component when a tab heading is clicked, but remember <span class="s22">Tab </span>doesn&#39;t have access to members of <span class="s22">Tabs</span>. So, how can we do this? We&#39;ll find the answer to this problem in the next section.<a name="bookmark537">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark538">Sharing state with React context</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">React context allows state to be shared between components. It works really well with compound components. We are going to use it in our <span class="s22">Tabs </span>and <span class="s22">Tab </span>components to share state between them:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l123"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Our first task is to create an interface for the context we are going to use in</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Tabs.tsx <span class="p">at the top of the file just beneath the import statements:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ITabsContext { activeName?: string;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">handleTabClick?: (name: string) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, our context will contain the active tab name as well as a reference to a tab click handler. These are the two bits of state that need to be shared between the components.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, let&#39;s create the context underneath the <span class="s22">ITabsContext </span>interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">const TabsContext = React.createContext&lt;ITabsContext&gt;({});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We&#39;ve used the <span class="s22">createContext </span>function in React to create our context, which is a generic function that creates a context of a generic type, which in our case in <span class="s22">ITabsContext</span>.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">We are required to pass the default context value as the parameter value to <span class="s22">createContext </span>but that doesn&#39;t make sense in our case, so we just pass an empty <span class="s22">{} </span>object to keep the TypeScript compiler happy. This is why both the properties in <span class="s22">ITabsContext </span>are optional.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">It&#39;s time to use this context now in our compound components. The first thing we need to do is to define the context provider in the <span class="s22">Tabs render </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;TabsContext.Provider</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">value={{</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 106%;text-align: left;">activeName: this.state ? this.state.activeName : &quot;&quot;, handleTabClick: this.handleTabClick</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;tabs&quot;&gt;{this.props.children}&lt;/ul&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/TabsContext.Provider&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">There are a few things going on here, so let&#39;s break this down:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_309.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The constant for our context we declared earlier, <span class="s22">TabsContext</span>, is available in JSX as a <span class="s22">&lt;TabsContext /&gt; </span>component.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_310.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The context provider fills the context with values. Given that <span class="s22">Tabs </span>manages the state and event handling, it makes sense for the provider to be referenced there.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_311.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We reference the provider using <span class="s22">&lt;TabsContext.Provider /&gt;</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_312.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The provider takes in a property called <span class="s22">value </span>for the context value. We set this to an object containing the active tab name and the tab click event handler.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We need to adjust the tab click handler slightly because the click isn&#39;t going to be handled directly in <span class="s22">Tabs </span>anymore. So, we simply need to take in the active tab name as a parameter and then set the active tab name state within the method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleTabClick = (name: string) =&gt; { this.setState({ activeName: name });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Now that we have fed the context some data, it&#39;s time to consume this in the</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Tab <span class="p">component:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 29pt;text-indent: 0pt;text-align: center;">public static Tab: React.SFC&lt;ITabProps&gt; = props =&gt; (</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;TabsContext.Consumer&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">{(context: ITabsContext) =&gt; {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">const activeName = context.activeName</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">? context.activeName</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">: props.initialActive</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">? props.name</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">: &quot;&quot;;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">const handleTabClick = (e: React.MouseEvent&lt;HTMLLIElement&gt;)</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">if (context.handleTabClick) {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">context.handleTabClick(props.name);</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;li</p><p class="s21" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">onClick={handleTabClick}</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">className={props.name === activeName ? &quot;active&quot; : &quot;&quot;}</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">{props.children}</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}}</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/TabsContext.Consumer&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">This again looks a little daunting, so let&#39;s break it down:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_313.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: justify;">We can consume a context via a <span class="s22">Consumer </span>component within the context component. So, this is <span class="s22">&lt;TabsContext.Consumer /&gt; </span>in our case.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_314.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: justify;">The child for <span class="s22">Consumer </span>needs to be a function that has a parameter for the context value and returns some JSX. <span class="s22">Consumer </span>will then render the JSX we return.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_315.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Don&#39;t worry if this is still a little confusing. We&#39;ll cover this pattern in a lot more detail later when we cover children props and render props.</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_316.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">This context function gives us everything we need to render the tab. We have access to the state from the <span class="s22">context </span>argument as well as access to the <span class="s22">Tab </span>component <span class="s22">props </span>object.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_317.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The first line of the function determines the active tab name by using what is in the context. If the active tab in the context is an empty string, we use the current tab name if it has been defined as the initial active tab.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_318.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The second line of the function creates a tab click handler that calls the context tab click handler if it has been specified.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_319.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The return statement is as it was before, but we&#39;ve been able to add a reference to the tab click handler and the class name now.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, that&#39;s it for our tabs compound component. The syntax for React context may seem a little strange at first, but when you get used to it, it is really simple and elegant.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark539">Before we can give this a try, we need to consume our compound component in our </a><span class="s22">Product </span>component. Let&#39;s replace our previous consumption of the <span class="s22">Tabs </span>component with the following highlighted JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 29pt;text-indent: 0pt;text-align: left;">&lt;React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;{product.name}&lt;/h1&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;Tabs&gt;</p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">&lt;Tabs.Tab name=&quot;Description&quot; initialActive={true}&gt;</p><p class="s21" style="padding-left: 56pt;text-indent: 0pt;text-align: left;">&lt;b&gt;Description&lt;/b&gt;</p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">&lt;Tabs.Tab name=&quot;Reviews&quot;&gt;Reviews&lt;/Tabs.Tab&gt;</p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;/Tabs&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/React.Fragment&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is exactly the JSX we wanted to achieve when we started to build the compound tabs component. If we go to the running app and browse to the product page, our tabs component works perfectly, with the description tab in bold:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"><span><img width="524" height="339" alt="image" src="Learn+React+with+TypeScript+3-2/Image_320.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a name="bookmark540">So, compound components are great for components that rely on each other.</a></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">The <span class="s22">&lt;Tabs.Tab /&gt; </span>syntax really <i>calls out the fact </i>that <span class="s22">Tab </span>needs to be used with <span class="s22">Tabs</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">React context works really well with compound components allowing the components, in the compound to easily share state. The state can even include functions such as event handlers.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark508">Allowing the consumer to specify the content to be rendered in sections of a component gives the consumer a great deal of flexibility. Specifying this custom content as a child of a component is intuitive and feels natural. We&#39;ll continue with this approach in the following section where we&#39;ll complete our tabs component.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark541">Render props pattern</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We used a form of the render props pattern in the previous section where we leveraged the <span class="s22">children </span>prop. We used this to allow a consumer of our <span class="s22">Tab </span>component to render custom content for the tab heading. This is great, but what if we want to allow the consumer to render custom content in different sections of the component? In our <span class="s22">Tabs </span>component, we haven&#39;t allowed the consumer to render the content of the tab yet. We definitely want the consumer to be able to specify custom content for this, but how do we do this now that we&#39;ve already used the <span class="s22">children </span>prop for the heading?</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">The answer is simple but not obvious at first. The answer is that, because props can be anything, they can be a function that renders content <span class="s23">– </span>just like the special <span class="s22">children </span>prop. These types of prop are called render props. We can have as many render props as we like, giving us the flexibility to allow multiple sections of a component to be rendered by the consumer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We actually used a render prop in the last section when we used React context. The way we consumed the context was via a render prop.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Next, we&#39;ll complete our <span class="s22">Tabs </span>component by leveraging the render props pattern.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark509">Completing Tabs with render props</a><a name="bookmark542">&zwnj;</a><a name="bookmark543">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are going to complete our Tabs component now by using the render props pattern. Before we implement our first render prop, let&#39;s think about how we want the</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">consumer to consume our <span class="s22">Tabs </span>component when it has been completed. The following JSX is how we would ideally consume the <span class="s22">Tabs </span>component from the <span class="s22">Product </span>component:</p><p class="s12" style="padding-top: 9pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;Tabs&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;Tabs.Tab name=&quot;Description&quot; initialActive={true}</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">heading={() =&gt; &lt;b&gt;Description&lt;/b&gt;}</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;Tabs.Tab name=&quot;Reviews&quot;</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">heading={() =&gt; &quot;Reviews&quot;}</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-reviews&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">{product.reviews.map(review =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;li key={review.reviewer}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 77pt;text-indent: 0pt;text-align: left;">&lt;i&gt;&quot;{review.comment}&quot;&lt;/i&gt; - {review.reviewer}</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/Tabs&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s go through the steps of the key parts in this:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_321.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: justify;">We are still using compound components. Render props work perfectly fine with these components.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_322.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: justify;">The heading for each tab is no longer defined in the child of the <span class="s22">Tab </span>component. Instead, we use a <span class="s22">heading </span>render prop where we can still render a simple string or richer content.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_323.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: justify;">The tab content is then specified as the child of the <span class="s22">Tab </span>component.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark510">Using render prop for tab headings</a><a name="bookmark544">&zwnj;</a><a name="bookmark545">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">So, let&#39;s change the implementation of the tab headings to use a render prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l124"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In <span class="s22">Tabs.tsx</span>, let&#39;s start by adding a new property in the tab props interface for the heading:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ITabProps { name: string; initialActive?: boolean;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">heading: () =&gt; string | JSX.Element;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This property is a function with no parameters that returns a <span class="s22">string </span>or some JSX. This is the definition of our render prop.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Changing the implementation is very straightforward. We simply replace the call to the <span class="s22">children </span>prop function with our new render prop function in the return statement in the <span class="s22">Tab </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;li</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">onClick={handleTabClick}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">className={props.name === activeName ? &quot;active&quot; : &quot;&quot;}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">{props.heading()}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s switch the consumption of <span class="s22">Tabs </span>in <span class="s22">Product.tsx </span>to the following:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Tabs&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;Tabs.Tab name=&quot;Description&quot; initialActive={true}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">heading={() =&gt; &lt;b&gt;Description&lt;/b&gt;}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Tabs.Tab name=&quot;Reviews&quot; <span class="s21">heading={() =&gt; &quot;Reviews&quot;} </span>/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Tabs&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark546">We may get a TSLint warning: </a><b>Lambdas are forbidden in JSX attributes due to their rendering performance impact. </b>It is useful to know that lambdas can be problematic so that we can keep this in mind for when we do experience a performance problem. However, we are going to switch this rule off in <span class="s22">tslint.json </span>by specifying <span class="s22">&quot;jsx-no-lambda&quot; </span>as <span class="s22">false</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint-config-</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">prettier&quot;], &quot;rules&quot;: {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&quot;jsx-no-lambda&quot;: false</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_324.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we want to be super performance-conscious, instead of using a lambda function we can reference a method within the component.</p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">After we have saved the new TSLint settings, the compiler complaint will hopefully go away. Note that we may need to kill the <b>Terminal </b>and <span class="s22">npm start </span>the app again for the compiler complaint to go away.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we try using the product page in our app, it will behave just as it did before.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, implementing the render prop pattern is very simple. The most time-consuming thing with this pattern is understanding what it can do and how it works. Once we&#39;ve got to grips with it, it is an excellent pattern we can use to provide rendering flexibility to consumers of our components.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We have just one more section to go now before our <span class="s22">Tab </span>component is complete.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark511">Using children prop for tab content</a><a name="bookmark547">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The finish line is in sight now for our <span class="s22">Tab </span>component. The final task is to allow consumers to render tab content. We&#39;ll use the <span class="s22">children </span>prop to do this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l125"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Firstly, in <span class="s22">Tabs.tsx</span>, let&#39;s change the <span class="s22">handleTabClick </span>property in our context interface to include the content to render:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ITabsContext { activeName: string;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 110%;text-align: left;">handleTabClick?: (name: string<span class="s21">, content: React.ReactNode</span>) =&gt; void;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are also going to hold the active content in state along with the active tab name. So, let&#39;s add this to the state interface for <span class="s22">Tabs</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IState { activeName: string;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">activeContent: React.ReactNode;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now change the tab click handler in <span class="s22">Tabs </span>to set the state for the active content along with the active tab name:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleTabClick = (name: string, <span class="s21">content: React.ReactNode</span>)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">this.setState({ activeName: name, <span class="s21">activeContent: content </span>});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the <span class="s22">Tab </span>component, let&#39;s call the tab click handler with the additional parameter for the tab content by passing the <span class="s22">children </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleTabClick = (e: React.MouseEvent&lt;HTMLLIElement&gt;) =&gt; { if (context.handleTabClick) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">context.handleTabClick(props.name, <span class="s21">props.children</span>);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Now let&#39;s render the active content from our state in the <span class="s22">Tabs render </span>method under where we render the tab headings:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;TabsContext.Provider ...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;tabs&quot;&gt;{this.props.children}&lt;/ul&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div&gt;{this.state &amp;&amp; this.state.activeContent}&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/TabsContext.Provider&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change how we consume the <span class="s22">Tabs </span>component in the <span class="s22">Product </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;{product.name}&lt;/h1&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Tabs&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;Tabs.Tab name=&quot;Description&quot; initialActive={true}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">heading={() =&gt; &lt;b&gt;Description&lt;/b&gt;}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{product.description}&lt;/p&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: center;">&lt;Tabs.Tab name=&quot;Reviews&quot; heading={() =&gt; &quot;Reviews&quot;}&gt;</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;ul className=&quot;product-reviews&quot;&gt;</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">{product.reviews.map(review =&gt; (</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;li key={review.reviewer}&gt;</p><p class="s21" style="padding-left: 72pt;text-indent: 0pt;text-align: center;">&lt;i&gt;&quot;{review.comment}&quot;&lt;/i&gt; - {review.reviewer}</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/li&gt;</p><p class="s21" style="text-indent: 0pt;text-align: right;">))}</p><p class="s21" style="text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/Tabs.Tab&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Tabs&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;p className=&quot;product-price&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The tab content is now nested within each <span class="s22">Tab </span>component exactly how we wanted.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Let&#39;s give this a try. If we go to the product page we notice an issue:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 56pt;text-indent: 0pt;text-align: left;"><span><img width="435" height="306" alt="image" src="Learn+React+with+TypeScript+3-2/Image_325.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a name="bookmark548">The content isn&#39;t being rendered when the page first loads. If we click on the</a></p><p class="s9" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Reviews <span class="p">tab or the </span>Description <span class="p">tab, the content then loads.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">The problem is that we don&#39;t have any code to render the content when the tabs initially load. So, let&#39;s resolve this in the <span class="s22">Tab </span>component by adding the highlighted lines:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public static Tab: React.SFC&lt;ITabProps&gt; = props =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;TabsContext.Consumer&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">{(context: ITabsContext) =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 84pt;text-indent: -5pt;line-height: 106%;text-align: left;">if (!context.activeName &amp;&amp; props.initialActive) { if (context.handleTabClick) {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 106%;text-align: left;">context.handleTabClick(props.name, props.children); return null;</p><p class="s21" style="padding-left: 84pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">const activeName = context.activeName</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">? context.activeName</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">: props.initialActive</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">? props.name</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">: &quot;&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;/TabsContext.Consumer&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The highlighted lines invoke the tab click handler if there is no active tab in the context and the tab is flagged as initially active. In this case, we return null because invoking the tab click will set the state for the active tab, which will cause another rendering cycle.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our tabs component should now be complete. Let&#39;s check by going to the product page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><span><img width="470" height="245" alt="image" src="Learn+React+with+TypeScript+3-2/Image_326.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The content renders as we expect. If we click on the <b>Reviews </b>tab, this renders fine as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 43pt;text-indent: 0pt;text-align: left;"><span><img width="458" height="310" alt="image" src="Learn+React+with+TypeScript+3-2/Image_327.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark549">So, the render props and children props patterns are great for allowing consumers to render custom content. The syntax may look a little tricky at first, but when you understand it, it makes perfect sense and is really elegant.</a></p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark512">In the next section, we&#39;ll look at the final pattern in this chapter.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark550">Higher-order components</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">A <b>higher-order component </b>(<b>HOC</b>) is a functional component that takes in a component as a parameter and returns an enhanced version of that component. That may not make a lot of sense, so we&#39;re going to go through an example in this section. Our example creates a HOC called <span class="s22">withLoader </span>that can be applied to any component in order to add a loading spinner when the component is busy. We are going to use this in our React shop (that we worked on in the last section) in the product page whilst data is being fetched. It will look like the following when we have finished:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="273" alt="image" src="Learn+React+with+TypeScript+3-2/Image_328.png"/></span></p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark513">Adding asynchronous data fetching</a><a name="bookmark551">&zwnj;</a><a name="bookmark552">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">At the moment, the data fetching in our shop is instantaneous because all the data is local. So, before working on the <span class="s22">withLoader </span>component, let&#39;s refactor the data fetching functions to include a delay and be asynchronous as well. This will better simulate a real data fetching function that gets the data using a web API:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l126"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In <span class="s22">ProductData.ts</span>, let&#39;s add the following arrow function that can be used to get a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const getProduct = async (id: number): Promise&lt;IProduct | null&gt; =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">await wait(1000);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const foundProducts = products.filter(customer =&gt; customer.id === id);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return foundProducts.length === 0 ? null : foundProducts[0];</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The function takes in the product ID and uses the <span class="s22">filter </span>function in the</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">products <span class="p">array to find the product and then returns it.</span></p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The function is prefixed with the <span class="s22">async </span>keyword because it is asynchronous.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">The function also calls a function called <span class="s22">wait </span>asynchronously with the <span class="s22">await</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">keyword in front of it. So, let&#39;s create the <span class="s22">wait </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const wait = (ms: number): Promise&lt;void&gt; =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return new Promise(resolve =&gt; setTimeout(resolve, ms));</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_329.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">Don&#39;t worry if the <span class="s22">async </span>and <span class="s22">await </span>keywords along with promises don&#39;t make much sense at the moment. We&#39;ll look at these in detail later in the book.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">This function uses the standard JavaScript <span class="s22">setTimeout </span>function to wait for the number of milliseconds we specify in the function parameter. The function returns a <span class="s22">Promise </span>that is resolved when <span class="s22">setTimeout </span>completes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, we have a function that now fetches a product asynchronously taking at least 1 second. Let&#39;s plug this into our product page. The <span class="s22">ProductPage </span>component is a container component responsible for fetching data, so let&#39;s plug this in here.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark553">First, let&#39;s import the </a><span class="s22">getProduct </span>function into <span class="s22">ProductPage</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">import { <span class="s21">getProduct</span>, IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add a property called <span class="s22">loading </span>to the state of <span class="s22">ProductPage </span>to indicate whether the data is loading or not:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 119%;text-align: left;">interface IState { product?: IProduct; added: boolean; <span class="s21">loading: boolean;</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also initialize this state to <span class="s22">true </span>in the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public constructor(props: Props) { super(props);</p><p class="s12" style="padding-left: 90pt;text-indent: -10pt;line-height: 118%;text-align: left;">this.state = { added: false, <span class="s21">loading: true</span></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 8pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Now, we can use the <span class="s22">getProduct </span>function when the <span class="s22">ProductPage </span>component loads:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">public <span class="s21">async </span>componentDidMount() { if (this.props.match.params.id) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">const id: number = parseInt(this.props.match.params.id, 10);</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 106%;text-align: left;">const product = await getProduct(id); if (product !== null) {</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;line-height: 10pt;text-align: center;">this.setState({ product, <span class="s21">loading: false </span>});</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We call <span class="s22">getProduct </span>asynchronously using the <span class="s22">await </span>keyword. In order to do this, we need to mark the <span class="s22">componentDidMount </span>lifecycle method as asynchronous with the <span class="s22">async </span>keyword. After we&#39;ve got the product, we set it in the state and reset the <span class="s22">loading </span>flag to <span class="s22">false</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark554">If our shop isn&#39;t running, let&#39;s run this:</a></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 90%;text-align: left;">If we go to the product page, we see that it takes roughly 1 second for the product to load now. You may notice <b>Product not found! </b>being displayed whilst the product loads. This is because the product is not set on the initial render. We&#39;ll ignore this for the time being because our <span class="s22">withLoader </span>HOC will resolve this issue.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark514">So, now that we are getting data asynchronously and roughly taking 1 second, we are ready to implement our </a><span class="s22">withLoader </span>HOC and use it on the product page. We&#39;ll do just this in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark555">Implementing the withLoader HOC</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;re going to create a loader spinner component called <span class="s22">withLoader </span>that can be used with any component to indicate that the component is busy doing something:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l127"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by creating a new file called <span class="s22">withLoader.tsx </span>with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { loading: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const withLoader = &lt;P extends object&gt;( Component: React.ComponentType&lt;P&gt;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">): React.SFC&lt;P &amp; IProps&gt; =&gt; ({ loading, ...props }: IProps) =&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">// TODO - return a loading spinner if loading is true otherwise return the component passed in</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default withLoader;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">There are a few things going on here, so let&#39;s break this down:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_330.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_331.png"/></span></p><p class="s22" style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;line-height: 109%;text-align: left;">withLoader <span class="p">is a function that that takes in a component of type </span>P<span class="p">. </span>withLoader <span class="p">calls a function component.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_332.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark556">The properties for the function component are defined as </a><span class="s22">P &amp; IProps</span>, which is an intersection type.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_333.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">An intersection type combines multiple types into one. So <span class="s22">X</span>, and <span class="s22">Y</span>, and <span class="s22">Z </span>combine all the properties and methods of <span class="s22">X</span>, <span class="s22">Y</span>, and <span class="s22">Z </span>together into a new type.</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_334.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, the properties for the SFC include all the properties from the component passed in along with a <span class="s22">loading boolean </span>property that we defined.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_335.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The props are destructured into a <span class="s22">loading </span>variable and a <span class="s22">props </span>variable containing all the other properties using a rest parameter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">So, the remaining work we have to do is return our loading spinner if <span class="s22">loading </span>is <span class="s22">true</span>, otherwise we just need to return the component passed in. We can do this using a ternary expression highlighted in the following code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const withLoader = &lt;P extends object&gt;( Component: React.ComponentType&lt;P&gt;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">): React.SFC&lt;P &amp; IProps&gt; =&gt; ({ loading, ...props }: IProps) =&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">loading ? (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-overlay&quot;&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-circle-wrap&quot;&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-circle&quot; /&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">) : (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;Component {...props} /&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The component passed in is returned in the second ternary branch. We use the spread syntax to spread the properties in the <span class="s22">props </span>variable into the component.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The loading spinner is returned in the first ternary branch.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">The loading spinner references some CSS classes, so let&#39;s add these into</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">index.css<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.loader-overlay { position: fixed; top: 0;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">left: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">width: 100%;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">height: 100%;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">background-color: Black;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">opacity: 0.3;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">z-index: 10004;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.loader-circle-wrap { position: fixed; top: 0;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">right: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">bottom: 0;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">left: 0; height: 100px; width: 100px; margin: auto;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.loader-circle {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">border: 4px solid #ffffff; border-top: 4px solid #899091; border-radius: 50%;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">width: 100px; height: 100px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">animation: loader-circle-spin 0.7s linear infinite;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">The <span class="s22">loader-overlay </span>class creates a black see-through overlay over the whole page. The <span class="s22">loader-circle-wrap </span>class creates a <span class="s22">100px </span>by <span class="s22">100px </span>square in the center of the overlay. The <span class="s22">loader-circle </span>class creates the spinning circle.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: justify;">Our <span class="s22">withLoader </span>HOC is now complete.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">For reference, a class-based version of <span class="s22">withLoader </span>is shown in the following code block:</p><p class="s12" style="padding-top: 9pt;padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">const withLoader = &lt;P extends object&gt;(Component: React.ComponentType&lt;P&gt;) =&gt; class WithLoader extends React.Component&lt;P &amp; IProps&gt; {</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s12" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;line-height: 120%;text-align: left;">const { loading, ...props } = this.props as IProps; return loading ? (</p><p class="s12" style="padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-overlay&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 77pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-circle-wrap&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 88pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-circle&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 77pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">) : (</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">&lt;Component {...props} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark557">We are going to stick with the SFC version, though, because it doesn&#39;t contain any state or need access to any lifecycle methods.</a></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark515">In the next section, we&#39;ll consume our </a><span class="s22">withLoader </span>component in the product page in our shop app.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark558">Consuming the withLoader HOC</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Consuming a HOC is very simple. We simply wrap the HOC around the component that we want to enhance. The easiest place to do this is in the export statement.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s add the <span class="s22">withLoader </span>HOC we created in the previous section to our product page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l128"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">So, we are going to wrap the <span class="s22">Product </span>component with <span class="s22">withLoader</span>. First, let&#39;s import <span class="s22">withLoader </span>into <span class="s22">Product.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import withLoader from &quot;./withLoader&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Now we can wrap <span class="s22">withLoader </span>around <span class="s22">Product </span>in the export statement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">export default withLoader(Product);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We now get a compilation error in the <span class="s22">ProductPage </span>component because it expects to pass <span class="s22">Product </span>a loading property.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">So, let&#39;s pass the loading property from the loading state where we reference</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Product <span class="p">in </span>ProductPage<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 114%;text-align: left;">&lt;Product <span class="s21">loading={this.state.loading} </span>product={product} inBasket={this.state.added}</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">onAddToBasket={this.handleAddClick}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Whilst still in <span class="s22">ProductPage.tsx</span>, we should revise the condition that renders the <span class="s22">Product </span>component. We now want to render <span class="s22">Product </span>if the product is still being loaded. This will then render the loading spinner:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{product <span class="s21">|| this.state.loading </span>? (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;Product loading={this.state.loading} product={product} inBasket={this.state.added}</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">onAddToBasket={this.handleAddClick}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">) : (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;p&gt;Product not found!&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This gives us another compilation error, though, because the <span class="s22">product </span>property within the <span class="s22">Product </span>component doesn&#39;t expect to be <span class="s22">undefined</span>. However, it will be <span class="s22">undefined </span>when the product is being loaded.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s make this property optional in <span class="s22">IProps </span>for the <span class="s22">Product </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 112%;text-align: left;">interface IProps { <span class="s21">product?: IProduct; </span>inBasket: boolean;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">onAddToBasket: () =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This then gives further compilation errors in the JSX in the <span class="s22">Product </span>component where we reference the <span class="s22">product </span>property because it now will be</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">undefined <span class="p">during the loading of the data.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">A simple resolution to this is to render <span class="s22">null </span>if we don&#39;t have a product. The <span class="s22">withLoader </span>HOC that wraps <span class="s22">Product </span>will render a loading spinner in this case, anyway. So, we are just keeping the TypeScript compiler happy here:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleAddClick = () =&gt; { props.onAddToBasket();</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (!product) { return null;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark559">Now that the TypeScript compiler is happy, if we go to the product page in our shop it will display our loading spinner before rendering the product:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="260" alt="image" src="Learn+React+with+TypeScript+3-2/Image_336.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, HOCs are great for enhancing components where the enhancement is something that can be applied to many components. Our loader spinner is a common use case for a HOC. Another very common usage of the HOC pattern is when using React Router. We used the React Router <span class="s22">withRouter </span>HOC previously in this book to access parameters for a path.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark516">Summary</a><a name="bookmark560">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this chapter, we learned about container components and how they can be used to manage state and what presentational components need to do. Presentational components can then focus on what they need to look like. This allows presentational components to be more easily reused in multiple places and unit-tested.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We learned that compound components are components that rely on each other. Declaring compound children as static members on the parent class make it clear to a consumer that the components should be used together. React context is a convenient way for compound components to share their state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We learned about the special children prop that can be used to access and render a component&#39;s children. We then learned that we can create our own render props to give consumers great flexibility for custom-rendering sections of a component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">In the last section, we learned about higher-order components and how they can be used to implement common enhancements to components. We already consumed the React Router higher-order component when gaining access to a paths parameters earlier in the book.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark517">In the next chapter, we&#39;ll learn how we create forms in React. Towards the end of the next chapter, we&#39;ll use some of these patterns that we have learned in this chapter in order to deal with forms in a generic way.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark561">Questions</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s put what we have learned about component patterns to the test with some questions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l129"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What special property does React give us to access a component&#39;s, children?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How many components can share state with React context?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">When consuming the React context, what pattern does it use to allow us to render our content with the context?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How many render props can we have in a component?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How many children props do we have in a component?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We only used <span class="s22">withLoader </span>on the product page. We use the following function in <span class="s22">ProductData.ts </span>to get all the products:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const getProducts = async (): Promise&lt;IProduct[]&gt; =&gt; { await wait(1000);</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">return products;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Can you use this to implement a loader spinner on the products page by consuming the <span class="s22">withLoader </span>HOC?</p></li><li><p style="padding-top: 9pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Is it possible to create a loader spinner using the children props pattern? The consuming JSX would be something like the following:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Loader loading={this.state.loading}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">The content for my component ...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Loader&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If so, have a go at implementing it.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark518">Further reading</a><a name="bookmark562">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_337.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a href="https://reactjs.org/docs/context.html" class="s20" target="_blank">React context is explained in detail in the React documentation at the following link: </a><a href="https://reactjs.org/docs/context.html" class="a" target="_blank">https://reactjs.org/docs/context.</a><a href="https://reactjs.org/docs/context.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_338.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a href="https://reactjs.org/docs/higher-order-components.html" class="s20" target="_blank">Higher-order components are detailed in the React documentation at the following link: </a><a href="https://reactjs.org/docs/higher-order-components.html" class="a" target="_blank">https://reactjs.org/docs/higher-order-components.</a><a href="https://reactjs.org/docs/higher-order-components.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_339.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a href="https://reactjs.org/docs/render-props.html" class="s20" target="_blank">The render props pattern is explained in the React documentation at the following link: </a><a href="https://reactjs.org/docs/render-props.html" class="a" target="_blank">https://reactjs.org/docs/render-props.</a><a href="https://reactjs.org/docs/render-props.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 167pt;text-indent: 0pt;text-align: left;"><a name="bookmark563">Working with Forms</a><a name="bookmark586">&zwnj;</a><a name="bookmark587">&zwnj;</a><a name="bookmark588">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Forms are extremely common in the apps we build. In this chapter, we&#39;ll learn how to build forms using controlled components in React and TypeScript. We&#39;ll build a <b>Contact Us </b>form for the React shop we have been working on in other chapters as our learning exercise.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">We&#39;ll quickly discover that there is a fair amount of boilerplate code involved in creating forms, so we&#39;ll look at building a generic form component to reduce the boilerplate code. Client-side validation is critical to the user experience of the forms we build, so we&#39;ll also cover this topic in a fair amount of depth.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Finally, form submission is a critical consideration. We&#39;ll cover how to handle submission errors, as well as success.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_340.png"/></span></p><p style="padding-left: 53pt;text-indent: -48pt;line-height: 22pt;text-align: left;">In this chapter, we&#39;ll discuss the following topics: Creating a form with controlled components</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_341.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_342.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Reducing boilerplate code with generic components Validating forms</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_343.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark564">Form submission</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark589">Technical requirements</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_344.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><b>Node.js </b>and <span class="s22">npm</span><a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. Install them from the following link: </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a>. If you already have these installed, make sure <span class="s22">npm </span>is at least version 5.2.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_345.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We&#39;ll also need the TSLint extension (by egamma) and the Prettier extension (by Estben Petersen).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="121" alt="image" src="Learn+React+with+TypeScript+3-2/Image_346.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">In order to restore code from a previous chapter, the <span class="s22">LearnReact17WithTypeScript </span><a href="https://github.com/carlrip/LearnReact17WithTypeScript" class="s20" target="_blank">repository at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript" class="a" target="_blank">https://github.com/ carlrip/LearnReact17WithTypeScript</a><span class="s12"> </span>can be downloaded. The relevant folder can then be opened in Visual Studio Code and then <span class="s22">npm install </span><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/07-WorkingWithForms" class="s20" target="_blank">can be entered in the terminal to do the restore. All the code snippets in this chapter can be found online at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/07-WorkingWithForms" class="a" target="_blank">https://github.com/carlrip/ LearnReact17WithTypeScript/tree/master/07-</a><span class="s12">WorkingWithForms</span>.</p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_347.png"/></span></p><p class="s12" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a name="bookmark590"><span class="s9">React shop</span></a><a href="#bookmark520" class="s20">: We&#39;ll start with the React shop project we finished in </a>Chapter 6<span class="p">, </span><span class="s10">Component Patterns</span><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/06-ComponentPatterns" class="s20" target="_blank">. This is available on GitHub at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/06-ComponentPatterns" class="a" target="_blank">https://github.com/ carlrip/LearnReact17WithTypeScript/tree/master/06-</a>ComponentPatterns<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark565">Creating a form with controlled components</a><a name="bookmark591">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Forms are a common part of most apps. In React, the standard way to create a form is with what is called <i>controlled components</i>. A controlled component has its value synchronized with state in React. This will make more sense when we&#39;ve implemented our first controlled component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark566">We are going to extend the React shop we have been building to include a </a><b>Contact Us </b>form. This will be implemented using controlled components.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark592">Adding a Contact Us page</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Before we start work on our form, we need a page to host the form in. The page will be a container component, and our form will be a presentational component. We also need to create a navigation option that takes us to our new page.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;">We&#39;ll write the following codes before starting to implement our form:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l130"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">If you haven&#39;t already, open the React shop project in Visual Studio Code. Create a new file called <span class="s22">ContactUsPage.tsx </span>in the <span class="s22">src </span>folder, containing the following code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ContactUsPage extends React.Component { public render() {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Contact Us&lt;/h1&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;"><a name="bookmark593">&lt;p&gt;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 117pt;text-indent: 0pt;line-height: 120%;text-align: left;">If you enter your details we&#39;ll get back to you as soon as we can.</p><p class="s12" style="text-indent: 0pt;text-align: right;">&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">export default ContactUsPage;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This component will eventually contain state, so, we have created a class-based component. This simply renders a heading with some instructions at the moment. Eventually, it will reference our form.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now add this page to the available routes. Open <span class="s22">Routes.tsx</span>, and import our page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import ContactUsPage from &quot;./ContactUsPage&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the <span class="s22">render </span>method for the <span class="s22">Routes </span>component, we can now add a new route to our page just above the <span class="s22">admin </span>route:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Switch&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Redirect exact={true} from=&quot;/&quot; to=&quot;/products&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/products/:id&quot; component={ProductPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route exact={true} path=&quot;/products&quot; component={ProductsPage} /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/contactus&quot; component={ContactUsPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/admin&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/Route&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/login&quot; component={LoginPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route component={NotFoundPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Switch&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Open <span class="s22">Header.tsx </span>now, which contains all the navigation options. Let&#39;s add a</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">NavLink <span class="p">to our new page just above the admin link:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;nav&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">&lt;NavLink to=&quot;/products&quot; className=&quot;header-link&quot; activeClassName=&quot;header-link-active&quot;&gt;</p><p class="s12" style="text-indent: 0pt;text-align: right;">Products</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/NavLink&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 106%;text-align: left;">&lt;NavLink to=&quot;/contactus&quot; className=&quot;header-link&quot; activeClassName=&quot;header-link-active&quot;&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Contact Us</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/NavLink&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;"><a name="bookmark594">&lt;NavLink to=&quot;/admin&quot; className=&quot;header-link&quot; activeClassName=&quot;header-link-active&quot;&gt;</a></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">Admin</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/NavLink&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/nav&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Run the project in your development server, by entering the following in the terminal:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 29pt;text-indent: 0pt;text-align: center;">You should see a new navigation option that takes us to our new page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 51pt;text-indent: 0pt;text-align: left;"><span><img width="447" height="215" alt="image" src="Learn+React+with+TypeScript+3-2/Image_348.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark567">Now that we have our new page, we are ready to implement our first controlled input in a form. We&#39;ll do this in the following section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark595">Creating controlled inputs</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this section, we&#39;ll start to create our form containing our first controlled input:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l131"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Create a new file called <span class="s22">ContactUs.tsx </span>in the <span class="s22">src </span>folder containing the following code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const ContactUs: React.SFC = () =&gt; { return (</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;form className=&quot;form&quot; noValidate={true}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;"><a name="bookmark596">&lt;label htmlFor=&quot;name&quot;&gt;Your name&lt;/label&gt;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;input type=&quot;text&quot; id=&quot;name&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default ContactUs;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is a function component that renders a form containing a label and an input for the user&#39;s name.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">We have referenced some CSS classes, so let&#39;s add these to the bottom of</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">index.css<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.form {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">width: 300px;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">margin: 0px auto 0px auto;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.form-group { display: flex;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">flex-direction: column; margin-bottom: 20px;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.form-group label {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">align-self: flex-start; font-size: 16px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">margin-bottom: 3px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.form-group input, select, textarea { font-family: Arial;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">font-size: 16px; padding: 5px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">border: lightgray solid 1px; border-radius: 5px;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">form-group </span>class wraps each field in our form, displaying the label above the input with nice spacing.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark597">Let&#39;s reference our form from our page now. Go to </a><span class="s22">ContactUsPage.tsx </span>and import our component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import ContactUs from &quot;./ContactUs&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We can then reference our component in the <span class="s22">render </span>method at the bottom of the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">div <span class="p">container:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Contact Us&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">&lt;p&gt;If you enter your details we&#39;ll get back to you as soon as we can.&lt;/p&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;ContactUs /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app and go to the <b>Contact Us </b>page, we&#39;ll see our name field rendered:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 29pt;text-indent: 0pt;text-align: left;"><span><img width="506" height="268" alt="image" src="Learn+React+with+TypeScript+3-2/Image_349.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We can enter our name into this field, but nothing will happen yet. We want the entered name to be stored in the <span class="s22">ContactUsPage </span>container component state. This is because <span class="s22">ContactUsPage </span>will eventually manage the form submission.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark598">Let&#39;s add a state type to </a><span class="s22">ContactUsPage</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IState { name: string; email: string; reason: string; notes: string;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class ContactUsPage extends React.Component&lt;{}, <span class="s21">IState</span>&gt; { ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">As well as the person&#39;s name, we are going to capture their email address, reason for contacting the shop, and any additional notes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also initialize the state in a constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public constructor(props: {}) { super(props);</p><p class="s12" style="padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">this.state = { email: &quot;&quot;,</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">name: &quot;&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">notes: &quot;&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">reason: &quot;&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We now need to get the name value from the state in <span class="s22">ContactUsPage </span>into the <span class="s22">ContactUs </span>component. This will allow us to display the value in the input. We can do this by first creating props in the <span class="s22">ContactUs </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IProps { name: string; email: string; reason: string; notes: string;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const ContactUs: React.SFC&lt;<span class="s21">IProps</span>&gt; = <span class="s21">props </span>=&gt; { ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We have created props for all the data we are going to eventually capture in our form.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark599">Now, we can bind the name input value to the </a><span class="s22">name </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor=&quot;name&quot;&gt;Your name&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;input type=&quot;text&quot; id=&quot;name&quot; <span class="s21">value={props.name} </span>/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now pass these from the state in <span class="s22">ContactUsPage</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 108%;text-align: left;">&lt;ContactUs <span class="s21">name={this.state.name} email={this.state.email} reason={this.state.reason} notes={this.state.notes}</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s go to the running app and go to our <b>Contact Us </b>page. Try typing something into the name input.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Nothing seems to happen... something is preventing us from entering the value.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We have just set the input value to some React state, so React is now controlling the value of the input. This is why we no longer appear to be able to type into it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are part-way through creating our first controlled input. However, controlled inputs aren&#39;t much use if users can&#39;t enter anything into them. So, how can we make our input editable again?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The answer is that we need to listen to changes to the input value, and update the state accordingly. React will then render the new input value from the state.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s listen to changes to the input via the <span class="s22">onChange </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;input type=&quot;text&quot; id=&quot;name&quot; value={props.name}</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">onChange={handleNameChange} <span class="s12">/&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s create the handler we have just referenced as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const ContactUs: React.SFC&lt;IProps&gt; = props =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">const handleNameChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;)</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">props.onNameChange(e.currentTarget.value);</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return ( ... );</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark600">Note that we&#39;ve used the generic </a><span class="s22">React.ChangeEvent </span>command with the type of the element we are handling (<span class="s22">HTMLInputElement</span>).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">currentTarget </span>prop in the event argument gives us a reference to the element that the event handler is attached to. The <span class="s22">value </span>property within this gives us the latest value of the input.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;">The handler references an <span class="s22">onNameChange </span>function prop that we haven&#39;t defined yet. So, let&#39;s add this to our interface, along with similar props for the other fields:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { name: string;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">onNameChange: (name: string) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">email: string;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">onEmailChange: (email: string) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">reason: string;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">onReasonChange: (reason: string) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">notes: string;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">onNotesChange: (notes: string) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">We can now pass these props from <span class="s22">ContactUsPage </span>into <span class="s22">ContactUs</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;ContactUs name={this.state.name}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 112%;text-align: left;">onNameChange={this.handleNameChange} <span class="s12">email={this.state.email} </span>onEmailChange={this.handleEmailChange} <span class="s12">reason={this.state.reason} </span>onReasonChange={this.handleReasonChange} <span class="s12">notes={this.state.notes} </span>onNotesChange={this.handleNotesChange}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">Let&#39;s create the change handlers we&#39;ve just referenced in <span class="s22">ContactUsPage </span>that set the relevant state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleNameChange = (name: string) =&gt; { this.setState({ name });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleEmailChange = (email: string) =&gt; { this.setState({ email });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleReasonChange = (reason: string) =&gt; { this.setState({ reason });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;"><a name="bookmark601">private handleNotesChange = (notes: string) =&gt; { this.setState({ notes });</a></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we now go to the <b>Contact Us </b>page in the running app and enter something into the name, this time the input behaves as expected.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">Let&#39;s add fields for email, reason, and notes in our <span class="s22">render </span>method for</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">ContactUs<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;form className=&quot;form&quot; noValidate={true} onSubmit={handleSubmit}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor=&quot;name&quot;&gt;Your name&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 21pt;line-height: 120%;text-align: left;">&lt;input type=&quot;text&quot; id=&quot;name&quot; value={props.name} onChange={handleNameChange} /&gt;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s21" style="padding-left: 84pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor=&quot;email&quot;&gt;Your email address&lt;/label&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 16pt;line-height: 106%;text-align: left;">&lt;input type=&quot;email&quot; id=&quot;email&quot; value={props.email} onChange={handleEmailChange} /&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s21" style="padding-left: 95pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor=&quot;reason&quot;&gt;Reason you need to contact us&lt;/label&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 27pt;line-height: 106%;text-align: left;">&lt;select id=&quot;reason&quot; value={props.reason} onChange={handleReasonChange}&gt;</p><p class="s21" style="padding-left: 106pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;option value=&quot;Marketing&quot;&gt;Marketing&lt;/option&gt;</p><p class="s21" style="padding-left: 106pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Support&quot;&gt;Support&lt;/option&gt;</p><p class="s21" style="padding-left: 106pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Feedback&quot;&gt;Feedback&lt;/option&gt;</p><p class="s21" style="padding-left: 106pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Jobs&quot;&gt;Jobs&lt;/option&gt;</p><p class="s21" style="padding-left: 106pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Other&quot;&gt;Other&lt;/option&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/select&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor=&quot;notes&quot;&gt;Additional notes&lt;/label&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 21pt;line-height: 106%;text-align: left;">&lt;textarea id=&quot;notes&quot; value={props.notes} onChange={handleNotesChange} /&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">For each field, we render a <span class="s22">label </span>and the appropriate editor inside a <span class="s22">div</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">container, with a <span class="s22">form-group </span>class to space our fields out nicely.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">All the editors reference handlers for handling changes to their value. All the editors also have their value set from the appropriate <span class="s22">ContactUs </span>prop. So, all the field editors have controlled components.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s have a closer look at the <span class="s22">select </span>editor. We set the value in the <span class="s22">select </span>tag using a <span class="s22">value </span>attribute. However, this doesn&#39;t exist in the native <span class="s22">select </span>tag.</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Usually, we have to include a <span class="s22">selected </span>attribute in the relevant <span class="s22">option </span>tag within the <span class="s22">select </span>tag:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;select id=&quot;reason&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Marketing&quot;&gt;Marketing&lt;/option&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Support&quot; <span class="s21">selected</span>&gt;Support&lt;/option&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Feedback&quot;&gt;Feedback&lt;/option&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Jobs&quot;&gt;Jobs&lt;/option&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;option value=&quot;Other&quot;&gt;Other&lt;/option&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/select&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">React adds the <span class="s22">value </span>prop to the <span class="s22">select </span>tag, and manages the <span class="s22">selected </span>attribute on the <span class="s22">option </span>tag for us, behind the scenes. This allows us to consistently manage <span class="s22">input</span>, <span class="s22">textarea</span>, and <span class="s22">selected </span>in our code.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;">Let&#39;s now create the change handlers for these fields that call the function props we created earlier:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const handleEmailChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">props.onEmailChange(e.currentTarget.value);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleReasonChange = (e: React.ChangeEvent&lt;HTMLSelectElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">props.onReasonChange(e.currentTarget.value);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleNotesChange = (e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">props.onNotesChange(e.currentTarget.value);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This completes our basic <b>Contact Us </b>form, using various controlled form elements. We haven&#39;t implemented any validation or submitted the form yet. We&#39;ll get to these later in the chapter.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;re already noticing lots of similar code for each field for getting changes to fields into state. In the next section, we are going to start work on a generic form component and switch to using this for our <b>Contact Us </b>form.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark568">Reducing boilerplate code with generic components</a><a name="bookmark602">&zwnj;</a><a name="bookmark603">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Generic form components will help reduce the amount of code required to implement a form. We are going to do just this in this section, refactoring what we did in the last section for our <span class="s22">ContactUs </span>component.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s think about how we would ideally consume the generic components to produce the new version of the <span class="s22">ContactUs </span>component. It could be something like the following JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;Form</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">defaultValues={{ name: &quot;&quot;, email: &quot;&quot;, reason: &quot;Support&quot;, notes: &quot;&quot; }}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;name&quot; label=&quot;Your name&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;email&quot; label=&quot;Your email address&quot; type=&quot;Email&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;reason&quot; label=&quot;Reason you need to contact us&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;line-height: 120%;text-align: left;">type=&quot;Select&quot; options={[&quot;Marketing&quot;, &quot;Support&quot;, &quot;Feedback&quot;, &quot;Jobs&quot;, &quot;Other&quot;]} /&gt;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;notes&quot; label=&quot;Additional notes&quot; type=&quot;TextArea&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/Form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this example, there are two generic compound components: <span class="s22">Form </span>and <span class="s22">Field</span>. Here are some key points:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_350.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Form </span>component is the container for the compound, managing the state and the interactions.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_351.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We pass default values in for the fields in a <span class="s22">defaultValues </span>prop on the <span class="s22">Form</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_352.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">The <span class="s22">Field </span>component renders the label and an editor for each field.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_353.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">Each field has a <span class="s22">name </span>prop that will determine the property name in the state that the field value is stored under.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_354.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_355.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Each field has a <span class="s22">label </span>prop that specifies the text to display in each field label. The specific field editor is specified using a <span class="s22">type </span>prop. The default editor is a text-based <span class="s22">input</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_356.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">If the editor type is <span class="s22">Select</span>, then we can specify the options that appear in this using an <span class="s22">options </span>prop.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The JSX to render the new <span class="s22">ContactUs </span>component is much shorter than the original version, and arguably easier to read. The state management and event handlers are hidden away and encapsulated within the <span class="s22">Form </span>component.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark569">Creating a basic form component</a><a name="bookmark604">&zwnj;</a><a name="bookmark605">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">It&#39;s time to start work on our generic <span class="s22">Form </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l132"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by creating a new file in the <span class="s22">src </span>folder called <span class="s22">Form.tsx</span>, containing the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 240%;text-align: left;">import * as React from &quot;react&quot;; interface IFormProps {} interface IState {}</p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export class Form extends React.Component&lt;IFormProps, IState&gt; { constructor(props: IFormProps) {}</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">public render() {}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Form <span class="p">is a class-based component because it needs to manage state. We have named the props interface </span>IFormProps <span class="p">because later on we&#39;ll need an interface for field props.</span></p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add a <span class="s22">defaultValues </span>prop to the <span class="s22">IFormProps </span>interface. This will hold the default value for every field in the form:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">export interface IValues { [key: string]: any;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IFormProps {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">defaultValues: IValues;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;">We use an additional interface called <span class="s22">IValues </span>for the default value type. This is an indexable key/value type that has a <span class="s22">string </span>type key and an <span class="s22">any </span>type value. The key will be the field name, and the value will be the field value.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: justify;">So, the value for the <span class="s22">defaultValues </span>prop could be this:</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{ name: &quot;&quot;, email: &quot;&quot;, reason: &quot;Support&quot;, notes: &quot;&quot; }</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark606">Let&#39;s move on to the state in </a><span class="s22">Form </span>now. We are going to store the field values in a state property called <span class="s22">values</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IState {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">values: IValues;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Note that this is the same type as the <span class="s22">defaultValues </span>prop, which is <span class="s22">IValues</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We are going to initialize the state with the default values in the constructor now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(props: IFormProps) { super(props);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">this.state = {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">values: props.defaultValues</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">The final bit we are going to do in this section is to start implementing the</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">render <span class="p">method in the </span>Form <span class="p">component:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;form className=&quot;form&quot; noValidate={true}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">{this.props.children}</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;/form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We render the child components in a <span class="s22">form </span>tag, using the magical <span class="s22">children </span>prop we used in the last chapter.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">This leads us nicely to the <span class="s22">Field </span>component, which we&#39;ll implement in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark570">Adding a basic Field component</a><a name="bookmark607">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Field </span>component needs to render a label and an editor. It will live in a static property called <span class="s22">Field </span>inside the <span class="s22">Form </span>component. Consumers can then reference this component using <span class="s22">Form.Field</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l133"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s start by creating an interface for the field props in <span class="s22">Form.tsx </span>just above</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">IFormProps<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IFieldProps { name: string;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;"><a name="bookmark608">label: string;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">type?: &quot;Text&quot; | &quot;Email&quot; | &quot;Select&quot; | &quot;TextArea&quot;; options?: string[];</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_357.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The <span class="s22">name </span>prop is the name of the field.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_358.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The <span class="s22">label </span>prop is the text to display in the field label.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_359.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">type </span>prop is the type of editor to display. We have used a union type for this prop, containing the available types we are going to support. Note that we have defined this as an optional prop, so we&#39;ll need to define a default value for this a little later.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_360.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">options </span>prop, which is only applicable to the <span class="s22">Select </span>editor type, is also optional. This defines the list of options to display in the drop-down in a <span class="s22">string </span>array.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Now, let&#39;s add a skeleton static <span class="s22">Field </span>property in <span class="s22">Form </span>for the <span class="s22">Field</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public static Field: React.SFC&lt;IFieldProps&gt; = props =&gt; { return ();</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Before we forget, let&#39;s add that default for the field <span class="s22">type </span>prop. We define this as follows, outside and underneath the <span class="s22">Form </span>class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">Form.Field.defaultProps = { type: &quot;Text&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">So, the default <span class="s22">type </span>will be a text-based input.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s have a go at rendering the field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 39pt;text-indent: 0pt;text-align: center;">public static Field: React.SFC&lt;IFieldProps&gt; = props =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">const { name, label, type, options } = props;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return (</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor={name}&gt;{label}&lt;/label&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;input type={type.toLowerCase()} id={name} /&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_361.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We start by destructuring <span class="s22">name</span>, <span class="s22">label</span>, <span class="s22">type</span>, and <span class="s22">options </span>from the props object.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_362.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark609">The field is wrapped in a </a><span class="s22">div </span>container, which spaces the fields out vertically, using the <span class="s22">form-group </span>class we already implemented in <span class="s22">index.css</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_363.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">label </span>is then rendered just before the <span class="s22">input </span>inside the <span class="s22">div </span>container, with the <span class="s22">htmlFor </span>attribute of the label referencing the <span class="s22">id </span>of the <span class="s22">input</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is a good start, but not all the different field editors are inputs. In fact, this will only work for types <span class="s22">Text </span>and <span class="s22">Email</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s adjust this slightly and wrap a conditional expression around the input:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor={name}&gt;{label}&lt;/label&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{(type === &quot;Text&quot; || type === &quot;Email&quot;) &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;input type={type.toLowerCase()} id={name} /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, let&#39;s deal with the <span class="s22">TextArea </span>type by adding the highlighted JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{(type === &quot;Text&quot; || type === &quot;Email&quot;) ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{type === &quot;TextArea&quot; &amp;&amp; (</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;textarea id={name} /&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now render the final editor we are going to support, as follows:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{type === &quot;TextArea&quot; ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{type === &quot;Select&quot; &amp;&amp; (</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;select&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">{options &amp;&amp; options.map(option =&gt; (</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;option key={option} value={option}&gt;</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">{option}</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;/option&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">))}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/select&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We render a <span class="s22">select </span>tag, containing the options specified by using the <span class="s22">map </span>function in the <span class="s22">options </span>array prop. Note that we give each option a unique <span class="s22">key </span>attribute to keep React happy when detecting any changes to the options.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We now have basic <span class="s22">Form </span>and <span class="s22">Field </span>components in play, which is great. However, the implementation is still pretty useless because we are not managing the field values yet in state. Let&#39;s cover that in the next section.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark571">Sharing state with React context</a><a name="bookmark610">&zwnj;</a><a name="bookmark611">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The state for field values lives in the <span class="s22">Form </span>component. However, the values are rendered and changed with the <span class="s22">Field </span>component. The <span class="s22">Field </span>component doesn&#39;t have access to the state within <span class="s22">Form</span>, because the state lives in the <span class="s22">Form </span>instance and <span class="s22">Field </span>doesn&#39;t.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">This is very similar to the compound <span class="s22">Tabs </span>component we implemented in the last chapter. We shared state between the components in the <span class="s22">Tabs </span>compound using React context.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We are going to use the same approach for our <span class="s22">Forms </span>component in this section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l134"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by creating an interface for the form context in <span class="s22">Form.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IFormContext { values: IValues;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The context just contains values that have the same type, <span class="s22">IValues</span>, as in our state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s create the context component now just under <span class="s22">IFormContext </span>using</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">React.createContext<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const FormContext = React.createContext&lt;IFormContext&gt;({ values: {}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We keep the TypeScript compiler happy by setting the initial context value to an empty literal value.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the <span class="s22">render </span>method in <span class="s22">Form</span>, create the context value containing the values from the state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">const context: IFormContext = { values: this.state.values</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return ( ... )</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Wrap the context provider around the <span class="s22">form </span>tag in the <span class="s22">render </span>method&#39;s JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;FormContext.Provider value={context}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;form ... &gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">&lt;/form&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/FormContext.Provider&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark612">We can now consume the context in the </a><span class="s22">Field </span>SFC:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;FormContext.Consumer&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">{context =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/FormContext.Consumer&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Now that we have access to the context, let&#39;s render the values from it in all three editors:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor={name}&gt;{label}&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{(type === &quot;Text&quot; || type === &quot;Email&quot;) &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;input type={type.toLowerCase()} id={name}</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">value={context.values[name]} <span class="s12">/&gt;</span></p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">{type === &quot;TextArea&quot; &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;textarea id={name} <span class="s21">value={context.values[name]} </span>/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">{type === &quot;Select&quot; &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;select <span class="s21">value={context.values[name]}</span>&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/select&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 18pt;text-indent: 0pt;text-align: center;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 18pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The TypeScript compiler is now happy with our <span class="s22">Form </span>and <span class="s22">Field </span>components. So, we could start work on the new <span class="s22">ContactUs </span>implementation.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">However, users will not be able to enter anything into our form yet, because we are not handling changes and passing new values to state. We now need to implement change handlers.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by creating a <span class="s22">setValue </span>method in the <span class="s22">Form </span>class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">private setValue = (fieldName: string, value: any) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">const newValues = { ...this.state.values, [fieldName]: value }; this.setState({ values: newValues });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Here are the key points in this method:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_364.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">This method takes in the field name and new value as parameters.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_365.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The new state for the <span class="s22">values </span>object is created using a new object called <span class="s22">newValues</span>, which spreads the old values from the state and then adds the new field name and value.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_366.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">The new values are then set in the state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -31pt;line-height: 14pt;text-align: left;">We then create a reference to this method in the form context so that the <span class="s22">Field</span></p><p style="padding-left: 43pt;text-indent: 0pt;line-height: 14pt;text-align: center;">component can access it. Let&#39;s add this to the form context interface first:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IFormContext { values: IValues;</p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;line-height: 10pt;text-align: center;">setValue?: (fieldName: string, value: any) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We set the property as optional to keep the TypeScript compiler happy when the form context component is created.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can then create a reference to the <span class="s22">setValue </span>method in <span class="s22">Form </span>when the context value is created:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 112%;text-align: left;">const context: IFormContext = { <span class="s21">setValue: this.setValue, </span>values: this.state.values</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">We now have access to invoke this method from the <span class="s22">Field </span>component. In <span class="s22">Field</span>, just after we destructure the <span class="s22">props </span>object, let&#39;s create a change handler that will invoke the <span class="s22">setValue </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const { name, label, type, options } = props;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">const handleChange = ( e:</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">| React.ChangeEvent&lt;HTMLInputElement&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">| React.ChangeEvent&lt;HTMLTextAreaElement&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 10pt;line-height: 106%;text-align: left;">| React.ChangeEvent&lt;HTMLSelectElement&gt;, context: IFormContext</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">) =&gt; {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">if (context.setValue) {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">context.setValue(props.name, e.currentTarget.value);</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark613">Let&#39;s look at the key points in this method:</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_367.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The TypeScript change event type is <span class="s22">ChangeEvent&lt;T&gt;</span>, where <span class="s22">T </span>is the type of the element that is being handled.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_368.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The handler&#39;s first parameter, <span class="s22">e</span>, is the React change event handler parameter. We union all the different change handler types for our different editors, so that we can handle all changes in a single function.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_369.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">The handler&#39;s second parameter is the form context.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_370.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We need a conditional statement to check that the <span class="s22">setValue </span>method is not</p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;line-height: 14pt;text-align: left;">undefined<span class="p">, to keep the TypeScript compiler happy.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_371.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We can then call the <span class="s22">setValue </span>method with the field name and new value.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">We can then reference this change handler in the <span class="s22">input </span>tag, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">type={type.toLowerCase()} id={name} value={context.values[name]}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">onChange={e =&gt; handleChange(e, context)}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Note that we use a lamda function so that we can pass in the context value to</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">handleChange<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">We can do the same in the <span class="s22">textarea </span>tag:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;textarea id={name}</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">value={context.values[name]}</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">onChange={e =&gt; handleChange(e, context)}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">We can also do this in the <span class="s22">select </span>tag:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">&lt;select value={context.values[name]}</p><p class="s21" style="padding-left: 74pt;text-indent: 0pt;line-height: 10pt;text-align: left;">onChange={e =&gt; handleChange(e, context)}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/select&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, our <span class="s22">Form </span>and <span class="s22">Field </span>components are now nicely working together, rendering fields and managing their values. In the next section, we&#39;ll give our generic components a try by implementing a new <span class="s22">ContactUs </span>component.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark572">Implementing our new ContactUs component</a><a name="bookmark614">&zwnj;</a><a name="bookmark615">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">In this section, we are going to implement a new <span class="s22">ContactUs </span>component using our <span class="s22">Form</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">and <span class="s22">Field </span>components:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l135"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by removing the props interface from <span class="s22">ContactUs.tsx</span>.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The content within the <span class="s22">ContactUs </span>SFC will be very different to the original version. Let&#39;s start by removing the content so that it looks as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const ContactUs: React.SFC = () =&gt; { return ();</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s import our <span class="s22">Form </span>component into <span class="s22">ContactUs.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Form } from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now reference the <span class="s22">Form </span>component, passing some default values:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Form</p><p class="s21" style="padding-left: 68pt;text-indent: 21pt;line-height: 106%;text-align: left;">defaultValues={{ name: &quot;&quot;, email: &quot;&quot;, reason: &quot;Support&quot;, notes: &quot;&quot; }}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/Form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the <span class="s22">name </span>field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Form</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">defaultValues={{ name: &quot;&quot;, email: &quot;&quot;, reason: &quot;Support&quot;, notes: &quot;&quot; }}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;name&quot; label=&quot;Your name&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Note we haven&#39;t passed the <span class="s22">type </span>prop because this will default to a text-based input, which is just what we require.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the <span class="s22">email</span>, <span class="s22">reason</span>, and <span class="s22">notes </span>fields now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Form</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">defaultValues={{ name: &quot;&quot;, email: &quot;&quot;, reason: &quot;Support&quot;, notes: &quot;&quot; }}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;name&quot; label=&quot;Your name&quot; /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;email&quot; label=&quot;Your email address&quot; type=&quot;Email&quot;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><a name="bookmark616">/&gt;</a></p><p class="s21" style="padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;Form.Field name=&quot;reason&quot;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 106%;text-align: left;">label=&quot;Reason you need to contact us&quot; type=&quot;Select&quot;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">options={[&quot;Marketing&quot;, &quot;Support&quot;, &quot;Feedback&quot;, &quot;Jobs&quot;, &quot;Other&quot;]}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Form.Field name=&quot;notes&quot; label=&quot;Additional notes&quot; type=&quot;TextArea&quot;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">The <span class="s22">ContactUsPage </span>is going to be much simpler now. It won&#39;t contain any state because that is managed within the <span class="s22">Form </span>component now. We also don&#39;t need to pass any props to the <span class="s22">ContactUs </span>component:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">class ContactUsPage extends React.Component&lt;{}, <span class="s21">{}</span>&gt; { public render() {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;Contact Us&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">If you enter your details we&#39;ll get back to you as soon</p><p class="s12" style="padding-top: 1pt;padding-left: 39pt;text-indent: 0pt;text-align: center;">as we can.</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;ContactUs /&gt;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 39pt;text-indent: 0pt;text-align: center;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go to the running app and go to the <b>Contact Us </b>page, it renders as required and accepts the values we enter.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark573">Our generic form component is progressing nicely, and we have consumed it to implement the </a><span class="s22">ContactUs </span>component as we had hoped. In the next section, we are going to improve our generic component even further by adding validation.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark617">Validating forms</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Including validation on a form improves the user experience, by giving them immediate feedback on whether the information entered is valid. In this section, we are going to add validation to our <span class="s22">Form </span>component and then consume it in our <span class="s22">ContactUs </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark618">The validation rules we are going to implement in the </a><span class="s22">ContactUs </span>component are these:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_372.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_373.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">The name and email fields should be populated The name field should be at least two characters</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We are going to execute validation rules when the field editor loses focus.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark574">In the next section, we&#39;ll add a prop to the </a><span class="s22">Form </span>component that allows consumers to specify validation rules.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark619">Adding a validation rules prop to form</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s think about how we would want to specify validation rules to a form. We need to be able to specify one or more rules for a field. Some rules could have a parameter, such as a minimum length. It would be nice if we could specify the rules, as in the example that follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="text-indent: 0pt;text-align: right;">&lt;Form</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">validationRules={{</p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">email: { validator: required },</p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">name: [{ validator: required }, { validator: minLength, arg: 3 }]</p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">&lt;/Form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s have a go at implementing the <span class="s22">validationRules </span>prop on the <span class="s22">Form </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l136"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Start by defining a type for the <span class="s22">Validator </span>function in <span class="s22">Form.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export type Validator = ( fieldName: string, values: IValues,</p><p class="s12" style="text-indent: 0pt;text-align: right;">args?: any</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">) =&gt; string;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">A <span class="s22">Validator </span>function will take in the field name, the values for the whole form, and an optional argument specific to the function. A string containing the validation error message will be returned. If the field is valid, a blank string will be returned.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark620">Let&#39;s use this type to create a </a><span class="s22">Validator </span>function to check that a field called</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">required <span class="p">under the </span>Validator <span class="p">type is populated:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const required: Validator = ( fieldName: string,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">values: IValues, args?: any</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">): string =&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">values[fieldName] === undefined || values[fieldName] === null || values[fieldName] === &quot;&quot;</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">? &quot;This must be populated&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">: &quot;&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">We export the function so that it can be used in our <span class="s22">ContactUs </span>implementation later. The function checks whether the field value is <span class="s22">undefined</span>, <span class="s22">null</span>, or an empty string and if so, it returns a <b>This must be populated </b>validation error message.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">If the field value isn&#39;t <span class="s22">undefined</span>, <span class="s22">null</span>, or an empty string, then an empty string is returned to indicate the value is valid.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Similarly, let&#39;s create a <span class="s22">Validator </span>function for checking that a field input is over a minimum length:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const minLength: Validator = ( fieldName: string,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">values: IValues, length: number</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">): string =&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">values[fieldName] &amp;&amp; values[fieldName].length &lt; length</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">? `This must be at least ${length} characters`</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">: &quot;&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: justify;">The function checks whether the length of the field value is less than the length argument, and if so it returns a validation error message. Otherwise, an empty string is returned to indicate the value is valid.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Now, let&#39;s add the ability to pass validation rules via a prop to the <span class="s22">Form</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: justify;">interface IValidation { validator: Validator; arg?: any;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><a name="bookmark621">interface IValidationProp {</a></p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">[key: string]: IValidation | IValidation[];</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 118%;text-align: left;">interface IFormProps { defaultValues: IValues; <span class="s21">validationRules: IValidationProp;</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_374.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">validationRules </span>prop is an indexable key/value type, where the key is the field name and the value is one or more validation rules of type <span class="s22">IValidation</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_375.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">A validation rule contains the validation function of type <span class="s22">Validator</span>, and an argument to pass into the validation function.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">With the new <span class="s22">validationRules </span>prop in place, let&#39;s add this to the <span class="s22">ContactUs</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component. Import the validator functions first:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Form, <span class="s21">minLength, required </span>} from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Now, let&#39;s add the validation rules to the <span class="s22">ContactUs </span>component JSX:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Form</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">defaultValues={{ name: &quot;&quot;, email: &quot;&quot;, reason: &quot;Support&quot;, notes: &quot;&quot; }}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">validationRules={{</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">email: { validator: required },</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">name: [{ validator: required }, { validator: minLength, arg: 2</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}]</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now, our form is valid if the name and email are populated, and the name is at least two characters long.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark575">That&#39;s the </a><span class="s22">validationRules </span>prop complete. In the next section, we&#39;ll track the validation error messages in preparation for rendering them on the page.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark622">Tracking validation error messages</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We need to track the validation error messages in state as the user completes the form and fields become valid or invalid. Later on, we&#39;ll be able to render the error messages to the screen.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark623">The </a><span class="s22">Form </span>component is responsible for managing all the form states, so we&#39;ll add the error message state to there, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l137"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the validation error message state to the form state interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IErrors {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">[key: string]: string[];</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 118%;text-align: justify;">interface IState { values: IValues; <span class="s21">errors: IErrors;</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">errors </span>state is an indexable key/value type where the key is the field name and the value is an array of validation error messages.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s initialize the <span class="s22">errors </span>state in the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(props: IFormProps) { super(props);</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">const errors: IErrors = {}; Object.keys(props.defaultValues).forEach(fieldName =&gt; {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">errors[fieldName] = [];</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">this.state = {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">errors,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">values: props.defaultValues</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">defaultValues </span>prop contains all the field names in its keys. We iterate through the <span class="s22">defaultValues </span>keys, setting the appropriate <span class="s22">errors </span>key to an empty array. As a result, when the <span class="s22">Form </span>component initializes, none of the fields contain any validation error messages, which is exactly what we want.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">The <span class="s22">Field </span>component is eventually going to render the validation error messages, so we need to add these to the form context. Let&#39;s start by adding these to the form context interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 112%;text-align: left;">interface IFormContext { <span class="s21">errors: IErrors; </span>values: IValues;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">setValue?: (fieldName: string, value: any) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark624">Let&#39;s add an </a><span class="s22">errors </span>empty literal as the default value when the context is created. This is to keep the TypeScript compiler happy:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const FormContext = React.createContext&lt;IFormContext&gt;({</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">errors: {},</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">values: {}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now include the errors in the context value:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 114%;text-align: left;">const context: IFormContext = { <span class="s21">errors: this.state.errors, </span>setValue: this.setValue, values: this.state.values</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark576">Now, the validation errors are in the form state, and also in the form context for the </a><span class="s22">Field </span>component to access. In the next section, we&#39;ll create a method that is going to invoke the validation rules.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark625">Invoking validation rules</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So far, we can define validation rules, and have state to track validation error messages, but nothing is invoking the rules yet. This is what we are going to implement in this section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l138"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">We need to create a method within the <span class="s22">Form </span>component that is going to validate a field, calling the specified validator function. Let&#39;s create a method called <span class="s22">validate </span>that takes in the field name and its value. The method will return an array of validation error messages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: justify;">private validate = ( fieldName: string, value: any</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">): string[] =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark626">Let&#39;s get the validation rules for the field and initialize an </a><span class="s22">errors </span>array. We&#39;ll collect all the errors in the <span class="s22">errors </span>array as the validators are executed. We&#39;ll also return the array of <span class="s22">errors </span>after all the validators have been executed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: justify;">private validate = ( fieldName: string, value: any</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: justify;">): string[] =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">const rules = this.props.validationRules[fieldName]; const errors: string[] = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">// TODO - execute all the validators</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return errors;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The rules can be an <span class="s22">IValidation </span>array or just a single <span class="s22">IValidation</span>. Let&#39;s check for this and call the <span class="s22">validator </span>function if we just have a single validation rule:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const errors: string[] = [];</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">if (Array.isArray(rules)) {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">// TODO - execute all the validators in the array of rules</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">if (rules) {</p><p class="s21" style="padding-left: 68pt;text-indent: 21pt;line-height: 106%;text-align: left;">const error = rules.validator(fieldName, this.state.values, rules.arg);</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (error) { errors.push(error);</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">return errors;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s now deal with the branch of code for when there are multiple validation rules. We can use the <span class="s22">forEach </span>function on the rules array to iterate through the rules and execute the <span class="s22">validator </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">if (Array.isArray(rules)) {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">rules.forEach(rule =&gt; {</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">const error = rule.validator( fieldName, this.state.values,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">rule.arg</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">);</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (error) { errors.push(error);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="text-indent: 0pt;text-align: right;"><a name="bookmark627">}</a></p><p class="s21" style="text-indent: 0pt;text-align: right;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">return errors;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The final bit of code we need to implement in the <span class="s22">validate </span>method is to set the new <span class="s22">errors </span>form state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">if (Array.isArray(rules)) {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 106%;text-align: left;">const newErrors = { ...this.state.errors, [fieldName]: errors }; this.setState({ errors: newErrors });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return errors;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We spread the old errors state into a new object, and then add the new errors for the field.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">The <span class="s22">Field </span>component needs to call into this <span class="s22">validate </span>method. We are going to add a reference to this method to the form context. Let&#39;s add it to the <span class="s22">IFormContext </span>interface first:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IFormContext { values: IValues; errors: IErrors;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">setValue?: (fieldName: string, value: any) =&gt; void;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">validate?: (fieldName: string, value: any) =&gt; void;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now add it to the context value in the <span class="s22">render </span>method in <span class="s22">Form</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 115%;text-align: left;">const context: IFormContext = { errors: this.state.errors, setValue: this.setValue, <span class="s21">validate: this.validate, </span>values: this.state.values</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark577">Our form validation is coming along nicely, and we now have a method we can call to invoke all the rules for a field. However, this method isn&#39;t being called from anywhere yet as the user fills out the form. We&#39;ll do that in the next section.</a><a name="bookmark628">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark629">Triggering validation rule execution from field</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">When the user fills in the form, we want the validation rules to trigger when a field loses focus. We&#39;ll implement this in this section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l139"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create a function that is going to handle the <span class="s22">blur </span>event for all three of the different editors:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const handleChange = (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">const handleBlur = ( e:</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">| React.FocusEvent&lt;HTMLInputElement&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">| React.FocusEvent&lt;HTMLTextAreaElement&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 10pt;line-height: 106%;text-align: left;">| React.FocusEvent&lt;HTMLSelectElement&gt;, context: IFormContext</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">) =&gt; {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">if (context.validate) {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">context.validate(props.name, e.currentTarget.value);</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return ( ... )</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_376.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The TypeScript blur event type is <span class="s22">FocusEvent&lt;T&gt;</span>, where <span class="s22">T </span>is the type of the element that is being handled.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_377.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The handler&#39;s first parameter, <span class="s22">e</span>, is the React blur event handler parameter. We union all the different handler types for our different editors, so that we can handle all the blur events in a single function.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_378.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">The handler&#39;s second parameter is the form context.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_379.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We need a conditional statement to check that the <span class="s22">validate </span>method is not</p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;line-height: 14pt;text-align: left;">undefined<span class="p">, to keep the TypeScript compiler happy.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_380.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We can then call the <span class="s22">validate </span>method with the field name and new value we need to validate.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark630">We can now reference this handler in the </a><span class="s22">Field </span>JSX for the text and email editor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{(type === &quot;Text&quot; || type === &quot;Email&quot;) &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">type={type.toLowerCase()} id={name} value={context.values[name]}</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">onChange={e =&gt; handleChange(e, context)}</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">onBlur={e =&gt; handleBlur(e, context)}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We set the <span class="s22">onBlur </span>prop to a lamda expression that calls our <span class="s22">handleBlur</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">function, passing in the blur argument as well as the context value.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s reference the handler in the other two editors now:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{type === &quot;TextArea&quot; &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;textarea id={name}</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">value={context.values[name]}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">onChange={e =&gt; handleChange(e, context)}</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">onBlur={e =&gt; handleBlur(e, context)}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{type === &quot;Select&quot; &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;select value={context.values[name]}</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">onChange={e =&gt; handleChange(e, context)}</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">onBlur={e =&gt; handleBlur(e, context)}</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/select&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our field is now executing validation rules when it loses focus. There&#39;s one more task to do before we can give our <b>Contact Us </b>page a try, which we&#39;ll do in the next section.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark578">Rendering validation error messages</a><a name="bookmark631">&zwnj;</a><a name="bookmark632">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">In this section, we are going to render the validation error messages in the <span class="s22">Field</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l140"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s display all errors in a <span class="s22">span </span>with the <span class="s22">form-error </span>CSS class we have already implemented. We display these at the bottom of the <span class="s22">div </span>container of the <span class="s22">form- group</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;label htmlFor={name}&gt;{label}&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{(type === &quot;Text&quot; || type === &quot;Email&quot;) &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{type === &quot;TextArea&quot; &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{type === &quot;Select&quot; &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">{context.errors[name] &amp;&amp; context.errors[name].length &gt; 0 &amp;&amp; context.errors[name].map(error =&gt; (</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;span key={error} className=&quot;form-error&quot;&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">{error}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/span&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">))}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">So, we first check that we have errors for the field name, and then use the <span class="s22">map</span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">function in the <span class="s22">errors </span>array to render a <span class="s22">span </span>for each error.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have referenced a CSS <span class="s22">form-error </span>class, so let&#39;s add this to <span class="s22">index.css</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.form-error {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">font-size: 13px; color: red;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">margin: 3px auto 0px 0px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="349" height="325" alt="image" src="Learn+React+with+TypeScript+3-2/Image_381.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="414" height="374" alt="image" src="Learn+React+with+TypeScript+3-2/Image_382.png"/></span></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark633">It&#39;s time to give the </a><b>Contact Us </b>page a try. If our app isn&#39;t started, start it using <span class="s22">npm start </span>and go to the <b>Contact Us </b>page. If we tab through the name and email fields, the required validation rule triggers and error messages are displayed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="339" height="314" alt="image" src="Learn+React+with+TypeScript+3-2/Image_383.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="393" height="363" alt="image" src="Learn+React+with+TypeScript+3-2/Image_384.png"/></span></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark634">This is just what we want. If we go back to the name field and try to enter just a single character before tabbing away, the minimum length validation error triggers, as we would expect:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark579">Our generic form component is nearly complete now. Our final task is to submit the form, which we&#39;ll do in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark635">Form submission</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">Submitting the form is the final part of the form implementation. The consumer of the <span class="s22">Form </span>component will handle the actual submission, which will probably result in a call to a web API. Our <span class="s22">Form </span>component will simply call a function in the consumer code when the form is submitted.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark580">Adding a submit button to the form</a><a name="bookmark636">&zwnj;</a><a name="bookmark637">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this section, we are going to add a submit button to our <span class="s22">Form </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l141"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s add a submit button to the <span class="s22">Form </span>JSX, wrapped in a <span class="s22">div </span>container within</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">form-group<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;FormContext.Provider value={context}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;form className=&quot;form&quot; noValidate={true}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">{this.props.children}</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;form-group&quot;&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/FormContext.Provider&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Style the button with the following CSS in <span class="s22">index.css</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.form-group button { font-size: 16px; padding: 8px 5px; width: 80px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">border: black solid 1px; border-radius: 5px; background-color: black; color: white;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.form-group button:disabled { border: gray solid 1px; background-color: gray; cursor: not-allowed;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 28pt;text-indent: 0pt;text-align: left;"><a name="bookmark581">We now have a black submit button on our form that is gray when disabled.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark638">Adding a onSubmit form prop</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">In our <span class="s22">Form </span>component, we need a new prop that allows a consumer to specify the <span class="s22">submit</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">function to be called. We&#39;ll do this in this section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l142"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by creating a new prop function called <span class="s22">onSubmit </span>in the <span class="s22">Form </span>props interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">export interface ISubmitResult { success: boolean;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;"><a name="bookmark639">errors?: IErrors;</a></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IFormProps { defaultValues: IValues; validationRules: IValidationProp;</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;line-height: 10pt;text-align: center;">onSubmit: (values: IValues) =&gt; Promise&lt;ISubmitResult&gt;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The function will take in the field values and asynchronously return whether the submission was successful, with any validation errors that occurred on the server.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We are going to track whether the form is being submitted or not in the <span class="s22">Form </span>state. We are also going to track whether the form has successfully been submitted in the <span class="s22">Form </span>state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 114%;text-align: left;">interface IState { values: IValues; errors: IErrors; <span class="s21">submitting: boolean; submitted: boolean;</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 9pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s initialize those state values in the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">constructor(props: IFormProps) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 118%;text-align: left;">this.state = { errors, <span class="s21">submitted: false,</span></p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 9pt;text-align: left;">submitting: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">values: props.defaultValues</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can now disable the submit button if the form is being submitted, or has successfully been submitted:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;button type=&quot;submit&quot;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">disabled={this.state.submitting || this.state.submitted}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">Submit</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark640">Let&#39;s reference a submit handler in the </a><span class="s22">form </span>tag:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;form className=&quot;form&quot; noValidate={true}</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">onSubmit={this.handleSubmit}<span class="s12">&gt;</span></p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: center;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: center;">&lt;/form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now start to implement the submit handler we just referenced:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleSubmit = async (e: React.FormEvent&lt;HTMLFormElement&gt;)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">e.preventDefault();</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We call <span class="s22">preventDefault </span>in the submit event argument to stop the browser automatically posting the form.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We need to make sure all the fields are valid before starting the form submission process. Let&#39;s reference and create a <span class="s22">validateForm </span>function that does this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">private validateForm(): boolean { const errors: IErrors = {};</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">let haveError: boolean = false; Object.keys(this.props.defaultValues).map(fieldName =&gt; {</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">errors[fieldName] = this.validate( fieldName, this.state.values[fieldName]</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">);</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (errors[fieldName].length &gt; 0) { haveError = true;</p><p class="s21" style="text-indent: 0pt;line-height: 10pt;text-align: right;">}</p><p class="s21" style="text-indent: 0pt;text-align: right;">});</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">this.setState({ errors }); return !haveError;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleSubmit = async (e: React.FormEvent&lt;HTMLFormElement&gt;)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">e.preventDefault();</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">if (this.validateForm()) {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark641">The </a><span class="s22">validateForm </span>function iterates through the fields, calling the <span class="s22">validate </span>function that has already been implemented. The state is updated with the latest validation errors, and we return whether there are any errors or not in any of the fields.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement the rest of the submit handler now:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleSubmit = async (e: React.FormEvent&lt;HTMLFormElement&gt;)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">e.preventDefault();</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">if (this.validateForm()) {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">this.setState({ submitting: true });</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 106%;text-align: left;">const result = await this.props.onSubmit(this.state.values); this.setState({</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">errors: result.errors || {}, submitted: result.success, submitting: false</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">If the form is valid, we start by setting the <span class="s22">submitting </span>state to <span class="s22">true</span>. We then call the <span class="s22">onSubmit </span>prop function asynchronously. When the <span class="s22">onSubmit </span>prop function has finished, we set any validation errors from the function in the state along with whether the submission was successful. We also set in the state the fact that the submission process has finished.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark582">Now, our </a><span class="s22">Form </span>component has an <span class="s22">onSubmit </span>function prop. In the next section, we&#39;ll consume this in our <b>Contact Us </b>page.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark642">Consuming the onSubmit form prop</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this section, we&#39;ll consume the <span class="s22">onSubmit </span>form prop in the <span class="s22">ContactUs </span>component. The <span class="s22">ContactUs </span>component won&#39;t manage the submission<span class="s23">—</span>it will simply delegate to the <span class="s22">ContactUsPage </span>component to handle the submission:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l143"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by importing <span class="s22">ISubmitResult </span>and <span class="s22">IValues</span>, and creating a props interface in the <span class="s22">ContactUs </span>component for the <span class="s22">onSubmit </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { Form, <span class="s21">ISubmitResult, IValues, </span>minLength, required } from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IProps {</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">onSubmit: (values: IValues) =&gt; Promise&lt;ISubmitResult&gt;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><a name="bookmark643">}</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const ContactUs: React.SFC<span class="s21">&lt;IProps&gt; </span>= <span class="s21">props </span>=&gt; { ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Create a <span class="s22">handleSubmit </span>function that will invoke the <span class="s22">onSubmit </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const ContactUs: React.SFC&lt;IProps&gt; = props =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 106%;text-align: left;">const handleSubmit = async (values: IValues): Promise&lt;ISubmitResult&gt; =&gt; {</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 106%;text-align: left;">const result = await props.onSubmit(values); return result;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return ( ... );</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The <span class="s22">onSubmit </span>prop is asynchronous, so we need to prefix our function with</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">async <span class="p">and prefix the </span>onSubmit <span class="p">call with </span>await<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Bind this submit handler in the form <span class="s22">onSubmit </span>prop in the JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Form ... <span class="s21">onSubmit={handleSubmit}</span>&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">&lt;/Form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 8pt;text-indent: 0pt;text-align: center;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s move on to the <span class="s22">ContactUsPage </span>component now. Let&#39;s start by creating the submit handler:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">private handleSubmit = async (values: IValues): Promise&lt;ISubmitResult&gt; =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">await wait(1000); // simulate asynchronous web API call return {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">errors: {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">email: [&quot;Some is wrong with this&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">success: false</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">In practice, this will probably call a web API. In our example, we wait asynchronously for one second and return a validation error with the <span class="s22">email </span>field.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create the <span class="s22">wait </span>function we just referenced:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const wait = (ms: number): Promise&lt;void&gt; =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">return new Promise(resolve =&gt; setTimeout(resolve, ms));</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s wire up the <span class="s22">handleSubmit </span>method to the <span class="s22">ContactUs onSubmit </span>prop now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;ContactUs <span class="s21">onSubmit={this.handleSubmit} </span>/&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have referenced <span class="s22">IValues </span>and <span class="s22">ISubmitResult</span>, so let&#39;s import these:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { ISubmitResult, IValues } from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="345" height="309" alt="image" src="Learn+React+with+TypeScript+3-2/Image_385.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="397" height="365" alt="image" src="Learn+React+with+TypeScript+3-2/Image_386.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go to the <b>Contact Us </b>page in the running app, fill out the form, and click the <b>Submit </b>button, we are informed that there is a problem with the email field, as we would expect:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark644">Let&#39;s change the submit handler in </a><span class="s22">ContactUsPage </span>to return a successful result:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">private handleSubmit = async (values: IValues): Promise&lt;ISubmitResult&gt; =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">await wait(1000); // simulate asynchronous web API call</p><p class="s21" style="padding-top: 1pt;padding-left: 74pt;text-indent: 5pt;line-height: 106%;text-align: left;">return { success: true</p><p class="s21" style="padding-left: 74pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now, if we go to the <b>Contact Us </b>page in the running app again, fill out the form, and click the <b>Submit </b>button, the submission goes through fine and the <b>Submit </b>button is disabled:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="316" height="272" alt="image" src="Learn+React+with+TypeScript+3-2/Image_387.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="363" height="320" alt="image" src="Learn+React+with+TypeScript+3-2/Image_388.png"/></span></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">So, that&#39;s our <b>Contact Us </b>page complete, together with our generic <span class="s22">Form </span>and <span class="s22">Field</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">components.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark583">Summary</a><a name="bookmark645">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this chapter, we discussed controlled components, which are React&#39;s recommended method for handling form data entry. With controlled components, we let React control input values via component state.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We looked at building generic <span class="s22">Form </span>and <span class="s22">Field </span>components containing state and change handlers, so that we don&#39;t need to implement individual state and change handlers for every field in every form in our apps.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We then created some standard validation functions, and added the ability to add validation rules within the generic <span class="s22">Form </span>component and render validation errors automatically in the <span class="s22">Field </span>component.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Finally, we added the ability to handle form submission when consuming the generic <span class="s22">Form </span>component. Our <b>Contact Us </b>page was changed to use the generic <span class="s22">Form </span>and <span class="s22">Field </span>components.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our generic components only deal with very simple forms. Not surprisingly, there are a fair number of well-established form libraries already out in the wild. A popular choice is Formik, which is similar in some ways to what we have just built but much more powerful.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark584">If you are building an app that contains lots of forms, it is well worth either building a generic form as we have just done or using an established library such as Formik to speed up the development process.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark646">Questions</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Check whether all that information about forms in React and TypeScript has stuck by trying the following implementations:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l144"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Extend our generic <span class="s22">Field </span>component to include a number editor, using the native number input.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Implement an urgency field on the <b>Contact Us </b>form to indicate how urgent a response is. The field should be numeric.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Implement a new validator function in the generic <span class="s22">Form </span>component, which validates whether a number falls between two other numbers.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Implement a validation rule on the urgency field to ensure the input is a number between 1 and 10.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark585">Our validation triggers when a user clicks in and out of a field without typing anything. How can we trigger validation when a field loses focus, but only when it has been changed?</a></p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark647">Further reading</a></h3><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The following links are good sources of further information on forms in React:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_389.png"/></span></p><p class="s12" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://reactjs.org/docs/forms.html" class="s20" target="_blank">There is a section in the React documentation on forms at </a><a href="https://reactjs.org/docs/forms.html" class="a" target="_blank">https://reactjs.org/ docs/forms.</a>html<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_390.png"/></span></p><p class="s12" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://github.com/jaredpalmer/formik" class="s20" target="_blank">The Formik library is well worth looking into. This can be found at </a><a href="https://github.com/jaredpalmer/formik" class="a" target="_blank">https:// github.com/jaredpalmer/</a>formik<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 258pt;text-indent: 0pt;text-align: left;"><a name="bookmark648">React Redux</a><a name="bookmark672">&zwnj;</a><a name="bookmark673">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">So far in this book, we have managed state within our React components. We&#39;ve also used React context when state needs to be shared between different components. This approach works well for many applications. React Redux helps us to robustly handle complex</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">state scenarios. It shines when user interactions result in several changes to state, perhaps some that are conditional, and particularly when the interaction results in web service calls. It&#39;s also great when there is lots of shared state across the application.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are going to continue building our React shop in this chapter, adding React Redux to help us manage our state interactions. We&#39;ll eventually add a basket summary component in the header of our shop, which informs the user of how many items are in their basket. Redux will help us update this component when items are added to the basket.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In the final section of the chapter, we&#39;ll explorer a Redux-like method for managing complex state within a component. This is a middle ground between managing state in a Redux store and just within a component using <span class="s22">setState </span>or <span class="s22">useState</span>.</p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -48pt;text-align: left;">In this chapter, we&#39;ll learn the following topics:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_391.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_392.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Principles and key concepts Installing Redux</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_393.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_394.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_395.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Creating reducers Creating actions Creating a store</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_396.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_397.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Connecting our React App to the store Managing state with useReducer</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark649">Technical requirements</a><a name="bookmark674">&zwnj;</a><a name="bookmark675">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_398.png"/></span></p><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. We can install these from </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If we already have these installed, make sure </span>npm <span class="p">is at least at version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_399.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We will also need the TSLint (by egamma) and Prettier (by Estben Petersen) extensions installed within Visual Studio Code.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_400.png"/></span></p><p class="s9" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">React shop<a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/07-WorkingWithForms/04-FormSubmission" class="s20" target="_blank">: We&#39;ll start from the React shop project we finished in the last chapter. This is available on GitHub at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/07-WorkingWithForms/04-FormSubmission" class="a" target="_blank">https://github.com/carlrip/ LearnReact17WithTypeScript/tree/master/07-WorkingWithForms/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/07-WorkingWithForms/04-FormSubmission" target="_blank">04-</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="137" alt="image" src="Learn+React+with+TypeScript+3-2/Image_401.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: justify;">In order to restore code from a previous chapter,</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 93%;text-align: justify;">the <span class="s22">LearnReact17WithTypeScript </span><a href="https://github.com/carlrip/LearnReact17WithTypeScript" class="s20" target="_blank">repository at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript" class="a" target="_blank">https://github.com/ carlrip/LearnReact17WithTypeScript</a><span class="s12"> </span>can be downloaded. The relevant folder can then be opened in Visual Studio Code and then <span class="s22">npm</span></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: justify;">install <span class="p">can be entered in the terminal to do the restore. All the code</span></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/08-ReactRedux%EF%BB%BF" class="s20" target="_blank">snippets in this chapter can be found online at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/08-ReactRedux%EF%BB%BF" class="a" target="_blank">https://github.com/ carlrip/LearnReact17WithTypeScript/tree/master/08- </a>ReactRedux%EF%BB%BF<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s12" style="padding-left: 53pt;text-indent: 0pt;text-align: left;">FormSubmission<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark650">Principles and key concepts</a><a name="bookmark676">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this section, we&#39;ll start by going through the three principles in Redux and then dive into the core concepts.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark651">Principles</a><a name="bookmark677">&zwnj;</a><a name="bookmark678">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s take a look at the three principles of Redux:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_402.png"/></span></p><p class="s9" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Single source of truth<span class="p">: This means that the whole application state is stored in a single object. In a real app, this object is likely to contain a complex tree of nested objects.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_403.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">State is read-only<span class="p">: This means that state can&#39;t be directly changed. This is a bit like saying we can&#39;t directly change the state within a component. In Redux, the only way to change state is to dispatch what&#39;s called an action.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_404.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Changes are made with pure functions<span class="p">: The functions that are responsible for changing the state are called reducers.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark652">In the following sections, we&#39;ll dive into actions and reducers a little more along with the thing that manages them which is what is called a store.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark679">Key concepts</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The whole state of the application lives inside what is called a <b>store</b>. The state is stored in a JavaScript object like the one following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;line-height: 120%;text-align: left;">products: [{ id: 1, name: &quot;Table&quot;, ...}, {...}, ...], productsLoading: false,</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">currentProduct: { id: 2, xname: &quot;Chair&quot;, ... },</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">basket: [{ product: { id: 2, xname: &quot;Chair&quot; }, quantity: 1 }],</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_405.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -48pt;line-height: 22pt;text-align: left;">In this example, the single object contains these: An array of products</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_406.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_407.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Whether the products are being fetched from a web API The current product the user is looking at</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_408.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">The items in the users basket</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The state won&#39;t contain any functions or setters or any getters. It&#39;s a simple JavaScript object. The store also orchestrates all the moving parts in Redux. This includes pushing actions though reducers to update state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">So, the first thing that needs to happen in order to update state in a store is to dispatch an</p><p class="s9" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">action<span class="p">. An action is another simple JavaScript object like the one following:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">type: &quot;PRODUCTS/LOADING&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 93%;text-align: left;">The <span class="s22">type </span>property determines the type of action that needs to be performed. This is an important and required part of the action. The reducer won&#39;t know how to change the state without the <span class="s22">type </span>in the action object. In the previous example, the action doesn&#39;t contain anything else other than the <span class="s22">type </span>property. This is because the reducer doesn&#39;t need any more information in order to make the change to state for this type of action.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The following example is another action:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">type: &quot;PRODUCTS/GETSINGLE&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">product: { id: 1, name: &quot;Table&quot;, ...}</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">This time, an additional bit of information is included in the action in a <span class="s22">product </span>property. This additional information is needed by the reducer to make the change to state for this type of action.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_409.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">A pure function always returns the same result for a given set of parameters. So, these functions don&#39;t depend on any state outside the scope of the function that isn&#39;t passed into the function. Pure functions also don&#39;t change any state outside the scope of the function.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">So, reducers are pure functions that make the actual state changes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The following is an example of a reducer:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const productsReducer = (state = initialProductState, action) =&gt; { switch (action.type) {</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">case &quot;PRODUCTS/LOADING&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">return {</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;line-height: 120%;text-align: left;">...state, productsLoading: true</p><p class="s12" style="padding-left: 56pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">case &quot;PRODUCTS/GETSINGLE&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">return {</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;text-align: left;">...state,</p><p class="s12" style="padding-top: 1pt;padding-left: 66pt;text-indent: 0pt;line-height: 120%;text-align: left;">currentProduct: action.product, productsLoading: false</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 56pt;text-indent: 0pt;text-align: left;"><a name="bookmark680">};</a></p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">default:</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">return state || initialProductState;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Here is something about reducers:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_410.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Reducers take in two parameters for the current state and the action that is being performed</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_411.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">The state argument defaults to an initial state object for when the reducer is called for the very first time</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_412.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">A switch statement is used on the action type and creates a new state object appropriately for each action type in each of its branches</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_413.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">To create the new state, we spread the current state into a new object and then overwrite it with properties that have changed</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_414.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">The new state is returned from the reducer</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">You&#39;ll notice that the actions and reducer we have just seen didn&#39;t have TypeScript types. Obviously, we&#39;ll include the necessary types when we implement these in the following sections.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark653">So, now that we have started to get an understanding of what Redux is, it&#39;s time to put this into practice in our React shop.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark681">Installing Redux</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Before we can use Redux, we need to install it along with the TypeScript types. We will also install an additional library called <span class="s22">redux-thunk</span>, which we need in order to implement asynchronous actions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l145"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If we haven&#39;t already, let&#39;s open our React shop project in Visual Studio Code from where we left off in the last chapter. So, let&#39;s install the core Redux library via <span class="s22">npm </span>in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install redux</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Note that the core Redux library contains TypeScript types within it. So, there is no need for an additional install for these.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark682">Let&#39;s now install the React-specific bits for Redux. These bits allow us to connect our React components to the Redux store. Let&#39;s install these via </a><span class="s22">npm</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install react-redux</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also install the TypeScript types for <span class="s22">react-redux</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install --save-dev @types/react-redux</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s install <span class="s22">redux-thunk </span>as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install redux-thunk</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Lastly, we can install the TypeScript types for <span class="s22">redux-thunk</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install --save-dev @types/redux-thunk</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark654">With all the Redux bits now installed, we can add Redux to the React shop we have been working on in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark683">Creating actions</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are going to extend the React shop we have been building in previous chapters and add Redux to manage the state on the Products page. In this section, we&#39;ll create actions to start the process of getting the products into the page. There will be one action to get the products. There will be another action to change some new loading state, which we&#39;ll eventually tie to the <span class="s22">withLoading </span>HOC that we already have in our project.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Before we make a start on the Redux actions, let&#39;s create a fake API in <span class="s22">ProductsData.ts</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">for fetching products:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const getProducts = async (): Promise&lt;IProduct[]&gt; =&gt; { await wait(1000);</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">return products;</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">So, the function asynchronously waits a second before returning the products.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We need to start our action&#39;s implementation by creating some types. We&#39;ll do this next.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark655">Creating state and action types</a><a name="bookmark684">&zwnj;</a><a name="bookmark685">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">It&#39;s time to finally make a start on enhancing our React shop with Redux. We&#39;ll start by creating some types for the state and actions for our Redux store:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l146"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s create a new file called <span class="s22">ProductsTypes.ts </span>in the <span class="s22">src </span>folder with the following import statement at the top:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s create an enumeration for the two different action types that we are going to implement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export enum ProductsActionTypes { GETALL = &quot;PRODUCTS/GETALL&quot;, LOADING = &quot;PRODUCTS/LOADING&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Redux doesn&#39;t dictate the format of the action type strings. So, the format of the action type strings is our choice. We need to make sure the strings are unique though across the actions types in the store. So, we&#39;ve included two bits of information in the string:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_415.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;line-height: 13pt;text-align: left;">The area of the store the action is concerned with. In our case, this is</p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;line-height: 13pt;text-align: left;">PRODUCTS<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_416.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The specific operation within that area. In our case, we have <span class="s22">GETALL </span>for getting all the products and <span class="s22">LOADING </span>to indicate products are being fetched.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We could have chosen <span class="s22">PRODUCTS</span>-<span class="s22">GETALL </span>or <span class="s22">Get All Products</span>. We just need to make sure the strings are unique. We have used an enumeration to give us nice IntelliSense when we consume these when implementing the action and reducer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now create interfaces for the two actions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IProductsGetAllAction { type: ProductsActionTypes.GETALL, products: IProduct[]</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IProductsLoadingAction { type: ProductsActionTypes.LOADING</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark686">The </a><span class="s22">IProductsGetAllAction </span>interface is for an action that will be dispatched when the products need to be fetched. The <span class="s22">IProductsLoadingAction </span>interface is for an action that will cause the reducer to change the loading state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s combine the action types together with a union type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export type ProductsActions =</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">| IProductsGetAllAction</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">| IProductsLoadingAction</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: center;">This will be the type for the action parameter passed into the reducer.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Lastly, let&#39;s create an interface for this area of the state in the store:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IProductsState { readonly products: IProduct[]; readonly productsLoading: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, our state will contain an array of products, and whether products are being loaded.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that the properties are prefixed with the <span class="s22">readonly </span>keyword. This will help us avoid changing the state directly.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark656">Now that we have types in place for the actions and state, we can create some actions in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark687">Creating actions</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this section, we are going to create two actions for getting the products and indicating that products are being loaded.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l147"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by creating a <span class="s22">ProductsActions.ts </span>file with the following import statement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { ActionCreator, AnyAction, Dispatch } from &quot;redux&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">These are a few types from Redux that we are going to use when implementing our actions.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">One of our actions is going to be asynchronous. So, let&#39;s import a type from</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">redux-thunk <span class="p">ready for when we implement this action:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { ThunkAction } from &quot;redux-thunk&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add another import statement so that we can use our fake API:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { getProducts as getProductsFromAPI } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ve renamed the API function to <span class="s22">getProductsFromAPI </span>to avoid a name clash because we are going to create an action called <span class="s22">getProducts </span>a little later.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also import the types we created in the last section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { IProductsGetAllAction, IProductsLoadingAction, IProductsState, ProductsActionTypes } from &quot;./ProductsTypes&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are going to create what is called an action creator now. An action creator does what it says on the tin: it&#39;s a function that creates and returns an action! Let&#39;s create an action creator for creating the product loading action:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const loading: ActionCreator&lt;IProductsLoadingAction&gt; = () =&gt; { return {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">type: ProductsActionTypes.LOADING</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_417.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use the generic <span class="s22">ActionCreator </span>type containing the appropriate action interface for the function signature</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_418.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">The function simply returns the required action object</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We can write this function more succinctly using an implicit return statement as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const loading: ActionCreator&lt;IProductsLoadingAction&gt; = () =&gt; ({ type: ProductsActionTypes.LOADING</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We&#39;ll use this shorter syntax from now on when implementing action creators.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s move on to implementing the action creator for getting products. This is more complex, so let&#39;s start with the function signature:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const getProducts: ActionCreator&lt;ThunkAction&lt;Promise&lt;AnyAction&gt;, IProductsState, null, IProductsGetAllAction&gt;&gt; = () =&gt; {};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We again use the generic <span class="s22">ActionCreator </span>type, but this time it contains more than just the action interface that will eventually be returned. This is because this particular action is asynchronous.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use <span class="s22">ThunkAction </span>inside <span class="s22">ActionCreator </span>for asynchronous actions, which is, in turn, a generic type with four parameters:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_419.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">The first parameter is the return type, which should ideally be <span class="s22">Promise&lt;IProductsGetAllAction&gt;</span>. However, the TypeScript compiler struggles to resolve this, so, we have opted for the slightly looser <span class="s22">Promise&lt;AnyAction&gt; </span>type.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_420.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_421.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The second parameter is the state interface that the action is concerned with. The third parameter is the type of parameter passed into the action creator, which is <span class="s22">null </span>in our case because there is no parameter.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_422.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The last parameter is the type of the action.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We export this action creator because this is going to be eventually called from the <span class="s22">ProductsPage </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Asynchronous actions need to return an asynchronous function that will eventually dispatch our action:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const getProducts: ActionCreator&lt;ThunkAction&lt;Promise&lt;AnyAction&gt;, IProductsState, null, IProductsGetAllAction&gt;&gt; = () =&gt; {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">return async (dispatch: Dispatch) =&gt; {</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, the first thing that function does is return another function, flagging that it is asynchronous, using the <span class="s22">async </span>keyword. The inner function takes the dispatcher from the store as a parameter.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement the inner function then:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return async (dispatch: Dispatch) =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">dispatch(loading());</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">const products = await getProductsFromAPI(); return dispatch({</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">products,</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">type: ProductsActionTypes.GETALL</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_423.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The first thing we do is dispatch our other action so that the loading state is eventually changed accordingly by the reducer</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_424.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_425.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">The next step is to get the products asynchronously from the fake API The final step is to dispatch the required action</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark657">Now that we have created a couple of actions, we&#39;ll create a reducer in the next section.</a><a name="bookmark688">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark689">Creating reducers</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">A reducer is a function that is responsible for creating new state for a given action. So, the function takes in an action with the current state and returns the new state. In this section, we&#39;ll create a reducer for the two actions we have created on products.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l148"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by creating a file called <span class="s22">ProductsReducer.ts </span>with the following import statements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Reducer } from &quot;redux&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { IProductsState, ProductsActions, ProductsActionTypes } from &quot;./ProductsTypes&quot;;</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are importing the <span class="s22">Reducer </span>type from Redux along with types for the actions and state we created earlier.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, we need to define what the initial state is:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const initialProductState: IProductsState = { products: [],</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">productsLoading: false</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">So, we are setting the products to an empty array and product loading state to</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">false<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now start to create the reducer function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const productsReducer: Reducer&lt;IProductsState, ProductsActions&gt; = (</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">state = initialProductState, action</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">switch (action.type) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">// TODO - change the state</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">return state;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: justify;">We&#39;ve typed the function with the <span class="s22">Reducer </span>generic type from Redux, passing in our state and action types. This gives us a nice level of type safety.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_426.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark690">The function takes in parameters for the state and action as required by Redux.</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_427.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_428.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The state defaults to the initial state object we just set in the previous step. At the end of the function, we return the default state if the action type is not recognized by the switch statement.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s carry on implementing our reducer:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">switch (action.type) {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">case ProductsActionTypes.LOADING: { return {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">...state, productsLoading: true</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">case ProductsActionTypes.GETALL: { return {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">...state,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">products: action.products, productsLoading: false</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: justify;">We have implemented a switch branch for each action. Both branches follow the same pattern by returning a new state object that has the old state spread into it and the appropriate properties merged over the top.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark658">So, that&#39;s our first reducer complete. In the next section, we&#39;ll create our store.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark691">Creating a store</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this section, we&#39;ll create a store that is going to hold our state and manage the actions and reducer:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l149"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start off by creating a new file called <span class="s22">Store.tsx </span>with the following import statement to get the bits and pieces we need from Redux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { applyMiddleware, combineReducers, createStore, Store } from &quot;redux&quot;;</p><p class="s22" style="padding-top: 7pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">createStore <span class="p">is a function we&#39;ll eventually use to create our store</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_429.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We need the <span class="s22">applyMiddleware </span>function because we need to use the Redux Thunk middleware to manage our asynchronous actions</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_430.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">combineReducers </span>function is a function we can use to merge our reducers together</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_431.png"/></span></p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;text-align: left;">Store <span class="p">is a TypeScript type we can use for the store</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s import <span class="s22">redux-thunk</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import thunk from &quot;redux-thunk&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Finally, let&#39;s import our reducer and state type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { productsReducer } from &quot;./ProductsReducer&quot;; import { IProductsState } from &quot;./ProductsTypes&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">A key part of the store is the state. So, let&#39;s define an interface for this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IApplicationState { products: IProductsState;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">At this point, the interface simply contains our products state.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s put our reducer in the Redux <span class="s22">combineReducer </span>function now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const rootReducer = combineReducers&lt;IApplicationState&gt;({ products: productsReducer</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">With the state and root reducer defined, we can create our store. We are actually going to create a function that creates the store:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default function configureStore(): Store&lt;IApplicationState&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const store = createStore(rootReducer, undefined, applyMiddleware(thunk));</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return store;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_432.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The function that creates our store is called <span class="s22">configureStore </span>and returns the generic <span class="s22">Store </span>type with our specific store state passed in to it.</p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 92%;text-align: left;">The function uses the Redux <span class="s22">createStore </span>function to create and return the store. We pass in our reducer as well as the Redux Thunk middleware. We pass <span class="s22">undefined </span>as the initial state because our reducer takes care of the initial state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark659">We&#39;ve made a great start on our store. In the next section, we&#39;ll start to connect our React shop to our store.</a><a name="bookmark692">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark693">Connecting our React app to the store</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this section, we&#39;ll connect the <span class="s22">Products </span>page to our store. The first job is to add the React Redux <span class="s22">Provider </span>component which we&#39;ll do in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark660">Adding the store Provider component</a><a name="bookmark694">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: justify;">The <span class="s22">Provider </span>component can pass the store to components beneath it at any level. So, in this section we are going to add <span class="s22">Provider </span>right at the top of our component hierarchy so that all our components can access it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l150"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s open our existing <span class="s22">index.tsx </span>and import the <span class="s22">Provider </span>component from React Redux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Provider} from &quot;react-redux&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also import the <span class="s22">Store </span>type from React Redux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Store } from &quot;redux&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">The final thing we need to import is the following from our store:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import configureStore from &quot;./Store&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { IApplicationState } from &quot;./Store&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are then going to create a little function component after the import statements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IProps {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">store: Store&lt;IApplicationState&gt;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Root: React.SFC&lt;IProps&gt; = props =&gt; { return ();</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This <span class="s22">Root </span>component is going to be our new root element. It takes our store in as a prop.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark695">So, we need to include the old root element, </a><span class="s22">Routes</span>, in our new root component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Root: React.SFC&lt;IProps&gt; = props =&gt; { return (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;Routes /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">There&#39;s one more thing to add to this component, which is the <span class="s22">Provider</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component from React Redux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Provider store={props.store}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;Routes /&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/Provider&gt;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ve placed <span class="s22">Provider </span>at the top of the component tree with our store passed into it.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">With our new root component complete, let&#39;s change our root render function:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const store = configureStore();</p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">ReactDOM.render(<span class="s21">&lt;Root store={store} /&gt;</span>, document.getElementById( &quot;root&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">) as HTMLElement);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We first create the store using our <span class="s22">configureStore </span>function and then pass this into our <span class="s22">Root </span>component.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, this is the first step in connecting our components to the store. In the next section, we&#39;ll complete this connection for our <span class="s22">ProductPage </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark661">Connecting components to the store</a><a name="bookmark696">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark662">We are getting close to seeing our enhanced shop in action. In this section, we will connect our store to several components.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark697">Connecting ProductsPage to the store</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The first component we are going to connect to the store is going to be the <span class="s22">ProductsPage</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s open up <span class="s22">ProductsPage.tsx </span>and start to refactor it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l151"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, let&#39;s import the <span class="s22">connect </span>function from React Redux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { connect } from &quot;react-redux&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We&#39;ll use the <span class="s22">connect </span>function at the end of this section to connect the</p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">ProductsPage <span class="p">component to the store.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s import the store state type and the <span class="s22">getProducts </span>action creator from our store:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { IApplicationState } from &quot;./Store&quot;; import { getProducts } from &quot;./ProductsActions&quot;;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The <span class="s22">ProductPage </span>component won&#39;t contain any state now because this will be held in the Redux store. So, let&#39;s start by removing the state interface, the</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 12pt;text-align: left;">static <span class="s22">getDerivedStateFromProps </span>method, as well as the constructor. The</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">ProductsPage <span class="p">component should now have the following shape:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class ProductsPage extends React.Component&lt;RouteComponentProps&gt; { public async componentDidMount() { ... }</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">public render() { ... }</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">The data is going to come from the store via props now. So, let&#39;s refactor our props interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IProps extends RouteComponentProps { getProducts: typeof getProducts;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">loading: boolean; products: IProduct[];</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class ProductsPage extends React.Component&lt;<span class="s21">IProps</span>&gt; { ... }</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_433.png"/></span></p><p style="padding-left: 76pt;text-indent: -25pt;line-height: 22pt;text-align: left;">So, we&#39;ll get the following data passed from the store to our component: The <span class="s22">getProducts </span>action creator</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_434.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_435.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 109%;text-align: left;">A flag called <span class="s22">loading </span>that indicates whether products are being fetched The array of products</p></li><li><p style="padding-top: 6pt;padding-left: 53pt;text-indent: -53pt;line-height: 14pt;text-align: left;">So, let&#39;s adjust the <span class="s22">componentDidMount </span>life cycle method to invoke the</p><p class="s22" style="padding-left: 49pt;text-indent: 0pt;line-height: 14pt;text-align: center;">getProducts <span class="p">action creator to start the process of products being fetched:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public componentDidMount() {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">this.props.getProducts();</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We no longer reference the <span class="s22">products </span>array directly from <span class="s22">ProductsData.ts</span>. So, let&#39;s remove that from the input statement so that it looks as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">There is still no sign of the <span class="s22">search </span>state we used to have. We are just going to pick this up at the start of the <span class="s22">render </span>method now and not store it in state at all:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 106%;text-align: left;">const searchParams = new URLSearchParams(this.props.location.search);</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">const search = searchParams.get(&quot;search&quot;) || &quot;&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return ( ... );</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s stay in the <span class="s22">render </span>method and replace the old <span class="s22">state </span>references:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">{this.<span class="s21">props.products.</span>map(product =&gt; { if (!<span class="s21">search </span>|| (<span class="s21">search </span>&amp;&amp;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">product.name.toLowerCase().indexOf(<span class="s21">search</span>.toLowerCase()) &gt; -1)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">) { ... }</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">})}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Under the class, but before the export statement, let&#39;s create a function that will map the state coming from the store to the component props:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const mapStateToProps = (store: IApplicationState) =&gt; { return {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">loading: store.products.productsLoading, products: store.products.products</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we are getting whether products are being loaded as well as the products from the store and passing these to our props.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: justify;">There is one more prop we need to map to and that is the <span class="s22">getProducts </span>function prop. Let&#39;s create another function that will map this action from the store to this function prop in the component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const mapDispatchToProps = (dispatch: any) =&gt; { return {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><a name="bookmark698">getProducts: () =&gt; dispatch(getProducts())</a></p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;">There&#39;s one more job to do at the bottom of the file. This is to wrap the React Redux <span class="s22">connect </span>HOC around our <span class="s22">ProductsPage </span>component before it is exported:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">export default connect( mapStateToProps, mapDispatchToProps</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">)(ProductsPage);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">The <span class="s22">connect </span>HOC connects the component to our store, which is provided to us by the <span class="s22">Provider </span>component higher up in the component tree. The <span class="s22">connect </span>HOC also invokes the mapper functions that map the state and action creators from the store into the component props.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;">It&#39;s finally time to give our enhanced page a try. Let&#39;s start the dev server and the app via the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We should find the page behaves exactly the same as it did before. The only difference is now the state is being managed in our Redux store.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark663">In the next section, we are going enhance our Products page by adding the loading spinner we already have in our project.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark699">Connecting ProductsPage to the loading store state</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this section, we are going to add a loading spinner to the Products page. Before we can do this, we are going to extract the list of products out into its own component. We can then add the <span class="s22">withLoader </span>HOC to the extracted component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l152"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s create a new file for the extracted component called <span class="s22">ProductsList.tsx</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">with the following imports:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { Link } from &quot;react-router-dom&quot;; import { IProduct } from &quot;./ProductsData&quot;; import withLoader from &quot;./withLoader&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">The component will take in props for the products array and the search string:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { products?: IProduct[]; search: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll call the component <span class="s22">ProductList </span>and it will be an SFC. Let&#39;s start to create the component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const ProductsList: React.SFC&lt;IProps&gt; = props =&gt; { const search = props.search;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return ();</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can now move the <span class="s22">ul </span>tag from the <span class="s22">ProductsPage </span>component JSX into our return statement in our new <span class="s22">ProductList </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">{props.products &amp;&amp; props.products.map(product =&gt; {</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">if (</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;line-height: 120%;text-align: left;">!search || (search &amp;&amp;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">product.name.toLowerCase().indexOf(search.toLowerCase())</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;text-align: left;">&gt; -1)</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">) {</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;li key={product.id} className=&quot;product-list-item&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 144pt;text-indent: 0pt;text-align: left;">&lt;Link to={`/products/${product.id}`}&gt;{product.name}</p><p class="s12" style="padding-top: 1pt;padding-left: 144pt;text-indent: 0pt;text-align: left;">&lt;/Link&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else { return null;</p><p class="s12" style="text-indent: 0pt;text-align: right;">}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">})}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Note that we remove references to <span class="s22">this </span>after moving the JSX.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">To finish off the <span class="s22">ProductList </span>component, let&#39;s export it wrapped with our</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">withLoader <span class="p">HOC:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default withLoader(ProductsList);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s change the return statement in <span class="s22">ProductPage.tsx </span>to reference the extracted component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 32pt;line-height: 120%;text-align: left;">Welcome to React Shop where you can get all your tools for ReactJS!</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;ProductsList search={search}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">products={this.props.products} loading={this.props.loading}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/&gt;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We mustn&#39;t forget to import the <span class="s22">ProductsList </span>component having referenced it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import ProductsList from &quot;./ProductsList&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Finally, we can remove the imported <span class="s22">Link </span>component in <span class="s22">ProductsPage.tsx </span>as this is no longer referenced.</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go to the running app and browse to the <b>Products </b>page, we should now see a loading spinner while the products load:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 47pt;text-indent: 0pt;text-align: left;"><span><img width="458" height="228" alt="image" src="Learn+React+with+TypeScript+3-2/Image_436.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, our <b>Products </b>page is nicely wired up to our Redux store now. In the next section, we&#39;ll wire up the <b>Product </b>page to the store.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark664">Adding product state and actions to the store</a><a name="bookmark700">&zwnj;</a><a name="bookmark701">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Connecting the <span class="s22">ProductPage </span>component to our store is first going to require a little work in our store. We need additional state for the current product, as well as whether it has been added to the basket. We also need additional actions and reducer code to get a product and add it to the basket:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l153"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, let&#39;s add additional state for the current product in <span class="s22">ProductsTypes.ts</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">export interface IProductsState {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">readonly currentProduct: IProduct | null;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">While we are in <span class="s22">ProductTypes.ts</span>, let&#39;s add the action type for getting a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 114%;text-align: left;">export enum ProductsActionTypes { GETALL = &quot;PRODUCTS/GETALL&quot;, <span class="s21">GETSINGLE = &quot;PRODUCTS/GETSINGLE&quot;, </span>LOADING = &quot;PRODUCTS/LOADING&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also add the action type for getting a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IProductsGetSingleAction { type: ProductsActionTypes.GETSINGLE; product: IProduct;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then add this action type to our union actions type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export type ProductsActions = IProductsGetAllAction |</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">IProductsGetSingleAction <span class="s12">| IProductsLoadingAction;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s move on to creating the new action creator in <span class="s22">ProductsActions.ts</span>. First, let&#39;s import our fake API to get a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { <span class="s21">getProduct as getProductFromAPI</span>, getProducts as getProductsFromAPI} from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then import the type for the action creator we need to implement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 114%;text-align: left;">import { IProductsGetAllAction, <span class="s21">IProductsGetSingleAction</span>, IProductsLoadingAction, IProductsState, ProductsActionTypes } from &quot;./productsTypes&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement the action creator for getting a product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const getProduct: ActionCreator&lt;ThunkAction&lt;Promise&lt;any&gt;, IProductsState, null, IProductsGetSingleAction&gt;&gt; = (id: number) =&gt;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">return async (dispatch: Dispatch) =&gt; { dispatch(loading());</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">const product = await getProductFromAPI(id); dispatch({</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">product,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">type: ProductsActionTypes.GETSINGLE</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This is very similar to the <span class="s22">getProducts </span>action creator. The only difference in structure is that the action creator takes in a parameter for the product ID.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Move on to the reducer now in <span class="s22">ProductsReducer.ts</span>. Let&#39;s first set the current product to null in the initial state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const initialProductState: IProductsState = {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">currentProduct: null,</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the <span class="s22">productReducer </span>function, let&#39;s add a branch in the switch statement for our new action type:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">switch (action.type) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">case ProductsActionTypes.GETSINGLE: { return {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">...state,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">currentProduct: action.product, productsLoading: false</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We spread the old state into a new object, overwrite the current project, and set the loading state to <span class="s22">false</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, that&#39;s some of the state management that the <b>Product </b>page needs in the Redux store. However, we aren&#39;t managing the basket yet in our store. We&#39;ll do this in the next section.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark665">Adding basket state and actions to the store</a><a name="bookmark702">&zwnj;</a><a name="bookmark703">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll add state management for our basket in this section. We&#39;ll create a new section in our store for this.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l154"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, let&#39;s create a new file for the types called <span class="s22">BasketTypes.ts </span>with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export enum BasketActionTypes { ADD = &quot;BASKET/ADD&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IBasketState { readonly products: IProduct[];</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export interface IBasketAdd { type: BasketActionTypes.ADD; product: IProduct;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export type BasketActions = IBasketAdd;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_437.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">There is only one piece of state in our basket and that&#39;s an array of products in the basket.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_438.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">There is only one action as well. This is to add a product to the basket.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a file called <span class="s22">BasketActions.ts </span>with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { BasketActionTypes, IBasketAdd } from &quot;./BasketTypes&quot;; import { IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const addToBasket = (product: IProduct): IBasketAdd =&gt; ({ product,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">type: BasketActionTypes.ADD</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is the action creator for adding to the basket. The function takes in a product and returns it in the action with the appropriate action type.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">On to the reducer now. Let&#39;s create a file called <span class="s22">BasketReducer.ts </span>with the following import statements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { Reducer } from &quot;redux&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { BasketActions, BasketActionTypes, IBasketState } from &quot;./BasketTypes&quot;;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create an object for the initial basket state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const initialBasketState: IBasketState = { products: []</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create the reducer now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const basketReducer: Reducer&lt;IBasketState, BasketActions&gt; = (state = initialBasketState, action) =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">switch (action.type) {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">case BasketActionTypes.ADD: { return {</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">...state,</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">products: state.products.concat(action.product)</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">return state || initialBasketState;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 34pt;text-indent: 0pt;text-align: center;">This follows the same pattern as <span class="s22">productsReducer</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 93%;text-align: left;">One interesting point to note is how we elegantly add the <span class="s22">product </span>to the <span class="s22">products </span>array without mutating the original array. We use the JavaScript <span class="s22">concat </span>function, which creates a new array by merging the original with the parameter passed in. This is a great function to use in reducers where state changes involve adding items to arrays.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s open up <span class="s22">Store.ts </span>now and import the new reducer and state for the basket:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { basketReducer } from &quot;./BasketReducer&quot;; import { IBasketState } from &quot;./BasketTypes&quot;;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the basket state to the store:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export interface IApplicationState {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">basket: IBasketState;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;"><a name="bookmark704">products: IProductsState;</a></p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">We have two reducers now. So, let&#39;s add the basket reducer to the</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">combineReducers <span class="p">function call:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export const rootReducer = combineReducers&lt;IApplicationState&gt;({</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">basket: basketReducer,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">products: productsReducer</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Now that we&#39;ve adjusted our store, we can connect our <span class="s22">ProductPage </span>component to it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark666">Connecting ProductPage to the store</a><a name="bookmark705">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this section, we&#39;ll connect the <span class="s22">ProductPage </span>component to our store:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l155"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s first import the following into <span class="s22">ProductPage.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { connect } from &quot;react-redux&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { addToBasket } from &quot;./BasketActions&quot;; import { getProduct } from &quot;./ProductsActions&quot;; import { IApplicationState } from &quot;./Store&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We are going to reference the store&#39;s <span class="s22">getProduct </span>now and not the one from <span class="s22">ProductsData.ts</span>. So, let&#39;s remove this from this import so that it looks like the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { IProduct } from &quot;./ProductsData&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, let&#39;s move the state into props:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps extends RouteComponentProps&lt;{ id: string }&gt; { addToBasket: typeof addToBasket;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">getProduct: typeof getProduct; loading: boolean;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">product?: IProduct; added: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class ProductPage extends React.Component&lt;IProps&gt; { ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, the <span class="s22">IState </span>interface and the <span class="s22">Props </span>type should be removed after this movement.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can remove the constructor as we don&#39;t need to initialize any state now. This is all done in the store.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s change the <span class="s22">componentDidMount </span>life cycle method to call the action creator for getting the product:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public componentDidMount() {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">if (this.props.match.params.id) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">const id: number = parseInt(this.props.match.params.id, 10);</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">this.props.getProduct(id);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that we also remove the <span class="s22">async </span>keyword because the method is no longer asynchronous.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Moving on to the <span class="s22">render </span>function, let&#39;s replace the references to state with references to props:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public render() {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 110%;text-align: left;">const product = this.<span class="s21">props</span>.product; return (</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 32pt;line-height: 110%;text-align: left;">&lt;Prompt when={!this.<span class="s21">props</span>.added} message={this.navAwayMessage}</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{product || this.<span class="s21">props</span>.loading ? (</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: -10pt;line-height: 113%;text-align: left;">&lt;Product loading={this.<span class="s21">props</span>.loading} product={product} inBasket={this.<span class="s21">props</span>.added}</p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;line-height: 8pt;text-align: left;">onAddToBasket={this.handleAddClick}</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">) : (</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;p&gt;Product not found!&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 18pt;text-indent: 0pt;text-align: center;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s look at the click handler now and refactor it to call the action creator for adding to the basket:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleAddClick = () =&gt; { if (this.props.product) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">this.props.addToBasket(this.props.product);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">On to the final few steps now in the connection process. Let&#39;s implement the function that maps the action creators from the store into the component props:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const mapDispatchToProps = (dispatch: any) =&gt; { return {</p><p class="s12" style="padding-left: 68pt;text-indent: 21pt;line-height: 120%;text-align: left;">addToBasket: (product: IProduct) =&gt; dispatch(addToBasket(product)),</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">getProduct: (id: number) =&gt; dispatch(getProduct(id))</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Mapping the state to the component props is a little more complex. Let&#39;s start with the simple mappings:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const mapStateToProps = (store: IApplicationState) =&gt; { return {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">basketProducts: store.basket.products, loading: store.products.productsLoading,</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">product: store.products.currentProduct || undefined</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Note that we map a null <span class="s22">currentProduct </span>to <span class="s22">undefined</span>.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">The remaining prop we need to map to is <span class="s22">added</span>. We need to check whether the current product in the store is in the basket state in order to set this <span class="s22">boolean </span>value. We can use the <span class="s22">some </span>function in the products array for this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const mapStateToProps = (store: IApplicationState) =&gt; { return {</p><p class="s21" style="padding-left: 68pt;text-indent: 21pt;line-height: 106%;text-align: left;">added: store.basket.products.some(p =&gt; store.products.currentProduct ? p.id === store.products.currentProduct.id : false),</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">The last step is to use the <span class="s22">connect </span>HOC from React Redux to wire the</p></li></ol><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">ProductPage <span class="p">component to the store:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export default connect( mapStateToProps, mapDispatchToProps</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">)(ProductPage);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark706">We can now go to the running app, visit the product page, and add it to the basket. The </a><b>Add to basket </b>button should disappear after it is clicked. If we browse to a different product and then come back to a product we&#39;ve already added to the basket, the <b>Add to basket </b>button shouldn&#39;t be present.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark667">So, we now have both the </a><b>Products </b>and <b>Product </b>pages connected to our Redux store. In the next section, we&#39;ll create a basket summary component and connect that to the store.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark707">Creating and connecting BasketSummary to the store</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">In this section, we&#39;ll create a new component called <span class="s22">BasketSummary</span>. This will show the number of items in the basket and will be located in the top right of our shop. The following screenshot shows what the basket summary will look like in the top right of the screen:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 47pt;text-indent: 0pt;text-align: left;"><span><img width="458" height="296" alt="image" src="Learn+React+with+TypeScript+3-2/Image_439.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l156"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create a file called <span class="s22">BasketSummary.tsx </span>with the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { count: number;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const BasketSummary: React.SFC&lt;IProps&gt; = props =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return &lt;div className=&quot;basket-summary&quot;&gt;{props.count}&lt;/div&gt;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default BasketSummary;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is a simple component that takes in the number of products in the basket as a prop and displays this value in a <span class="s22">div </span>styled with a <span class="s22">basket-summary </span>CSS class.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the CSS class we have just referenced in <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.basket-summary { display: inline-block; margin-left: 10px; padding: 5px 10px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">border: white solid 2px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We&#39;re going to add our basket summary to our header component. So, let&#39;s import it into <span class="s22">Header.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import BasketSummary from &quot;./BasketSummary&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also import the <span class="s22">connect </span>function from React Redux:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { connect } from &quot;react-redux&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s import the state type for our store as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { IApplicationState } from &quot;./Store&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Add a prop for the number of products in the basket to the <span class="s22">Header </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IProps extends RouteComponentProps { basketCount: number;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 84pt;text-indent: -16pt;line-height: 106%;text-align: left;">class Header extends React.Component&lt;<span class="s21">IProps</span>, IState&gt; { public constructor(props: <span class="s21">IProps</span>) { ... }</p><p class="s12" style="padding-left: 84pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">We&#39;re going to keep the search state local in this component.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the <span class="s22">BasketSummary </span>component to the <span class="s22">Header </span>component JSX now:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;search-container&quot;&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><a name="bookmark708">&lt;input ... /&gt;</a></p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;BasketSummary count={this.props.basketCount} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">The next step is to map the number of products in the store basket to the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">basketCount <span class="p">prop:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const mapStateToProps = (store: IApplicationState) =&gt; { return {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">basketCount: store.basket.products.length</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Lastly, we can connect the <span class="s22">Header </span>component to the store:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">export default connect(mapStateToProps)(withRouter(Header));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">Now that the <span class="s22">Header </span>component is consuming the <span class="s22">BasketSummary </span>component and is also connected to the store, we should be able to add products to the basket in the running app and see the basket summary increase.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, that completes this section on connecting components to the store. We have connected a few different components to the store, so hopefully this process is making good sense now.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark668">In the next section, we&#39;ll explore a Redux-like approach for managing state within a component.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark709">Managing state with useReducer</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">Redux is great for managing complex state across our app. It is a little heavy though if the state we are managing only exists within a single component. Obviously, we can manage these cases with <span class="s22">setState </span>(for class components) or <span class="s22">useState </span>(for function components). However, what if the state is complex? There may be lots of pieces of state and the state interactions may involve lots of steps with some of them being asynchronous. In this section, we&#39;ll explore an approach for managing these cases with the <span class="s22">useReducer </span>function in React. Our example will be contrived and simple but it will give us an understanding of this approach.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="423" height="174" alt="image" src="Learn+React+with+TypeScript+3-2/Image_440.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="462" height="222" alt="image" src="Learn+React+with+TypeScript+3-2/Image_441.png"/></span></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We are going to add a <b>Like </b>button to the <b>Product </b>page in our React shop. Users will be able to like a product several times. The <span class="s22">Product </span>component will keep track of the number of likes and the date and time of the last like in its state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l157"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll start by opening <span class="s22">Product.tsx </span>and creating an interface, before the <span class="s22">Product </span>component, for our state, containing the number of likes and the date of the last like:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ILikeState { likes: number; lastLike: Date | null;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ll create a variable to hold the initial state, also outside of <span class="s22">Product</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const initialLikeState: ILikeState = { likes: 0,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">lastLike: null</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now create a type for the action:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">enum LikeActionTypes { LIKE = &quot;LIKE&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface ILikeAction {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">type: LikeActionTypes.LIKE; now: Date;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We&#39;ll also create a union type containing all the action types. In our example, we only have one action type but let&#39;s do this to understand an approach that scales:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type LikeActions = ILikeAction;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Inside the <span class="s22">Product </span>component, let&#39;s call the <span class="s22">useReducer </span>function in React to get our state and <span class="s22">dispatch </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: -21pt;line-height: 120%;text-align: left;">const [state, dispatch]: [ ILikeState,</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">(action: ILikeAction) =&gt; void</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">] = React.useReducer(reducer, initialLikeState);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Let&#39;s break this down:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_442.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We pass into <span class="s22">useReducer </span>a function called <span class="s22">reducer </span>(which we haven&#39;t created yet).</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_443.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">We also pass into <span class="s22">useReducer </span>our initial state.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_444.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">useReducer <span class="p">returns an array containing two elements. The first element is the current state and the second is a </span>dispatch <span class="p">function to invoke an action.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s refactor this line and destructure the state so that we can reference the pieces of state directly:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: -21pt;line-height: 110%;text-align: left;">const [<span class="s21">{ likes, lastLike }</span>, dispatch]: [ ILikeState,</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">(action: ILikeAction) =&gt; void</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">] = React.useReducer(reducer, initialLikeState);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">At the bottom of the JSX in the <span class="s22">Product </span>component, let&#39;s add JSX to render how many likes we have and a button to add likes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{!props.inBasket &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;button onClick={handleAddClick}&gt;Add to basket&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;like-container&quot;&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">{likes &gt; 0 &amp;&amp; (</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div&gt;{`I like this x ${likes}, last at ${lastLike}`}&lt;/div&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;button onClick={handleLikeClick}&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">{likes &gt; 0 ? &quot;Like again&quot; : &quot;Like&quot;}</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark710">Let&#39;s add the </a><span class="s22">like-container </span>CSS class we have just referenced into <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.like-container { margin-top: 20px;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.like-container button { margin-top: 5px;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also implement the click handler on the <b>Like </b>button:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const handleLikeClick = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">dispatch({ type: LikeActionTypes.LIKE, now: new Date() });</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">Our last task is to implement the reducer function outside the <span class="s22">Product</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: justify;">component, just under the <span class="s22">LikeActions </span>type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const reducer = (state: ILikeState = initialLikeState, action: LikeActions) =&gt; {</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;line-height: 120%;text-align: left;">switch (action.type) { case LikeActionTypes.LIKE:</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">return { ...state, likes: state.likes + 1, lastLike: action.now };</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">return state;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: justify;">If we try this out, we&#39;ll initially see a <b>Like </b>button after we navigate to the <b>Product </b>page. If we click it, the button text turns to <b>Like again </b>and a piece of text appears above it indicating how many likes there are and the last time it was liked.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This implementation feels very similar to implementing actions and reducers in a Redux store but this is all within a component. This is overkill for the example we have just been through but could prove useful where we need to manage lots more pieces of state.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark669">Summary</a><a name="bookmark711">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We started the chapter by introducing ourselves to Redux, learning the principles and key concepts. We learned that the state is stored in a single object and changed by pure functions called reducers when actions are dispatched.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We created our own store in our React shop to put the theory into practice. Here are some key points we learned in our implementation:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_445.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_446.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Enumerations for action types give us nice IntelliSense when referencing them. Using interfaces to define the actions gives a nice level of type safety and allows us to create a union type that a reducer can use for the actions it has to deal with.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_447.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Using read-only properties within the state interface helps us avoid mutating the state directly.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_448.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_449.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Synchronous action creators simply return the required action object. Asynchronous action creators return a function that eventually returns the action object.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_450.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">The reducer contains a branch of logic for each action type it deals with, creating new state by spreading old state into a new object and then overwriting it with changed properties.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_451.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">A function called <span class="s22">createStore </span>from Redux creates the actual store. We pass all our reducers merged together along with Redux Thunk middleware to</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">manage asynchronous actions.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We then connected some components to the store. Here are the key points in this process:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_452.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">A <span class="s22">Provider </span>component from React Redux needs to sit above all the components that want to consume the store. This takes in a prop that contains the store.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_453.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 91%;text-align: left;">A <span class="s22">connect </span>HOC from React Redux then wires up the individual components to the store. This takes in two parameters than can be used to map the state and action creators to the component props.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">There are lots of bits and pieces to get our heads around when implementing Redux within our React apps. It does shine in scenarios where the state management is complex</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">because Redux forces us to break the logic up into separate pieces that are easy to understand and maintain.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We learned that we can use a Redux-like approach within just a single component by leveraging React&#39;s <span class="s22">useReducer </span>function. This can be used when the state is complex and just exists in a single component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark670">One task that Redux actions often do is interact with a REST API. We are going to learn how we can interact with REST APIs in both class- and function-based components in the next chapter. We&#39;ll also learn about a native function we use to call to a REST API as well as a popular open source library.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark712">Questions</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Before we end this chapter, let&#39;s test our knowledge with some questions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l158"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Is the <span class="s22">type </span>property in action objects required, and does this property need to be called type? Can we call it something else?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How many properties can the action object contain?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">What is an action creator?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Why did we need Redux Thunk in our Redux store in our React shop app?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Could we have used something else other than Redux Thunk?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In our <span class="s22">basketReducer </span>we have just implemented, why didn&#39;t we just use the <span class="s22">push </span>function to add the item to the basket state? That is, what is wrong with the highlighted line?</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const basketReducer: Reducer&lt;IBasketState, BasketActions&gt; = (</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">state = initialBasketState, action</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">switch (action.type) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">case BasketActionTypes.ADD: {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">state.products.push(action.product);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return state || initialBasketState;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark671">Further reading</a><a name="bookmark713">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">The following links are good resources of further information on React Redux:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_454.png"/></span></p><p class="s12" style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://redux.js.org/" class="s20" target="_blank">The Redux online docs are well worth reading at </a><a href="https://redux.js.org/" class="a" target="_blank">https://redux.js.</a>org<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_455.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a href="https://react-redux.js.org/" class="s20" target="_blank">In addition to these core Redux docs, the React Redux docs are worth looking at as well. These are at </a><a href="https://react-redux.js.org/" class="a" target="_blank">https://react-redux.js.org/</a><a href="https://react-redux.js.org/" class="s20" target="_blank">.</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_456.png"/></span></p><p class="s12" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a href="https://github.com/reduxjs/redux-thunk" class="s20" target="_blank">The Redux Thunk GitHub is at </a><a href="https://github.com/reduxjs/redux-thunk" class="a" target="_blank">https://github.com/reduxjs/redux-</a>thunk<span class="p">. The home page contains some useful information and samples.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 38pt;text-indent: 0pt;text-align: left;"><a name="bookmark714">Interacting with RESTful APIs</a><a name="bookmark751">&zwnj;</a><a name="bookmark752">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Interacting with RESTful APIs is a very common task we need to do when building an app, and it always results in us having to write asynchronous code. So, to begin with in this chapter, we&#39;ll have a detailed look at asynchronous code in general.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">There are many libraries that we can use to help us interact with REST APIs. In this chapter, we&#39;ll look at both a native browser function and a popular open source library for interacting with REST APIs. We&#39;ll discover the additional features that the open source library has over the native function. We will also look at how we can interact with a REST API in both React class and function-based components.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_457.png"/></span></p><p style="padding-left: 53pt;text-indent: -48pt;line-height: 22pt;text-align: left;">In this chapter, we&#39;ll learn the following topics: Writing asynchronous code</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_458.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Using fetch</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_459.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_460.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><a name="bookmark715">Using axios with class components Using axios with function components</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 12pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark753">Technical requirements</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_461.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_462.png"/></span></p><p class="s9" style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">TypeScript playground<a href="https://www.typescriptlang.org/play/" class="s20" target="_blank">: This is a website at </a><a href="https://www.typescriptlang.org/play/" class="a" target="_blank">https://www.typescriptlang.org/ play/</a><span class="s12"> </span><span class="p">that allows us to play with asynchronous code without installing anything. </span>Node.js and <span class="s22">npm</span><a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. We can install these from </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If we already have these</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">installed, make sure <span class="s22">npm </span>is at least at version 5.2.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_463.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;"><b>TypeScript</b>: This can be installed via <span class="s22">npm </span>with the following command in a terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install -g typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_464.png"/></span></p><p class="s9" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a name="bookmark754">Visual Studio Code</a><a href="https://code.visualstudio.com/" class="s20" target="_blank">. We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We will also need the TSLint (by egamma) and Prettier (by Estben Petersen) extensions installed within Visual Studio Code.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_465.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs" class="s20" target="_blank">All the code snippets in this chapter can be found online at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs" target="_blank">/</a></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 125%;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/09- </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs" target="_blank">RestfulAPIs.</a></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_466.png"/></span></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">jsonplaceholder.typicode.com<span class="p">: We will use this online service to help us learn how to interact with a RESTful API.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark716">Writing asynchronous code</a><a name="bookmark755">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">TypeScript code is executed synchronously by default, where each line of code is executed after each other. However, TypeScript code can also be asynchronous, which means things can happen independently of our code. Calling a REST API is an example of asynchronous code because the API request is handled outside of our TypeScript code. So, interacting with a REST API forces us to write asynchronous code.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark717">In this section, we&#39;ll take the time to understand the approaches we can take when writing asynchronous code before using them to interact with RESTful APIs. We&#39;ll start in the next section by looking at callbacks.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark756">Callbacks</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark718">A callback is a function we pass as a parameter to an asynchronous function to call when the asynchronous function is complete. In the next section, we&#39;ll go through an example of writing asynchronous code with a callback.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark757">Callback execution</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s go through an example of using callbacks in asynchronous code in the TypeScript playground. Let&#39;s enter the following code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;line-height: 120%;text-align: left;">let firstName: string; setTimeout(() =&gt; {</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">firstName = &quot;Fred&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">console.log(&quot;firstName in callback&quot;, firstName);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;"><a name="bookmark758">}, 1000);</a></p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">console.log(&quot;firstName after setTimeout&quot;, firstName);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The code calls the JavaScript <span class="s22">setTimeout </span>function, which is asynchronous. It takes in a callback as the first parameter and the number of milliseconds the execution should wait until the callback is executed as the second parameter.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use an arrow function as the callback function, where we set the <span class="s22">firstName </span>variable to &quot;Fred&quot; and output this to the console. We also log <span class="s22">firstName </span>in the console immediately after the call to <span class="s22">setTimeout</span>.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, which <span class="s22">console.log </span>statement will get executed first? If we run the code and look at the console, we&#39;ll see that the last line is executed first:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 49pt;text-indent: 0pt;text-align: left;"><span><img width="451" height="68" alt="image" src="Learn+React+with+TypeScript+3-2/Image_467.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The key point is that after <span class="s22">setTimeout </span>is called, execution carries on to the next line of code. Execution doesn&#39;t wait for the callback to be called. This can make code that includes callbacks harder to read than synchronous code, particularly when we have callbacks nested within callbacks. This is referred to as <b>callback hell </b>by many developers!</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark719">So, how do we handle errors in asynchronous callback code? We&#39;ll find out in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark759">Handling callback errors</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this section, we are going to explore how we can handle errors when using callback code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l159"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by entering the following code in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">try {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">setTimeout(() =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">throw new Error(&quot;Something went wrong&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}, 1000);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">} catch (ex) {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">console.log(&quot;An error has occurred&quot;, ex);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 3pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We are again using <span class="s22">setTimeout </span>to experiment with callbacks. This time, we throw an error inside the callback. We are hoping to catch the error outside the callback using a <span class="s22">try / catch </span>around the <span class="s22">setTimeout </span>function.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we run the code, we see that we don&#39;t catch the error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 35pt;text-indent: 0pt;text-align: left;"><span><img width="486" height="58" alt="image" src="Learn+React+with+TypeScript+3-2/Image_468.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We must handle errors within the callback. So, let&#39;s adjust our example to the following:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: justify;">interface IResult { success: boolean; error?: any;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">let result: IResult = { success: true }; setTimeout(() =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">try {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">throw new Error(&quot;Something went wrong&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} catch (ex) { result.success = false; result.error = ex;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}, 1000);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">console.log(result);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">This time, the <span class="s22">try / catch </span>is within the callback. We use a variable, <span class="s22">result</span>, to determine whether the callback was executed successfully, along with any error. The <span class="s22">IResult </span>interface gives us a nice bit of type safety with the result <span class="s22">variable</span>.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: justify;">If we run this code, we&#39;ll see that we successfully handle the error:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="557" height="80" alt="image" src="Learn+React+with+TypeScript+3-2/Image_469.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark720">So, handling errors along with reading callback-based code is a challenge. Luckily, there are alternative approaches that deal with these challenges, which we&#39;ll go through in the next sections.</a><a name="bookmark760">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark761">Promises</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark721">A promise is a JavaScript object that represents the eventual completion (or failure) of an asynchronous operation and its resulting value. We&#39;ll have a look at an example of consuming a promised-based function in the next section, followed by creating our own promised-based function after that.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark762">Consuming a promised-based function</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s have a quick look at some code that exposes a promise-based API:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(response =&gt; response.json())</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data))</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.catch(json =&gt; console.log(&quot;error&quot;, json));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_470.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">This function is the native JavaScript <span class="s22">fetch </span>function for interacting with RESTful APIs</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_471.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">The function takes in a URL for the request</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_472.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_473.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 109%;text-align: left;">It has a <span class="s22">then </span>method to handle the response and reading of the response body It has a <span class="s22">catch </span>method to handle any errors</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The code execution flows down as we would read it. We also don&#39;t have to do any additional work in the <span class="s22">then </span>methods to handle errors. So, this is much nicer than working with callback-based asynchronous code.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark722">In the next section we&#39;ll create our own promised based function.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark763">Creating a promised based function</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this section, we&#39;ll create a <span class="s22">wait </span>function to asynchronously wait a number of milliseconds that passed in as a parameter:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l160"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s enter the following into the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const wait = (ms: number) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return new Promise((resolve, reject) =&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (ms &gt; 1000) { reject(&quot;Too long&quot;);</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">setTimeout(() =&gt; { resolve(&quot;Sucessfully waited&quot;);</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">}, ms);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_474.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: justify;">The function starts by returning a <span class="s22">Promise </span>object, which takes in the function that needs to be executed asynchronously as its constructor parameter</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_475.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">promise </span>function takes in a <span class="s22">resolve </span>parameter, which is a function that we call when the function has finished executing</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_476.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The promise function also takes in a <span class="s22">reject </span>parameter, which is a function that we call when the function errors</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_477.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">Internally, we are using <span class="s22">setTimeout </span>with a callback to do the actual waiting</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s consume our promised-based <span class="s22">wait </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">wait(500)</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">.then(result =&gt; console.log(&quot;then &gt;&quot;, result))</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">.catch(error =&gt; console.log(&quot;catch &gt;&quot;, error));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The function simply outputs the result or error to the console after waiting 500 milliseconds.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">So, let&#39;s give this a try and run it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 30pt;text-indent: 0pt;text-align: left;"><span><img width="499" height="57" alt="image" src="Learn+React+with+TypeScript+3-2/Image_478.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">As we can see, the output in the console indicates that the <span class="s22">then </span>method is executed.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">If we call the <span class="s22">wait </span>function with a parameter greater than 1000, the <span class="s22">catch</span></p></li></ol><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">method should be invoked. Let&#39;s give this a try:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">wait(1500)</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">.then(result =&gt; console.log(&quot;then &gt;&quot;, result))</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">.catch(error =&gt; console.log(&quot;catch &gt;&quot;, error));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark764">As expected, the </a><span class="s22">catch </span>method is executed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 63pt;text-indent: 0pt;text-align: left;"><span><img width="413" height="54" alt="image" src="Learn+React+with+TypeScript+3-2/Image_479.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;"><a name="bookmark723">So, promises give us a nice way of writing asynchronous code. However, there&#39;s another approach that we have used a number of times earlier in this book. We&#39;ll go through this method in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark765">async and await</a></h4><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">async <span class="p">and </span>await <span class="p">are two JavaScript keywords we can use to make asynchronous code read almost identically to synchronous code:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l161"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s look at an example of consuming our <span class="s22">wait </span>function we created in the last section by entering the following code into the TypeScript playground, after the <span class="s22">wait </span>function declaration:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">const someWork = <span class="s21">async </span>() =&gt; { try {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 110%;text-align: left;">const result = <span class="s21">await </span>wait(500); console.log(result);</p><p class="s12" style="padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} catch (ex) { console.log(ex);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">someWork();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_480.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We have created an arrow function called <span class="s22">someWork </span>that is marked as asynchronous with the <span class="s22">async </span>keyword.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_481.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We then call <span class="s22">wait </span>prefixed with the <span class="s22">await </span>keyword. This halts execution of the next line until <span class="s22">wait </span>has completed.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_482.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">The <span class="s22">try / catch </span>will catch any errors.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">So, the code is very similar to how you would write it in a synchronous manner.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark766">If we run this example, we get confirmation that the </a><span class="s22">console.log </span>statement in the <span class="s22">try </span>branch waited until the <span class="s22">wait </span>function had completely finished before executing:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;"><span><img width="439" height="50" alt="image" src="Learn+React+with+TypeScript+3-2/Image_483.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change the wait to <span class="s22">1500 </span>milliseconds:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const result = await wait(<span class="s21">1500</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If we run this, we see that an error is raised and caught:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><span><img width="400" height="53" alt="image" src="Learn+React+with+TypeScript+3-2/Image_484.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, <span class="s22">async </span>and <span class="s22">await </span>make our code nice and easy to read. A bonus for using these in TypeScript is that the code can be transpiled to work in older browsers. So, for example, we can code with <span class="s22">async </span>and <span class="s22">await </span>and still support IE.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark724">Now that we have a good understanding of writing asynchronous code, we&#39;ll put this into practice when we interact with RESTful APIs in the following sections.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark767">Using fetch</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">The <span class="s22">fetch </span>function is a native JavaScript function that we can use to interact with RESTful APIs. In this section, we&#39;ll go through some common RESTful API interactions using <span class="s22">fetch</span>, starting with getting data. Throughout this section, we are going to interact with the fantastic <span class="s22">JSONPlaceholder </span>REST API.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark725">Getting data with fetch</a><a name="bookmark768">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this section, we&#39;ll use <span class="s22">fetch </span>to get some posts from the <span class="s22">JSONPlaceholder </span>REST API, starting with a basic <span class="s22">GET </span>request.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark726">Basic GET request</a><a name="bookmark769">&zwnj;</a><a name="bookmark770">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s open up the TypeScript playground and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(response =&gt; response.json())</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Here are some key points:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_485.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">The first parameter in the <span class="s22">fetch </span>function is the URL for the request</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_486.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">fetch <span class="p">is a promised-based function</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_487.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">The first <span class="s22">then </span>method handles the response</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_488.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">The second <span class="s22">then </span>method handles when the body has been parsed as JSON</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">If we run the code, we should see an array of posts output to the console:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="146" alt="image" src="Learn+React+with+TypeScript+3-2/Image_489.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark727">Getting response status</a><a name="bookmark771">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Very often, we need to check the status of the request. We can do this as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;).then(response =&gt; { console.log(response.status, response.ok);</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_490.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_491.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">The response <span class="s22">status </span>property gives the HTTP status code of the response The response <span class="s22">ok </span>property is a <span class="s22">boolean </span>and returns whether the HTTP status code is in the 200 range</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 153%;text-align: left;"><a name="bookmark772">If we run the previous code, we get </a><b>200 </b>and <b>true </b>output to the console. Let&#39;s try an example request where the post doesn&#39;t exist:</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/1001&quot;).then(response =&gt; { console.log(response.status, response.ok);</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark728">If we run the preceding code, we get </a><b>404 </b>and <b>false </b>output to the console.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark773">Handling errors</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">As we would expect with a promised-based function, we handle errors in the <span class="s22">catch</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(response =&gt; response.json())</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data))</p><p class="s21" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.catch(json =&gt; console.log(&quot;error&quot;, json));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">However, the <span class="s22">catch </span>method doesn&#39;t catch responses that aren&#39;t in the 200 range. An example of this was in the previous example, where we got 404 in the response status code. So, an HTTP error status code can be handled in the first <span class="s22">then </span>method and not the <span class="s22">catch </span>method.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">So, what is the <span class="s22">catch </span>method for? The answer is to catch network errors.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">So, that&#39;s how to get data using <span class="s22">fetch</span>. In the next section, we&#39;ll cover posting data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark729">Creating data with fetch</a><a name="bookmark774">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this section, we&#39;ll use <span class="s22">fetch </span>to create some data with the <span class="s22">JSONPlaceholder </span>REST API.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark730">Basic POST request</a><a name="bookmark775">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Creating data via a REST API usually involves using the HTTP <span class="s22">POST </span>method with the data we want to create in the request body.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s open up the TypeScript playground and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;, { method: &quot;POST&quot;,</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">body: JSON.stringify({</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;"><a name="bookmark776">title: &quot;Interesting post&quot;,</a></p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">body: &quot;This is an interesting post about ...&quot;, userId: 1</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(response =&gt; { console.log(response.status); return response.json();</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">fetch </span>call is largely the same as for getting data. The key difference is the second parameter, which is an options object that can contain the method and body for the request. Notice also that the body needs to be a <span class="s22">string</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark731">If we run the preceding code, we get a </a><b>201 </b>and an object containing the generated post ID in the console.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark777">Request HTTP headers</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Very often, we need to include HTTP headers in the request. We can specify these in the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">options <span class="p">object in a </span>headers <span class="p">property:</span></p><p class="s12" style="padding-top: 9pt;padding-left: 29pt;text-indent: -5pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;, { method: &quot;POST&quot;,</p><p class="s21" style="padding-left: 29pt;text-indent: 0pt;line-height: 10pt;text-align: left;">headers: {</p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;line-height: 106%;text-align: left;">&quot;Content-Type&quot;: &quot;application/json&quot;, Authorization: &quot;bearer some-bearer-token&quot;</p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;line-height: 10pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">body: JSON.stringify({ title: &quot;Interesting post&quot;,</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">body: &quot;This is an interesting post about ...&quot;, userId: 1</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(response =&gt; { console.log(response.status); return response.json();</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Request headers can be used in this way for any HTTP method and not just an HTTP <span class="s22">POST</span>. For example, we can use this for a <span class="s22">GET </span>request as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, {</p><p class="s21" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">headers: {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;line-height: 106%;text-align: left;"><a name="bookmark778">&quot;Content-Type&quot;: &quot;application/json&quot;, Authorization: &quot;bearer some-bearer-token&quot;</a></p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}).then(...);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark732">So, that&#39;s how to use </a><span class="s22">fetch </span>to post data to a REST API. In the next section, we&#39;ll look at changing data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark779">Changing data with fetch</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In this section, we&#39;ll use <span class="s22">fetch </span>to change some data via a REST API.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark733">Basic PUT request</a><a name="bookmark780">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">A common way to change data is via a <span class="s22">PUT </span>request. Let&#39;s open up the TypeScript playground and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { method: &quot;PUT&quot;,</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">headers: {</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">body: JSON.stringify({ title: &quot;Corrected post&quot;,</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">body: &quot;This is corrected post about ...&quot;, userId: 1</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(response =&gt; { console.log(response.status); return response.json();</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, the structure of a <span class="s22">fetch </span>call to do an HTTP <span class="s22">PUT </span>is very similar to a <span class="s22">POST </span>request. The only difference is that we specify the <span class="s22">method </span>property in the options object as <span class="s22">PUT</span>.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we run the preceding code, we get <b>200 </b>and the updated <span class="s22">POST </span>object output to the console.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark734">Basic PATCH request</a><a name="bookmark781">&zwnj;</a><a name="bookmark782">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Some REST APIs offer <span class="s22">PATCH </span>requests, which allow us to submit changes to a portion of a resource. Let&#39;s open up the TypeScript playground and enter the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { method: &quot;PATCH&quot;,</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">headers: {</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;text-align: left;">&quot;Content-type&quot;: &quot;application/json&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -10pt;line-height: 120%;text-align: left;">body: JSON.stringify({ title: &quot;Corrected post&quot;</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: -16pt;line-height: 120%;text-align: left;">.then(response =&gt; { console.log(response.status); return response.json();</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 34pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(data));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we are submitting a change to the title of the post with the <span class="s22">PATCH </span>HTTP method. If we run the preceding code, we get <b>200 </b>and the updated post object output to the console.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">So, that&#39;s how to <span class="s22">PUT </span>and <span class="s22">PATCH </span>using <span class="s22">fetch</span>. In the next section, we&#39;ll delete some data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark735">Deleting data with fetch</a><a name="bookmark783">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Generally, we delete data via a <span class="s22">DELETE </span>HTTP method on a REST API. Let&#39;s enter the following in the TypeScript playground:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { method: &quot;DELETE&quot;</p><p class="s12" style="padding-left: 34pt;text-indent: -10pt;line-height: 120%;text-align: left;">}).then(response =&gt; { console.log(response.status);</p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 157%;text-align: left;">So, we are requesting to delete a post with the <span class="s22">DELETE </span>method. If we run the preceding code, we get <b>200 </b>output to the console.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, we&#39;ve learned how to interact with a RESTful API with the native <span class="s22">fetch </span>function. In the next section, we&#39;ll look at doing the same with a popular open source library and understanding its benefits over <span class="s22">fetch</span>.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark736">Using axios with class components</a><a name="bookmark784">&zwnj;</a><a name="bookmark785">&zwnj;</a></h3><p class="s22" style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">axios <span class="p">is a popular open source JavaScript HTTP client. We&#39;re going to build a little React app that creates, reads, updates, and deletes posts from the </span>JSONPlaceholder <span class="p">REST API. Along the way, we&#39;ll discover some of the benefits of </span>axios <span class="p">over </span>fetch<span class="p">. Our first job in the next section is to install </span>axios<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark737">Installing axios</a><a name="bookmark786">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Before we install <span class="s22">axios</span>, we are going to quickly create our little React app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l162"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In a folder of our choice, let&#39;s open Visual Studio Code and its <b>Terminal </b>and enter the following command to create a new React and TypeScript project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npx create-react-app crud-api --typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Note that the version of React we use needs to be at least version <span class="s22">16.7.0- alpha.0</span>. We can check this in the <span class="s22">package.json </span>file. If the version of React in <span class="s22">package.json </span>is older than <span class="s22">16.7.0-alpha.0</span>, then we can install this version using the following command:</p><p style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;text-align: left;"><a href="mailto:react@16.7.0-alpha.0" class="s26" target="_blank">npm install react@16.7.0-alpha.0</a></p><p style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><a href="mailto:react-dom@16.7.0-alpha.0" class="s26" target="_blank">npm install react-dom@16.7.0-alpha.0</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">After the project is created, let&#39;s add TSLint as a development dependency to our project, along with some rules that work well with React and Prettier:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">cd crud-api</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install tslint tslint-react tslint-config-prettier --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now add a <span class="s22">tslint.json </span>file containing some rules:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint-config-</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">prettier&quot;], &quot;rules&quot;: {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&quot;ordered-imports&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;object-literal-sort-keys&quot;: false, &quot;jsx-no-lambda&quot;: false,</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;no-debugger&quot;: false, &quot;no-console&quot;: false,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;linterOptions&quot;: { &quot;exclude&quot;: [</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;"><a name="bookmark787">&quot;config/**/*.js&quot;, &quot;node_modules/**/*.ts&quot;, &quot;coverage/lcov-report/*.js&quot;</a></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we open <span class="s22">App.tsx</span>, there is a linting error. So, let&#39;s resolve this by adding <span class="s22">public </span>as the modifier on the <span class="s22">render </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class App extends Component {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 110%;text-align: left;">public <span class="s12">render() { return ( ... );</span></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now we can install <span class="s22">axios </span>using NPM:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install axios</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Note that <span class="s22">axios </span>has TypeScript types within it, so, we don&#39;t need to install them.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start our app running before we continue with development:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The app will then start up and run in our browser. In the next section, we&#39;ll use axios to get posts from JSONPlaceholder.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark738">Getting data with axios</a><a name="bookmark788">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this section, we are going to render posts from <span class="s22">JSONPlaceholder </span>in the <span class="s22">App </span>component.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark739">Basic GET request</a><a name="bookmark789">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ll start off by getting the posts using a basic GET request with <span class="s22">axios</span>, and then rendering them in an unordered list:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l163"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s open <span class="s22">App.tsx </span>and add an import statement for <span class="s22">axios</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import axios from &quot;axios&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s also create an interface for the posts that will come from JSONPlaceholder:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPost { userId: number; id?: number; title: string; body: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We are going to store the posts in state, so let&#39;s add an interface for this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface IState { posts: IPost[];</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class App extends React.Component<span class="s21">&lt;{}, IState&gt; </span>{ ... }</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s then initialize the post-state to an empty array in a constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class App extends React.Component&lt;{}, IState&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">public constructor(props: {}) { super(props);</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">this.state = { posts: []</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">When getting data from a REST API, we usually do this in</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">the <span class="s22">componentDidMount </span>life cycle method. So, let&#39;s do this with <span class="s22">axios </span>to get our posts:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public componentDidMount() { axios</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/posts&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">this.setState({ posts: response.data });</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_492.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use the <span class="s22">get </span>function in <span class="s22">axios </span>to get data, which is a promised-based function like <span class="s22">fetch</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_493.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_494.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">This is a generic function that accepts the response body type as a parameter We pass the URL we are requesting as the parameter to the <span class="s22">get </span>function</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_495.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We can then handle the response in the <span class="s22">then </span>method</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_496.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We get access to the response body via the <span class="s22">data </span>property in the response object that is typed, as per the generic parameter</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">So, straight away this is nicer than <span class="s22">fetch </span>in two ways:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_497.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We can easily type the response</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_498.png"/></span></p><p style="padding-left: 78pt;text-indent: 0pt;text-align: left;">There is one step (rather than two) to get the response body</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Now that we have the posts in the component state, let&#39;s render the posts in the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">render <span class="p">method. Let&#39;s also remove the </span>header <span class="p">tag:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;App&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;posts&quot;&gt;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">{this.state.posts.map(post =&gt; (</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">&lt;li key={post.id}&gt;</p><p class="s21" style="padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;h3&gt;{post.title}&lt;/h3&gt;</p><p class="s21" style="padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{post.body}&lt;/p&gt;</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s21" style="text-indent: 0pt;text-align: right;">))}</p><p class="s21" style="text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We use the <span class="s22">posts </span>array&#39;s <span class="s22">map </span>function to display the posts in an unordered list.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We reference a <span class="s22">posts </span>CSS class, so let&#39;s add this to <span class="s22">index.css</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.posts {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">list-style: none; margin: 0px auto; width: 800px; text-align: left;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="533" height="197" alt="image" src="Learn+React+with+TypeScript+3-2/Image_499.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="554" height="216" alt="image" src="Learn+React+with+TypeScript+3-2/Image_500.png"/></span></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark790">If we look at the running app, it will now look like the following:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, a basic <span class="s22">GET </span>request with <span class="s22">axios </span>is nice and easy. We need to use the <span class="s22">componentDidMount </span>life cycle method in a class component to make a REST API call that will have data from the response rendered.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark740">How do we handle errors though? We&#39;ll cover this in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark791">Handling errors</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l164"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s adjust the URL in our request:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/<span class="s21">postsX</span>&quot;)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 24pt;text-indent: 0pt;text-align: center;">If we look at the running app, the posts are no longer being rendered.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We want to handle this situation and give the user some feedback. We can do this using a <span class="s22">catch </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/postsX&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then( ... )</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">.catch(ex =&gt; { const error =</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;line-height: 10pt;text-align: center;">ex.response.status === 404</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">? &quot;Resource not found&quot;</p><p class="s21" style="padding-left: 90pt;text-indent: 21pt;line-height: 106%;text-align: left;">: &quot;An unexpected error has occurred&quot;; this.setState({ error });</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, unlike <span class="s22">fetch</span>, HTTP status error codes can be handled in the <span class="s22">catch </span>method. The error object argument in <span class="s22">catch </span>contains a <span class="s22">response </span>property containing information about the response, including the HTTP status code.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: justify;">We just referenced a piece of state called <span class="s22">error </span>in the <span class="s22">catch </span>method. We&#39;ll use this in the next step to render the error message. However, we first need to add this state to our interface and initialize it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 118%;text-align: left;">interface IState { posts: IPost[]; <span class="s21">error: string;</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">class App extends React.Component&lt;{}, IState&gt; { public constructor(props: {}) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">super(props); this.state = {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">posts: [],</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">error: &quot;&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s then render the error if it contains a value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;posts&quot;&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">...</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">{this.state.error &amp;&amp; &lt;p className=&quot;error&quot;&gt;{this.state.error}&lt;/p&gt;}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the <span class="s22">error </span>CSS class we just referenced to <span class="s22">index.css</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.error { color: red;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 33pt;text-indent: 0pt;text-align: center;">If we look at the running app now, we&#39;ll see <b>Resource not found </b>in red.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s now change the URL to a valid URL so that we can move on to looking at how we can include HTTP headers in the next section:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/<span class="s21">posts</span>&quot;)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, handling HTTP errors with <span class="s22">axios </span>is different than with <span class="s22">fetch</span>. We handle them in the first <span class="s22">then </span>method with <span class="s22">fetch</span>, whereas we handle them in the <span class="s22">catch </span>method with <span class="s22">axios</span>.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark741">Request HTTP headers</a><a name="bookmark792">&zwnj;</a><a name="bookmark793">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">In order to include HTTP headers in the request, we need to add a second parameter to the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">get <span class="p">function, which can contain various options, including HTTP headers.</span></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s add an HTTP header for the content type in our request:</p><p class="s12" style="padding-top: 8pt;padding-left: 34pt;text-indent: -10pt;line-height: 106%;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/posts&quot;, <span class="s21">{ headers: {</span></p><p class="s21" style="padding-left: 45pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s21" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 23pt;text-indent: 0pt;text-align: left;">}<span class="s12">)</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">So, we define the HTTP headers in an object in a property called <span class="s22">headers</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app, it will be exactly the same. The JSONPlaceholder REST API doesn&#39;t require the content type, but other REST APIs that we interact with may do.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark742">In the next section, we&#39;ll look at something that is not easily achieved in the </a><span class="s22">fetch </span>function, which is the ability to specify a timeout on the request.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark794">Timeouts</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Timing out requests after a certain amount of time can improve the user experience in our app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l165"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add a timeout to our request:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/posts&quot;, { headers: {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">timeout: 1</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">})</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, adding a timeout to an <span class="s22">axios </span>request is super simple. We just add a <span class="s22">timeout </span>property to the options object with an appropriate number of milliseconds. We have specified just 1 millisecond, so that we can hopefully see the request timing out.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark795">Let&#39;s handle a timeout now in the </a><span class="s22">catch </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.catch(ex =&gt; { const error =</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">ex.code === &quot;ECONNABORTED&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">? &quot;A timeout has occurred&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">: ex.response.status === 404</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">? &quot;Resource not found&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 32pt;line-height: 120%;text-align: left;">: &quot;An unexpected error has occurred&quot;; this.setState({ error });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we check the <span class="s22">code </span>property in the caught error object in order to determine whether a timeout has occurred.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app, we should get confirmation that a timeout has occurred with <b>A timeout has occurred </b>displayed in red.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s now change the timeout to something more sensible so that we can move on to looking at how we can allow users to cancel requests in the next section:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/posts&quot;, {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">timeout: 5000</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">})</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark743">Canceling requests</a><a name="bookmark796">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Allowing the user to cancel a request can improve the user experience in our app. We&#39;ll do this with the help of <span class="s22">axios </span>in this section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l166"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, we are going to import the <span class="s22">CancelTokenSource </span>type from <span class="s22">axios</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import axios, <span class="s21">{ CancelTokenSource } </span>from &quot;axios&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add a cancel token and a loading flag to our state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">interface IState { posts: IPost[]; error: string;</p><p class="s21" style="padding-left: 74pt;text-indent: 0pt;line-height: 106%;text-align: left;">cancelTokenSource?: CancelTokenSource; loading: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s initialize the loading state in the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 72pt;text-indent: 0pt;line-height: 120%;text-align: center;">this.state = { posts: [],</p><p class="s12" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">error: &quot;&quot;,</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">loading: true</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ve defined the cancel token as optional so we don&#39;t need to initialize it in the constructor.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Next, we&#39;ll generate the cancel token source and add it to the state, just before we make the <span class="s22">GET </span>request:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public componentDidMount() {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">const cancelToken = axios.CancelToken;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">const cancelTokenSource = cancelToken.source(); this.setState({ cancelTokenSource });</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.catch(...);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then use the token in the GET request as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/posts&quot;, {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">cancelToken: cancelTokenSource.token,</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">})</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We can handle cancellations in the <span class="s22">catch </span>method as follows. Let&#39;s also set the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">loading <span class="p">state to </span>false<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.catch(ex =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">const error = <span class="s21">axios.isCancel(ex)</span></p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">? &quot;Request cancelled&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">: ex.code === &quot;ECONNABORTED&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">? &quot;A timeout has occurred&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">: ex.response.status === 404</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">? &quot;Resource not found&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 32pt;line-height: 115%;text-align: left;">: &quot;An unexpected error has occurred&quot;; this.setState({ error, <span class="s21">loading: false </span>});</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 8pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we use the <span class="s22">isCancel </span>function in <span class="s22">axios </span>to check if the request has been canceled.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">While we are in the <span class="s22">componentDidMount </span>method, let&#39;s set the <span class="s22">loading </span>state to</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">false <span class="p">in the </span>then <span class="p">method as well:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">this.setState({ posts: response.data, <span class="s21">loading: false </span>});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">})</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the <span class="s22">render </span>method, let&#39;s add a <b>Cancel </b>button, which will allow the user to cancel the request:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{this.state.loading &amp;&amp; (</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleCancelClick}&gt;Cancel&lt;/button&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;posts&quot;&gt;...&lt;/ul&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement the <b>Cancel </b>button handler that we have just referenced:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleCancelClick = () =&gt; { if (this.state.cancelTokenSource) {</p><p class="s12" style="padding-left: 68pt;text-indent: 21pt;line-height: 120%;text-align: left;">this.state.cancelTokenSource.cancel(&quot;User cancelled operation&quot;);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">In order to cancel the request, the cancel method is called on the cancel token source.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">So, users can now cancel requests by clicking the <b>Cancel </b>button.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;">Now, this is going to be hard to test because the REST API we are using is really fast! So, in order to see a canceled request, let&#39;s cancel it in</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">componentDidMount </span>method immediately after the request is sent:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;( ... )</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(response =&gt; { ... })</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.catch(ex =&gt; { ... });</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">cancelTokenSource.cancel(&quot;User cancelled operation&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app, we should see verification that the request was cancelled by <b>Request cancelled </b>being displayed in red.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark797">So, </a><span class="s22">axios </span>makes it really easy to improve our app&#39;s user experience by adding the ability to cancel requests.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark744">Before we move on to the next section, wherein we look at using </a><span class="s22">axios </span>to create data, let&#39;s remove the line we just added to cancel the request immediately after it was made.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark798">Creating data with axios</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s move on to creating data now. We are going to allow the user to enter a post title and body and save it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l167"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s first create a new state for the title and body:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">interface IState {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">editPost: IPost;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s initialize this new state as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public constructor(props: {}) { super(props);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">this.state = {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">...,</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">editPost: { body: &quot;&quot;,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">title: &quot;&quot;, userId: 1</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll create an <span class="s22">input </span>and <span class="s22">textarea </span>to capture the post title and body from the user:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;App&quot;&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;post-edit&quot;&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">type=&quot;text&quot; placeholder=&quot;Enter title&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">value={this.state.editPost.title} onChange={this.handleTitleChange}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;textarea placeholder=&quot;Enter body&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">value={this.state.editPost.body}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">onChange={this.handleBodyChange}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleSaveClick}&gt;Save&lt;/button&gt;</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">{this.state.loading &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;button onClick={this.handleCancelClick}&gt;Cancel&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement the change handlers we have just referenced to update the state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">private handleTitleChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">this.setState({</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 21pt;line-height: 120%;text-align: left;">editPost: { ...this.state.editPost, title: e.currentTarget.value }</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">private handleBodyChange = (e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">this.setState({</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">editPost: { ...this.state.editPost, body: e.currentTarget.value</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can add a bit of CSS in <span class="s22">index.css </span>to make this all look reasonable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.post-edit { display: flex;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">flex-direction: column; width: 300px;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">margin: 0px auto;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">.post-edit input {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">font-family: inherit; width: 100%;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">margin-bottom: 5px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.post-edit textarea { font-family: inherit; width: 100%;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">margin-bottom: 5px;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;"><a name="bookmark799">.post-edit button { font-family: inherit; width: 100px;</a></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can also start work on the save click handler and <span class="s22">POST </span>the new post to the REST API using <span class="s22">axios</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleSaveClick = () =&gt; { axios</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.post&lt;IPost&gt;( &quot;https://jsonplaceholder.typicode.com/posts&quot;,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;line-height: 120%;text-align: left;">body: this.state.editPost.body, title: this.state.editPost.title, userId: this.state.editPost.userId</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 7pt;text-indent: 0pt;text-align: center;">headers: {</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can handle response using the <span class="s22">then </span>method:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(response =&gt; { this.setState({</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">posts: this.state.posts.concat(response.data)</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we concatenate the new post with the existing post to create a new posts array for the state.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">The structure of the <span class="s22">post </span>function call is very similar to <span class="s22">get</span>. In fact, we could add error handling, a timeout, and the ability to cancel the request in the same way as we did for <span class="s22">get</span>.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we add a new post in the running app and click the <b>Save </b>button, we see it added to the bottom of the posts list.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Next up, we will allow users to update posts.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark745">Updating data with axios</a><a name="bookmark800">&zwnj;</a><a name="bookmark801">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Let&#39;s move on to updating data now. We are going to allow the user to click an <b>Update</b></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">button in an existing post to change and save it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l168"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s first create an <b>Update </b>button in each list item in the posts:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;li key={post.id}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;h3&gt;{post.title}&lt;/h3&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{post.body}&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;button onClick={() =&gt; this.handleUpdateClick(post)}&gt; Update</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can now implement the <b>Update </b>button click handler, which sets the post being edited in the component state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleUpdateClick = (post: IPost) =&gt; { this.setState({</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">editPost: post</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In our existing save click handler, we need two branches of code now for the existing <span class="s22">POST </span>request and the <span class="s22">PUT </span>request we need to implement:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleSaveClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">if (this.state.editPost.id) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">// TODO - make a PUT request</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.post&lt;IPost&gt;( ... )</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.then( ... );</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s implement the <span class="s22">PUT </span>request now:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">if (this.state.editPost.id) {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">axios</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.put&lt;IPost&gt;(</p><p class="s21" style="padding-left: 111pt;text-indent: -10pt;line-height: 106%;text-align: left;">`https://jsonplaceholder.typicode.com/posts/${ this.state.editPost.id</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;">}`, this.state.editPost,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 7pt;text-indent: 0pt;text-align: center;"><a name="bookmark802">headers: {</a></p><p class="s21" style="padding-left: 29pt;text-indent: 0pt;text-align: center;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">)</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">.then(() =&gt; { this.setState({</p><p class="s21" style="padding-left: 122pt;text-indent: -10pt;line-height: 106%;text-align: left;">editPost: { body: &quot;&quot;,</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;line-height: 106%;text-align: left;">title: &quot;&quot;, userId: 1</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;line-height: 10pt;text-align: left;">},</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">posts: this.state.posts</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">.filter(post =&gt; post.id !== this.state.editPost.id)</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">.concat(this.state.editPost)</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 28pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we filter out and concatenate the updated post to create a new posts array for the state.</p><p style="padding-top: 8pt;padding-left: 28pt;text-indent: 0pt;line-height: 91%;text-align: left;">The structure of the <span class="s22">put </span>function call is very similar to <span class="s22">get </span>and <span class="s22">post</span>.  Again, we could add error handling, a timeout, and the ability to cancel the request in the same way as we did for <span class="s22">get</span>.</p><p style="padding-top: 9pt;padding-left: 28pt;text-indent: 0pt;line-height: 89%;text-align: left;">In the running app, if we click an <b>Update </b>button in a post, change the title and body, and click the <b>Save </b>button, we see it removed from where it was and added to the bottom of the posts list with the new title and body.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we want to <span class="s22">PATCH </span>a post, we can use the <span class="s22">patch axios </span>method. This has the same structure as <span class="s22">put </span>but instead of passing the whole object that is being changed, we can just pass the values that need updating.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In the next section, we will allow users to delete posts.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark746">Deleting data with axios</a><a name="bookmark803">&zwnj;</a><a name="bookmark804">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s move on to deleting data now. We are going to allow the user to click a <b>Delete </b>button in an existing post to delete it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l169"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s first create a <b>Delete </b>button in each list item in the posts:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;li key={post.id}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;h3&gt;{post.title}&lt;/h3&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{post.body}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;button onClick={() =&gt; this.handleUpdateClick(post)}&gt; Update</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;button onClick={() =&gt; this.handleDeleteClick(post)}&gt; Delete</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now create the <b>Delete </b>button click handler:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">private handleDeleteClick = (post: IPost) =&gt; { axios</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.delete(`https://jsonplaceholder.typicode.com/posts/${post.id}`)</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(() =&gt; { this.setState({</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">posts: this.state.posts.filter(p =&gt; p.id !== post.id)</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 28pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we use the <span class="s22">axios delete </span>method to make an HTTP <span class="s22">DELETE </span>request, which follows the same structure as the other methods.</p><p style="padding-top: 8pt;padding-left: 28pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we go to the running app, we should see a delete button in each post. If we click one of the buttons, we&#39;ll see it removed from the list after a short delay.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 93%;text-align: left;">So, that concludes this section on <span class="s22">axios </span>with class components. We&#39;ve seen that the <span class="s22">axios </span>functions are a little cleaner than <span class="s22">fetch</span>, and features such as the ability to have typed responses, timeouts, and request cancellation make it a popular choice for many developers. In the next section, we&#39;ll refactor the <span class="s22">App </span>component we have just implemented to be a function component.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark747">Using axios with function components</a><a name="bookmark805">&zwnj;</a><a name="bookmark806">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">In this section, we&#39;ll implement REST API calls using <span class="s22">axios </span>in a function component. We&#39;ll refactor the <span class="s22">App </span>component we built in the last section:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l170"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, we are going to declare a constant, called <span class="s22">defaultPosts </span>that is going to hold the default posts state we&#39;ll use a little later. We&#39;ll add this after the <span class="s22">IPost </span>interface and set this to an empty array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const defaultPosts: IPost[] = [];</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll remove the <span class="s22">IState </span>interface because the state will be structured as individual pieces of state now.</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ll also remove the previous <span class="s22">App </span>class component.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, let&#39;s start the <span class="s22">App </span>function component under the <span class="s22">defaultPosts </span>constant:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const App: React.SFC = () =&gt; {}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can now create the state for the posts, error, cancel token, loading flag, and posts being edited:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const App: React.SFC = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const [posts, setPosts]: [IPost[], (posts: IPost[]) =&gt; void] = React.useState(defaultPosts);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const [error, setError]: [string, (error: string) =&gt; void] = React.useState(&quot;&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">const cancelToken = axios.CancelToken;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const [cancelTokenSource, setCancelTokenSource]: [CancelTokenSource,(cancelSourceToken: CancelTokenSource) =&gt; void]</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">= React.useState(cancelToken.source());</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const [loading, setLoading]: [boolean, (loading: boolean) =&gt; void] = React.useState(false);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const [editPost, setEditPost]: [IPost, (post: IPost) =&gt; void] = React.useState({</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">body: &quot;&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">title: &quot;&quot;, userId: 1</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">So, we use the <span class="s22">useState </span>function to define and initialize all these pieces of state.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We want to make the REST API call to get the posts when the component has first been mounted. We can use the <span class="s22">useEffect </span>function, after the lines where the state is defined, to do this passing of an empty array as the second parameter:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">React.useEffect(() =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">// TODO - get posts</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: center;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s call the REST API to get the posts in the arrow function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">React.useEffect(() =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">axios</p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">.get&lt;IPost[]&gt;(&quot;https://jsonplaceholder.typicode.com/posts&quot;, { cancelToken: cancelTokenSource.token,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">headers: {</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">timeout: 5000</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s handle the response and set the post-state along with setting the loading state to <span class="s22">false</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.useEffect(() =&gt; { axios</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(...)</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">.then(response =&gt; { setPosts(response.data); setLoading(false);</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s also handle any errors, setting the error state along with the loading state to <span class="s22">false</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.useEffect(() =&gt; { axios</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.get&lt;IPost[]&gt;(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(...)</p><p class="s21" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.catch(ex =&gt; {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">const err = axios.isCancel(ex)</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">? &quot;Request cancelled&quot;</p><p class="s21" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">: ex.code === &quot;ECONNABORTED&quot;</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">? &quot;A timeout has occurred&quot;</p><p class="s21" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">: ex.response.status === 404</p><p class="s21" style="padding-left: 133pt;text-indent: 0pt;text-align: left;">? &quot;Resource not found&quot;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 32pt;line-height: 106%;text-align: left;">: &quot;An unexpected error has occurred&quot;; setError(err);</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">setLoading(false);</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;">We can move on to the event handlers now. These are very similar to the class component implementation, with <span class="s22">const </span>replacing the <span class="s22">private </span>access modifier, as well as <span class="s22">this.state </span>and <span class="s22">this.setState </span>being replaced by the specific state variables and state setter functions. We&#39;ll start with the <b>Cancel </b>button click handler:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleCancelClick = () =&gt; { if (cancelTokenSource) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">cancelTokenSource.cancel(&quot;User cancelled operation&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Next, we can add the change handlers for the title and body inputs:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const handleTitleChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">=&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">setEditPost({ ...editPost, title: e.currentTarget.value });</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleBodyChange = (e: React.ChangeEvent&lt;HTMLTextAreaElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">setEditPost({ ...editPost, body: e.currentTarget.value });</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">The <b>Save </b>button click handler is next:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSaveClick = () =&gt; { if (editPost.id) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.put&lt;IPost&gt;(</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: -43pt;line-height: 120%;text-align: left;">`https://jsonplaceholder.typicode.com/posts/${editPost.id}`, editPost,</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">headers: {</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">)</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(() =&gt; { setEditPost({</p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">body: &quot;&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">title: &quot;&quot;,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">userId: 1</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">setPosts(</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 54pt;line-height: 120%;text-align: left;">posts.filter(post =&gt; post.id !== editPost.id).concat(editPost)</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else { axios</p><p class="s12" style="padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">.post&lt;IPost&gt;( &quot;https://jsonplaceholder.typicode.com/posts&quot;,</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;line-height: 120%;text-align: left;">body: editPost.body, title: editPost.title, userId: editPost.userId</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 29pt;text-indent: 0pt;text-align: center;">headers: {</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&quot;Content-Type&quot;: &quot;application/json&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">)</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">.then(response =&gt; { setPosts(posts.concat(response.data));</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">Let&#39;s do the <b>Update </b>button next:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleUpdateClick = (post: IPost) =&gt; { setEditPost(post);</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">The last handler is for the <b>Delete </b>button:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleDeleteClick = (post: IPost) =&gt; { axios</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">.delete(`https://jsonplaceholder.typicode.com/posts/${post.id}`)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(() =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">setPosts(posts.filter(p =&gt; p.id !== post.id));</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;"><a name="bookmark807">Our final task is to implement the return statement. Again, this is very similar to the class component </a><span class="s22">render </span>method, with references to <span class="s22">this </span>removed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;App&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;post-edit&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;line-height: 120%;text-align: left;">type=&quot;text&quot; placeholder=&quot;Enter title&quot; value={editPost.title} onChange={handleTitleChange}</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;textarea placeholder=&quot;Enter body&quot; value={editPost.body}</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">onChange={handleBodyChange}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;button onClick={handleSaveClick}&gt;Save&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">{loading &amp;&amp; &lt;button onClick={handleCancelClick}&gt;Cancel&lt;/button&gt;}</p><p class="s12" style="text-indent: 0pt;text-align: right;">&lt;ul className=&quot;posts&quot;&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">{posts.map(post =&gt; (</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;li key={post.id}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;h3&gt;{post.title}&lt;/h3&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{post.body}&lt;/p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 54pt;line-height: 120%;text-align: left;">&lt;button onClick={() =&gt; handleUpdateClick(post)}&gt;Update&lt;/button&gt;</p><p class="s12" style="padding-left: 91pt;text-indent: 54pt;line-height: 120%;text-align: left;">&lt;button onClick={() =&gt; handleDeleteClick(post)}&gt;Delete&lt;/button&gt;</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">))}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{error &amp;&amp; &lt;p className=&quot;error&quot;&gt;{error}&lt;/p&gt;}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">That&#39;s it! Our function component that interacts with a REST API is complete. If we try this, it should behave exactly as it did before.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">The main difference in terms of REST API interaction is that we use the <span class="s22">useEffect </span>function to make a REST API call to get data that needs to be rendered. We still do this when the component has been mounted, like we do in class-based components. It&#39;s just a different way of tapping into that component life cycle event.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark748">Summary</a><a name="bookmark808">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Callback-based asynchronous code can be difficult to read and maintain. Who&#39;s spent hours trying to track down the root cause of a bug in callback-based asynchronous code? Or just spent hours trying to understand what a piece of callback-based asynchronous code is trying to do? Thankfully, we now have alternative ways of writing asynchronous code.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Promise-based functions are a great improvement over callback-based asynchronous code because the code is a lot more readable and errors can be handled more easily. The <span class="s22">async </span>and <span class="s22">await </span>keywords arguably make reading asynchronous code even easier than promised-based function code because it is very close to what the synchronous equivalent would look like.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Modern browsers have a nice function called <span class="s22">fetch </span>for interacting with REST APIs. This is a promised-based function allowing us to easily make a request and nicely manage the response.</p><p class="s22" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">axios <span class="p">is a popular alternative to </span>fetch<span class="p">. The API is arguably cleaner and allows us to better handle HTTP error codes. Timeouts and canceling requests are also made very simple  using </span>axios<span class="p">. </span>axios <span class="p">is also TypeScript-friendly, having types baked into the library.</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">Having played with both <span class="s22">axios </span>and <span class="s22">fetch</span>, which is your favorite?</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We can interact with REST APIs in both class- and function-based components. When calling a REST API to get data to display in a first component render, we need to wait until just after the component has been mounted. In class components, we do this using the <span class="s22">componentDidMount </span>life cycle method. In function components, we do this using the <span class="s22">useEffect </span>function, passing an empty array as the second parameter. Having experienced interacting with REST APIs in both types of components, which component type are you going to use on your next React and TypeScript project?</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">REST APIs aren&#39;t the only type of API we are likely going to need to interact with. GraphQL is a popular alternative API server. We&#39;ll learn how we can interact with GraphQL servers in the next chapter.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark749">Questions</a><a name="bookmark809">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s answer the following questions to help our knowledge of what we have just learned stick:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l171"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What will the output be in the console if we ran the following code in a browser?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">try {</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">setInterval(() =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">throw new Error(&quot;Oops&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">}, 1000);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">} catch (ex) {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">console.log(&quot;Sorry, there is a problem&quot;, ex);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Assuming that post <span class="s22">9999 </span>doesn&#39;t exist, what would be the output in the console if we ran the following code in a browser?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/9999&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(&quot;HTTP status code&quot;, response.status); return response.json();</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(&quot;Response body&quot;, data))</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.catch (error =&gt; console.log(&quot;Error&quot;, error));</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we did a similar exercise with <span class="s22">axios</span>, what would be the output in the console when running the following code?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.get(&quot;https://jsonplaceholder.typicode.com/posts/9999&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">console.log(&quot;HTTP status code&quot;, response.status);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.catch(error =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">console.log(&quot;Error&quot;, error.response.status);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">What is the benefit of using the native <span class="s22">fetch </span>over <span class="s22">axios</span>?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we add a bearer token to the following <span class="s22">axios </span>request?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">axios.get(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;)</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We are using the following <span class="s22">axios PUT </span>request to update a post title?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">axios.put(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { title: &quot;corrected title&quot;,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">body: &quot;some stuff&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">The body hasn&#39;t changed though<span class="s23">—</span>it&#39;s just the title we want to update. How can we change this to a <span class="s22">PATCH </span>request to make this REST call more efficient?</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We have implemented a function component to display a post. It uses the following code to get the post from a REST API?</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.useEffect(() =&gt; { axios</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.get(`https://jsonplaceholder.typicode.com/posts/${id}`)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.catch(...);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark750">What is wrong with the preceding code?</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark810">Further reading</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The following links are good resources for further information on the topics we have covered in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_501.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_502.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;line-height: 115%;text-align: left;"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="s20" target="_blank">More information about promises can be found at </a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="a" target="_blank">https://developer.mozilla. org/en-US/docs/Web/JavaScript/Reference/Global_Objects/</a><span class="s12">Promise </span>Additional information about <span class="s22">async </span>and <span class="s22">await </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" class="s20" target="_blank">is at </a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" class="a" target="_blank">https://</a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank">developer.</a></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 8pt;text-align: left;"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" class="a" target="_blank">mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/</a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank">async_</a></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">function</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_503.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 109%;text-align: left;">More information about the <span class="s22">fetch </span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" class="s20" target="_blank">function can be found at </a><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" class="a" target="_blank">https://developer. mozilla.org/en-US/docs/Web/API/Fetch_</a><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank">API</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_504.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">The <span class="s22">axios </span><a href="https://github.com/axios/axios" class="s20" target="_blank">GitHub page is at </a><a href="https://github.com/axios/axios" class="a" target="_blank">https://github.com/axios/</a><a href="https://github.com/axios/axios" target="_blank">axios</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 27pt;text-indent: 0pt;text-align: left;"><a name="bookmark811">Interacting with GraphQL APIs</a><a name="bookmark839">&zwnj;</a><a name="bookmark840">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">GraphQL is an open source web API language for reading and writing data that is maintained by Facebook. It allows the client to specify exactly what data is returned and request multiple data areas in a single request. This efficiency and flexibility makes it a compelling alternative to a REST API. GraphQL also supports both reading and writing data.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this chapter, we&#39;ll start by experimenting with some GraphQL queries against GitHub to get familiar with the syntax by using the <i>GitHub GraphQL API </i>explorer. We&#39;ll explore how we both read and write GraphQL data and how to specify exactly the way we want the data in the response returned to us.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">We&#39;ll then consume the GitHub GraphQL server in a React and TypeScript application to build a little app that searches for a GitHub repository and returns some information about it. We&#39;ll use our knowledge from the last chapter on <span class="s22">axios </span>to interact with the GitHub GraphQL server to start off with. We&#39;ll then switch to using Apollo, which is a client library that makes interacting with GraphQL servers a breeze.</p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -48pt;text-align: left;">We&#39;ll cover the following topics in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_505.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_506.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_507.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_508.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">GraphQL query and mutation syntax Using axios as a GraphQL client Using Apollo GraphQL client Working with cached data in Apollo</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark812">Technical requirements</a><a name="bookmark841">&zwnj;</a><a name="bookmark842">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_509.png"/></span></p><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. We can install them from </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/</a><span class="s12">download/</span><span class="p">. If we already have these installed, make sure </span>npm <span class="p">is at least at version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_510.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We will also need the TSLint (by egamma) and Prettier (by Estben Petersen) extensions installed within Visual Studio Code.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_511.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">GitHub<a href="https://github.com/join" class="s20" target="_blank">: We&#39;ll need a GitHub account. We can sign up at the following link if we haven&#39;t got an account: </a><a href="https://github.com/join" class="a" target="_blank">https://github.com/</a><span class="s12">join</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_512.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/10-GraphAPIs" class="s20" target="_blank">All the code snippets in this chapter can be found online at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/10-GraphAPIs" class="a" target="_blank">https:/</a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/10-GraphAPIs" target="_blank">/</a></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/10-GraphAPIs" class="a" target="_blank">github.com/carlrip/LearnReact17WithTypeScript/tree/master/10- </a>GraphAPIs<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_513.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">GitHub GraphQL API Explorer<a href="https://developer.github.com/v4/explorer/" class="s20" target="_blank">: We&#39;ll use this tool to play with the syntax of GraphQL queries and mutations. The tool is at </a><a href="https://developer.github.com/v4/explorer/" class="a" target="_blank">https://developer.github.com/ v4/</a><span class="s12">explorer/</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark813">GraphQL query and mutation syntax</a><a name="bookmark843">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark814">In this section, we&#39;ll use the GitHub GraphQL API explorer to start to get familiar with the syntax for interacting with a GraphQL server, starting with reading data in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark844">Reading GraphQL data</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In order to read GraphQL data, we make what is called a query. In this section, we&#39;ll start by covering the basic GraphQL syntax and move on to how to include nested objects in a query result, and then how we can create reusable queries by allowing parameters to be passed into them.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark815">Basic query</a><a name="bookmark845">&zwnj;</a><a name="bookmark846">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this section, we&#39;ll use the GitHub GraphQL API explorer to get information about our GitHub user account:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l172"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s open the following URL in a browser to open the tool:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 1pt;padding-left: 73pt;text-indent: 0pt;text-align: left;"><a href="https://developer.github.com/v4/explorer/" class="a" target="_blank">https://developer.github.com/v4/</a>explorer/<span class="p">.</span></p><p style="padding-top: 7pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">We will need to be signed in to our GitHub account if we aren&#39;t already.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In the panel in the top-left corner, let&#39;s enter the following and click the <b>Execute Query </b>button:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">query { viewer {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">name</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">This is our first GraphQL query. Here are some key points:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_514.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We prefix a query with the <span class="s22">query </span>keyword. This is actually optional.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_515.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">viewer <span class="p">is the name of the object we want to get.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_516.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">name <span class="p">is a field within </span>viewer <span class="p">that we want to return.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The query result will appear on the right-hand side:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="229" alt="image" src="Learn+React+with+TypeScript+3-2/Image_517.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: justify;"><a name="bookmark847">The data we requested is returned as a JSON object. The JSON contains a </a><span class="s22">data </span>object that contains a <span class="s22">viewer </span>object containing the <span class="s22">name </span>field. The <span class="s22">name </span>value should be our name, since this is the name stored in our GitHub account.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">On the right-hand side of the results pane there is a <b>Docs </b>link. If we click this link, a <b>Documentation Explorer </b>appears:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="185" alt="image" src="Learn+React+with+TypeScript+3-2/Image_518.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">If we then click on the <b>Query </b>link, all the objects are shown that can be queried, including <span class="s22">viewer</span>, which is the one we just queried. If we click into this, we see all the fields that are available within <span class="s22">viewer</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add <span class="s22">avatarUrl </span>to our query, as this is an additional field available to us:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">query { viewer {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">name</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">avatarUrl</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, we simply add the <span class="s22">avatarUrl </span>field inside the <span class="s22">viewer </span>object with a carriage return between the <span class="s22">name </span>and <span class="s22">avatarUrl </span>fields. If we execute the query, we</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">see <span class="s22">avatarUrl </span>added to the JSON result. This should be a path to an image of us.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, we are already seeing how flexible GraphQL is with being able to specify exactly which fields we want returned in the response. In the next section, we&#39;ll take this further</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">by specifying the nested objects we want to return.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark816">Returning nested data</a><a name="bookmark848">&zwnj;</a><a name="bookmark849">&zwnj;</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s make a far more complex query in this section. We&#39;ll search for a GitHub repository, return information about it, including the number of stars it has and the last issues that have been raised as a nested array:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l173"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start by entering the following query and executing it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">query {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">repository (owner:&quot;facebook&quot;, name:&quot;react&quot;) { name</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">description</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">This time, we are asking for the <span class="s22">repository </span>object, but passing two parameters for the <span class="s22">owner </span>and <span class="s22">name </span>of the repository. We are asking for the <span class="s22">name </span>and <span class="s22">description </span>of the repository to be returned.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">We see that the repository and fields we asked for are returned:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="107" alt="image" src="Learn+React+with+TypeScript+3-2/Image_519.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s now request the number of stars against the repository. To do this, we ask for the <span class="s22">totalCount </span>field within the <span class="s22">stargazers </span>nested object:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">query {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">repository (owner:&quot;facebook&quot;, name:&quot;react&quot;) { name</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">description</p><p class="s21" style="padding-top: 1pt;padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">stargazers { totalCount</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we execute the query, we see these results returned:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="136" alt="image" src="Learn+React+with+TypeScript+3-2/Image_520.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now add an alias to <span class="s22">totalCount </span>within <span class="s22">stargazers</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">stargazers {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">stars:<span class="s12">totalCount</span></p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we execute the query, we see the stars count is returned against the alias we specified:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;data&quot;: { &quot;repository&quot;: {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&quot;name&quot;: &quot;react&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&quot;description&quot;: &quot;A declarative, efficient, and flexible</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: -32pt;line-height: 120%;text-align: left;">JavaScript library for building user interfaces.&quot;, &quot;stargazers&quot;: {</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&quot;stars&quot;: <span class="s12">114998</span></p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s move on to requesting the last <span class="s22">5 </span>issues within the repository:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">repository (owner:&quot;facebook&quot;, name:&quot;react&quot;) { name</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">description stargazers {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">stars:totalCount</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-top: 1pt;padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">issues(last: 5) { edges {</p><p class="s21" style="padding-left: 145pt;text-indent: -10pt;line-height: 106%;text-align: left;">node { id</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;line-height: 106%;text-align: left;"><a name="bookmark850">title url</a></p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;line-height: 10pt;text-align: left;">publishedAt</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We request the <span class="s22">issues </span>object by passing <span class="s22">5 </span>into the last parameter. We then request an <span class="s22">edges </span>object containing a <span class="s22">node </span>object that in turn contains the issue fields we are interested in.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">So, what are the <span class="s22">edges </span>and <span class="s22">node </span>objects? Why can&#39;t we just request the fields we want directly? Well, this structure is in place to facilitate cursor-based pagination.</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">If we execute the query, we get the last <span class="s22">5 </span>issues included in our result.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark817">So, GraphQL allows us to make a single web request for different bits of data returning just the fields we require. Doing a similar thing with the GitHub REST API would probably require multiple requests and we&#39;d get a lot more data than we need returned to us. It is these types of queries where GraphQL shines over REST.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark851">Query parameters</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The query we have just made is hardcoded to get data for a specific repository. In this section, we&#39;ll define variables in the query, which essentially allow parameters to be passed into it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l174"><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We can add query variables in parentheses after the <span class="s22">query </span>keyword, separated by commas. Each parameter is defined by declaring its name with its type after a semicolon. This is similar to defining parameters in a TypeScript function with type annotations. The variable names need to be prefixed with <span class="s22">$</span>. The <span class="s22">! </span>after the type signifies that this is required. So, in our case, both variables are required in order for the query to be executed. The variables can then be referenced within the query, which, in our case, is where we request the repository object:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">query <span class="s21">($org: String!, $repo: String!) </span>{ repository (owner:<span class="s21">$org</span>, name:<span class="s21">$repo</span>) {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark852">Before we execute the query, we need to specify the variable values. We do this in the </a><b>Query Variables </b>pane in the bottom-left corner in a JSON object:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;org&quot;: &quot;facebook&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;repo&quot;: &quot;react&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">If we execute the query, we get the results for the repository we asked for:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="169" alt="image" src="Learn+React+with+TypeScript+3-2/Image_521.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark818">We are now getting comfortable with reading data from a GraphQL server. But how can we create new data items or update data? We&#39;ll find out in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark853">Writing GraphQL data</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Let&#39;s turn our attention to writing to a GraphQL server now. We do this with what are called mutations. In this section, we&#39;ll create a <span class="s22">mutation </span>to add a GitHub star to a repository:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l175"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In order to star a repository, we need the repository <span class="s22">id</span>. So, let&#39;s add this to the query we have been working on to get this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 110%;text-align: left;">query <span class="s21">(</span>$org: String!, $repo: String!<span class="s21">) </span>{ repository (owner:$org, name:$repo) {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">id</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark854">Let&#39;s copy the </a><span class="s22">id </span>that is returned in the result. The <span class="s22">id </span>for the React repository is the shown in the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">MDEwOlJlcG9zaXRvcnkxMDI3MDI1MA==</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now write our first <span class="s22">mutation</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">mutation ($repoId: ID!) {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">addStar(input: { starrableId: $repoId }) { starrable {</p><p class="s12" style="padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">stargazers { totalCount</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Here are some key points on this <span class="s22">mutation</span>:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_522.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;text-align: justify;">We prefix a mutation with the <span class="s22">mutation </span>keyword.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_523.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: justify;">We put parameters to be passed into the <span class="s22">mutation </span>after the <span class="s22">mutation </span>keyword in parentheses. In our case, we have a single parameter for the repository <span class="s22">id </span>we want to star.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_524.png"/></span></p><p class="s22" style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">addStar <span class="p">is the </span>mutation <span class="p">function we are calling, which has a parameter called </span>input <span class="p">that we need to pass to it.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_525.png"/></span></p><p class="s22" style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">input <span class="p">is actually an object that has a field called </span>starrableId <span class="p">we need to include. The value of this is the repository </span>id <span class="p">we want to star, so we set it to our repository </span>id <span class="p">variable </span>$repoId<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_526.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 91%;text-align: left;">After the <span class="s22">mutation </span>parameters, we can specify what we want returned in the response. In our case, we want to return the number of stars on the repository.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We can specify the parameter value for the repository <span class="s22">id </span>in the <b>Query Variables</b></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">pane:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: center;">&quot;repoId&quot;: &quot;MDEwOlJlcG9zaXRvcnkxMDI3MDI1MA==&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark855">If we execute the </a><span class="s22">mutation</span>, the star will be added to the repository and the new total number of stars will be returned:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="332" alt="image" src="Learn+React+with+TypeScript+3-2/Image_527.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark819">We have a good grasp on both GraphQL queries and mutations now. In the next section, we&#39;ll start to interact with a GraphQL server from a React and TypeScript app.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark856">Using axios as a GraphQL client</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 93%;text-align: left;"><a href="#bookmark752" class="s20">Interacting with a GraphQL server is done via HTTP. We learned in </a><span class="s12">Chapter 9</span>, <i>Interacting with Restful APIs</i>, that <span class="s22">axios </span>is a great HTTP client. So, in this chapter, we&#39;ll cover how to interact with a GraphQL server using <span class="s22">axios</span>.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">To help us learn, we&#39;ll create a React and TypeScript app to return information about our GitHub account. So, our first tasks are to get a token that will give us access to query</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the GitHub GraphQL server and scaffold a React and TypeScript app.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark820">Getting a GitHub personal access token</a><a name="bookmark857">&zwnj;</a><a name="bookmark858">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The GitHub GraphQL server requires a bearer token for us to interact with it. So, let&#39;s go and generate a personal access token:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l176"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s sign in to our GitHub account and go to our <b>Settings </b>page by opening the menu under our avatar and choosing <b>Settings.</b></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In the left-hand menu, we then need to choose the <b>Developer settings </b>option. This will take us to the <b>Developer settings </b>page.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then choose the <b>Personal access tokens </b>option in the left-hand menu.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We will then see a <b>Generate new token </b>button that we can click to generate our bearer token. We will likely be prompted to input our password after clicking the button.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Before the token is generated, we are asked to specify the scopes. Let&#39;s enter a token description, tick <b>repo </b>and <b>user</b>, and then click the <b>Generate token </b>button.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">The token is then generated and displayed in the page for us to copy and use in our React app.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark821">Now that we have our bearer token, let&#39;s scaffold a React and TypeScript app in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark859">Creating our app</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We&#39;ll follow the usual steps for scaffolding a React and TypeScript app:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l177"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s open Visual Studio Code in a folder of our choice and open the terminal. Let&#39;s enter the following command to create a new React and TypeScript project:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npx create-react-app repo-search --typescript</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Note that the version of React we use needs to be at least version <span class="s22">16.7.0- alpha.0</span>. We can check this in the <span class="s22">package.json </span>file. If the version of React in <span class="s22">package.json </span>is less than <span class="s22">16.7.0-alpha.0</span>, then we can install this version using the following command:</p><p style="padding-top: 8pt;padding-left: 91pt;text-indent: 0pt;text-align: left;"><a href="mailto:react@16.7.0-alpha.0" class="s26" target="_blank">npm install react@16.7.0-alpha.0</a></p><p style="padding-left: 91pt;text-indent: 0pt;text-align: left;"><a href="mailto:react-dom@16.7.0-alpha.0" class="s26" target="_blank">npm install react-dom@16.7.0-alpha.0</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">After the project is created, let&#39;s add TSLint as a development dependency to our project, along with some rules that work well with React and Prettier:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">cd repo-search</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">npm install tslint tslint-react tslint-config-prettier --save- dev</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now add a <span class="s22">tslint.json </span>file containing some rules:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-react&quot;, &quot;tslint-</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">config-</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 5pt;line-height: 120%;text-align: left;">prettier&quot;], &quot;rules&quot;: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&quot;ordered-imports&quot;: false,</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;object-literal-sort-keys&quot;: false, &quot;jsx-no-lambda&quot;: false,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;no-debugger&quot;: false, &quot;no-console&quot;: false,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;linterOptions&quot;: { &quot;exclude&quot;: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;config/**/*.js&quot;, &quot;node_modules/**/*.ts&quot;, &quot;coverage/lcov-report/*.js&quot;</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we open <span class="s22">App.tsx</span>, there is a linting error. So, let&#39;s resolve this by adding <span class="s22">public </span>as the modifier on the <span class="s22">render </span>method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class App extends Component {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 110%;text-align: left;">public <span class="s12">render() { return ( ... );</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now we can install <span class="s22">axios </span>using <span class="s22">npm</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install axios</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark860">Let&#39;s start our app running before we continue with the developments:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm start</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s do a little more in our app before we make our first GraphQL query in <span class="s22">axios</span>. Let&#39;s create a new file called <span class="s22">Header.tsx </span>in the <span class="s22">src </span>directory containing the following <span class="s22">import</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import React from &quot;react&quot;; import axios from &quot;axios&quot;;</p><p style="padding-top: 7pt;padding-left: 34pt;text-indent: 0pt;text-align: center;">This component will eventually contain our name and avatar from GitHub.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s return nothing from our <span class="s22">Header </span>component for the time being:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const Header: React.SFC = () =&gt; { return null;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Now let&#39;s go back to <span class="s22">App.tsx </span>and import the <span class="s22">Header </span>component we have just created:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { Header } from &quot;./Header&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;text-align: left;">We can now adjust the JSX in <span class="s22">App.tsx</span>, including our <span class="s22">Header </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;App&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;App-header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;Header /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">As our final task in this section, let&#39;s change the <span class="s22">App-Header </span>CSS class in</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">App.css <span class="p">so that the header isn&#39;t so tall:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">.App-header {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 112%;text-align: left;">background-color: #282c34; <span class="s21">min-height: 200px; </span>display: flex;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 119%;text-align: left;">flex-direction: column; align-items: center; justify-content: center; <span class="s21">font-size: 16px;</span></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 8pt;text-align: left;">color: white;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark822">Querying the GraphQL server</a><a name="bookmark861">&zwnj;</a><a name="bookmark862">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now that we have our React and TypeScript project in place, let&#39;s make a GraphQL query using <span class="s22">axios</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l178"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In <span class="s22">Header.tsx</span>, we&#39;ll start by creating two interfaces for the GraphQL query response and the viewer data within it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IViewer { name: string; avatarUrl: string;</p><p class="s12" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IQueryResult { data: {</p><p class="s12" style="padding-left: 135pt;text-indent: 0pt;text-align: left;">viewer: IViewer;</p><p class="s12" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s create some state within our <span class="s22">Header </span>component for the <span class="s22">viewer</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const [viewer, setViewer]: [ IViewer,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">(viewer: IViewer) =&gt; void</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">] = React.useState({name: &quot;&quot;, avatarUrl: &quot;&quot;});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: justify;">It&#39;s nearly time to make the GraphQL query. We are going to do this when the component has just been mounted. We can use the <span class="s22">useEffect </span>function to do this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">React.useEffect(() =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">// TODO - make a GraphQL query</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We pass an empty array as the second parameter so that the query only executes when the component is mounted and not on each render.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s use <span class="s22">axios </span>then to make the GraphQL query:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">React.useEffect(() =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">axios</p><p class="s21" style="padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">.post&lt;IQueryResult&gt;( &quot;https://api.github.com/graphql&quot;,</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s21" style="padding-left: 145pt;text-indent: -10pt;line-height: 106%;text-align: left;">query: `query { viewer {</p><p class="s21" style="padding-left: 155pt;text-indent: 0pt;line-height: 10pt;text-align: left;">name</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 155pt;text-indent: 0pt;text-align: left;">avatarUrl</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">}`</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">)</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}, []);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Notice that we are doing an HTTP <span class="s22">POST </span>even though we are reading data. GraphQL requires us to use an HTTP <span class="s22">POST </span>because the details of the query are in the request body.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are also using the interface we used earlier, <span class="s22">IQueryResult</span>, for the response data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">As mentioned earlier, we need to pass our bearer token in the HTTP Authorization header. So, let&#39;s do that:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">.post&lt;IQueryResult&gt;( &quot;https://api.github.com/graphql&quot;,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">query: `query { viewer {</p><p class="s12" style="padding-left: 145pt;text-indent: 0pt;line-height: 120%;text-align: left;">name avatarUrl</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}`</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">},</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">headers: {</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">Authorization: &quot;bearer our-bearer-token&quot;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">)</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Obviously, we need to substitute in our real bearer token that we obtained earlier from GitHub.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We aren&#39;t handling the response yet, so let&#39;s do that and set the <span class="s22">viewer </span>state variable:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.post&lt;IQueryResult&gt;(</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">)</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 25pt;text-indent: 0pt;text-align: center;"><a name="bookmark863">setViewer(response.data.data.viewer);</a></p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Now that we have the data in state from the GraphQL query, let&#39;s render our avatar and name along with our app title:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;img src={viewer.avatarUrl} className=&quot;avatar&quot; /&gt;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;viewer&quot;&gt;{viewer.name}&lt;/div&gt;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;GitHub Search&lt;/h1&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the avatar CSS class we just referenced into <span class="s22">App.css</span>:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.avatar { width: 60px;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">border-radius: 50%;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we look at the running app, we should see our avatar and name in our app header:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 157pt;text-indent: 0pt;text-align: left;"><span><img width="164" height="167" alt="image" src="Learn+React+with+TypeScript+3-2/Image_528.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">So, we&#39;ve just interacted with a GraphQL server using an HTTP library. All GraphQL requests are made using the HTTP POST method, even for reading data. All</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: justify;">GraphQL requests are made to the same endpoint as well. The resource we want data from isn&#39;t in the URL, it&#39;s in the request body. So, whilst we can use an HTTP library, like <span class="s22">axios</span>, for querying GraphQL servers, it feels a little strange.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">In the next section, we&#39;ll look at a GraphQL client that will help us query a GraphQL server in a more natural way.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark823">Using Apollo GraphQL client</a><a name="bookmark864">&zwnj;</a><a name="bookmark865">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">Apollo client is a client library for interacting with GraphQL servers. It has many benefits over using a generic HTTP library like <span class="s22">axios</span>, such as being able to read and write data declaratively with React components right in our JSX and having caching switched on right out of the box.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark824">In this section, we&#39;ll refactor what we built in the last section with </a><span class="s22">axios </span>to use Apollo, and then extend our app a little more to include a GitHub repository search.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark866">Installing Apollo client</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Our first job is to install Apollo into our project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l179"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">To add Apollo client to our project, let&#39;s install the following packages via <span class="s22">npm</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 25pt;text-indent: 0pt;text-align: center;">npm install apollo-boost react-apollo graphql</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_529.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_530.png"/></span></p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;text-align: left;">apollo-boost <span class="p">contains everything we need to set up our Apollo client </span>react-apollo <span class="p">contains React components we are going to use to interact with the GraphQL server</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_531.png"/></span></p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;text-align: left;">graphql <span class="p">is a core package that we&#39;ll use to parse GraphQL queries</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ll also install some TypeScript types as well for <span class="s22">graphql</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">npm install @types/graphql --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We need to make sure TypeScript includes the <span class="s22">es2015 </span>and <span class="s22">esNext </span>libraries when it compiles our code. So, let&#39;s add the following <span class="s22">lib </span>field to <span class="s22">tsconfig.json</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;,</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&quot;lib&quot;: [&quot;es2015&quot;, &quot;dom&quot;, &quot;esnext&quot;],</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We now have everything in place to start interacting with the GitHub GraphQL server with Apollo.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark825">Migrating from axios to Apollo</a><a name="bookmark867">&zwnj;</a><a name="bookmark868">&zwnj;</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark826">Now that we have installed all the Apollo bits and pieces, let&#39;s migrate our </a><span class="s22">axios </span>code to Apollo.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark869">Adding an Apollo provider</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are going to start in <span class="s22">App.tsx</span>, where we will define our Apollo client and <i>provide </i>it to all the components beneath the <span class="s22">App </span>in the component hierarchy:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l180"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">In <span class="s22">App.tsx</span>, let&#39;s import <span class="s22">apollo-boost</span>, along with the <span class="s22">ApolloProvider</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component from <span class="s22">react-apollo</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import ApolloClient from &quot;apollo-boost&quot;; import { ApolloProvider } from &quot;react-apollo&quot;;</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Just above the <span class="s22">App </span>class component, let&#39;s create our <span class="s22">ApolloClient</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const client = new ApolloClient({</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">uri: &quot;https://api.github.com/graphql&quot;, headers: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">authorization: `Bearer our-bearer-token`</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Obviously, we need to substitute in our real bearer token we obtained earlier from GitHub.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The last step is to use the <span class="s22">ApolloProvider </span>component to provide the <span class="s22">ApolloClient </span>we have created to all the other components in our app. We do this by putting <span class="s22">ApolloProvider </span>as the root component and passing it our <span class="s22">ApolloClient </span>object:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;ApolloProvider client={client}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;div className=&quot;App&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: center;">&lt;header className=&quot;App-header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;Header /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: center;">&lt;/header&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 9pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/ApolloProvider&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark870">Now that the </a><span class="s22">ApolloClient </span>is set up, we can start interacting with the GraphQL server.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark827">Using the query component to query GraphQL</a><a name="bookmark871">&zwnj;</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are now going to use the <span class="s22">Query </span>component to get our GitHub name and avatar, replacing the <span class="s22">axios </span>code:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l181"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by removing the <span class="s22">axios </span>import statement and instead of having the following imports:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import gql from &quot;graphql-tag&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import { Query } from &quot;react-apollo&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Our <span class="s22">IViewer </span>interface will remain the same, but we need to tweak our</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">IQueryResult <span class="p">interface slightly:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IQueryResult { viewer: IViewer;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We are going to define our GraphQL query next:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const GET_VIEWER = gql`</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: -10pt;line-height: 120%;text-align: left;">viewer { name avatarUrl</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">`;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 93%;text-align: left;">So, we set the query to a <span class="s22">GET_VIEWER </span>variable and we have defined our query in a template literal. However, the <span class="s22">gql </span>function just before the template literal is a little odd. Shouldn&#39;t the template literal be in parentheses? This is actually called a tagged template literal, where the <span class="s22">gql </span>function from the core GraphQL library parses the template literal next to it. We end up with a query in <span class="s22">GET-VIEWER </span>that Apollo can use and execute.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We are now going to start to define our query. We can define our query directly in JSX using the <span class="s22">Query </span>component from <span class="s22">react-apollo</span>. However, in order to add some type safety, we are going to create a new component called <span class="s22">GetViewerQuery </span>that inherits from <span class="s22">Query </span>and defines the result type as a generic parameter:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">class GetViewerQuery extends Query&lt;IQueryResult&gt; {}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We don&#39;t need any state anymore, so we can remove the <span class="s22">viewer </span>and <span class="s22">setViewer</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">variables.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can also remove the <span class="s22">useEffect </span>function call that makes the <span class="s22">axios </span>query because we are going to do our query in JSX now.</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">So, let&#39;s use our <span class="s22">GetViewerQuery </span>component to invoke our query:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;GetViewerQuery query={GET_VIEWER}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{({ data }) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (!data || !data.viewer) { return null;</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;img src={data.viewer.avatarUrl} className=&quot;avatar&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;viewer&quot;&gt;{data.viewer.name}&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">&lt;h1&gt;GitHub Search&lt;/h1&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/GetViewerQuery&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_532.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We pass the <span class="s22">GetViewerQuery </span>component our query we created earlier in a</p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;line-height: 14pt;text-align: left;">query <span class="p">prop.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_533.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_534.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 109%;text-align: left;">The query result is returned in the children function of <span class="s22">GetViewerQuery</span>. The children function argument contains an object containing the data in a</p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;line-height: 11pt;text-align: left;">data <span class="p">property. We destructure this data into a </span>data <span class="p">variable.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_535.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">If there isn&#39;t any data, we escape early and return <span class="s22">null</span>.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_536.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we have data, we then return the JSX for our avatar and name referencing the <span class="s22">data </span>property.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_537.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">If we look at our running app, it should look exactly the same as the <span class="s22">axios </span>version. We may need to <span class="s22">npm start </span>the app again if it&#39;s showing an error.</p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;"><a name="bookmark872">There&#39;s other information that we can get from the children function argument. One piece of useful information is whether the data is being loaded. Let&#39;s use this to display a loading message:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;GetViewerQuery query={GET_VIEWER}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{({ data, <span class="s21">loading </span>}) =&gt; {</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">if (loading) {</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">return &lt;div className=&quot;viewer&quot;&gt;Loading ...&lt;/div&gt;;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/GetViewerQuery&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Another useful piece of information that we can get from the children function argument is information about an error that has occurred. Let&#39;s use this to display the error message, if there is one:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;GetViewerQuery query={GET_VIEWER}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{({ data, loading, <span class="s21">error </span>}) =&gt; {</p><p class="s21" style="padding-left: 134pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (error) { return &lt;div</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 10pt;text-align: left;">className=&quot;viewer&quot;&gt;{error.toString()}&lt;/div&gt;;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/GetViewerQuery&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">This Apollo implementation is really elegant. It&#39;s clever how the <span class="s22">Query </span>component makes the web request at the correct point in the component lifecycle and allows us to feed the rest of the component tree the data.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">In the next section, we&#39;ll continue to enhance our app with Apollo.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark828">Adding a repository search component</a><a name="bookmark873">&zwnj;</a><a name="bookmark874">&zwnj;</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">In this section, we&#39;ll add a component to search for a GitHub repository and return some information about it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l182"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start by creating a new file called <span class="s22">RepoSearch.tsx </span>containing the following imports:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import * as React from &quot;react&quot;; import gql from &quot;graphql-tag&quot;;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { ApolloClient } from &quot;apollo-boost&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We are going to take in <span class="s22">ApolloClient </span>as a prop. So, let&#39;s add an interface for that:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">interface IProps {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">client: ApolloClient&lt;any&gt;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, we&#39;ll scaffold our component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const RepoSearch: React.SFC&lt;IProps&gt; = props =&gt; { return null;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">export default RepoSearch;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s reference this in our <span class="s22">App </span>component, now in <span class="s22">App.tsx</span>, by first importing it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import RepoSearch from &quot;./RepoSearch&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now add this under the app header passing in <span class="s22">ApolloClient</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;ApolloProvider client={client}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;App&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;header className=&quot;App-header&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;Header /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/header&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;RepoSearch client={client} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/ApolloProvider&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark829">Our repository </a><span class="s22">search </span>component is nicely set up now. In the next, section we can implement a search form.<a name="bookmark875">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark876">Implementing the search form</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s implement a search form that allows the user to supply an organization name and repository name:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l183"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Back in <span class="s22">RepoSearch.tsx</span>, let&#39;s start to define the state for the search fields, starting with the interface:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ISearch { orgName: string; repoName: string;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Now we can create a variable to hold our <span class="s22">search </span>state, along with a function to set it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 41pt;text-indent: 0pt;text-align: center;">const RepoSearch: React.SFC&lt;IProps&gt; = props =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">const [search, setSearch]: [ ISearch,</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(search: ISearch) =&gt; void</p><p class="s21" style="padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">] = React.useState({ orgName: &quot;&quot;, repoName: &quot;&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">return null;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s define the <span class="s22">search </span>form in our JSX:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;repo-search&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;form onSubmit={handleSearch}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;label&gt;Organization&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;line-height: 120%;text-align: left;">type=&quot;text&quot; onChange={handleOrgNameChange} value={search.orgName}</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;label&gt;Repository&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;line-height: 120%;text-align: left;">type=&quot;text&quot; onChange={handleRepoNameChange}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">value={search.repoName}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ve referenced a few bits that aren&#39;t implemented yet. So, we&#39;ll implement this one by one.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s add the <span class="s22">repo-search </span>class we referenced in <span class="s22">App.css</span>. We&#39;ll also style the labels and inputs along with the <b>Search </b>button as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">.repo-search { margin: 30px auto; width: 300px;</p><p class="s12" style="padding-left: 124pt;text-indent: 0pt;line-height: 120%;text-align: left;">font-family: Arial; font-size: 16px; text-align: left;</p><p class="s12" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">.repo-search label { display: block; margin-bottom: 3px; font-size: 14px;</p><p class="s12" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">.repo-search input { display: block; margin-bottom: 10px; font-size: 16px; color: #676666;</p><p class="s12" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">width: 100%;</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">.repo-search button { display: block; margin-bottom: 20px; font-size: 16px;</p><p class="s12" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;"><a name="bookmark877">Next, let&#39;s implement the input change handlers that simply update the </a><span class="s22">search</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleOrgNameChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">setSearch({ ...search, orgName: e.currentTarget.value });</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const handleRepoNameChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">setSearch({ ...search, repoName: e.currentTarget.value });</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">The final bit we need to implement is the <span class="s22">search </span>handler:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSearch = (e: React.FormEvent&lt;HTMLFormElement&gt;) =&gt; { e.preventDefault();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">// TODO - make GraphQL query</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We call <span class="s22">preventDefault </span>on the event argument to stop a full postback occurring.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark830">So, that&#39;s the search form started. We&#39;ll implement the GraphQL query in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark878">Implementing the search query</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are now at the point where we need to make the GraphQL query to do the actual search:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l184"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s start by creating an interface for the repository data we expect to get back from the query:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IRepo { id: string; name: string;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">description: string; viewerHasStarred: boolean; stargazers: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">totalCount: number;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">issues: { edges: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">node: {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 145pt;text-indent: 0pt;line-height: 120%;text-align: left;">id: string; title: string; url: string;</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">];</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is the structure we got back from the GitHub GraphQL Explorer in an earlier section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We are going to need a default value for this state. So, let&#39;s define this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const defaultRepo: IRepo = { id: &quot;&quot;,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">name: &quot;&quot;, description: &quot;&quot;,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: left;">viewerHasStarred: false, stargazers: {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">totalCount: 0</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">issues: { edges: [</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: -10pt;line-height: 120%;text-align: left;">node: { id: &quot;&quot;,</p><p class="s12" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">title: &quot;&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">url: &quot;&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">]</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can also define an interface for the query result as a whole:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IQueryResult { repository: IRepo;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Now we can create the query itself using a tagged template literal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const GET_REPO = gql`</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">query GetRepo($orgName: String!, $repoName: String!) { repository(owner: $orgName, name: $repoName) {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;line-height: 120%;text-align: left;">id name</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;line-height: 120%;text-align: left;"><a name="bookmark879">description viewerHasStarred stargazers {</a></p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">totalCount</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: -10pt;line-height: 120%;text-align: left;">issues(last: 5) { edges {</p><p class="s12" style="padding-left: 155pt;text-indent: -10pt;line-height: 120%;text-align: left;">node { id title url</p><p class="s12" style="padding-left: 155pt;text-indent: 0pt;text-align: left;">publishedAt</p><p class="s12" style="padding-top: 1pt;padding-left: 145pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">`;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is the query we made in the GitHub GraphQL Explorer in an earlier section. Unlike our previous queries, this one has parameters that we&#39;ll need to include when we execute the query a little later.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We need to store the data we get from the query in state. So, let&#39;s create a state variable called <span class="s22">repo</span>, along with a function to set it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: -21pt;line-height: 120%;text-align: left;">const [repo, setRepo]: [ IRepo,</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">(repo: IRepo) =&gt; void</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">] = React.useState(defaultRepo);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We are also going to store any problems with the <span class="s22">search </span>in state as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const [searchError, setSearchError]: [ string,</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">(searchError: string) =&gt; void</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">] = React.useState(&quot;&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s update the <span class="s22">handleSearch </span>arrow function to clear any search error state before we do the <span class="s22">search</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSearch = (e: React.FormEvent&lt;HTMLFormElement&gt;) =&gt; { e.preventDefault();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">setSearchError(&quot;&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s go on and use <span class="s22">ApolloClient </span>passed in as a prop to make the query:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSearch = (e: React.FormEvent&lt;HTMLFormElement&gt;) =&gt; { e.preventDefault();</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">setSearchError(&quot;&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">props.client</p><p class="s21" style="padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">.query&lt;IQueryResult&gt;({ query: GET_REPO</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">There is more work to do here, though. First, we need to pass in the <span class="s22">query </span>parameters for the organization name and repository name from the values we have in our <span class="s22">search </span>state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.query&lt;IQueryResult&gt;({ query: GET_REPO,</p><p class="s21" style="padding-left: 91pt;text-indent: 10pt;line-height: 106%;text-align: left;">variables: { orgName: search.orgName, repoName: search.repoName }</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">})</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">Now it&#39;s time to handle the response in the <span class="s22">then </span>method and set the <span class="s22">repo </span>state to the data in the response:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">props.client</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.query&lt;IQueryResult&gt;( ... )</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">.then(response =&gt; { setRepo(response.data.repository);</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 14pt;text-align: left;">We will also handle any errors in the <span class="s22">catch </span>method and update the</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">searchError <span class="p">state:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">props.client</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.query&lt;IQueryResult&gt;(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">.then(...)</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">.catch(error =&gt; { setSearchError(error.message);</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">If we try a <span class="s22">search </span>in the running app, the query will be made okay, but we are not showing the results yet. Let&#39;s do that in the next section.</p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark831">Rendering the search result</a><a name="bookmark880">&zwnj;</a><a name="bookmark881">&zwnj;</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s render the data we have got from the repository query:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l185"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s render the repository name with its number of stars, along with its description, under the <span class="s22">search </span>form if we have a search result:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;div className=&quot;repo-search&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 9pt;text-indent: 0pt;text-align: center;">&lt;form ...&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/form&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{repo.id &amp;&amp; (</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;repo-item&quot;&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;h4&gt;</p><p class="s21" style="padding-left: 145pt;text-indent: 0pt;text-align: left;">{repo.name}</p><p class="s21" style="padding-left: 150pt;text-indent: -5pt;line-height: 106%;text-align: left;">{repo.stargazers ? ` ${repo.stargazers.totalCount} stars` : &quot;&quot;}</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;/h4&gt;</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{repo.description}&lt;/p&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ll also render the last <span class="s22">5 </span>repository issues:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{repo.description}&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">Last 5 issues:</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{repo.issues &amp;&amp; repo.issues.edges ? (</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;ul&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">{repo.issues.edges.map(item =&gt; (</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">&lt;li key={item.node.id}&gt;{item.node.title}&lt;/li&gt;</p><p class="s21" style="text-indent: 0pt;text-align: right;">))}</p><p class="s21" style="text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">) : null}</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If a problem has occurred, let&#39;s render the error message we have captured in state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{repo.id &amp;&amp; (</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">)}</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{searchError &amp;&amp; &lt;div&gt;{searchError}&lt;/div&gt;}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark882">Let&#39;s add a bit of CSS in </a><span class="s22">App.css </span>for the title of the repository in the search result:</p></li></ol></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">.repo-search h4 { text-align: center;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we search for a repository, we should now see information about the repository rendered:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 122pt;text-indent: 0pt;text-align: left;"><span><img width="257" height="406" alt="image" src="Learn+React+with+TypeScript+3-2/Image_538.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are now getting comfortable querying a GraphQL server with Apollo. In the next section, we&#39;ll tackle mutations.</p><h4 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark832">Implementing a mutation with Apollo</a><a name="bookmark883">&zwnj;</a><a name="bookmark884">&zwnj;</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Let&#39;s allow users to star a GitHub repository in our app. This will involve sending a</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">mutation <span class="p">via Apollo:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l186"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, let&#39;s import the <span class="s22">Mutation </span>component from <span class="s22">react-apollo</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import { Mutation } from &quot;react-apollo&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Now let&#39;s create the <span class="s22">mutation</span>. The is the same query we executed in the GitHub GraphQL Explorer earlier:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const STAR_REPO = gql` mutation($repoId: ID!) {</p><p class="s12" style="padding-left: 123pt;text-indent: -10pt;line-height: 120%;text-align: left;">addStar(input: { starrableId: $repoId }) { starrable {</p><p class="s12" style="padding-left: 145pt;text-indent: -10pt;line-height: 120%;text-align: left;">stargazers { totalCount</p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">`;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">In the JSX, under where we render the description, let&#39;s place the <span class="s22">Mutation</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;p&gt;{repo.description}&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">{!repo.viewerHasStarred &amp;&amp; (</p><p class="s21" style="padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;Mutation mutation={STAR_REPO}</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 10pt;text-align: left;">variables={{ repoId: repo.id }}</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">{() =&gt; (</p><p class="s21" style="padding-left: 150pt;text-indent: -16pt;line-height: 106%;text-align: left;">// render Star button that invokes the mutation when clicked</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;line-height: 10pt;text-align: center;">)}</p><p class="s21" style="padding-left: 15pt;text-indent: 0pt;text-align: center;">&lt;/Mutation&gt;</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">)}</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">Last 5 issues:</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_539.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We only render the <span class="s22">mutation </span>if the <span class="s22">viewer </span>hasn&#39;t already starred the repository</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_540.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Mutation </span>component takes in the mutation we just defined along with the variables, which is the repository <span class="s22">id </span>in our case</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">The <span class="s22">Mutation </span>component has a children function that gives us access to the</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><span class="s22">addStar </span>function. So, let&#39;s render a <b>Star! </b>button that calls <span class="s22">addStar </span>when clicked:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Mutation</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{(<span class="s21">addStar</span>) =&gt; (</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s21" style="padding-left: 145pt;text-indent: -10pt;line-height: 106%;text-align: left;">&lt;button onClick={() =&gt; addStar()}&gt; Star!</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&lt;/button&gt;</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/Mutation&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">The <span class="s22">Mutation </span>component also tells us when the <span class="s22">mutation </span>is being executed via a <span class="s22">loading </span>property in a second argument in the children function. Let&#39;s use this to disable the button and inform the user that the star is being added:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Mutation</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{(addStar, { <span class="s21">loading </span>}) =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;button <span class="s21">disabled={loading} </span>onClick={() =&gt; addStar()}&gt;</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">{loading ? &quot;Adding ...&quot; : &quot;Star!&quot;}</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Mutation&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The <span class="s22">Mutation </span>component also tells us when there is an error. So, let&#39;s use this and render the error if one happens:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Mutation</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">{(addStar, { loading, <span class="s21">error </span>}) =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;button ...&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 134pt;text-indent: 0pt;text-align: left;"><a name="bookmark885">...</a></p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/button&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">{error &amp;&amp; &lt;div&gt;{error.toString()}&lt;/div&gt;}</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">)}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Mutation&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a href="http://github.com/" class="s20" target="_blank">If we try to add a star to a repository, the star should be successfully added. We can go to the GitHub repository in </a><a href="http://github.com/" class="a" target="_blank">github.com</a> <span class="p">to verify this.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a name="bookmark833">So, we are really getting to grips with Apollo now that we&#39;ve implemented both queries and a </a><span class="s22">mutation</span>. There is one thing that was a little odd, though, that we may have spotted. The number of stars doesn&#39;t update in our app after we star a repository. Even if we search for the repository again, the number of stars is the number before we started it. However, if we refresh the browser and search for the repository again, we do get the correct number of stars. So, what&#39;s going on here? We&#39;ll find out in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark886">Working with cached data in Apollo</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">We ended the last section with a bit of a mystery. Why aren&#39;t we getting the up-to-date number of stars in a repository <span class="s22">search </span>after we&#39;ve started it? The answer is that Apollo caches the repository data after the initial <span class="s22">search</span>. When the same query is executed, it gets the results from its cache, rather than getting the data from the GraphQL server.</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s double-check that this is the case:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l187"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s go to our app and open <b>Developer tools </b>on the <b>Network </b>tab and clear any previous requests:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="557" height="169" alt="image" src="Learn+React+with+TypeScript+3-2/Image_541.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;"><a name="bookmark887">Let&#39;s do a search. We&#39;ll see a couple of requests to the GitHub GraphQL server:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="213" alt="image" src="Learn+React+with+TypeScript+3-2/Image_542.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: justify;">Under the <b>Developer tools</b>, <b>Network </b>tab, let&#39;s clear the requests, and then in our app let&#39;s click the <b>Search </b>button again. We&#39;ll see that no network requests will be made, but the data is rendered. So, the data must be coming from a local cache.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark834">So, our </a><span class="s22">ApolloClient </span>that we configured using <span class="s22">apollo-boost </span>automatically caches queries in an in-memory cache. In the next section, we&#39;ll learn how to clear the cache so that our app shows the correct number of stars after a repository has been starred.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark888">Clearing the caching using refetchQueries</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We need a way of clearing the cached query result after a <span class="s22">mutation </span>has happened. One way of doing this is to use the <span class="s22">refetchQueries </span>prop on the <span class="s22">Mutation </span>component:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l188"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">Let&#39;s give this a go. The <span class="s22">refetchQueries </span>prop takes in an array of objects that contain the queries with the corresponding variable values that should be removed from the cache:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">&lt;Mutation mutation={STAR_REPO}</p><p class="s12" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">variables={{ repoId: repo.id }}</p><p class="s21" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">refetchQueries={[</p><p class="s21" style="padding-left: 135pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 146pt;text-indent: 0pt;line-height: 106%;text-align: left;">query: GET_REPO, variables: {</p><p class="s21" style="padding-left: 156pt;text-indent: 0pt;line-height: 106%;text-align: left;">orgName: search.orgName, repoName: search.repoName</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 146pt;text-indent: 0pt;text-align: left;"><a name="bookmark889">}</a></p><p class="s21" style="padding-left: 135pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">]}</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">&lt;/Mutation&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If we star a repository now, the number of stars doesn&#39;t update straight away. However, if the <b>Search </b>button is pressed, the stars are updated.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">So, the cache was cleared but the experience still isn&#39;t ideal. Ideally, we want the number of stars to be updated immediately after the <b>Star! </b>button is clicked.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">If we think through what we have just done, we are trying to bypass the cache. However, the cache is in place to help our app perform well.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark835">So, this approach doesn&#39;t feel great. The user experience still isn&#39;t ideal, and we have just made our app less performant. There must be a better way! We&#39;ll explore a different approach in the next section.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark890">Updating the cache after a Mutation</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s think through the problem one more time:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_543.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">We have some information about a repository in a cache that includes the number of stars it has.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_544.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">When we star the repository, we want to see that the number of stars has been incremented by one.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_545.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">What if we could just increment the number of stars in the cache by one? This should hopefully resolve the problem.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">So, let&#39;s give this a go and update the cache after the <span class="s22">mutation </span>has finished:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l189"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">First, let&#39;s remove the <span class="s22">refetchQueries </span>prop we implemented in the last section.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">There is an <span class="s22">update </span>prop on the <span class="s22">Mutation </span>component that we can leverage to update the cache. So, let&#39;s start to implement this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 118%;text-align: left;">&lt;Mutation mutation={STAR_REPO} <span class="s21">update={cache =&gt; {</span></p><p class="s21" style="padding-left: 135pt;text-indent: 0pt;line-height: 9pt;text-align: left;">// Get the cached data</p><p class="s21" style="padding-left: 135pt;text-indent: 0pt;text-align: left;">// update the cached data</p><p class="s21" style="padding-left: 135pt;text-indent: 0pt;text-align: left;">// update our state</p><p class="s21" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">}}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">&lt;/Mutation&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, we need to implement an arrow function that updates the cache that is available as an argument:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;Mutation</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">update={cache =&gt; {</p><p class="s21" style="padding-left: 91pt;text-indent: 21pt;line-height: 106%;text-align: left;">const data: { repository: IRepo } | null = cache.readQuery({</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 106%;text-align: left;">query: GET_REPO, variables: {</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 106%;text-align: left;">orgName: search.orgName, repoName: search.repoName</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 10pt;text-align: left;">}</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">});</p><p class="s21" style="padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">if (data === null) { return;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}}</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/Mutation&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">So, the cache has a <span class="s22">readQuery </span>function that we can use to get the cached data. If no data is found in the cache then we can exit the function without doing anything else.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">So, now that we have the data from the cache, we can increment the number of stars. To do this, we create a new object and spread the props from the cached repository into it and overwrite it with the incremented number of stars and the fact that the viewer has starred the repository:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">update={cache =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (data === null) { return;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">const newData = {</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 106%;text-align: left;">...data.repository, viewerHasStarred: true, stargazers: {</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 10pt;text-align: left;">...data.repository.stargazers,</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">totalCount: data.repository.stargazers.totalCount + 1</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;"><a name="bookmark891">};</a></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can then update the cache with its <span class="s22">writeQuery </span>function. We pass in the query with the variable values and the new data to store in the cache:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">update={cache =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">const newData = {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: justify;">cache.writeQuery({ query: GET_REPO, variables: {</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 106%;text-align: justify;">orgName: search.orgName, repoName: search.repoName</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">},</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">data: { repository: newData }</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">There&#39;s one more job to do, which is to update the <span class="s22">repo </span>state so that the number of stars updates immediately onscreen:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">update={cache =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">cache.writeQuery(...);</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">setRepo(newData);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">That should be it. If we try to star a repository in our app again, we should see that the number of stars is immediately incremented.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Caching is one of the great features that Apollo gives us out-of-the-box. The <span class="s22">update </span>prop on the <span class="s22">Mutation </span>component gives us a precise way to update our cache.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">refetchQueries </span>prop on the <span class="s22">Mutation </span>component is a more heavy-handed and less efficient way of forcing a cache to be updated.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark836">Summary</a><a name="bookmark892">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">GraphQL shines over REST because it allows us to efficiently get the data we need in the shape we need with far less effort. The GitHub GraphQL Explorer is a great tool for getting comfortable with the syntax. There are two main types of requests we can make to a GraphQL server:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_546.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">We can execute a <span class="s22">query </span>to read data</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_547.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">We can execute a <span class="s22">mutation </span>to write data</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">Queries allow us to specify the objects and fields we want in the response. We can rename them by using aliases. We can parameterize a query by defining variables. We can give variables types and specify whether each one is required or not with <span class="s22">! </span>at the end. There are query features that we didn&#39;t cover in this chapter, such as conditionally including fields and the powerful paging capability. In summary, it&#39;s an extremely powerful query language!</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Mutations share some of the same features as queries, such as being able to pass parameters into them. It&#39;s great how we get to control what data is included in the response as well.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">GraphQL operates over HTTP with HTTP <span class="s22">POST </span>requests to a single URL. The HTTP body contains the query or <span class="s22">mutation </span>information. We can use an HTTP client to interact with a GraphQL server, but we&#39;ll probably be more productive with a library like Apollo that is built specifically to interact with GraphQL servers.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;">React Apollo is a set of React bits and pieces that work with the core Apollo library. It gives us nice <span class="s22">Query </span>and <span class="s22">Mutation </span>React components for including queries and mutations right in our JSX, making our code arguably easier to read. Before we can use these components, we need to set up our <span class="s22">ApolloClient </span>object with the URL to the GraphQL server and any credentials. We also need to include an <span class="s22">ApolloProvider </span>component high in our component tree, above all the components that need GraphQL data.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: justify;">Caching is switched on out-of-the-box when we scaffold our project with <span class="s22">apollo-boost</span>. The <span class="s22">Mutation </span>component gives us <span class="s22">update </span>and <span class="s22">refetchQueries </span>props to manage cache updates.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">All in all, GraphQL is a very productive way to interact with backends, and it works really nicely with React and TypeScript apps.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">So, we&#39;ve learned many different aspects of React and TypeScript in this book so far. One big topic that we haven&#39;t covered yet is how we can robustly test the apps we build. We&#39;ll cover this in the next chapter.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark837">Questions</a><a name="bookmark893">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s have a go at some questions to test our knowledge on what we have just learned:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l190"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In the GitHub GraphQL Explorer, create a query to return the last five open issues in the React project. Return the issue title and the URL in the response.</p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Enhance the last query and make the number of issues that are returned a parameter and make this default to five.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Create a <span class="s22">mutation </span>in the <b>GitHub GraphQL Explorer </b>to unstar a starred repository. The <span class="s22">mutation </span>should take a required repository <span class="s22">id </span>in as a parameter.</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">What part of the HTTP request does the GraphQL query go in?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">What part of the HTTP request does the GraphQL <span class="s22">mutation </span>go in?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How can we make the response from the <span class="s22">react-apollo Query </span>component type safe?</p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Is caching on or off by default when you scaffold a project with <span class="s22">react-boost</span>?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What prop can we use on the <span class="s22">Mutation </span>component to update the local cache?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark838">Further reading</a><a name="bookmark894">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The following links are good resources of further information on GraphQL in general, along with React and Apollo:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_548.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://graphql.org/learn/" class="s20" target="_blank">The GraphQL docs are at </a><a href="https://graphql.org/learn/" class="a" target="_blank">https://graphql.org/</a><a href="https://graphql.org/learn/" target="_blank">learn/</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_549.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://www.apollographql.com/docs/" class="s20" target="_blank">The Apollo docs are at </a><a href="https://www.apollographql.com/docs/" class="a" target="_blank">https://www.apollographql.com/</a><a href="https://www.apollographql.com/docs/" target="_blank">docs/</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_550.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 107%;text-align: left;"><a href="https://www.apollographql.com/docs/react/" class="s20" target="_blank">The React section of the Apollo docs is at </a><a href="https://www.apollographql.com/docs/react/" class="a" target="_blank">https://www.apollographql.com/ docs/</a><a href="https://www.apollographql.com/docs/react/" target="_blank">react/</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="text-indent: 0pt;line-height: 69pt;text-align: left;"></h1><p style="text-indent: 0pt;text-align: left;"/><p class="s8" style="padding-top: 4pt;padding-left: 147pt;text-indent: 0pt;text-align: left;"><a name="bookmark895">Unit Testing with Jest</a><a name="bookmark916">&zwnj;</a><a name="bookmark917">&zwnj;</a></p><p style="padding-top: 23pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Building a robust suite of unit tests that catches real bugs and doesn&#39;t flag false positives as we refactor our code is one of the hardest tasks we do as software developers. Jest is a great testing tool that helps us meet this challenge, as we&#39;ll find out in this chapter.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="#bookmark587" class="s20">Perhaps the easiest bits of an app to unit test are pure functions, because there are no side effects to deal with. We&#39;ll revisit the validator functions we built in </a><span class="s12">Chapter 7</span>, <i>Working with Form</i>, and implement some unit tests against them in order to learn how to unit test pure functions.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Unit testing components is the most common type of unit test we&#39;ll be carrying out while building our apps. We&#39;ll learn about it in detail, and leverage a library to help us implement tests that don&#39;t unnecessarily break when we refactor our code.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll learn what snapshot testing is, and how we can leverage it to implement our tests quicker. Snapshots can be used for testing pure functions as well as components, so they are a very useful tool to have at our disposal.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;"><a href="#bookmark752" class="s20">Mocking is a challenging topic because if we mock too much, we aren&#39;t really testing our app. However, there are certain dependencies that make sense to mock, such as a REST API. We&#39;ll revisit the app we built in </a><span class="s12">Chapter 9</span>, <i>Interacting with Restful APIs</i>, in order to implement some unit tests against it and learn about mocking.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">When implementing a suite of unit tests for our app, it is useful to know which bits we&#39;ve tested and which bits we haven&#39;t. We&#39;ll learn how to use a code coverage tool to help us quickly identify areas of our app that need more unit tests.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_551.png"/></span></p><p style="padding-left: 53pt;text-indent: -48pt;line-height: 22pt;text-align: left;">The following topics will be covered in this chapter: Testing pure functions</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_552.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_553.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_554.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_555.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Testing components Using Jest snapshot tests Mocking dependencies Getting code coverage</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark896">Technical requirements</a><a name="bookmark918">&zwnj;</a><a name="bookmark919">&zwnj;</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">We use the following technologies in this chapter:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_556.png"/></span></p><p class="s22" style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 93%;text-align: left;"><span class="s9">Node.js and </span>npm<a href="https://nodejs.org/en/download/" class="s20" target="_blank">: TypeScript and React are dependent on these. Install them from the following link: </a><a href="https://nodejs.org/en/download/" class="a" target="_blank">https://nodejs.org/en/download/</a><span class="p">. If you already have these installed, make sure </span>npm <span class="p">is at least version 5.2.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_557.png"/></span></p><p class="s9" style="padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">Visual Studio Code<a href="https://code.visualstudio.com/" class="s20" target="_blank">: We&#39;ll need an editor to write our React and TypeScript code, which can be installed from </a><a href="https://code.visualstudio.com/" class="a" target="_blank">https://code.visualstudio.com/</a><span class="p">. We&#39;ll also need the TSLint extension (by egamma) and the Prettier extension (by Estben Petersen).</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_558.png"/></span></p><p class="s9" style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 90%;text-align: left;">React shop<a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/08-ReactRedux%EF%BB%BF" class="s20" target="_blank">: We&#39;ll be implementing unit tests on the React shop we created. This is available on GitHub at the following link: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/08-ReactRedux%EF%BB%BF" class="a" target="_blank">https://github.com/carlrip/ LearnReact17WithTypeScript/tree/master/08-</a><span class="s12">ReactRedux%EF%BB%BF</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="137" alt="image" src="Learn+React+with+TypeScript+3-2/Image_559.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">In order to restore code from a previous chapter, the <span class="s22">LearnReact17WithTypeScript </span><a href="https://github.com/carlrip/LearnReact17WithTypeScript" class="s20" target="_blank">repository at </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript" class="a" target="_blank">https://github.com/ carlrip/LearnReact17WithTypeScript</a><span class="s12"> </span>can be downloaded. The relevant folder can then be opened in Visual Studio Code and <span class="s22">npm</span></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;text-align: left;">install <a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/11-UnitTesting" class="s20" target="_blank">entered in the terminal to do the restore. All the code snippets in this chapter can be found online at the following link: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/11-UnitTesting" class="a" target="_blank">https://github. com/carlrip/LearnReact17WithTypeScript/tree/master/11- </a><span class="s12">UnitTesting</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_560.png"/></span></p><p class="s12" style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 91%;text-align: left;"><span class="s9">Chapter 9 code</span><a href="#bookmark752" class="s20">: We&#39;ll be implementing unit tests on the app we created in </a>Chapter 9<span class="p">, </span><span class="s10">Interacting with RESTful APIs</span><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs/03-AxiosWithClass" class="s20" target="_blank">. This is available on GitHub at the following link: </a><a href="https://github.com/carlrip/LearnReact17WithTypeScript/tree/master/09-RestfulAPIs/03-AxiosWithClass" class="a" target="_blank">https://github.com/carlrip/LearnReact17WithTypeScript/ tree/master/09-RestfulAPIs/03-</a>AxiosWithClass<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark897">Testing pure functions</a><a name="bookmark920">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_561.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">A pure function has a consistent output value for a given set of parameter values. Pure functions only depend on the function arguments, and on nothing outside the function. These functions also don&#39;t change any of the argument values passed into them.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;ll start our unit testing journey in this section by implementing a unit test on a pure function.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark921">The fact that these functions only depend on their parameter values makes them straightforward to unit test.</a></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are going to implement a unit test on the <span class="s22">required </span>validator function we created in our <span class="s22">Form </span>component in the React shop we built. If you haven&#39;t already, open this project in Visual Studio Code.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;"><a name="bookmark898">We are going to use Jest, which is very popular for unit testing React apps, as our unit testing framework. Luckily the </a><span class="s22">create-react-app </span>tool installs and configures this for us when creating a project. So, Jest is ready to be used in our React shop project.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark922">Creating a basic pure function test</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s create our first unit test in our project to test the <span class="s22">required </span>function in <span class="s22">Form.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l191"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Start by creating a file called <span class="s22">Form.test.tsx </span>in the <span class="s22">src </span>folder. We&#39;ll use this file for our test code, to test the code in <span class="s22">Form.tsx</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_562.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">test.tsx </span>extension is important because Jest automatically looks for files with this extension when finding tests to execute. Note that if our tests don&#39;t contain any JSX, we could use a <span class="s22">test.ts </span>extension.</p><p style="text-indent: 0pt;text-align: left;"/></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s import the function we want to test, along with a TypeScript type we need for a parameter value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { required, IValues } from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s start to create our test using the Jest <span class="s22">test </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When required is called with empty title, &#39;This must be populated&#39; should be returned&quot;, () =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">// TODO: implement the test</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The <span class="s22">test </span>function takes in two parameters:</p><p style="padding-top: 9pt;padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">The first parameter is a message telling us whether the test passed or not, which will be shown in the test output</p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">The second parameter is an arrow function that will contain our test</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll move on to calling the <span class="s22">required </span>function with a <span class="s22">values </span>parameter that contains an empty <span class="s22">title </span>property:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When required called with title being an empty string, an error should be &#39;This must be populated&#39;&quot;, () =&gt; {</p><p class="s21" style="padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">const values: IValues = { title: &quot;&quot;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">};</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">const result = required(&quot;title&quot;, values);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">// TODO: check the result is correct</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Our next task in this test is to check that the result from the <span class="s22">required </span>function is what we expect. We can use the Jest <span class="s22">expect </span>function to do this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When required called with title being an empty string, an error should be &#39;This must be populated&#39;&quot;, () =&gt; {</p><p class="s12" style="padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">const values: IValues = { title: &quot;&quot;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">const result = required(&quot;title&quot;, values);</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">expect(result).toBe(&quot;This must be populated&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_563.png"/></span></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;line-height: 93%;text-align: justify;">toBe <a href="https://jestjs.io/docs/en/expect" class="s20" target="_blank">is one of many Jest matcher functions we can use to check a variable value. The full list of functions can be found at </a><a href="https://jestjs.io/docs/en/expect" class="a" target="_blank">https://jestjs.io/docs/ en/</a><span class="s12">expect</span><span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We pass the variable we are checking into the <span class="s22">expect </span>function. We then chain a <span class="s22">toBe </span>matcher function onto this, which checks that the result from the <span class="s22">expect </span>function is the same as the parameter supplied to the <span class="s22">toBe </span>function.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Now that our test is complete, we can run the test by typing the following in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm test</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This starts the Jest test runner in watch mode, which means that it will continuously run, executing tests when we change the source files.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Jest will eventually find our test file, execute our test, and output the result to the terminal, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 102pt;text-indent: 0pt;text-align: left;"><span><img width="312" height="213" alt="image" src="Learn+React+with+TypeScript+3-2/Image_564.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s change the expected result in the test to make the test fail:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 36pt;text-indent: 0pt;text-align: center;">expect(result).toBe(&quot;This must be populated<span class="s21">X</span>&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">When we save the test file, Jest automatically executes the test and outputs the failure to the terminal, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 29pt;text-indent: 0pt;text-align: left;"><span><img width="495" height="304" alt="image" src="Learn+React+with+TypeScript+3-2/Image_565.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark923">Jest gives us valuable information about the failure. It tells us this:</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_566.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">Which test failed</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_567.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_568.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">What the expected result was, in comparison to the actual result The line in our test code where the failure occurred</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">This information helps us quickly resolve test failures.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Before we move on, let&#39;s correct our test code:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">expect(result).toBe(<span class="s21">&quot;This must be populated&quot;</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark899">When we save the change, the test should now pass.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark924">Understanding Jest watch options</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">After Jest executes our tests, it provides us with the following options:</p><ul id="l192"><li><p class="s21" style="padding-top: 8pt;padding-left: 34pt;text-indent: -10pt;text-align: left;">Press f to run only failed tests.</p></li><li><p class="s21" style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Press o to only run tests related to changed files.</p></li><li><p class="s21" style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Press p to filter by a filename regex pattern.</p></li><li><p class="s21" style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Press t to filter by a test name regex pattern.</p></li><li><p class="s21" style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Press q to quit watch mode.</p></li><li><p class="s21" style="padding-left: 34pt;text-indent: -10pt;text-align: left;">Press Enter to trigger a test run.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">These options let us specify what tests should be executed, which is really useful as the number of tests grows. Let&#39;s explore some of these options:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l193"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">If we press <i>F</i>, Jest will execute only the tests that have failed. In our code, we get confirmation that we have no failing tests:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 109pt;text-indent: 0pt;text-align: left;"><span><img width="290" height="70" alt="image" src="Learn+React+with+TypeScript+3-2/Image_569.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Let&#39;s press <i>F </i>to exit this option and take us back to all the options that are available.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;"><a name="bookmark925">Now, let&#39;s press </a><i>P</i>. This allows us to test a specific file or a collection of files with names matching a regular expression pattern. Let&#39;s enter <span class="s22">form </span>when prompted for the filename pattern:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="345" height="69" alt="image" src="Learn+React+with+TypeScript+3-2/Image_570.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="360" height="85" alt="image" src="Learn+React+with+TypeScript+3-2/Image_571.png"/></span></p><p style="padding-top: 2pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">Our test in <span class="s22">Form.test.tsx </span>will then be executed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are going to leave the filename filter on and press <i>T</i>. This will allow us to add an additional filter by test name. Let&#39;s enter <span class="s22">required</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 105pt;text-indent: 0pt;text-align: left;"><span><img width="300" height="99" alt="image" src="Learn+React+with+TypeScript+3-2/Image_572.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">Our test on the <span class="s22">required </span>function will then be executed.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">To clear the filters, we can press <i>C</i>.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_573.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;">If we receive an error<span class="s23">—</span><b>watch is not supported without git/hg, please use</b></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><b>--watchAll, </b>this will be because our project isn&#39;t in a Git repository. We can resolve the issue by entering the <span class="s22">git init </span>command in the Terminal.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark900">We have a good handle on the options available to execute our tests now.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark926">Adding structure to unit test results</a></h4><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">As we implement more unit tests, it is useful to add some structure to the unit test results so that we can read them more easily. There is a Jest function called <span class="s22">describe </span>that we can use to group the results of certain tests together. It may make reading test results easier if all the tests for a function are grouped together.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Let&#39;s do this and refactor the unit test we created earlier, using the <span class="s22">describe </span>function in Jest:</p><p class="s21" style="padding-top: 8pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">describe(&quot;required&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 23pt;text-indent: 10pt;line-height: 120%;text-align: left;">test(&quot;When required called with title being an empty string, an error should be &#39;This must be populated&#39;&quot;, () =&gt; {</p><p class="s12" style="padding-left: 56pt;text-indent: -10pt;line-height: 120%;text-align: left;">const values: IValues = { title: &quot;&quot;</p><p class="s12" style="padding-left: 45pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 45pt;text-indent: 0pt;line-height: 120%;text-align: left;">const result = required(&quot;title&quot;, values); expect(result).toBe(&quot;This must be populated&quot;);</p><p class="s12" style="padding-left: 34pt;text-indent: 0pt;text-align: left;">});</p><p class="s21" style="padding-top: 1pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;">The describe function takes in two parameters:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_574.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">The first parameter is the title for the group of tests. We have used the function name we are testing for this.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_575.png"/></span></p><p style="padding-top: 2pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">The second parameter is an arrow function that contains the tests to execute. We have placed our original test here.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">When we save our test file, the tests will automatically run, and our improved output is shown in the terminal with our test result under a <span class="s22">required </span>heading:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="146" alt="image" src="Learn+React+with+TypeScript+3-2/Image_576.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We&#39;re starting to get familiar with Jest, having implemented and executed a unit test. In the next section, we will move on to the more complex topic of unit testing components.</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark901">Testing components</a><a name="bookmark927">&zwnj;</a><a name="bookmark928">&zwnj;</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Unit testing a component is challenging because a component has dependencies such as the browser&#39;s DOM and the React library. How exactly can we render a component in our test code before we do the necessary checks? How can we trigger DOM events when coding</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">a user interaction, such as clicking a button?</p><p style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;">We&#39;ll answer these questions in this section, by implementing some tests on the <span class="s22">ContactUs</span></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 14pt;text-align: left;"><a name="bookmark902">component we created in our React shop.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark929">Creating a basic component test</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are going to start by creating a unit test to verify that submitting the <b>Contact Us </b>form without filling in the fields results in errors being displayed on the page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l194"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We are going to implement a unit test on the <span class="s22">ContactUs </span>component. We&#39;ll start by creating a file called <span class="s22">ContactUs.test.tsx </span>in the <span class="s22">src </span>folder.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We are going to use <span class="s22">ReactDOM </span>to render a test instance of the <span class="s22">ContactUs</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">component. Let&#39;s import <span class="s22">React </span>and <span class="s22">ReactDOM</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import ReactDOM from &quot;react-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We are going to simulate the form submit event, so let&#39;s import the <span class="s22">Simulate</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">function from the React testing utilities:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { Simulate } from &quot;react-dom/test-utils&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s now import the component we need to test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import ContactUs from &quot;./ContactUs&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We also need to import the submission result interface from <span class="s22">Form.tsx </span>as well:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import { ISubmitResult } from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s start to create our test using the Jest <span class="s22">test </span>function, with the results outputting to a <span class="s22">ContactUs </span>group:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">describe(&quot;ContactUs&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">test(&quot;When submit without filling in fields should display errors&quot;, () =&gt; {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">// TODO - implement the test</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">The first task in our test implementation is to create our React component in the DOM:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When submit without filling in fields should display errors&quot;, () =&gt; {</p><p class="s21" style="padding-left: 90pt;text-indent: -10pt;line-height: 106%;text-align: left;">const handleSubmit = async (): Promise&lt;ISubmitResult&gt; =&gt; { return {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">success: true</p><p class="s21" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 106%;text-align: left;">const container = document.createElement(&quot;div&quot;); ReactDOM.render(&lt;ContactUs onSubmit={handleSubmit} /&gt;,</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 10pt;text-align: left;">container);</p><p class="s21" style="padding-left: 79pt;text-indent: 0pt;line-height: 22pt;text-align: left;">// TODO - submit the form and check errors are shown ReactDOM.unmountComponentAtNode(container);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 92%;text-align: left;">First, we create a container <span class="s22">div </span>tag and then render our <span class="s22">ContactUs </span>component into this. We have also created a handler for the <span class="s22">onSubmit </span>prop, which returns success. The last line in the test cleans up by removing the DOM elements that were created in the test.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Next, we need to get a reference to the form, and then submit it:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">ReactDOM.render(&lt;ContactUs onSubmit={handleSubmit} /&gt;, container);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;line-height: 106%;text-align: left;">const form = container.querySelector(&quot;form&quot;); expect(form).not.toBeNull(); Simulate.submit(form!);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 240%;text-align: left;">// TODO - check errors are shown ReactDOM.unmountComponentAtNode(container);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;"><a name="bookmark930">Here is the step-by-step description:</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_577.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We use the <span class="s22">querySelector </span>function, passing in the <span class="s22">form </span>tag to get a reference to the <span class="s22">form </span>tag.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_578.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We then check that the form is not <span class="s22">null </span>by using the Jest <span class="s22">expect </span>function with the <span class="s22">not </span>and <span class="s22">toBeNull </span>functions chained together.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_579.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">submit </span>event is simulated using the <span class="s22">Simulate </span>function from the React testing utilities. We use an <span class="s22">! </span>after the <span class="s22">form </span>variable to inform the TypeScript compiler that it is not <span class="s22">null</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Our final task is to check that the validation errors are displayed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">Simulate.submit(form!);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">const errorSpans = container.querySelectorAll(&quot;.form-error&quot;); expect(errorSpans.length).toBe(2);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">ReactDOM.unmountComponentAtNode(container);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Let&#39;s see this step-by-step:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_580.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_581.png"/></span></p><p style="padding-top: 7pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We use the <span class="s22">querySelectorAll </span>function on the container DOM node, passing in a CSS selector to find the <span class="s22">span </span>tags that should contain the errors We then use the Jest <span class="s22">expect </span>function to verify that two errors are displayed</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -18pt;text-align: left;">When the test runs, it should pass successfully, giving us two passing tests:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="276" height="138" alt="image" src="Learn+React+with+TypeScript+3-2/Image_582.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="292" height="151" alt="image" src="Learn+React+with+TypeScript+3-2/Image_583.png"/></span></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: justify;">In this test, Jest is rendering the component in a fake DOM. The form <span class="s22">submit </span>event is also simulated, using the <span class="s22">simulate </span>function from standard React testing utilities. So, there&#39;s a lot of mocking going on in order to facilitate an interactive component test.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 92%;text-align: left;"><a name="bookmark931">Also note that we are referencing internal implementation details in our test code. We reference a </a><span class="s22">form </span>tag, along with a <span class="s22">form-error </span>CSS class. What if we later change this CSS class name to <span class="s22">contactus-form-error</span>? Our test would break, without there necessarily being a problem with our app.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark903">This is called a </a><b>false positive</b>, and can make code bases with these kinds of tests very time- consuming to change.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark932">Improving our tests with react-testing-library</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">react-testing-library is a set of utilities that helps us write maintainable tests for React components. It focuses heavily on helping us remove implementation details from our test code.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark904">We&#39;ll use this library to remove the CSS class references in our test code, and also the tight coupling to React&#39;s event system.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark933">Installing react-testing-library</a></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Let&#39;s install <span class="s22">react-testing-library </span>first as a development dependency via the terminal:</p><p class="s21" style="padding-top: 9pt;padding-left: 23pt;text-indent: 0pt;text-align: left;">npm install --save-dev react-testing-library</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark905">After a few seconds, this will be added to our project.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark934">Removing CSS class references from our tests</a></p><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ll make our first improvement to our test by removing the dependencies on the <span class="s22">form- error </span>CSS class. Instead, we will get a reference to the errors via the error text, which is what the user sees onscreen and not an implementation detail:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l195"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">We&#39;ll import a <span class="s22">render </span>function from <span class="s22">react-testing-library</span>, which we will now use to render our component. We&#39;ll also import a <span class="s22">cleanup </span>function, which we&#39;ll use at the end of our tests to remove the test component from the DOM:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import { render, cleanup} from &quot;react-testing-library&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can render our component using the <span class="s22">render </span>function we have just imported, rather than using <span class="s22">ReactDOM.render</span>, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When submit without filling in fields should display errors&quot;, () =&gt; {</p><p class="s12" style="padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSubmit = async (): Promise&lt;ISubmitResult&gt; =&gt; { return {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">success: true</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-top: 1pt;padding-left: 36pt;text-indent: 0pt;text-align: center;">const { container, getAllByText } = render(</p><p class="s21" style="padding-left: 25pt;text-indent: 0pt;text-align: center;">&lt;ContactUs onSubmit={handleSubmit} /&gt;</p><p class="s21" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">const form = container.querySelector(&quot;form&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We get the container DOM node back in a <span class="s22">container </span>variable, along with a <span class="s22">getallByText </span>function, which we&#39;ll use to get a reference to the displayed errors.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s now use the <span class="s22">getAllByText </span>function to get the errors displayed on the page:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">Simulate.submit(form!);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const errorSpans = getAllByText(&quot;This must be populated&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">expect(errorSpans.length).toBe(2);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">The last change we are going to make is to clean up our DOM at the end of the test using the <span class="s22">cleanup </span>function we just imported, rather</p></li></ol></li></ol><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">than <span class="s22">ReactDOM.unmountComponentAtNode</span>. We are also going to do this outside our test, in Jest&#39;s <span class="s22">afterEach </span>function. Our completed test should now look like the following:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">afterEach(cleanup);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">describe(&quot;ContactUs&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">test(&quot;When submit without filling in fields should display errors&quot;, () =&gt; {</p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSubmit = async (): Promise&lt;ISubmitResult&gt; =&gt; { return {</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">success: true</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;"><a name="bookmark935">const { container, getAllByText } = render(</a></p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ContactUs onSubmit={handleSubmit} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">const form = container.querySelector(&quot;form&quot;); expect(form).not.toBeNull(); Simulate.submit(form!);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">const errorSpans = getAllByText(&quot;This must be populated&quot;); expect(errorSpans.length).toBe(2);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 39pt;text-indent: 0pt;text-align: center;"><a name="bookmark906">When the test runs, it should still execute okay and the tests should pass.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark936">Using fireEvent for user interaction</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We are now going to switch to depending on the native event system, rather than React&#39;s event system which sits on top of it. This gets us closer to testing what happens when users are using our app, and increases our confidence in our test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l196"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Let&#39;s start by adding the <span class="s22">fireEvent </span>function to the import statement from</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">react-testing-library<span class="p">:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import { render, cleanup, <span class="s21">fireEvent </span>} from &quot;react-testing-library&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We are going to add the <span class="s22">getByText </span>function to the destructured variables from the call to the <span class="s22">render </span>function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const { getAllByText, <span class="s21">getByText </span>} = render(</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ContactUs onSubmit={handleSubmit} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We can also remove the destructured <span class="s22">container </span>variable, as that won&#39;t be needed anymore.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can then use this function to get a reference to the <b>Submit </b>button. After that, we can use the <span class="s22">fireEvent </span>function we imported to click the button:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const { getAllByText, getByText } = render(</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ContactUs onSubmit={handleSubmit} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">const submitButton = getByText(&quot;Submit&quot;); fireEvent.click(submitButton);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;"><a name="bookmark937">const errorSpans = getAllByText(&quot;This must be populated&quot;); expect(errorSpans.length).toBe(2);</a></p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 157%;text-align: left;">The previous code that referenced the <span class="s22">form </span>tag has now been removed. When the test runs, it still passes.</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark907">So, our test references items that the user sees, rather than implementation details, and is far less likely to unexpectedly break.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark938">Creating a second test for a valid form submission</a></p><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Now that we have got the gist of how to write robust tests, let&#39;s add a second test to check that no validation errors are shown when the form is filled incorrectly:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l197"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ll start by creating a new test in our <span class="s22">ContactUs </span>group:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">describe(&quot;ContactUs&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">test(&quot;When submit without filling in fields should display errors&quot;, () =&gt; {</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 10pt;line-height: 106%;text-align: left;">test(&quot;When submit after filling in fields should submit okay&quot;, () =&gt; {</p><p class="s21" style="padding-left: 91pt;text-indent: 21pt;line-height: 106%;text-align: left;">// TODO - render component, fill in fields, submit the form and check there are no errors</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We&#39;ll render the component in the same way as the first test, but destructuring slightly different variables:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When submit after filling in fields should submit okay&quot;, () =&gt; {</p><p class="s21" style="padding-left: 112pt;text-indent: -10pt;line-height: 106%;text-align: left;">const handleSubmit = async (): Promise&lt;ISubmitResult&gt; =&gt; { return {</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 10pt;text-align: left;">success: true</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">const { container, getByText, getByLabelText } = render(</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;ContactUs onSubmit={handleSubmit} /&gt;</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Now:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_584.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;ll need the <span class="s22">container </span>object to check whether there are any errors displayed</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_585.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">We&#39;ll use the <span class="s22">getByText </span>function to locate the <b>Submit </b>button</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_586.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We&#39;ll use the <span class="s22">getByLabelText </span>function to get references to our inputs</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We can now get a reference to the name input using the <span class="s22">getByLabelText</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">function. After that, we do a little check to verify that the name input does exist:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const { container, getByText, getByLabelText } = render(</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;ContactUs onSubmit={handleSubmit} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">const nameField: HTMLInputElement = getByLabelText( &quot;Your name&quot;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">) as HTMLInputElement; expect(nameField).not.toBeNull();</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We then need to simulate the user filling in this input. We do this by calling the native <span class="s22">change </span>event, passing in the required event argument, which includes our input value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const nameField: HTMLInputElement = getByLabelText( &quot;Your name&quot;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 118%;text-align: left;">) as HTMLInputElement; expect(nameField).not.toBeNull(); <span class="s21">fireEvent.change(nameField, {</span></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 9pt;text-align: left;">target: { value: &quot;Carl&quot; }</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="529" height="67" alt="image" src="Learn+React+with+TypeScript+3-2/Image_587.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">We use a type assertion after the call to <span class="s22">getByLabelText </span>to inform the TypeScript compiler that the returned element is of type <span class="s22">HTMLInputElement</span>, so that we don&#39;t get a compilation error.</p><p style="text-indent: 0pt;text-align: left;"/><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We have simulated the user setting the name field as <span class="s22">Carl</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We then can follow the same pattern for filling in the email field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">const nameField: HTMLInputElement = getByLabelText( &quot;Your name&quot;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">) as HTMLInputElement; expect(nameField).not.toBeNull(); fireEvent.change(nameField, {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">target: { value: &quot;Carl&quot; }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">const emailField = getByLabelText(&quot;Your email address&quot;) as HTMLInputElement;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">expect(emailField).not.toBeNull(); fireEvent.change(emailField, {</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="mailto:carl.rippon@testmail.com" class="s26" target="_blank">target: { value: </a>&quot;carl.rippon@testmail.com&quot; }</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">Here, we have simulated the user setting the email field as</p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><a href="mailto:carl.rippon@testmail.com" class="s7" target="_blank">carl.rippon@testmail.com</a><a href="mailto:carl.rippon@testmail.com" class="s20" target="_blank">.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can then submit the form by clicking the <b>Submit </b>button, in the same way as in our first test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">fireEvent.change(emailField, {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;"><a href="mailto:carl.rippon@testmail.com" class="a" target="_blank">target: { value: </a>&quot;carl.rippon@testmail.com&quot; }</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">const submitButton = getByText(&quot;Submit&quot;); fireEvent.click(submitButton);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 90%;text-align: left;">Our final task is to verify there are no errors displayed on the screen. Unfortunately, we can&#39;t use the <span class="s22">getAllByText </span>function we used in the last test, as this expects to find at least one element, and in our case we expect there to be no elements. So, before we carry out this check, we are going to add a wrapping <span class="s22">div </span>tag around errors. Let&#39;s go to <span class="s22">Form.tsx </span>and do this:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{context.errors[name] &amp;&amp; context.errors[name].length &gt; 0 &amp;&amp; (</p><p class="s21" style="padding-top: 1pt;padding-left: 96pt;text-indent: 0pt;text-align: left;">&lt;div data-testid=&quot;formErrors&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">{context.errors[name].map(error =&gt; (</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;span key={error} className=&quot;form-error&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">{error}</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/span&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">))}</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">We&#39;ve given the <span class="s22">div </span>tag a <span class="s22">data-testid </span>attribute, which we&#39;ll use in our test.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;"><a name="bookmark939">Let&#39;s go back to our test. We can now locate the </a><span class="s22">div </span>tag around the errors using the <span class="s22">data-testid </span>attribute. We can then verify that this <span class="s22">div </span>tag is <span class="s22">null</span>, because no errors are displayed:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">fireEvent.click(submitButton);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">const errorsDiv = container.querySelector(&quot;[data- testid=&#39;formErrors&#39;]&quot;); expect(errorsDiv).toBeNull();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: right;">When the test runs in our suite of tests, we&#39;ll find we now have three passing tests.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">Isn&#39;t referencing the <span class="s22">data-testid </span>attribute an implementation detail, though? The user doesn&#39;t see or care about the <span class="s22">data-testid </span>attribute<span class="s23">—</span>this seems to contradict what we said earlier.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">It is kind of an implementation detail, but it is specifically for our test. So, an implementation refactor is unlikely to unexpectedly break our test.</p><p style="padding-top: 7pt;text-indent: 0pt;text-align: right;"><a name="bookmark908">In the next section, we are going to add another test, this time using Jest snapshot tests.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark940">Using Jest snapshot tests</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">A snapshot test is one where Jest compares all the elements and attributes in a rendered component to a previous snapshot of the rendered component. If there are no differences, then the test passes.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We are going to add a test to verify the <span class="s22">ContactUs </span>component renders OK, by checking the DOM nodes using a Jest snapshot test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l198"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We&#39;ll create a test with the title <span class="s22">Renders okay </span>in the <span class="s22">ContactUs </span>group of tests, rendering the component in the same way as previously:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">describe(&quot;ContactUs&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">test(&quot;Renders okay&quot;, () =&gt; {</p><p class="s21" style="padding-left: 123pt;text-indent: -10pt;line-height: 106%;text-align: left;">const handleSubmit = async (): Promise&lt;ISubmitResult&gt; =&gt; { return {</p><p class="s21" style="padding-left: 134pt;text-indent: 0pt;line-height: 10pt;text-align: left;">success: true</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s21" style="padding-left: 91pt;text-indent: 21pt;line-height: 106%;text-align: left;">const { container } = render(&lt;ContactUs onSubmit={handleSubmit} /&gt;);</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">// TODO - do the snapshot test</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We can now add the line to carry out the snapshot test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">test(&quot;Renders okay&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">const handleSubmit = async (): Promise&lt;ISubmitResult&gt; =&gt; { return {</p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">success: true</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">const { container } = render(&lt;ContactUs onSubmit={handleSubmit} /&gt;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">expect(container).toMatchSnapshot();</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">Doing a snapshot test is pretty simple. We pass the DOM node we want to compare into Jest&#39;s <span class="s22">expect </span>function, and then chain the <span class="s22">toMatchSnapshot </span>function after it.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="273" height="159" alt="image" src="Learn+React+with+TypeScript+3-2/Image_588.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="285" height="175" alt="image" src="Learn+React+with+TypeScript+3-2/Image_589.png"/></span></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">When the test runs, we&#39;ll get confirmation that the snapshot has been written in the terminal, as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we look at our <span class="s22">src </span>folder, we&#39;ll see it now contains a <span class="s22">snapshots </span>folder. If we look in this folder, we&#39;ll see a file called <span class="s22">ContactUs.test.tsx.snap</span>. Opening the file, we&#39;ll see the following content:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">// Jest Snapshot v1, https://goo.gl/fbAQLP</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">exports[`ContactUs Renders okay 1`] = `</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;form</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">class=&quot;form&quot;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">novalidate=&quot;&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&lt;div</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">class=&quot;form-group&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;label</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">for=&quot;name&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;text-align: left;">Your name</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;/label&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 123pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 134pt;text-indent: 0pt;line-height: 120%;text-align: left;">id=&quot;name&quot; type=&quot;text&quot; value=&quot;&quot;</p><p class="s12" style="padding-left: 49pt;text-indent: 0pt;text-align: center;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">&lt;/form&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">`;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">Some of the content is stripped out in this snippet, but we get the gist: we have a copy of every DOM node including their attributes from the <span class="s22">container </span>element we passed into the <span class="s22">toMatchSnapshot </span>function.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">This test is heavily coupled to our implementation, though. So, any change to our DOM structure or attributes will break our test.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">As an example, let&#39;s add a <span class="s22">div </span>tag inside our <span class="s22">Form </span>component in <span class="s22">Form.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;form ...&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div&gt;<span class="s12">{this.props.children}</span>&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">&lt;/form&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark941">When the test runs, we&#39;ll see confirmation that our test has broken. Jest does a great job of showing us the difference in the terminal:</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 74pt;text-indent: 0pt;text-align: left;"><span><img width="386" height="323" alt="image" src="Learn+React+with+TypeScript+3-2/Image_590.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We are happy that this is a valid change, so we can press <i>U </i>to let Jest update the snapshot:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 116pt;text-indent: 0pt;text-align: left;"><span><img width="274" height="139" alt="image" src="Learn+React+with+TypeScript+3-2/Image_591.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark942">So, are snapshot tests a good thing or a bad thing? They are volatile because they are tightly coupled to the implementation of a component. However they are super-easy to create, and when they do break, Jest does a great job of highlighting the problem area and allowing us to efficiently correct the test snapshot. They are well worth a try to see if your team gains value from them.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark909">We have learned a lot already in this chapter about unit testing React and TypeScript apps. Next up, we&#39;ll learn how we can mock dependencies.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark943">Mocking dependencies</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Mocking a component&#39;s dependencies can make the component easier to test. However, if we mock too many things, is the test really verifying that the component will work in our real app?</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Establishing what to mock is one of the hardest tasks when writing unit tests. There are some things that make a lot of sense to mock, though, such as REST APIs. A REST API is a pretty fixed contract between the frontend and backend. Mocking a REST API also allows our tests to run nice and fast.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: justify;"><a name="bookmark910">In this section, we&#39;ll eventually learn how to mock REST API calls made with </a><span class="s22">axios</span>. First, though, we&#39;ll learn about Jest&#39;s function mocking feature.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark944">Using a mock function in Jest</a></h4><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">We are going to make another improvement to the test that verified that submitting</p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">the <b>Contact Us </b>form without filling in the fields results in errors being displayed on the page. We are going to add an additional check, to make sure the submit handler is not executed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l199"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s go back to the first component test we wrote: <span class="s22">ContactUs.test.tsx</span>. We manually created a <span class="s22">handleSubmit </span>function that we referenced in our instance of the <span class="s22">ContactUs </span>component. Let&#39;s change this to a Jest mock function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const handleSubmit = <span class="s21">jest.fn()</span>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Our test will run correctly, as it did before, but this time Jest is mocking the function for us.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Now that Jest is mocking the submit handler, we can check whether it was called as an additional check at the end of our test. We do this using the <span class="s22">not</span></p></li></ol><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">and <span class="s22">toBeCalled </span>Jest matcher functions:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const errorSpans = container.querySelectorAll(&quot;.form-error&quot;); expect(errorSpans.length).toBe(2);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">expect(handleSubmit).not.toBeCalled();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">This is really nice, because we&#39;ve not only simplified our submit handler function, but we&#39;ve also really easily added a check to verify that it hasn&#39;t been called.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Let&#39;s move on to the second test we implemented, which verified that a valid <b>Contact Us </b>form was submitted okay:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l200"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We&#39;ll again change the <span class="s22">handleSubmit </span>variable to reference a Jest mock function:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">const handleSubmit = <span class="s21">jest.fn()</span>;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Let&#39;s verify that the submit handler is called. We do this using</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">the <span class="s22">toBeCalledTimes </span>Jest function to pass in the number of times we expect the function to be called, which is <span class="s22">1 </span>in our case:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const errorsDiv = container.querySelector(&quot;[data- testid=&#39;formErrors&#39;]&quot;); expect(errorsDiv).toBeNull();</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">expect(handleSubmit).toBeCalledTimes(1);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">When the test executes, it should still pass.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">There is one other useful check we can do. We know that the submit handler is being called, but does it have the correct arguments? We can use the <span class="s22">toBeCalledWith </span>Jest function to check this:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">expect(handleSubmit).toBeCalledTimes(1);</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: -10pt;line-height: 106%;text-align: left;">expect(handleSubmit).toBeCalledWith({ name: &quot;Carl&quot;,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 106%;text-align: left;"><a href="mailto:carl.rippon@testmail.com" class="s26" target="_blank">email: </a>&quot;carl.rippon@testmail.com&quot;, reason: &quot;Support&quot;,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">notes: &quot;&quot;</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 55pt;text-indent: 0pt;text-align: left;">Again, when the test executes, it should still pass.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;"><a name="bookmark911">So, by letting Jest mock our submit handler, we&#39;ve quickly added a few valuable additional checks to our tests.</a><a name="bookmark945">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h4 style="padding-left: 5pt;text-indent: 0pt;text-align: justify;"><a name="bookmark946">Mocking Axios with axios-mock-adapter</a></h4><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: justify;"><a href="#bookmark752" class="s20">We are going to move to the project we created in </a><span class="s12">Chapter 9</span>, <i>Interacting with Restful APIs. </i>We are going to add a test that verifies the posts are rendered on the page correctly. We&#39;ll mock the JSONPlaceholder REST API so we are in control of the data that is returned, and so that our test will execute nicely and quickly:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l201"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">First, we need to install the <span class="s22">axios-mock-adapter </span>package as a development dependency:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install axios-mock-adapter --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We are also going to install <span class="s22">react-testing-library</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-top: 4pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">npm install react-testing-library --save-dev</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The project already has a test file, <span class="s22">App.test.tsx</span>, which includes a basic test on the <span class="s22">App </span>component. We&#39;ll remove the test, but leave the imports, as we&#39;ll need these.</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">In addition, we are going to import some functions from react-testing- library, <span class="s22">axios </span>and a <span class="s22">MockAdapter </span>class that we&#39;ll use to mock the REST API calls:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { render, cleanup, waitForElement } from &quot;react-testing- library&quot;;</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">import axios from &quot;axios&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">import MockAdapter from &quot;axios-mock-adapter&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s add the usual cleanup line that will execute after each test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">afterEach(cleanup);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We&#39;ll create our test with an appropriate description, and place it under an <span class="s22">App</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">group:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">describe(&quot;App&quot;, () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">test(&quot;When page loads, posts are rendered&quot;, async () =&gt; {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 21pt;line-height: 120%;text-align: left;">// TODO - render the app component with a mock API and check that the posts in the rendered list are as expected</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Note that the <span class="s22">arrow </span>function is marked with the <span class="s22">async </span>keyword. This is because we&#39;ll eventually make an asynchronous call in our test.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Our first job in our test is to mock the REST API call using the <span class="s22">MockAdapter</span></p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">class:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">test(&quot;When page loads, posts are rendered&quot;, async () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 21pt;line-height: 106%;text-align: left;">const mock = new MockAdapter(axios); mock.onGet(&quot;https://jsonplaceholder.typicode.com/posts&quot;).reply( 200, [</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">{</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">userId: 1,</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">id: 1,</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 106%;text-align: left;">title: &quot;title test 1&quot;, body: &quot;body test 1&quot;</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">},</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;text-align: left;">{</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">userId: 1,</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;text-align: left;">id: 2,</p><p class="s21" style="padding-left: 123pt;text-indent: 0pt;line-height: 106%;text-align: left;">title: &quot;title test 2&quot;, body: &quot;body test 2&quot;</p><p class="s21" style="text-indent: 0pt;line-height: 10pt;text-align: right;">}</p><p class="s21" style="text-indent: 0pt;text-align: right;">]);</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">We use the <span class="s22">onGet </span>method to define the response HTTP status code and body we want when the URL to get the posts is called. So, the call to the REST API should return two posts containing our test data.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We need to check that the posts are rendered correctly. In order to do this, we are going to add a <span class="s22">data-testid </span>attribute to the unordered posts list in <span class="s22">App.tsx</span>. We are also only going to render this when we have data:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">{this.state.posts.length &gt; 0 &amp;&amp; (</p><p class="s12" style="padding-left: 30pt;text-indent: 0pt;text-align: center;">&lt;ul className=&quot;posts&quot; <span class="s21">data-testid=&quot;posts&quot;</span>&gt;</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">...</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;"><a name="bookmark947">Moving back to our test, we can now render the component and destructure the</a></p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">getByTestId <span class="p">function:</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">mock.onGet(&quot;https://jsonplaceholder.typicode.com/posts&quot;).reply(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">;</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const { getByTestId } = render(&lt;App /&gt;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;">We need to check that the rendered posts are correct, but this is tricky, because these are rendered asynchronously. We need to wait for the posts list to be added to the DOM before doing our checks. We can do this using the <span class="s22">waitForElement </span>function from react-testing-library:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">const { getByTestId } = render(&lt;App /&gt;);</p><p class="s21" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;line-height: 106%;text-align: left;">const postsList: any = await waitForElement(() =&gt; getByTestId(&quot;posts&quot;));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">waitForElement </span>function takes in an arrow function as a parameter, which in turn returns the element we are waiting for. We use the <span class="s22">getByTestId </span>function to get the posts list, which finds it using its <span class="s22">data-testid </span>attribute.</p></li><li><p style="padding-top: 9pt;padding-left: 53pt;text-indent: -18pt;line-height: 89%;text-align: left;">We can then use a snapshot test to check that the content in the posts list is correct:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 118%;text-align: left;">const postsList: any = await waitForElement(() =&gt; getByTestId(&quot;posts&quot;)); <span class="s21">expect(postsList).toMatchSnapshot();</span></p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -18pt;line-height: 91%;text-align: left;">Before our test can execute successfully, we need to make a change in <span class="s22">tsconfig.json </span>so that the TypeScript compiler knows that we are using <span class="s22">async </span>and <span class="s22">await</span>:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">&quot;compilerOptions&quot;: { &quot;target&quot;: &quot;es5&quot;,</p><p class="s21" style="padding-left: 112pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&quot;lib&quot;: [&quot;dom&quot;, &quot;es2015&quot;],</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">},</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;include&quot;: [&quot;src&quot;]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">When the test executes, the snapshot is created. If we inspect the snapshot, it will contain the two list items containing data that we told the REST API to return.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark948">We&#39;ve learned about some great features in Jest and react-testing-library that help us write maintainable tests on pure functions and React components.</a></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark912">How can we tell what bits of our app are covered by unit tests, though</a><span class="s23">—</span>and, more importantly, what bits are uncovered? We&#39;ll find out in the next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark949">Getting code coverage</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Code coverage is how we refer to how much of our app code is covered by unit tests. As we write our unit tests, we&#39;ll have a fair idea of what code is covered and what code is not covered, but as the app grows and time passes, we&#39;ll lose track of this.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Jest comes with a great code coverage tool, so we don&#39;t have to keep what is covered in our heads. In this section, we&#39;ll use this to discover the code coverage in the project we worked on in the previous section, where we mocked <span class="s22">axios</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l202"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: justify;">Our first task is to add an <span class="s22">npm </span>script that will run the tests with the coverage tracking tool switched on. Let&#39;s add a new script called <span class="s22">test-coverage </span>that includes the <span class="s22">--coverage </span>option when <span class="s22">react-scripts </span>is executed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: justify;">&quot;scripts&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;line-height: 120%;text-align: justify;">&quot;start&quot;: &quot;react-scripts start&quot;, &quot;build&quot;: &quot;react-scripts build&quot;, &quot;test&quot;: &quot;react-scripts test&quot;,</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">&quot;test-coverage&quot;: &quot;react-scripts test --coverage&quot;,</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;eject&quot;: &quot;react-scripts eject&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">},</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">We can then run this command in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">npm run test-coverage</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="531" height="218" alt="image" src="Learn+React+with+TypeScript+3-2/Image_592.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="545" height="234" alt="image" src="Learn+React+with+TypeScript+3-2/Image_593.png"/></span></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">After a few seconds, Jest will render some nice high-level coverage statistics on each file in the terminal:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we look in our project file structure, we&#39;ll see that a <span class="s22">coverage </span>folder has been added with a <span class="s22">lcov-report </span>folder within it. There is an <span class="s22">index.html </span>file within the <span class="s22">lcov-report </span>folder that contains more detailed information on the coverage within each file. Let&#39;s open this and have a look:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="155" alt="image" src="Learn+React+with+TypeScript+3-2/Image_594.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;line-height: 152%;text-align: left;">We see the same information as presented in the terminal. What do these four columns of statistics mean?</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_595.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Statements </span>column shows how many statements in the code have been executed</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_596.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">The <span class="s22">Branches </span>column shows how many branches in the conditional statements in the code have been executed</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_597.png"/></span></p><p style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;"><a name="bookmark950">The </a><span class="s22">Function </span>column shows how many functions in the code have been called</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_598.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;line-height: 92%;text-align: left;">The <span class="s22">Line </span>column shows how many lines in the code have been executed. Generally, this will be the same as the <span class="s22">Statements </span>figure. However, it can be different if multiple statements have been placed on a single line. For example, the following is counted as a single line, but two statements:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 27pt;text-indent: 0pt;text-align: center;">let name = &quot;Carl&quot;; console.log(name);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We can drill into each file to find which specific bits of code aren&#39;t covered. Let&#39;s click on the <span class="s22">App.tsx </span>link:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 68pt;text-indent: 0pt;text-align: left;"><span><img width="402" height="383" alt="image" src="Learn+React+with+TypeScript+3-2/Image_599.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">The <span class="s22">1x </span>with a green background to the left of the lines of code indicates that those lines have been executed by our tests once. The code highlighted in red is code that isn&#39;t covered by our tests.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark913">So, getting coverage statistics and identifying additional tests that we may want to implement is pretty easy. It&#39;s something well worth using to give us confidence that our app is well-tested.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark951">Summary</a></h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">In this chapter, we learned how to test pure functions written in TypeScript using Jest. We simply execute the function with the parameters we want to test, and use Jest&#39;s <span class="s22">expect </span>function chained with one of Jest&#39;s matcher functions, such as <span class="s22">toBe</span>, to validate the result.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We looked at how to interact with Jest&#39;s test runner, and how to apply filters so that only the tests we are focusing on are executed. We learned that testing React and TypeScript components is more involved than testing pure functions, but Jest and react-testing- library give us a great deal of help.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 94%;text-align: left;">We also learned how to render a component using the <span class="s22">render </span>function, and how to interact with and inspect elements using various functions such as <span class="s22">getByText </span>and <span class="s22">getLabelByText </span>from react-testing-library.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 13pt;text-align: left;">We learned that we can easily test asynchronous interactions using the</p><p class="s22" style="padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">waitForElement <span class="p">function in react-testing-library as well. We now understand the benefit of not referencing implementation details in our tests, which will help us build more robust tests.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">We also discussed Jest&#39;s clever snapshot testing tool. We looked at how these tests can regularly break, but also why they are incredibly easy to create and change.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The ability to mock and spy into functions is another great Jest feature we now know about. Checking that functions for component event handlers have been called with the right parameters can really add value to our tests.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We discussed the <span class="s22">axios-mock-adapter </span>library which we can use for mocking <span class="s22">axios </span>REST API requests. This allows us to easily test container components that interact with RESTful APIs.</p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 91%;text-align: left;">We now know how to quickly identify the additional tests that we need to implement to give us confidence that our app is well-tested. We created an <span class="s22">npm </span>script command to enable us to do this, using <span class="s22">react-scripts </span>and the <span class="s22">--coverage </span>option.</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Overall, we now have the knowledge and the tools to robustly create unit tests for our apps with Jest.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 5pt;text-indent: 0pt;line-height: 90%;text-align: left;">Jasmine and Mocha are two popular alternative testing frameworks to Jest. The big advantage of Jest is that it is configured by <span class="s22">create-react-app </span>to work out the box. We would have to configure Jasmine and Mocha manually if we wanted to use them. Jasmine and Mocha are worth considering, though, if your team is already experienced with either of these tools, rather than learning another testing framework.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark914">Enzyme is another popular library used with Jest to test React apps. It supports shallow rendering, which is a way of rendering only the top-level elements in a component and not child components. It is well worth exploring, but remember that the more we mock, the further from the truth we get, and the less confidence we have that our app is well-tested.</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark952">Questions</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l203"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Let&#39;s say we are implementing a Jest test and we have a variable called <span class="s22">result</span>, which we want to check isn&#39;t <span class="s22">null</span>. How can we do this with Jest matcher functions?</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s say we have a variable called <span class="s22">person </span>that is of type <span class="s22">IPerson</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We want to check that the <span class="s22">person </span>variable is <span class="s22">{ id: 1, name: &quot;bob&quot; }</span>. How can we do this with Jest matcher functions?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Is it possible to carry out our check in the last question with a Jest snapshot test? If so, how?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">We have implemented a component called <span class="s22">CheckList </span>which renders text from an array in a list. Each list item has a checkbox so that the user can select list items. The component has a function prop called <span class="s22">onItemSelect </span>that is called when a user selects an item by checking the checkbox. We are implementing a test to verify that the <span class="s22">onItemSelect </span>prop works. The following line of code renders the component in the test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;line-height: 120%;text-align: left;">const { container } = render(&lt;SimpleList data={[&quot;Apple&quot;, &quot;Banana&quot;, &quot;Strawberry&quot;]} onItemSelect={handleListItemSelect}</p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">/&gt;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">How can we use a Jest mock function for <span class="s22">handleListItemSelect </span>and check that it is called?</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 93%;text-align: left;"><a name="bookmark953">In the implementation of </a><span class="s22">SimpleList </span>in the last question, the <span class="s22">onItemSelect </span>function takes in a parameter called <span class="s22">item</span>, which is the <span class="s22">string </span>value that the user has selected. In our test, let&#39;s pretend we have already simulated the user selecting <span class="s22">Banana</span>. How can we check the <span class="s22">onItemSelect </span>function was called, with the item parameter being <span class="s22">Banana</span>?</p></li><li><p style="padding-top: 9pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the implementation of <span class="s22">SimpleList </span>in the last two questions, the text is displayed using a label that is tied to the checkbox using the <span class="s22">for </span>attribute. How can we use functions in react-testing-library to firstly locate the <span class="s22">Banana </span>checkbox and then check it?</p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;"><a name="bookmark915">In this chapter, we found that the coverage was low in our code that rendered posts from the JSONPlaceholder REST API. One of the areas that wasn&#39;t covered was handling HTTP error codes in the </a><span class="s22">componentDidMount </span>function when we get the posts from the REST API. Create a test to cover this area of code.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark954">Further reading</a></h3><p style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">The following resources are useful for finding more information on unit testing React and TypeScript apps:</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_600.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;line-height: 107%;text-align: left;"><a href="https://jestjs.io/" class="s20" target="_blank">Official Jest documentation can be found at the following link: </a><a href="https://jestjs.io/" class="a" target="_blank">https://jestjs. </a><a href="https://jestjs.io/" target="_blank">io/</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_601.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 107%;text-align: left;"><a href="https://github.com/kentcdodds/react-testing-library" class="s20" target="_blank">The React Testing Library GitHub repository is at the following link: </a><a href="https://github.com/kentcdodds/react-testing-library" class="a" target="_blank">https:// github.com/kentcdodds/react-testing-</a><a href="https://github.com/kentcdodds/react-testing-library" target="_blank">library</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_602.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 107%;text-align: left;"><a href="https://airbnb.io/enzyme/docs/api/" class="s20" target="_blank">Read the documentation for Enzyme at the following link: </a><a href="https://airbnb.io/enzyme/docs/api/" class="a" target="_blank">https://airbnb.io/ enzyme/docs/</a><a href="https://airbnb.io/enzyme/docs/api/" target="_blank">api/</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_603.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://jasmine.github.io/index.html" class="s20" target="_blank">The Jasmine GitHub page is as follows: </a><a href="https://jasmine.github.io/index.html" class="a" target="_blank">https://jasmine.github.io/index. </a><a href="https://jasmine.github.io/index.html" target="_blank">html</a></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_604.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;text-align: left;"><a href="https://mochajs.org/" class="s20" target="_blank">The Mocha homepage can be found at </a><a href="https://mochajs.org/" class="a" target="_blank">https://mochajs.</a><a href="https://mochajs.org/" target="_blank">org/</a></p><p class="s8" style="padding-top: 8pt;text-indent: 0pt;text-align: right;"><a name="bookmark955">Answers</a><a name="bookmark967">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark956">Chapter 1: TypeScript Basics</a><a name="bookmark968">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l204"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What are the five primitive types?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_605.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_606.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_607.png"/></span></p><p class="s22" style="padding-top: 2pt;padding-left: 76pt;text-indent: 0pt;line-height: 109%;text-align: left;">string<span class="p">: Represents a sequence of Unicode characters </span>number<span class="p">: Represents both integers and floating-point numbers </span>boolean<span class="p">: Represents a logical true or false</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_608.png"/></span></p><p class="s22" style="padding-left: 76pt;text-indent: 0pt;text-align: left;">undefined<span class="p">: Represents a value that hasn&#39;t been initialized yet</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_609.png"/></span></p><p class="s22" style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">null<span class="p">: Represents no value</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What will the inferred type be for the <span class="s22">flag </span>variable be in the following code?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">const flag = false;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;text-align: left;">flag <span class="p">will be inferred as the </span>boolean <span class="p">type.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What&#39;s the difference between an interface and a type alias?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The main difference is that type aliases can&#39;t be extended or implemented from, like you can with interfaces.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What is wrong with the following code?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class Product {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">constructor(public name: string, public unitPrice: number) {}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">let table = new Product(); table.name = &quot;Table&quot;; table.unitPrice = 700;</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The constructor requires <span class="s22">name </span>and <span class="s22">unitPrice </span>to be passed. Here are two ways to resolve the problem.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Pass the values in the constructor:</p><p class="s12" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">let table = new Product(<span class="s21">&quot;Table&quot;, 700</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Make the parameters optional:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class Product {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">constructor(public name<span class="s21">?</span>: string, public unitPrice<span class="s21">?</span>: number) {}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we want our TypeScript program to support IE11, what should the <span class="s22">-- target </span>compiler option be?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">This should be <span class="s22">es5 </span>because IE11 only supports up to ES5 features.</p></li><li><p style="padding-top: 9pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Is it possible to get the TypeScript compiler to transpile ES6 JavaScript files? If so, how?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Yes! We can use the <span class="s22">--allowJS </span>setting to get the compiler to transpile JavaScript files.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we prevent <span class="s22">console.log() </span>statements from getting into our code?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We can use tslint and the <span class="s22">&quot;no-console&quot; </span>rule to enforce this. This would be the rule in <span class="s22">tslint.json</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&quot;rules&quot;: {</p><p class="s21" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&quot;no-console&quot;: true</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark957">Chapter 2: What is New in TypeScript 3</a><a name="bookmark969">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l205"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following function that draws a point:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">function drawPoint(x: number, y: number, z: number) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We also have the following <span class="s22">point </span>variable:</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const point: [number, number, number] = [100, 200, 300];</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">How can we call the <span class="s22">drawPoint </span>function in a terse manner?</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">drawPoint(<span class="s21">...point</span>);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We need to create another version of the <span class="s22">drawPoint </span>function that can call by passing the x, y, and z point values as parameters:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">drawPoint(1, 2, 3);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Internally in the implementation of <span class="s22">drawPoint </span>we draw the point from a tuple data type, <span class="s22">[number, number, number]</span>. How can we define the method parameter(s) with the required tuple?</p><p class="s12" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">function drawPoint(<span class="s21">...point: [number, number, number]</span>) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">In your implementation of <span class="s22">drawPoint</span>, how can you make the <span class="s22">z </span>point optional?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">function drawPoint(<span class="s21">...point: [number, number, number?]</span>) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We have a function called <span class="s22">getData </span>that calls a web API to get some data. The number of different API resources is still growing, so we&#39;ve chosen to use <span class="s22">any </span>as the return type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function getData(resource: string): any { const data = ... // call the web API</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">if (resource === &quot;person&quot;) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">data.fullName = `${data.firstName} ${data.surname}`;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return data;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">How can we make <span class="s22">getData </span>more type-safe by leveraging the <span class="s22">unknown </span>type?</p><p class="s21" style="padding-top: 9pt;padding-left: 79pt;text-indent: -10pt;line-height: 106%;text-align: left;">class Person { firstName: string; surname: string; fullName: string;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 110%;text-align: left;">function getData(resource: string): <span class="s21">unknown </span>{ const data = {};</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">if <span class="s21">(data instanceof Person) </span>{</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">data.fullName = `${data.firstName} ${data.surname}`;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return data;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">What <span class="s22">build </span>flag can we use to determine which projects are out of date and need to be rebuilt without doing a rebuild?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">tsc --build ... <span class="s21">--dry --verbose</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark958">Chapter 3: Getting Started with React and TypeScript</a><a name="bookmark970">&zwnj;</a></h3><ol id="l206"><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">During development, what are the <span class="s22">TSLint </span>settings for allowing debugger statements and logging to the console?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&quot;rules&quot;: {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">&quot;no-debugger&quot;: false, &quot;no-console&quot;: false,</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">},</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">In JSX, how can we display a button with a label from a prop called</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">buttonLabel <span class="p">in a class component?</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;button&gt;{this.props.buttonLabel}&lt;/button&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we make the <span class="s22">buttonLabel </span>prop optional and default to <b>Do It</b>?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Use a <span class="s22">? </span>before the type annotation in the interface for the props:</p><p class="s12" style="padding-top: 9pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { buttonLabel?: string</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">Implement a static <span class="s22">defaultProps </span>object at the top of the class component:</p><p class="s12" style="padding-top: 9pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">public static defaultProps = { buttonLabel: &quot;Do it&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">In JSX, how can we display the preceding button only if the state called <span class="s22">doItVisible </span>is true? Assume we already have a state type declared containing <span class="s22">doItVisible </span>and it has already been initialized in the constructor</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">{this.state.doItVisible &amp;&amp;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;button&gt;{this.props.buttonLabel}&lt;/button&gt;<span class="s21">}</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">How would we create a click handler for this button?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;button</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">onClick={this.handleDoItClick}<span class="s12">&gt;{this.props.buttonLabel}&lt;/button&gt;</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleDoItClick = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">// TODO: some stuff!</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 3pt;padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">We have a state type declared containing <span class="s22">doItDisabled</span>. It has also been initialized in the constructor. How would we set this state to disable the <b>Do it </b>button after we click it?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">private handleDoItClick = () =&gt; {</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">this.setState({doItDisabled: true})</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;button</p><p class="s21" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">disabled={this.state.doItDisabled}<span class="s12">&gt;{this.props.buttonLabel}&lt;/button</span></p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">If the button is clicked when it is disabled, is the click handler still be invoked?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">No</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: justify;">Which life cycle method would be used in a class component to add event handlers to a none React web component that lives in our React component?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;text-align: left;">componentDidMount</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Which life cycle method would we then use to remove this event handler?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s22" style="padding-left: 50pt;text-indent: 0pt;text-align: left;">componentWillUnmount</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: justify;">We have a function component called <span class="s22">Counter</span>. It needs to contain a piece of state called <span class="s22">count </span>and a function to update it called <span class="s22">setCount</span>. How can we define this state and default the initial count to 10?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const count, setCount = React.useState(10);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -18pt;line-height: 94%;text-align: left;">In the preceding <span class="s22">Counter </span>component, we have a <span class="s22">decrement </span>function that needs to reduce <span class="s22">count </span>by 1:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">const decrement = () =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">// TODO - reduce count by 1</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">How can this be implemented?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const decrement = () =&gt; { setCount(count - 1);</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark959">Chapter 4: Routing with React Router</a><a name="bookmark971">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l207"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following <span class="s22">Route </span>that shows a list of customers:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 23pt;text-indent: 0pt;text-align: center;">&lt;Route path=&quot;/customers&quot; component={CustomersPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Will the <span class="s22">CustomersPage </span>component render when the page is <span class="s22">&quot;/customers&quot;</span>? Yes</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">Will the <span class="s22">CustomersPage </span>component render when the page is</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">&quot;/customers/24322&quot;<span class="p">? Yes</span></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">We only want the <span class="s22">CustomersPage </span>component to render when the path is</p><p class="s22" style="padding-left: 50pt;text-indent: 3pt;line-height: 162%;text-align: left;">&quot;/customers&quot;<span class="p">. How can we change the attributes on </span>Route <span class="p">to achieve this? We can use the </span>exact <span class="p">attribute:</span></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Route <span class="s21">exact={true} </span>path=&quot;/customers&quot; component={CustomersPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">What would be the <span class="s22">Route </span>that could handle the path <span class="s22">&quot;/customers/24322&quot;</span>? It should put <span class="s22">&quot;24322&quot; </span>in a route parameter called <span class="s22">customerId</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 110%;text-align: left;">&lt;Route <span class="s21">exact={true} </span>path=&quot;/customers/:customerId&quot; component={CustomerPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We can then use <span class="s22">RouteComponentProps </span>as the <span class="s22">CustomerPage </span>props type and get access to <span class="s22">customerId </span>via <span class="s22">props.match.params.customerId</span>.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">How can we catch paths that don&#39;t exist so that we can inform the user?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Make sure all the <span class="s22">Route </span>components are wrapped in a <span class="s22">Switch </span>component. We can then add a <span class="s22">Route </span>to a component that renders a <b>not found </b>message to the user as the last <span class="s22">Route </span>in Switch:</p><p class="s21" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Switch&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/customers/:customerId&quot; component={CustomerPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route exact={true} path=&quot;/customers&quot; component={CustomersPage}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;Route component={NotFoundPage} /&gt;</p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Switch&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How would we implement a <span class="s22">search </span>query parameter in <span class="s22">CustomersPage</span>? So, <span class="s22">&quot;/customers/?search=Cool Company&quot; </span>would show customers the name <b>Cool Company</b>.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">First we need the props type to be <span class="s22">RouteComponentProps </span>in our class:</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">import { RouteComponentProps } from &quot;react-router-dom&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">class CustomersPage extends React.Component&lt;RouteComponentProps, IState&gt; { ... }</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We can the use <span class="s22">URLSearchParams </span>to get the <span class="s22">search </span>query parameter and do the search in the <span class="s22">componentDidMount </span>life cycle method:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">public componentDidMount() {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">const searchParams = new URLSearchParams(props.location.search); const search = searchParams.get(&quot;search&quot;) || &quot;&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">const products = await ... // make web service call to do search this.setState({ products });</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">After a while we decide to change the <span class="s22">&quot;customer&quot; </span>paths to <span class="s22">&quot;clients&quot;</span>. How can we implement this so that users can still use the existing <span class="s22">&quot;customer&quot; </span>paths but have the paths automatically redirect to the new <span class="s22">&quot;client&quot; </span>paths.</p></li></ol></li></ol><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">We can use the <span class="s22">Redirect </span>component to redirect the old paths to the new paths:</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Switch&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;Route path=&quot;/clients/:customerId&quot; component={CustomerPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;Route exact={true} path=&quot;/clients&quot; component={CustomersPage} /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;Redirect from=&quot;/customers/:customerId&quot; to=&quot;/clients/:customerId&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;Redirect exact={true} from=&quot;/customers&quot; to=&quot;/clients&quot; /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;Route component={NotFoundPage} /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Switch&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-top: 4pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark960">Chapter 5: Advanced Types</a><a name="bookmark972">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l208"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have an interface that represents a course result as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ICourseMark { courseName: string; grade: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We can use this interface as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const geography: ICourseMark = { courseName: &quot;Geography&quot;, grade: &quot;B&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">The grades can only be A, B, C, or D. How can we create a stronger typed version of the <span class="s22">grade </span>property in this interface?</p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">We can use a union type:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 101pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface ICourseMark { courseName: string;</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">grade: <span class="s21">&quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot;</span>;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We have the following functions, which validate that numbers and strings are populated with a value:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function isNumberPopulated(field: number): boolean { return field !== null &amp;&amp; field !== undefined;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">function isStringPopulated(field: string): boolean {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">return field !== null &amp;&amp; field !== undefined &amp;&amp; field !== &quot;&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">How can we combine these into a single function called <span class="s22">isPopulated </span>with signature overloads?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We can use overload signatures and then a union type for <span class="s22">field </span>in the main function. We can then use the <span class="s22">typeof </span>type guard in the function to deal with the different branches of logic:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">function isPopulated(field: number): boolean function isPopulated(field: string): boolean</p><p class="s12" style="padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">function isPopulated(field: number | string): boolean { if (typeof field === &quot;number&quot;) {</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">return field !== null &amp;&amp; field !== undefined;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">return field !== null &amp;&amp; field !== undefined &amp;&amp; field !== &quot;&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How can we implement a more flexible version of the <span class="s22">isPopulated </span>function with generics?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 2pt;line-height: 94%;text-align: left;">We can use a generic function with a <span class="s22">typeof </span>type guard for the special branch of code for strings:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">function isPopulated&lt;T&gt;(field: T): boolean { if (typeof field === &quot;string&quot;) {</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">return field !== null &amp;&amp; field !== undefined &amp;&amp; field !== &quot;&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">} else {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">return field !== null &amp;&amp; field !== undefined;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the follow type alias of stages:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">type Stages = { pending: &#39;Pending&#39;, started: &#39;Started&#39;,</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">completed: &#39;Completed&#39;,</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">How can we programmatically turn this into the union type <span class="s22">&#39;Pending&#39; | &#39;Started&#39; | &#39;Completed&#39;</span>?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">We can use the <span class="s22">keyof </span>keyword:</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">type StageUnion = keyof Stages</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We have the following union type:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type Grade = &#39;gold&#39; | &#39;silver&#39; | &#39;bronze&#39;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">How can we programmatically create the following type?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">type GradeMap = { gold: string; silver: string; bronze: string</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We can map the type as follows:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">type GradeMap = { [P in Grade]: string }</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark961">Chapter 6: Component Patterns</a><a name="bookmark973">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l209"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What special property does React give us to access a components children?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">A property called <span class="s22">children</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How many components can share state with React context?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">As many components as we like that are under the provider component in the component hierarchy</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">When consuming the React context, what pattern does it use to allow us to render our content with the context?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The render props pattern</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How many render props can we have in a component?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">As many as we like</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How many children props do we have in a component?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 73pt;text-indent: 0pt;text-align: left;">1</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">We only used <span class="s22">withLoader </span>on the product page. We have the following function in <span class="s22">ProductData.ts </span>to get all the products:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const getProducts = async (): Promise&lt;IProduct[]&gt; =&gt; { await wait(1000);</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return products;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Can you use this to implement a loader spinner on the products page by consuming the <span class="s22">withLoader </span>HOC.</p><p style="padding-top: 9pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">First we split <span class="s22">ProductPage </span>into a container and presentational component.  The presentational component will render the product list exporting it wrapped in the <span class="s22">withLoader </span>HOC:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">import { Link } from &quot;react-router-dom&quot;; import { IProduct } from &quot;./ProductsData&quot;; import withLoader from &quot;./withLoader&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { products: IProduct[]; search: string;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const ProductList: React.SFC&lt;IProps&gt; = props =&gt; { const { products, search } = props;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;ul className=&quot;product-list&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">{products.map(product =&gt; { if (</p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;line-height: 120%;text-align: left;">!search || (search &amp;&amp;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">product.name.toLowerCase().indexOf(search.toLowerCase()) &gt; -1)</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">) {</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: 0pt;text-align: left;">return (</p><p class="s12" style="padding-top: 1pt;padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;li key={product.id} className=&quot;product-list-item&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 75pt;line-height: 120%;text-align: left;">&lt;Link to={`/products/${product.id}`}&gt;{product.name}&lt;/Link&gt;</p><p class="s12" style="padding-left: 133pt;text-indent: 0pt;text-align: left;">&lt;/li&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 122pt;text-indent: -10pt;line-height: 120%;text-align: left;">} else { return null;</p><p class="s12" style="text-indent: 0pt;text-align: right;">}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">})}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">&lt;/ul&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default withLoader(ProductList);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We then can consume this in <span class="s22">ProductPage </span>as follows in its <span class="s22">render </span>method:</p><p class="s12" style="padding-top: 9pt;padding-left: 74pt;text-indent: -5pt;line-height: 120%;text-align: left;">public render() { return (</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;page-container&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;p&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 5pt;line-height: 120%;text-align: left;">Welcome to React Shop where you can get all your tools for ReactJS!</p><p class="s12" style="padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;/p&gt;</p><p class="s21" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;line-height: 106%;text-align: left;">&lt;ProductList loading={this.state.loading} products={this.state.products} search={this.state.search}</p><p class="s21" style="padding-left: 74pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Is it possible to create a loader spinner using the children props pattern? So, the consuming JSX would be something like this:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;Loader loading={this.state.loading}&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">The content for my component ...</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">&lt;/Loader&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">If so, have a go at implementing it?</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Yes</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">import * as React from &quot;react&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IProps { loading: boolean;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">const Loader: React.SFC&lt;IProps&gt; = props =&gt; props.loading ? (</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-overlay&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-circle-wrap&quot;&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 111pt;text-indent: 0pt;text-align: left;">&lt;div className=&quot;loader-circle&quot; /&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;/div&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">) : props.children ? (</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">&lt;React.Fragment&gt;{props.children}&lt;/React.Fragment&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">) : null;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">export default Loader;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark962">Chapter 7: Working with Forms</a><a name="bookmark974">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l210"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Extend our generic <span class="s22">Field </span>component to include a number editor using the native number input.</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_610.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">Firstly, add <span class="s22">&quot;Number&quot; </span>to the <span class="s22">type </span>prop:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">interface IFieldProps {</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">type?: &quot;Text&quot; | &quot;Email&quot; | &quot;Select&quot; | &quot;TextArea&quot; <span class="s21">| &quot;Number&quot;</span>;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_611.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;text-align: left;">Include the <span class="s22">&quot;Number&quot; </span>type when rendering the <span class="s22">input</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">{(type === &quot;Text&quot; || type === &quot;Email&quot; <span class="s21">|| type === &quot;Number&quot;</span>) &amp;&amp; (</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&lt;input</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">type={type.toLowerCase()} id={name} value={context.values[name]}</p><p class="s12" style="padding-left: 112pt;text-indent: 0pt;line-height: 120%;text-align: left;">onChange={e =&gt; handleChange(e, context)} onBlur={e =&gt; handleBlur(e, context)}</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">/&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">)}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Implement an urgency field on the <b>Contact Us </b>form to indicate how urgent a response is. The field should be numeric.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Add the following field immediately after the notes field:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">&lt;Form.Field name=&quot;urgency&quot; label=&quot;How urgent is a response?&quot; type=&quot;Number&quot; /&gt;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Implement a new validator function in the generic <span class="s22">Form </span>component, that validates a number is between two other numbers.</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Add the following function in <span class="s22">Form.tsx</span>:</p><p class="s12" style="padding-top: 9pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">export const between: Validator = ( fieldName: string,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">values: IValues,</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">bounds: { lower: number; upper: number }</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">): string =&gt; values[fieldName] &amp;&amp;</p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">(values[fieldName] &lt; bounds.lower || values[fieldName] &gt; bounds.upper)</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">? `This must be between ${bounds.lower} and ${bounds.upper}`</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">: &quot;&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Implement a validation rule on the urgency field to ensure it is between 1 and 10.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_612.png"/></span></p><p style="padding-top: 2pt;padding-left: 27pt;text-indent: 0pt;text-align: center;">Firstly import the <span class="s22">between </span>validator into <span class="s22">ContactUs.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 4pt;padding-left: 91pt;text-indent: 0pt;line-height: 110%;text-align: left;">import { <span class="s21">between</span>, Form, ISubmitResult, IValues, minLength, required } from &quot;./Form&quot;;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_613.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">Add the rule on urgency in the <span class="s22">validationRules </span>prop in <span class="s22">ContactUs.tsx</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">validationRules={{</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">email: { validator: required },</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 10pt;line-height: 120%;text-align: left;">name: [{ validator: required }, { validator: minLength, arg: 3 }],</p><p class="s21" style="padding-left: 101pt;text-indent: 0pt;line-height: 10pt;text-align: left;">urgency: [{ validator: between, arg: { lower: 1, upper: 10 }</p><p class="s21" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">}]</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">}}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Our validation triggers when a users clicks in and out of a field without typing anything. How can we just trigger validation, still when a field loses focus but only when it has been changed? Have a go at an implementation for this.</p></li></ol><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_614.png"/></span></p><p style="padding-top: 8pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We need to track whether a field has been touched in the form state:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 124pt;text-indent: -10pt;line-height: 106%;text-align: left;">interface ITouched { [key: string]: boolean;</p><p class="s21" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 113pt;text-indent: 0pt;text-align: left;">interface IState {</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">touched: ITouched;</p><p class="s12" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_615.png"/></span></p><p style="padding-top: 1pt;padding-left: 76pt;text-indent: 0pt;text-align: left;">We initialize the <span class="s22">touched </span>values for each field to <span class="s22">false </span>in the constructor:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">constructor(props: IFormProps) { super(props);</p><p class="s12" style="padding-left: 124pt;text-indent: 0pt;text-align: left;">const errors = {};</p><p class="s21" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">const touched = {};</p><p class="s12" style="padding-top: 1pt;padding-left: 135pt;text-indent: -10pt;line-height: 120%;text-align: left;">Object.keys(props.defaultValues).forEach(fieldName =&gt; { errors[fieldName] = [];</p><p class="s21" style="padding-left: 135pt;text-indent: 0pt;line-height: 10pt;text-align: left;">touched[fieldName] = false;</p><p class="s12" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 135pt;text-indent: -10pt;line-height: 120%;text-align: left;">this.state = { errors, submitted: false,</p><p class="s12" style="padding-left: 135pt;text-indent: 0pt;text-align: left;">submitting: false,</p><p class="s21" style="padding-top: 1pt;padding-left: 135pt;text-indent: 0pt;text-align: left;">touched,</p><p class="s12" style="padding-top: 1pt;padding-left: 135pt;text-indent: 0pt;text-align: left;">values: props.defaultValues</p><p class="s12" style="padding-top: 1pt;padding-left: 124pt;text-indent: 0pt;text-align: left;">};</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_616.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 94%;text-align: left;">In the <span class="s22">setValue </span>method, we update the <span class="s22">touched </span>value to <span class="s22">true </span>for the field being updated:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 124pt;text-indent: -10pt;line-height: 120%;text-align: left;">private setValue = (fieldName: string, value: any) =&gt; { const newValues = { ...this.state.values, [fieldName]:</p><p class="s12" style="padding-left: 129pt;text-indent: 0pt;text-align: left;">value };</p><p class="s21" style="padding-top: 1pt;padding-left: 129pt;text-indent: -5pt;line-height: 106%;text-align: left;">const newTouched = { ...this.state.touched, [fieldName]: true };</p><p class="s12" style="padding-left: 124pt;text-indent: 0pt;line-height: 10pt;text-align: left;">this.setState({ values: newValues, <span class="s21">touched: newTouched</span></p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">});</p><p class="s12" style="padding-top: 1pt;padding-left: 113pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_617.png"/></span></p><p style="padding-left: 76pt;text-indent: 0pt;line-height: 89%;text-align: left;">At the top of the validate method, we check whether the field has been touched and if not, we return an empty array to indicate the field is valid:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 91pt;text-indent: 0pt;text-align: left;">private validate = (fieldName: string, value: any): string[] =&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">{</p><p class="s12" style="padding-top: 1pt;padding-left: 112pt;text-indent: -10pt;line-height: 120%;text-align: left;">if (!this.state.touched[fieldName]) { return [];</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">...</p><p class="s12" style="padding-top: 1pt;padding-left: 91pt;text-indent: 0pt;text-align: left;">};</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark963">Chapter 8: React Redux</a><a name="bookmark975">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l211"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">Is the <span class="s22">type </span>property in action objects required? And does this property need to be called <span class="s22">type</span>? Can we call it something else?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The <span class="s22">type </span>property is required in the action objects and must be called <span class="s22">type</span>.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How many properties can the action object contain?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">As many as we like! It needs to include at least one for the <span class="s22">type </span>property. It can then include as many other properties as we need in order for the reducer to change the state but this is generally lumped in one additional property. So, generally an action will have one or two properties.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What is an action creator?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">An action creator is a function that returns an action object. Components invoke these functions in order to make a change to the state in the store.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Why did we need Redux Thunk in our Redux store in our React shop app?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">By default, a Redux store can&#39;t manage asynchronous action creators. Middleware needs to be added to the Redux store in order to facilitate asynchronous action creators. Redux Thunk is the middleware we added to do this.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Could we have used something else other than Redux Thunk?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 89%;text-align: left;">Yes! We could have created our own middleware. There are other well- established libraries that we could have used as well, such as Redux Saga.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In our <span class="s22">basketReducer </span>we have just implemented, why didn&#39;t we just use the <span class="s22">push </span>function to add the item to the basket state? What is wrong with the highlighted line?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">export const basketReducer: Reducer&lt;IBasketState, BasketActions&gt; = (</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 120%;text-align: left;">state = initialBasketState, action</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">) =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">switch (action.type) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">case BasketActionTypes.ADD: {</p><p class="s21" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">state.products.push(action.product);</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">return state || initialBasketState;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">};</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;"><a name="bookmark964">This mutates the product&#39;s state directly and makes the function impure. This is because we have changed the state argument, which lives outside the scope of our function. Breaking this rule, in this case, results in the basket summary not incrementing on the rendered page when the </a><b>Add to basket </b>button is clicked.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark976">Chapter 9: Interacting with RESTful APIs</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l212"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What will the output be in the console if we run the following code in a browser?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">try {</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">setInterval(() =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">throw new Error(&quot;Oops&quot;);</p><p class="s12" style="padding-top: 1pt;padding-left: 74pt;text-indent: 0pt;text-align: left;">}, 1000);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">} catch (ex) {</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">console.log(&quot;Sorry, there is a problem&quot;, ex);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We&#39;d get a message saying that an uncaught error (Oops) has occurred. <span class="s22">The console.log </span>statement wouldn&#39;t be reached.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Assuming that post 9999 doesn&#39;t exist, what would be the output in the console if we ran the following code in a browser:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">fetch(&quot;https://jsonplaceholder.typicode.com/posts/9999&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;line-height: 120%;text-align: left;">console.log(&quot;HTTP status code&quot;, response.status); return response.json();</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(data =&gt; console.log(&quot;Response body&quot;, data))</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.catch (error =&gt; console.log(&quot;Error&quot;, error));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="98" alt="image" src="Learn+React+with+TypeScript+3-2/Image_618.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">The key thing is that an HTTP error doesn&#39;t get handled in the <span class="s22">catch </span>method with the <span class="s22">fetch </span>function.</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">If we did a similar exercise with <span class="s22">axios</span>, what would be the output in the console when running the following code?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.get(&quot;https://jsonplaceholder.typicode.com/posts/9999&quot;)</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.then(response =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">console.log(&quot;HTTP status code&quot;, response.status);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">})</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">.catch(error =&gt; {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">console.log(&quot;Error&quot;, error.response.status);</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="569" height="66" alt="image" src="Learn+React+with+TypeScript+3-2/Image_619.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 14pt;text-align: left;">The key thing is that an HTTP error does get handled in the <span class="s22">catch </span>method with</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">axios<span class="p">.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What is a benefit of using the native <span class="s22">fetch </span>over <span class="s22">axios</span>?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: justify;">If we are targeting modern browsers (and not IE) and only require simple REST API interaction then <span class="s22">fetch </span>is arguably more favorable than <span class="s22">axios </span>because our code isn&#39;t dependent on third-party code.  It will also probably run a little faster because there is less non-native code being executed.</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">How can we add a bearer token to the following <span class="s22">axios </span>request?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 45pt;text-indent: 0pt;text-align: center;">axios.get(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;)</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">The second parameter is an object literal that has a <span class="s22">header </span>property that can contain HTTP headers for the request:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">axios</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">.get(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { headers: {</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">&quot;Authorization&quot;: `Bearer ${token}`</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">}</p><p class="s12" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">We are using the following <span class="s22">axios PUT </span>request to update a post title:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">axios.put(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { title: &quot;corrected title&quot;,</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">body: &quot;some stuff&quot;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">The body hasn&#39;t changed though <span class="s23">– </span>it&#39;s just the title we want to update. How can we change this to a <span class="s22">PATCH </span>request to make this REST call more efficient?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">axios.patch(&quot;https://jsonplaceholder.typicode.com/posts/1&quot;, { title: &quot;corrected title&quot;</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">We have implemented a function component to display a post. It uses the following code to get the post from a REST API:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.useEffect(() =&gt; { axios</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.get(`https://jsonplaceholder.typicode.com/posts/${id}`)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.catch(...);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">What is wrong with the preceding code?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 91%;text-align: left;">The second parameter in the <span class="s22">useEffect </span>function is missing, which means the REST API will be called every time the component is rendered. An empty array should be supplied as the second parameter so that the REST API is only called on the first render:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">React.useEffect(() =&gt; { axios</p><p class="s12" style="padding-left: 90pt;text-indent: 0pt;text-align: left;">.get(`https://jsonplaceholder.typicode.com/posts/${id}`)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.then(...)</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">.catch(...);</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}, <span class="s21">[]</span>);</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark965">Chapter 10: Interacting with GraphQL APIs</a><a name="bookmark977">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l213"><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">In the <b>GitHub GraphQL Explorer</b>, create a query to return the last five open issues in the React project. Return the issue title and the URL in the response:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">query {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">repository (owner:&quot;facebook&quot;, name:&quot;react&quot;) { issues(last: 5, states:[OPEN]) {</p><p class="s12" style="padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">edges { node {</p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;line-height: 120%;text-align: left;">title url</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Enhance the last query, make the number of issues that is returned a parameter, and make this default to 5:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">query ($lastCount: Int = 5) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">repository (owner:&quot;facebook&quot;, name:&quot;react&quot;) { issues(last: $lastCount, states: [OPEN]) {</p><p class="s12" style="padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">edges { node {</p><p class="s12" style="padding-left: 122pt;text-indent: 0pt;line-height: 120%;text-align: left;">title url</p><p class="s12" style="padding-left: 111pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Create a mutation in the <b>GitHub GraphQL Explorer </b>to unstar a starred repository. The mutation should take a repository ID as a parameter:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">mutation ($repoId: ID!) {</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: -10pt;line-height: 120%;text-align: left;">removeStar(input: { starrableId: $repoId }) { starrable {</p><p class="s12" style="padding-left: 111pt;text-indent: -10pt;line-height: 120%;text-align: left;">stargazers { totalCount</p><p class="s12" style="padding-left: 101pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 90pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 79pt;text-indent: 0pt;text-align: left;">}</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What part of the HTTP request does the GraphQL query go in?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The HTTP body</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What part of the HTTP request does the GraphQL mutation go in?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The HTTP body</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">How can we make the response from the <span class="s22">react-apollo Query </span>component type safe?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">Create another component that extends <span class="s22">Query </span>passing in a type for the result as a generic parameter:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">class MyQuery extends Query&lt;IResult&gt; {}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">We can then use the <span class="s22">MyQuery </span>component in our JSX.</p></li><li><p style="padding-top: 8pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">Is caching on or off by default when you scaffold a project with <span class="s22">react-boost</span>?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">On</p></li><li><p style="padding-top: 7pt;padding-left: 53pt;text-indent: -13pt;text-align: left;">What prop can we use on the <span class="s22">Mutation </span>component to update the local cache?</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 1pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">The <span class="s22">update </span>prop.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><a name="bookmark966">Chapter 11: Unit Testing with Jest</a><a name="bookmark978">&zwnj;</a></h3><p style="text-indent: 0pt;text-align: left;"><br/></p><ol id="l214"><li><p style="padding-top: 1pt;padding-left: 53pt;text-indent: -13pt;line-height: 13pt;text-align: left;">Let&#39;s say we are implementing a Jest test and we have a variable</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">called <span class="s22">result</span>, which we want to check isn&#39;t <span class="s22">null</span>. How can we do this with Jest matcher functions?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">expect(result).not.toBeNull()</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;text-align: left;">Let&#39;s say we have variable called <span class="s22">person </span>that is of type <span class="s22">IPerson</span>:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-top: 5pt;padding-left: 79pt;text-indent: -10pt;line-height: 120%;text-align: left;">interface IPerson { id: number;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">name: string;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">}</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 2pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">We want to check that the <span class="s22">person </span>variable is <span class="s22">{ id: 1, name: &quot;bob&quot; }</span>. How can we do this with Jest matcher functions?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 23pt;text-indent: 0pt;text-align: center;">expect(person).not.toBeEqual({ id: 1, name: &quot;bob&quot; });</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 89%;text-align: left;">Is it possible to carry out our check in the last question with a Jest snapshot test? If so how?</p><p style="padding-top: 8pt;padding-left: 50pt;text-indent: 0pt;text-align: left;">Yes:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">expect(person).toMatchSnapshot();</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 92%;text-align: left;">We have implemented a component called <span class="s22">CheckList</span>, which renders text from an array in a list. Each list item has a checkbox so that the user can select list items. The component has a function prop called <span class="s22">onItemSelect </span>that is called when a user selects an item by checking the checkbox. We are implementing a test to verify that the <span class="s22">onItemSelect </span>prop works. The following line of code renders the component in the test:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const { container } = render(&lt;SimpleList data={[&quot;Apple&quot;, &quot;Banana&quot;, &quot;Strawberry&quot;]} onItemSelect={handleListItemSelect} /&gt;);</p><p style="padding-top: 7pt;padding-left: 50pt;text-indent: 0pt;line-height: 94%;text-align: left;">How can we use a Jest mock function for <span class="s22">handleListItemSelect </span>and check that it is called?</p><p class="s21" style="padding-top: 8pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">const handleListItemSelect = jest.fn();</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const { container } = render(&lt;SimpleList data={[&quot;Apple&quot;, &quot;Banana&quot;, &quot;Strawberry&quot;]} onItemSelect={handleListItemSelect} /&gt;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">// TODO - select the list item</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s21" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">expect(handleListItemSelect).toBeCalledTimes(1);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 14pt;text-align: left;">In the implementation of <span class="s22">SimpleList </span>in the last question,</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">onItemSelect </span>function takes in a parameter called <span class="s22">item </span>which is</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 94%;text-align: left;">the <span class="s22">string </span>value that the user has selected. In our test, let&#39;s pretend we have already simulated the user selecting <span class="s22">&quot;Banana&quot; </span>. How can we check</p><p style="padding-left: 53pt;text-indent: 0pt;line-height: 13pt;text-align: left;">the <span class="s22">onItemSelect </span>function was called with the item parameter being</p><p class="s22" style="padding-left: 53pt;text-indent: 0pt;line-height: 14pt;text-align: left;">&quot;Banana&quot;<span class="p">?</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">expect(handleListItemSelect).toBeCalledWith(&quot;Banana&quot;);</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 2pt;padding-left: 53pt;text-indent: -13pt;line-height: 94%;text-align: left;">In the implementation of <span class="s22">SimpleList </span>in the last two questions, the text is displayed using a label that is tied to the checkbox is using the <span class="s22">for </span>attribute. How can we use functions in React Testing Library to firstly locate the <span class="s22">&quot;Banana&quot; </span>checkbox and then check it?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">const checkbox = getByLabelText(&quot;Banana&quot;) as HTMLInputElement; fireEvent.change(checkbox, {</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">target: { checked: true }</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 53pt;text-indent: -13pt;line-height: 91%;text-align: left;">In this chapter, we found out the coverage was low in our code that rendered posts from the JSONPlaceholder REST API. One of the areas that wasn&#39;t covered was handling HTTP error codes in the <span class="s22">componentDidMount </span>function when we get the posts from the REST API. Create a test to cover this area of code:</p></li></ol><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">test(&quot;When the post GET request errors when the page is loaded, an error is shown&quot;, async () =&gt; {</p><p class="s12" style="padding-left: 68pt;text-indent: 10pt;line-height: 120%;text-align: left;">const mock = new MockAdapter(axios); mock.onGet(&quot;https://jsonplaceholder.typicode.com/posts&quot;).reply(404)</p><p class="s12" style="padding-left: 68pt;text-indent: 0pt;text-align: left;">;</p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;line-height: 22pt;text-align: left;">const { getByTestId } = render(&lt;App /&gt;); const error: any = await waitForElement(() =&gt;</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">getByTestId(&quot;error&quot;));</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 79pt;text-indent: 0pt;text-align: left;">expect(error).toMatchSnapshot();</p><p class="s12" style="padding-top: 1pt;padding-left: 68pt;text-indent: 0pt;text-align: left;">});</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 50pt;text-indent: 0pt;text-align: left;">A test ID needs to be added to the <span class="s22">App </span>component code:</p><p class="s12" style="padding-top: 9pt;padding-left: 68pt;text-indent: 0pt;line-height: 120%;text-align: left;">{this.state.error &amp;&amp; &lt;p className=&quot;error&quot; data- testid=&quot;error&quot;&gt;{this.state.error}&lt;/p&gt;}</p><p class="s8" style="padding-top: 8pt;padding-left: 55pt;text-indent: 0pt;text-align: left;"><a name="bookmark979">Other Books You May Enjoy</a><a name="bookmark980">&zwnj;</a></p><p style="padding-top: 22pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">If you enjoyed this book, you may be interested in these other books by Packt:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="130" height="161" alt="image" src="Learn+React+with+TypeScript+3-2/Image_620.png"/></span></p><p class="s30" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;line-height: 15pt;text-align: left;">React Cookbook</p><p class="s31" style="padding-left: 5pt;text-indent: 0pt;line-height: 15pt;text-align: left;">Carlos Santana Roldan</p><p class="s31" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">ISBN: 9781783980727</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_621.png"/></span></p><p style="padding-top: 8pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Gain the ability to wield complex topics such as Webpack and server-side rendering</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_622.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_623.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_624.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: justify;">Implement an API using Node.js, Firebase, and GraphQL Learn to maximize the performance of React applications Create a mobile application using React Native</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_625.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: justify;">Deploy a React application on Digital Ocean</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_626.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: justify;">Get to know the best practices when organizing and testing a large React application</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"><span><img width="130" height="161" alt="image" src="Learn+React+with+TypeScript+3-2/Image_627.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s30" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;line-height: 15pt;text-align: left;">Full-Stack React Projects</p><p class="s31" style="padding-left: 5pt;text-indent: 0pt;line-height: 15pt;text-align: left;">Shama Hoque</p><p class="s31" style="padding-top: 7pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">ISBN: 9781788835534</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_628.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_629.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_630.png"/></span></p><p style="padding-top: 7pt;padding-left: 53pt;text-indent: 0pt;text-align: left;">Set up your development environment and develop a MERN application Implement user authentication and authorization using JSON Web Tokens Build a social media application by extending the basic MERN application</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_631.png"/></span></p><p style="padding-top: 1pt;padding-left: 53pt;text-indent: 0pt;line-height: 89%;text-align: left;">Create an online marketplace application with shopping cart and Stripe payments</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_632.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_633.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Develop a media streaming application using MongoDB GridFS Implement server-side rendering with data to improve SEO</p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_634.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="5" height="5" alt="image" src="Learn+React+with+TypeScript+3-2/Image_635.png"/></span></p><p style="padding-left: 53pt;text-indent: 0pt;text-align: left;">Set up and use React 360 to develop user interfaces with VR capabilities Learn industry best practices to make MERN stack applications reliable and scalable</p><h3 style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Leave a review - let other readers know what you think</h3><p style="padding-top: 3pt;padding-left: 5pt;text-indent: 0pt;line-height: 89%;text-align: left;">Please share your thoughts on this book with others by leaving a review on the site that you bought it from. If you purchased the book from Amazon, please leave us an honest review on this book&#39;s Amazon page. This is vital so that other potential readers can see and use your unbiased opinion to make purchasing decisions, we can understand what our customers think about our products, and our authors can see your feedback on the title that they have worked with Packt to create. It will only take a few minutes of your time, but is valuable to other potential customers, our authors, and Packt. Thank you!</p><p class="s8" style="padding-top: 8pt;text-indent: 0pt;text-align: right;"><a name="bookmark981">Index</a><a name="bookmark982">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 13pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">A</p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark131" class="s15">abstract classes </a>42<a href="#bookmark133" class="s15">, </a>43<a href="#bookmark134" class="s15">, </a><a href="#bookmark134">44</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark134" class="s15">access modifiers </a>44<a href="#bookmark136" class="s15">, </a><a href="#bookmark136">45</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">actions</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark682" class="s15">creating </a>307<a href="#bookmark686" class="s15">, </a><a href="#bookmark686">309</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark685" class="s15">types, creating </a><a href="#bookmark685">308</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark433" class="s15">animated transitions </a>186<a href="#bookmark434" class="s15">, </a><a href="#bookmark434">188</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark88" class="s15">any type </a><a href="#bookmark88">16</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark865" class="s15">Apollo GraphQL client installing </a><a href="#bookmark865">391</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark868" class="s15">migrating, from axios code </a><a href="#bookmark868">392</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark865" class="s15">using </a><a href="#bookmark865">391</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Apollo</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark885" class="s15">cached data, working with </a><a href="#bookmark885">407</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark884" class="s15">mutation, implementing </a><a href="#bookmark884">405</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark100" class="s15">arrays </a>23<a href="#bookmark102" class="s15">, </a><a href="#bookmark102">24</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark754" class="s15">asynchronous code writing </a><a href="#bookmark754">339</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark764" class="s15">writing, with async </a>344<a href="#bookmark766" class="s15">, </a><a href="#bookmark766">345</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark764" class="s15">writing, with await </a>344<a href="#bookmark766" class="s15">, </a>345 <a href="#bookmark754" class="s15">writing, with callbacks  </a>339 <a href="#bookmark760" class="s15">writing, with promises  </a><a href="#bookmark760">342</a></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark143" class="s15">Asynchronous Module Definition (AMD) </a><a href="#bookmark143">49</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark868" class="s15">axios, to Apollo migration about </a><a href="#bookmark868">392</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark868" class="s15">Apollo provider, adding </a><a href="#bookmark868">392</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark884" class="s15">mutation, implementing with Apollo </a>405<a href="#bookmark885" class="s15">, </a><a href="#bookmark885">407</a></p><p class="s32" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">query component, used for querying GraphQL</p><p class="s12" style="padding-top: 1pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">393<a href="#bookmark872" class="s15">, </a><a href="#bookmark872">395</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark874" class="s15">repository search component, adding </a><a href="#bookmark874">396</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark858" class="s15">axios, using as GraphQL client app, creating </a>385<a href="#bookmark860" class="s15">, </a><a href="#bookmark860">387</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark858" class="s15">GitHub personal access token, obtaining </a><a href="#bookmark858">385</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark862" class="s15">GraphQL server, querying </a>388<a href="#bookmark863" class="s15">, </a><a href="#bookmark863">390</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">axios</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark790" class="s15">errors, handling </a><a href="#bookmark790">355</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark785" class="s15">installing </a><a href="#bookmark785">351</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark945" class="s15">mocking, with axios-mock-adapter </a>437<a href="#bookmark947" class="s15">, </a><a href="#bookmark947">439</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark797" class="s15">used, for creating data </a>361<a href="#bookmark799" class="s15">, </a>363 <a href="#bookmark804" class="s15">used, for deleting data  </a>366 <a href="#bookmark787" class="s15">used, for obtaining data  </a>352 <a href="#bookmark801" class="s15">used, for updating data  </a>364<a href="#bookmark802" class="s15">, </a>365 <a href="#bookmark855" class="s15">using, as GraphQL client </a><a href="#bookmark855">384</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark785" class="s15">using, with class components </a><a href="#bookmark785">351</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark806" class="s15">using, with function components </a>367<a href="#bookmark807" class="s15">, </a><a href="#bookmark807">371</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">B</p><p class="s32" style="padding-top: 1pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">Babel</p><p style="padding-top: 1pt;padding-left: 46pt;text-indent: 0pt;text-align: center;"><a href="#bookmark299" class="s15">reference link </a><a href="#bookmark299">97</a></p><p class="s12" style="padding-top: 1pt;padding-left: 47pt;text-indent: 0pt;text-align: center;"><a href="#bookmark121" class="s15">basic classes  </a>37<a href="#bookmark124" class="s15">, </a><a href="#bookmark124">38</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark605" class="s15">basic form component creating </a><a href="#bookmark605">271</a></p><p style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark80" class="s15">basic types about </a><a href="#bookmark80">12</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark88" class="s15">any </a><a href="#bookmark88">16</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark100" class="s15">arrays </a>23<a href="#bookmark103" class="s15">, </a><a href="#bookmark103">25</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark94" class="s15">enumerations </a>19<a href="#bookmark96" class="s15">, </a><a href="#bookmark96">20</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark91" class="s15">never </a>17<a href="#bookmark93" class="s15">, </a><a href="#bookmark93">18</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark97" class="s15">objects </a>21<a href="#bookmark99" class="s15">, </a><a href="#bookmark99">22</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark80" class="s15">primitive types </a><a href="#bookmark80">12</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark84" class="s15">type annotations </a>13<a href="#bookmark85" class="s15">, </a><a href="#bookmark85">14</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark86" class="s15">type inference </a><a href="#bookmark86">15</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark91" class="s15">void </a><a href="#bookmark91">17</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">benefits, TypeScript</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark78" class="s15">better developer experience </a><a href="#bookmark78">11</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark78" class="s15">better productivity </a><a href="#bookmark78">11</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark74" class="s15">coding errors, catching </a>9<a href="#bookmark76" class="s15">, </a><a href="#bookmark76">10</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark78" class="s15">future JavaScript features, using </a>11<a href="#bookmark80" class="s15">, </a><a href="#bookmark80">12</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">boilerplate code</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark603" class="s15">reducing, with generic components </a><a href="#bookmark603">270</a></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">C</p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">cache</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark889" class="s15">using, after mutation </a>409<a href="#bookmark891" class="s15">, </a><a href="#bookmark891">411</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark754" class="s15">callback about </a><a href="#bookmark754">339</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark758" class="s15">errors, handling </a><a href="#bookmark758">340</a></p><p style="padding-top: 1pt;text-indent: 0pt;text-align: right;"><a href="#bookmark754" class="s15">execution </a><a href="#bookmark754">339</a></p><p class="s32" style="padding-top: 1pt;text-indent: 0pt;text-align: right;">class component</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark329" class="s15">component props </a>117<a href="#bookmark331" class="s15">, </a><a href="#bookmark331">118</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark322" class="s15">creating </a>108<a href="#bookmark324" class="s15">, </a>110<a href="#bookmark326" class="s15">, </a>112<a href="#bookmark327" class="s15">, </a><a href="#bookmark327">114</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark335" class="s15">event handlers </a>121<a href="#bookmark338" class="s15">, </a>122<a href="#bookmark340" class="s15">, </a><a href="#bookmark340">123</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark335" class="s15">events, handling </a>121 <a href="#bookmark350" class="s15">life cycle methods  </a>131 <a href="#bookmark331" class="s15">optional props  </a><a href="#bookmark331">118</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark334" class="s15">prop values </a>120<a href="#bookmark335" class="s15">, </a>121 <a href="#bookmark345" class="s15">state type, defining </a>127 <a href="#bookmark348" class="s15">state, changing </a>128<a href="#bookmark350" class="s15">, </a><a href="#bookmark350">131</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark348" class="s15">state, initializing </a><a href="#bookmark348">128</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 7pt;line-height: 111%;text-align: right;"><a href="#bookmark343" class="s15">states </a>125<a href="#bookmark345" class="s15">, </a>127 <a href="#bookmark785" class="s15">class components axios, using </a><a href="#bookmark785">351</a></p><p style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark121" class="s15">classes about </a><a href="#bookmark121">37</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark131" class="s15">abstract classes </a>42<a href="#bookmark133" class="s15">, </a>43<a href="#bookmark134" class="s15">, </a><a href="#bookmark134">44</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark134" class="s15">access modifiers </a>44<a href="#bookmark136" class="s15">, </a><a href="#bookmark136">45</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark121" class="s15">basic classes </a>37<a href="#bookmark124" class="s15">, </a><a href="#bookmark124">38</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark125" class="s15">constructors </a>39<a href="#bookmark128" class="s15">, </a><a href="#bookmark128">40</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark129" class="s15">extending </a>41<a href="#bookmark131" class="s15">, </a><a href="#bookmark131">42</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark136" class="s15">getters </a><a href="#bookmark136">45</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark136" class="s15">setters </a><a href="#bookmark136">45</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark138" class="s15">static properties </a><a href="#bookmark138">46</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark948" class="s15">code coverage obtaining </a>440<a href="#bookmark950" class="s15">, </a><a href="#bookmark950">442</a></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark179" class="s15">code formatting </a>64<a href="#bookmark181" class="s15">, </a><a href="#bookmark181">65</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">code</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">exporting, from modules </a>49<a href="#bookmark145" class="s15">, </a><a href="#bookmark145">50</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark141" class="s15">structuring, into modules </a><a href="#bookmark141">48</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">CommonJS </a><a href="#bookmark143">49</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark149" class="s15">compilation configuring </a>52<a href="#bookmark151" class="s15">, </a><a href="#bookmark151">53</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark169" class="s15">files, specifying for </a><a href="#bookmark169">59</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark928" class="s15">component test creating </a>422<a href="#bookmark930" class="s15">, </a><a href="#bookmark930">424</a></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark353" class="s15">componentDidMount </a>132<a href="#bookmark354" class="s15">, </a><a href="#bookmark354">134</a></p><p style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark358" class="s15">componentDidUpdate </a><a href="#bookmark358">137</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark928" class="s15">components testing </a><a href="#bookmark928">422</a></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark356" class="s15">componentWillUnmount </a><a href="#bookmark356">136</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark527" class="s15">compound components about </a><a href="#bookmark527">226</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark535" class="s15">pattern, leveraging </a>233<a href="#bookmark537" class="s15">, </a><a href="#bookmark537">236</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark527" class="s15">reviews, adding to product </a>226<a href="#bookmark529" class="s15">, </a>227<a href="#bookmark530" class="s15">, </a><a href="#bookmark530">228</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark537" class="s15">state, sharing with React context </a>236<a href="#bookmark539" class="s15">, </a>239<a href="#bookmark540" class="s15">, </a><a href="#bookmark540">240</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark532" class="s15">tab component, creating </a>229<a href="#bookmark533" class="s15">, </a>230<a href="#bookmark534" class="s15">, </a>232<a href="#bookmark535" class="s15">, </a><a href="#bookmark535">233</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark422" class="s15">conditional redirect </a>172<a href="#bookmark424" class="s15">, </a><a href="#bookmark424">174</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">configuration options</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark157" class="s15">--allowJS </a><a href="#bookmark157">55</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark157" class="s15">--module </a><a href="#bookmark157">55</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark166" class="s15">--moduleResolution </a><a href="#bookmark166">58</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark161" class="s15">--noImplicitAny </a><a href="#bookmark161">56</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark163" class="s15">--noImplicitReturns </a><a href="#bookmark163">57</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark154" class="s15">--outDir </a><a href="#bookmark154">54</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark163" class="s15">--sourceMap </a><a href="#bookmark163">57</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark154" class="s15">--target </a><a href="#bookmark154">54</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark157" class="s15">--watch </a><a href="#bookmark157">55</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark151" class="s15">about </a><a href="#bookmark151">53</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark125" class="s15">constructors </a>39<a href="#bookmark128" class="s15">, </a><a href="#bookmark128">40</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark523" class="s15">container component </a>222<a href="#bookmark524" class="s15">, </a>223<a href="#bookmark525" class="s15">, </a><a href="#bookmark525">225</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark590" class="s15">controlled components about </a><a href="#bookmark590">260</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark590" class="s15">forms, creating </a><a href="#bookmark590">260</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">create-react-app</p><p class="s32" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;">used, for creating React and TypeScript project</p><p style="padding-top: 1pt;padding-left: 19pt;text-indent: 0pt;text-align: left;"><a href="#bookmark299">97</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">D</p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">data</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark778" class="s15">changing, via PUT request </a><a href="#bookmark778">349</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark776" class="s15">creating, request HTTP headers used </a><a href="#bookmark776">348</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark772" class="s15">creating, via REST API </a>347 <a href="#bookmark772" class="s15">creating, with fetch function </a>347 <a href="#bookmark782" class="s15">deleting, with fetch function </a>350 <a href="#bookmark782" class="s15">modifying, via PATCH request </a>350 <a href="#bookmark778" class="s15">modifying, with fetch function </a><a href="#bookmark778">349</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark787" class="s15">obtaining, with GET request </a>352<a href="#bookmark790" class="s15">, </a><a href="#bookmark790">355</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark149" class="s15">default exports </a><a href="#bookmark149">52</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark942" class="s15">dependencies mocking </a><a href="#bookmark942">435</a></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark468" class="s15">discriminated union pattern </a>197<a href="#bookmark470" class="s15">, </a>198<a href="#bookmark471" class="s15">, </a><a href="#bookmark471">200</a></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">E</p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark222" class="s15">empty tuples </a><a href="#bookmark222">76</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark94" class="s15">enumerations </a>19<a href="#bookmark96" class="s15">, </a><a href="#bookmark96">20</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark953" class="s15">Enzyme reference </a><a href="#bookmark953">445</a></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark143" class="s15">ES6 </a><a href="#bookmark143">49</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark342" class="s15">event handlers, class component function props </a>124<a href="#bookmark343" class="s15">, </a><a href="#bookmark343">125</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">exported module</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark147" class="s15">items, importing from </a><a href="#bookmark147">51</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">F</p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark70" class="s15">Facebook </a><a href="#bookmark70">7</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">fetch function</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark772" class="s15">error, handling </a><a href="#bookmark772">347</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark770" class="s15">GET request </a><a href="#bookmark770">346</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark770" class="s15">response status, obtaining </a>346 <a href="#bookmark772" class="s15">used, for creating data  </a>347 <a href="#bookmark782" class="s15">used, for deleting data  </a>350 <a href="#bookmark778" class="s15">used, for modifying data  </a>349 <a href="#bookmark766" class="s15">used, for obtaining data  </a>345 <a href="#bookmark766" class="s15">using  </a><a href="#bookmark766">345</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">files</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark169" class="s15">specifying, for compilation </a><a href="#bookmark169">59</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">forms</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark588" class="s15">about </a><a href="#bookmark588">259</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark606" class="s15">basic Field component, adding </a>272<a href="#bookmark608" class="s15">, </a>273<a href="#bookmark609" class="s15">, </a><a href="#bookmark609">274</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark605" class="s15">basic form component, creating </a>271 <a href="#bookmark590" class="s15">Contact Us page, adding  </a>260<a href="#bookmark593" class="s15">, </a>261<a href="#bookmark594" class="s15">, </a>262 <a href="#bookmark590" class="s15">creating, with controlled components </a><a href="#bookmark590">260</a></p><p class="s12" style="padding-left: 19pt;text-indent: -6pt;line-height: 113%;text-align: left;"><a href="#bookmark615" class="s15">new ContactUs component, implementing </a>279<a href="#bookmark616" class="s15">, </a><a href="#bookmark616">280</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark637" class="s15">onSubmit form prop, adding </a>293<a href="#bookmark639" class="s15">, </a>294<a href="#bookmark640" class="s15">, </a>295<a href="#bookmark641" class="s15">, </a><a href="#bookmark641">296</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark641" class="s15">onSubmit form prop, consuming </a>296<a href="#bookmark643" class="s15">, </a>297<a href="#bookmark644" class="s15">, </a><a href="#bookmark644">299</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark611" class="s15">state, sharing with React context </a>275<a href="#bookmark612" class="s15">, </a>276<a href="#bookmark613" class="s15">, </a><a href="#bookmark613">278</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark637" class="s15">submit button, adding to </a><a href="#bookmark637">293</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark634" class="s15">submitting </a><a href="#bookmark634">292</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark616" class="s15">validating </a><a href="#bookmark616">280</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark632" class="s15">validation error messages, rendering </a>290<a href="#bookmark633" class="s15">, </a>291<span class="s32">,</span></p><p style="padding-top: 1pt;padding-left: 19pt;text-indent: 0pt;text-align: left;"><a href="#bookmark634">292</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark621" class="s15">validation error messages, tracking </a>283<a href="#bookmark623" class="s15">, </a>284<span class="s32">,</span></p><p style="padding-top: 1pt;padding-left: 19pt;text-indent: 0pt;text-align: left;"><a href="#bookmark624">285</a></p><p class="s32" style="padding-left: 13pt;text-indent: 0pt;text-align: left;">validation rule execution, triggering from field</p><p class="s12" style="padding-top: 1pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">288<a href="#bookmark630" class="s15">, </a><a href="#bookmark630">289</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark618" class="s15">validation rules prop, adding to </a>281<a href="#bookmark620" class="s15">, </a>282<a href="#bookmark621" class="s15">, </a><a href="#bookmark621">283</a></p><p class="s12" style="padding-top: 8pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark624" class="s15">validation rules, invoking </a>285<a href="#bookmark626" class="s15">, </a>286<a href="#bookmark627" class="s15">, </a><a href="#bookmark627">287</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark594" class="s15">with controlled inputs </a>262<a href="#bookmark596" class="s15">, </a>263<a href="#bookmark597" class="s15">, </a>264<a href="#bookmark598" class="s15">, </a>265<a href="#bookmark599" class="s15">, </a>266<span class="s32">,</span></p><p class="s12" style="padding-top: 1pt;padding-left: 19pt;text-indent: 0pt;text-align: left;">267<a href="#bookmark601" class="s15">, </a><a href="#bookmark601">268</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark376" class="s15">function component rendering optimizing </a><a href="#bookmark376">148</a></p><p class="s12" style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark806" class="s15">function component axios, using </a>367<a href="#bookmark807" class="s15">, </a><a href="#bookmark807">371</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark364" class="s15">creating </a>141<a href="#bookmark368" class="s15">, </a><a href="#bookmark368">143</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark372" class="s15">life cycle hooks </a>146<a href="#bookmark374" class="s15">, </a><a href="#bookmark374">147</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark219" class="s15">function parameters </a><a href="#bookmark219">74</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">G</p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark485" class="s15">generic classes </a>208<a href="#bookmark487" class="s15">, </a>209<a href="#bookmark488" class="s15">, </a><a href="#bookmark488">210</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">generic components</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark603" class="s15">boilerplate code, reducing </a><a href="#bookmark603">270</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark603" class="s15">generic compound components Field </a><a href="#bookmark603">270</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark603" class="s15">Form </a><a href="#bookmark603">270</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark484" class="s15">generic function </a>207<a href="#bookmark485" class="s15">, </a><a href="#bookmark485">208</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark481" class="s15">generics </a><a href="#bookmark481">206</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark356" class="s15">getDerivedStateFromProps </a><a href="#bookmark356">136</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark358" class="s15">getSnapshotBeforeUpdate </a><a href="#bookmark358">137</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark136" class="s15">getters </a><a href="#bookmark136">45</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark846" class="s15">GitHub GraphQL API reference </a><a href="#bookmark846">377</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">GraphQL client</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark855" class="s15">axios, using as </a><a href="#bookmark855">384</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark846" class="s15">GraphQL data basic query </a><a href="#bookmark846">377</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark849" class="s15">nested data, returning </a>379<a href="#bookmark850" class="s15">, </a><a href="#bookmark850">381</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark850" class="s15">query parameters </a>381<a href="#bookmark852" class="s15">, </a><a href="#bookmark852">382</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark847" class="s15">reading </a><a href="#bookmark847">378</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark852" class="s15">writing </a>382<a href="#bookmark854" class="s15">, </a><a href="#bookmark854">383</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">GraphQL</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark842" class="s15">data, reading </a><a href="#bookmark842">376</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark842" class="s15">mutation syntax </a><a href="#bookmark842">376</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark842" class="s15">query </a><a href="#bookmark842">376</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">H</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark549" class="s15">higher-order component (HOC) about </a><a href="#bookmark549">248</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark552" class="s15">asynchronous data fetching, adding </a>249<a href="#bookmark553" class="s15">, </a><a href="#bookmark553">250</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark557" class="s15">withLoader HOC, consuming </a>254<a href="#bookmark559" class="s15">, </a><a href="#bookmark559">256</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark556" class="s15">withLoader HOC, implementing </a><a href="#bookmark556">252</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">HTTP headers</p><p style="padding-top: 8pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark793" class="s15">including, in request </a><a href="#bookmark793">357</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">I</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark477" class="s15">in keyword using </a><a href="#bookmark477">204</a></p><p class="s12" style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark475" class="s15">instanceof keyword using </a>203<a href="#bookmark477" class="s15">, </a><a href="#bookmark477">204</a></p><p style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark106" class="s15">interfaces about </a><a href="#bookmark106">27</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark118" class="s15">extending </a><a href="#bookmark118">35</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark125" class="s15">implementing </a><a href="#bookmark125">39</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark110" class="s15">method signatures </a>29<a href="#bookmark111" class="s15">, </a>30<a href="#bookmark112" class="s15">, </a>31<a href="#bookmark113" class="s15">, </a><a href="#bookmark113">32</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark113" class="s15">optional properties </a><a href="#bookmark113">32</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark113" class="s15">parameters </a><a href="#bookmark113">32</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark106" class="s15">properties </a>27<a href="#bookmark108" class="s15">, </a><a href="#bookmark108">28</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark116" class="s15">readonly properties </a><a href="#bookmark116">34</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">items</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark147" class="s15">importing, from exported module </a><a href="#bookmark147">51</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">J</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark953" class="s15">Jasmine reference </a><a href="#bookmark953">445</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Jest</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark942" class="s15">mock function, using </a><a href="#bookmark942">435</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark953" class="s15">reference </a><a href="#bookmark953">445</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark939" class="s15">snapshot tests, using </a>431<a href="#bookmark941" class="s15">, </a><a href="#bookmark941">434</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark923" class="s15">watch options </a><a href="#bookmark923">419</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">JSX</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark327" class="s15">about </a>114<a href="#bookmark329" class="s15">, </a><a href="#bookmark329">117</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark244" class="s15">properties </a>91<a href="#bookmark246" class="s15">, </a><a href="#bookmark246">93</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">L</p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark436" class="s15">lazy loading routes </a>189<a href="#bookmark437" class="s15">, </a><a href="#bookmark437">191</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark353" class="s15">life cycle methods, class component componentDidMount </a>132<a href="#bookmark354" class="s15">, </a><a href="#bookmark354">134</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark358" class="s15">componentDidUpdate </a><a href="#bookmark358">137</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark356" class="s15">componentWillUnmount </a>136 <a href="#bookmark364" class="s15">deprecated life cycle methods  </a>141 <a href="#bookmark356" class="s15">getDerivedStateFromProps </a><a href="#bookmark356">136</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark358" class="s15">getSnapshotBeforeUpdate </a><a href="#bookmark358">137</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark361" class="s15">shouldComponentUpdate </a>139<a href="#bookmark362" class="s15">, </a><a href="#bookmark362">140</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark493" class="s15">lookup type </a>213<a href="#bookmark494" class="s15">, </a>214<a href="#bookmark495" class="s15">, </a>216<a href="#bookmark496" class="s15">, </a><a href="#bookmark496">218</a></p><p class="s24" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">M</p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark493" class="s15">mapped type </a>213<a href="#bookmark494" class="s15">, </a>214<a href="#bookmark495" class="s15">, </a>216<a href="#bookmark496" class="s15">, </a><a href="#bookmark496">218</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark953" class="s15">Mocha reference </a><a href="#bookmark953">445</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">module formats</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">Asynchronous Module Definition (AMD) </a><a href="#bookmark143">49</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">CommonJS </a><a href="#bookmark143">49</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">ES6 </a><a href="#bookmark143">49</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">Universal Module Definition (UMD) </a><a href="#bookmark143">49</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">modules</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark143" class="s15">code, exporting from </a>49<a href="#bookmark145" class="s15">, </a><a href="#bookmark145">50</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark141" class="s15">code, structuring into </a><a href="#bookmark141">48</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">N</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark409" class="s15">navigation creating </a><a href="#bookmark409">159</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark409" class="s15">creating, with Link component </a>159<a href="#bookmark412" class="s15">, </a><a href="#bookmark412">162</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark412" class="s15">creating, with NavLink component </a>162<a href="#bookmark414" class="s15">, </a><a href="#bookmark414">164</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark429" class="s15">nested route </a>180<a href="#bookmark431" class="s15">, </a><a href="#bookmark431">184</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark91" class="s15">never type </a>17<a href="#bookmark93" class="s15">, </a><a href="#bookmark93">18</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark71" class="s15">Node.js reference </a><a href="#bookmark71">8</a></p><p class="s12" style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark417" class="s15">not found routes handling </a>169<a href="#bookmark419" class="s15">, </a><a href="#bookmark419">171</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">npm</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark71" class="s15">reference </a><a href="#bookmark71">8</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">O</p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark97" class="s15">object type </a>21<a href="#bookmark99" class="s15">, </a><a href="#bookmark99">22</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark216" class="s15">open-ended tuples </a><a href="#bookmark216">73</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark224" class="s15">optional tuple elements </a>77<a href="#bookmark226" class="s15">, </a><a href="#bookmark226">79</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark490" class="s15">overload signatures </a>211<a href="#bookmark491" class="s15">, </a><a href="#bookmark491">212</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">P</p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">page redirects</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark422" class="s15">conditional redirect </a><a href="#bookmark422">172</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark419" class="s15">implementing </a><a href="#bookmark419">171</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark422" class="s15">simple redirect </a><a href="#bookmark422">172</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark523" class="s15">presentational component </a>222<a href="#bookmark524" class="s15">, </a>223<a href="#bookmark525" class="s15">, </a><a href="#bookmark525">225</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark80" class="s15">primitive types </a><a href="#bookmark80">12</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark678" class="s15">principles, Redux changes, making </a><a href="#bookmark678">304</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark678" class="s15">single source of truth </a><a href="#bookmark678">304</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark678" class="s15">state is read-only </a><a href="#bookmark678">304</a></p><p class="s32" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">ProductsPage</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark698" class="s15">connecting, to loading store state </a><a href="#bookmark698">319</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark695" class="s15">connecting, to store </a><a href="#bookmark695">316</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark233" class="s15">project references about </a>84<a href="#bookmark236" class="s15">, </a><a href="#bookmark236">86</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark238" class="s15">additions, to compiler options </a><a href="#bookmark238">87</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark242" class="s15">build mode </a><a href="#bookmark242">90</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark233" class="s15">example, setting up </a>84 <a href="#bookmark240" class="s15">Go to Definition feature </a>88 <a href="#bookmark249" class="s15">URL </a><a href="#bookmark249">95</a></p><p style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark760" class="s15">promise-based function consuming </a><a href="#bookmark760">342</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark760" class="s15">creating </a><a href="#bookmark760">342</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark760" class="s15">promises </a><a href="#bookmark760">342</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark106" class="s15">properties </a><a href="#bookmark106">27</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">pure function</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark921" class="s15">test, creating </a>416<a href="#bookmark923" class="s15">, </a><a href="#bookmark923">419</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark919" class="s15">testing </a><a href="#bookmark919">415</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Q</p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark424" class="s15">query parameters </a>174<a href="#bookmark426" class="s15">, </a>177<a href="#bookmark427" class="s15">, </a><a href="#bookmark427">179</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">R</p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark70" class="s15">React </a><a href="#bookmark70">7</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark321" class="s15">React and TypeScript project build scripts, creating </a>107<a href="#bookmark322" class="s15">, </a><a href="#bookmark322">108</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark299" class="s15">creating </a><a href="#bookmark299">97</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark303" class="s15">creating, manually </a><a href="#bookmark303">101</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark299" class="s15">creating, with create-react-app </a>97<a href="#bookmark302" class="s15">, </a>100<a href="#bookmark303" class="s15">, </a><a href="#bookmark303">101</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark318" class="s15">files </a><a href="#bookmark318">106</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark303" class="s15">folder structure, creating </a><a href="#bookmark303">101</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark318" class="s15">folders </a><a href="#bookmark318">106</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark303" class="s15">package.json, creating </a>101 <a href="#bookmark314" class="s15">React component, creating  </a>104 <a href="#bookmark311" class="s15">React, adding with types  </a>103 <a href="#bookmark311" class="s15">root web page, creating  </a>103 <a href="#bookmark321" class="s15">start scripts, creating </a>107<a href="#bookmark322" class="s15">, </a><a href="#bookmark322">108</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark308" class="s15">tsconfig.json, creating </a><a href="#bookmark308">102</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark311" class="s15">TSLint, adding </a><a href="#bookmark311">103</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark308" class="s15">TypeScript, adding </a><a href="#bookmark308">102</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark317" class="s15">webpack, adding </a>105<a href="#bookmark318" class="s15">, </a><a href="#bookmark318">106</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">React app</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark692" class="s15">connecting, to store </a><a href="#bookmark692">315</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark692" class="s15">store Provider component, adding </a><a href="#bookmark692">315</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">React Router</p><p style="padding-top: 8pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark402" class="s15">installing, with routing types </a><a href="#bookmark402">152</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">react-testing-library</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark931" class="s15">CSS class references, removing </a>425 <a href="#bookmark935" class="s15">fireEvent, used for user interaction  </a>427 <a href="#bookmark931" class="s15">installing  </a><a href="#bookmark931">425</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark937" class="s15">second test, creating </a>428<a href="#bookmark939" class="s15">, </a><a href="#bookmark939">431</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark931" class="s15">used, for test improvement </a><a href="#bookmark931">425</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">reducers</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark688" class="s15">creating </a>312<a href="#bookmark690" class="s15">, </a><a href="#bookmark690">313</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">Redux</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark680" class="s15">installing </a><a href="#bookmark680">306</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark678" class="s15">key concepts </a>304<a href="#bookmark680" class="s15">, </a><a href="#bookmark680">306</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark675" class="s15">principles </a><a href="#bookmark675">303</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">refetchQueries</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark887" class="s15">used, for clearing caching </a><a href="#bookmark887">408</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark540" class="s15">render props pattern about </a><a href="#bookmark540">240</a></p><p class="s12" style="padding-left: 19pt;text-indent: -6pt;line-height: 113%;text-align: left;"><a href="#bookmark546" class="s15">children prop, using for tab content </a>243<a href="#bookmark548" class="s15">, </a>246<a href="#bookmark549" class="s15">, </a><a href="#bookmark549">248</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark543" class="s15">used, for completing tabs </a><a href="#bookmark543">241</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark545" class="s15">used, for tab headings </a>242<a href="#bookmark546" class="s15">, </a><a href="#bookmark546">243</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark874" class="s15">repository search component adding </a><a href="#bookmark874">396</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark875" class="s15">search form, implementing </a>397<a href="#bookmark877" class="s15">, </a><a href="#bookmark877">399</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark877" class="s15">search query, implementing </a>399<a href="#bookmark879" class="s15">, </a><a href="#bookmark879">401</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 7pt;line-height: 111%;text-align: left;"><a href="#bookmark881" class="s15">search result, rendering </a>403<a href="#bookmark882" class="s15">, </a>404 <a href="#bookmark215" class="s15">Representational state transfer protocol (REST)  </a>72 <span class="s32">requests</span></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark795" class="s15">canceling </a>358<a href="#bookmark797" class="s15">, </a><a href="#bookmark797">361</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark793" class="s15">timing out </a><a href="#bookmark793">357</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark414" class="s15">Route parameter </a>164<a href="#bookmark416" class="s15">, </a>167<a href="#bookmark417" class="s15">, </a><a href="#bookmark417">169</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">routes</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark405" class="s15">declaring </a>154<a href="#bookmark407" class="s15">, </a>156<a href="#bookmark408" class="s15">, </a><a href="#bookmark408">158</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark427" class="s15">Prompt component </a><a href="#bookmark427">179</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">routing types</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark402" class="s15">used, for installing React Router </a><a href="#bookmark402">152</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">S</p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark136" class="s15">setters </a><a href="#bookmark136">45</a></p><p class="s12" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark361" class="s15">shouldComponentUpdate </a>139<a href="#bookmark362" class="s15">, </a><a href="#bookmark362">140</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark422" class="s15">simple redirect </a><a href="#bookmark422">172</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark221" class="s15">spread expressions </a><a href="#bookmark221">75</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">state</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark685" class="s15">creating </a><a href="#bookmark685">308</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark708" class="s15">managing, with useReducer </a>331<a href="#bookmark710" class="s15">, </a><a href="#bookmark710">334</a></p><p class="s12" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark369" class="s15">stateful function components </a>144<a href="#bookmark371" class="s15">, </a>145 <a href="#bookmark367" class="s15">stateless functional component (SFC) </a>142 <a href="#bookmark138" class="s15">static properties  </a><a href="#bookmark138">46</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">store</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark678" class="s15">about </a><a href="#bookmark678">304</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark703" class="s15">actions, adding </a>324<a href="#bookmark704" class="s15">, </a><a href="#bookmark704">326</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark703" class="s15">basket state, adding </a>324<a href="#bookmark704" class="s15">, </a><a href="#bookmark704">326</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark706" class="s15">BasketSummary, connecting </a>329<a href="#bookmark708" class="s15">, </a><a href="#bookmark708">331</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark706" class="s15">BasketSummary, creating </a>329<a href="#bookmark708" class="s15">, </a><a href="#bookmark708">331</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark695" class="s15">components, connecting </a><a href="#bookmark695">316</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark690" class="s15">creating </a><a href="#bookmark690">313</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark701" class="s15">product state and actions, adding </a>322 <a href="#bookmark695" class="s15">ProductPage, connecting </a>316<a href="#bookmark704" class="s15">, </a>326<a href="#bookmark706" class="s15">, </a>329 <a href="#bookmark692" class="s15">React app, connecting  </a><a href="#bookmark692">315</a></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 111%;text-align: left;"><a href="#bookmark463" class="s15">string literal types </a>195 <a href="#bookmark466" class="s15">string literal union types </a>196 <span class="s32">submit button</span></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark637" class="s15">adding, to forms </a><a href="#bookmark637">293</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">T</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark209" class="s15">technical requisites Node.js, reference </a><a href="#bookmark209">68</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark209" class="s15">TypeScript playground, reference </a><a href="#bookmark209">68</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark211" class="s15">TypeScript, reference </a><a href="#bookmark211">69</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark211" class="s15">Visual Studio Code, reference </a><a href="#bookmark211">69</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark166" class="s15">tsconfig.json </a><a href="#bookmark166">58</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">TSLint</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark176" class="s15">built-in rules </a><a href="#bookmark176">63</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark179" class="s15">files, excluding </a><a href="#bookmark179">64</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark171" class="s15">installing </a><a href="#bookmark171">60</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark173" class="s15">rules, configuring </a>61<a href="#bookmark175" class="s15">, </a><a href="#bookmark175">62</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">tuples</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark211" class="s15">about </a>69<a href="#bookmark213" class="s15">, </a><a href="#bookmark213">71</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark222" class="s15">empty tuples </a><a href="#bookmark222">76</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark219" class="s15">function parameters </a><a href="#bookmark219">74</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark216" class="s15">open-ended tuples </a><a href="#bookmark216">73</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark224" class="s15">optional tuple elements </a>77<a href="#bookmark226" class="s15">, </a><a href="#bookmark226">79</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark213" class="s15">rest parameter </a>71<a href="#bookmark216" class="s15">, </a><a href="#bookmark216">73</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark221" class="s15">spread expressions </a><a href="#bookmark221">75</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark213" class="s15">spread parameter </a>71<a href="#bookmark216" class="s15">, </a><a href="#bookmark216">73</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark120" class="s15">type aliases defining </a><a href="#bookmark120">36</a></p><p class="s12" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark84" class="s15">type annotations </a>13<a href="#bookmark85" class="s15">, </a><a href="#bookmark85">14</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">type assertion</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark231" class="s15">used, for type narrowing </a><a href="#bookmark231">83</a></p><p class="s32" style="padding-top: 8pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">type guards</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark477" class="s15">in keyword </a><a href="#bookmark477">204</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark475" class="s15">instanceof keyword, using </a><a href="#bookmark475">203</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark471" class="s15">typeof keyword, using </a><a href="#bookmark471">200</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark479" class="s15">user-defined type guard, using </a><a href="#bookmark479">205</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark471" class="s15">using </a><a href="#bookmark471">200</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark86" class="s15">type inference </a><a href="#bookmark86">15</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">type predicate</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark229" class="s15">used, for type checking </a>81<a href="#bookmark231" class="s15">, </a><a href="#bookmark231">83</a></p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">typeof keyword</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark471" class="s15">using </a>200<a href="#bookmark474" class="s15">, </a>201<a href="#bookmark475" class="s15">, </a><a href="#bookmark475">203</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark171" class="s15">TypeScript linting </a><a href="#bookmark171">60</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark71" class="s15">TypeScript playground reference </a><a href="#bookmark71">8</a></p><p style="padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark70" class="s15">TypeScript about </a><a href="#bookmark70">7</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark74" class="s15">benefits </a>9<a href="#bookmark76" class="s15">, </a>10<a href="#bookmark78" class="s15">, </a><a href="#bookmark78">11</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">U</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark463" class="s15">union types about </a><a href="#bookmark463">195</a></p><p style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark468" class="s15">discriminated union pattern </a><a href="#bookmark468">197</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark463" class="s15">string literal types </a><a href="#bookmark463">195</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark466" class="s15">string literal union types </a><a href="#bookmark466">196</a></p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark925" class="s15">unit test results structure, adding </a><a href="#bookmark925">420</a></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark143" class="s15">Universal Module Definition (UMD) </a><a href="#bookmark143">49</a></p><p style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><a href="#bookmark228" class="s15">unknown type </a><a href="#bookmark228">80</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark479" class="s15">user-defined type guard using </a>205<a href="#bookmark481" class="s15">, </a><a href="#bookmark481">206</a></p><p class="s32" style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;">useReducer</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark708" class="s15">used, for managing state </a>331<a href="#bookmark710" class="s15">, </a><a href="#bookmark710">334</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">V</p><p class="s32" style="padding-top: 1pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">validation rules prop</p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: 0pt;text-align: left;"><a href="#bookmark618" class="s15">adding, to forms </a>281<a href="#bookmark620" class="s15">, </a>282<a href="#bookmark621" class="s15">, </a><a href="#bookmark621">283</a></p><p class="s12" style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark71" class="s15">Visual Studio Code reference </a>8<a href="#bookmark299" class="s15">, </a><a href="#bookmark299">97</a></p><p style="padding-left: 5pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark91" class="s15">void type </a><a href="#bookmark91">17</a></p><p class="s24" style="padding-top: 6pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">W</p><p style="padding-top: 1pt;padding-left: 13pt;text-indent: -7pt;line-height: 111%;text-align: left;"><a href="#bookmark557" class="s15">withLoader HOC consuming </a><a href="#bookmark557">254</a></p><p class="s12" style="padding-left: 13pt;text-indent: 0pt;line-height: 10pt;text-align: left;"><a href="#bookmark554" class="s15">implementing </a>251<a href="#bookmark556" class="s15">, </a><a href="#bookmark556">252</a></p></body></html>
